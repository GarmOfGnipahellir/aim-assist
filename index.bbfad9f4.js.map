{"mappings":";yEAKU,SAAUA,GAKhB,MAAMC,EAIFC,YAAYC,GACR,MAAOC,EAAMC,GAAcF,EAAKG,MAAM,KAChCC,EAAYH,EAAKE,MAAM,KAC7BE,KAAKC,MAAQC,SAASH,EAAU,GAAI,IACpCC,KAAKG,MAAQD,SAASH,EAAU,GAAI,IACpCC,KAAKI,MAAQF,SAASH,EAAU,GAAI,IACpCC,KAAKH,WAAaA,QAA+CA,EAAa,IAClF,CACAQ,WACI,MAAMT,EAAO,CAACI,KAAKC,MAAOD,KAAKG,MAAOH,KAAKI,OAAOE,KAAK,KACvD,OAA2B,OAApBN,KAAKH,WAAsB,CAACD,EAAMI,KAAKH,YAAYS,KAAK,KAAOV,CAC1E,EAGJ,MAAMW,EACFb,YAAYc,GACRR,KAAKS,YAAcD,CACvB,CACIE,cACA,OAAOV,KAAKS,YAAYE,KAAKD,OACjC,CACIE,eACA,OAAOZ,KAAKS,YAAYI,UAAUC,IAAI,WAC1C,CACIF,aAASA,GACTZ,KAAKS,YAAYI,UAAUE,IAAI,WAAYH,EAC/C,CACII,aACA,OAAOhB,KAAKS,YAAYI,UAAUC,IAAI,SAC1C,CACIE,WAAOA,GACPhB,KAAKS,YAAYI,UAAUE,IAAI,SAAUC,EAC7C,CACAC,UACIjB,KAAKS,YAAYI,UAAUE,IAAI,YAAY,EAC/C,EAGJ,MAAMG,EACFxB,YAAYyB,GACRnB,KAAKmB,OAASA,CAClB,EAEJ,MAAMC,UAAsBF,EACxBxB,YAAYyB,EAAQE,EAAOC,EAAWC,GAClCC,MAAML,GACNnB,KAAKqB,MAAQA,EACbrB,KAAKsB,UAAYA,EACjBtB,KAAKuB,KAAOA,SAAmCA,CACnD,EAEJ,MAAME,UAAsBP,EACxBxB,YAAYyB,EAAQE,EAAOC,GACvBE,MAAML,GACNnB,KAAKqB,MAAQA,EACbrB,KAAKsB,UAAYA,CACrB,EAEJ,MAAMI,UAAoBR,EACtBxB,YAAYyB,EAAQQ,GAChBH,MAAML,GACNnB,KAAK2B,SAAWA,CACpB,EAEJ,MAAMC,UAAyBV,EAC3BxB,YAAYyB,EAAQU,GAChBL,MAAML,GACNnB,KAAK6B,MAAQA,CACjB,EAGJ,SAASC,EAAUC,GACf,OAAOA,CACX,CACA,SAASC,EAAQX,GACb,OAAOA,OACX,CACA,SAASY,EAAgBC,EAAIC,GACzB,GAAID,EAAGE,SAAWD,EAAGC,OACjB,OAAO,EAEX,IAAK,IAAIC,EAAI,EAAGA,EAAIH,EAAGE,OAAQC,IAC3B,GAAIH,EAAGG,KAAOF,EAAGE,GACb,OAAO,EAGf,OAAO,CACX,CACA,SAASC,EAAmBC,EAAKC,GAC7B,IAAIrB,EAASoB,EACb,EAAG,CACC,MAAME,EAAIC,OAAOC,yBAAyBxB,EAAQqB,GAClD,GAAIC,SAAgBG,IAAVH,EAAE1B,MAAoC,IAAf0B,EAAEI,UAC/B,OAAO,EAEX1B,EAASuB,OAAOI,eAAe3B,EACnC,OAAoB,OAAXA,GACT,OAAO,CACX,CAEA,MAAM4B,EAAqB,CACvBC,gBAAiB,IAAM,iCACvBC,cAAgBC,GAAY,2BAA2BA,EAAQC,QAC/DC,qBAAuBF,GAAY,+BAA+BA,EAAQV,OAC1Ea,eAAiBH,GAAY,yBAAyBI,KAAKC,UAAUL,EAAQM,WAC7EC,YAAa,IAAM,wBACnBC,iBAAmBR,GAAY,aAAaA,EAAQC,kBACpDQ,kBAAmB,IAAM,kCAE7B,MAAMC,EACFC,yBACI,OAAO,IAAID,EAAQ,CAAEE,KAAM,mBAC/B,CACAD,qBACI,OAAO,IAAID,EAAQ,CACfE,KAAM,eAEd,CACAD,wBAAwBV,GACpB,OAAO,IAAIS,EAAQ,CACfE,KAAM,mBACNZ,QAAS,CACLC,KAAMA,IAGlB,CACAU,2BACI,OAAO,IAAID,EAAQ,CAAEE,KAAM,qBAC/B,CACApE,YAAYqE,GACR,IAAIC,EACJhE,KAAKiE,QACqE,QAArED,EAAKjB,EAAmBgB,EAAOD,MAAMhC,EAAUiC,EAAOb,iBAA8B,IAAPc,EAAgBA,EAAK,mBACvGhE,KAAKmD,KAAOnD,KAAKN,YAAYyD,KAC7BnD,KAAKkE,MAAQ,IAAIC,MAAMnE,KAAKiE,SAASC,MACrClE,KAAK8D,KAAOC,EAAOD,IACvB,EAGJ,MAAMM,EACF1E,YAAY6C,EAAKC,EAAK6B,GAClBrE,KAAKsE,KAAO/B,EACZvC,KAAKuE,KAAO/B,EACZxC,KAAKwE,WAAaH,QAAuCA,EAAS7B,CACtE,CACAqB,kBAAkBtB,GACd,OAAY,OAARA,GAGe,iBAARA,CAIf,CACIC,UACA,OAAOxC,KAAKuE,IAChB,CACIjD,gBACA,OAAOtB,KAAKwE,UAChB,CACAC,OACI,OAAOzE,KAAKsE,KAAKtE,KAAKuE,KAC1B,CACAG,MAAMrD,GACFrB,KAAKsE,KAAKtE,KAAKuE,MAAQlD,CAC3B,CACAsD,cAAcxB,EAAM9B,GAChB,MAAMuD,EAAW5E,KAAKyE,OACtB,IAAKL,EAAcS,WAAWD,GAC1B,MAAMhB,EAAQkB,cAElB,KAAM3B,KAAQyB,GACV,MAAMhB,EAAQmB,iBAAiB5B,GAEnCyB,EAASzB,GAAQ9B,CACrB,EAGJ,MAAM2D,UAAkBzE,EAChB0E,YACA,OAAOjF,KAAKS,YAAYyE,MAAMpE,IAAI,QACtC,CACImE,UAAMA,GACNjF,KAAKS,YAAYyE,MAAMnE,IAAI,QAASkE,EACxC,CACIE,YACA,IAAInB,EACJ,OAAsE,QAA9DA,EAAKhE,KAAKS,YAAY2E,gBAAgBF,MAAMpE,IAAI,gBAA6B,IAAPkD,EAAgBA,EAAK,EACvG,CACImB,UAAMA,GACNnF,KAAKS,YAAY2E,gBAAgBF,MAAMnE,IAAI,QAASoE,EACxD,CACAE,GAAGC,EAAWC,GACV,MAAMC,EAAKD,EAAQE,KAAKzF,MAKxB,OAJgBA,KAAKS,YAAY2E,gBAAgBM,QACzCL,GAAGC,GAAW,KAClBE,EAAG,IAAItE,EAAQlB,MAAI,IAEhBA,IACX,EAGJ,MAAM2F,EACFjG,cACIM,KAAK4F,WAAa,CAAC,CACvB,CACAP,GAAGC,EAAWC,GACV,IAAIM,EAAY7F,KAAK4F,WAAWN,GAOhC,OANKO,IACDA,EAAY7F,KAAK4F,WAAWN,GAAa,IAE7CO,EAAUC,KAAK,CACXP,QAASA,IAENvF,IACX,CACA+F,IAAIT,EAAWC,GACX,MAAMM,EAAY7F,KAAK4F,WAAWN,GAMlC,OALIO,IACA7F,KAAK4F,WAAWN,GAAaO,EAAUG,QAAQC,GACpCA,EAASV,UAAYA,KAG7BvF,IACX,CACAkG,KAAKZ,EAAWa,GACZ,MAAMN,EAAY7F,KAAK4F,WAAWN,GAC7BO,GAGLA,EAAUO,SAASH,IACfA,EAASV,QAAQY,EAAA,GAEzB,EAGJ,MAAME,EAAS,KACf,SAASC,EAAUC,GAWf,MAVW,CAACC,EAAiBC,IAClB,CACHJ,EACA,IACAE,EACA,IACAC,EAAkB,IAAIA,IAAoB,GAC1CC,EAAe,IAAIA,IAAiB,IACtCnG,KAAK,GAGf,CAEA,SAASoG,EAAQC,EAAIC,GACjB,OAAQC,GAAUD,EAAGD,EAAGE,GAC5B,CACA,SAASC,EAAaC,GAClB,OAAOA,EAAGC,QACd,CACA,SAASC,EAAU5F,EAAO6F,GACtB7F,EAAMqE,QAAQL,GAAG,SAAUqB,EAAQI,EAAcI,IACjDA,EAAW7F,EAAM2F,SACrB,CACA,SAASG,EAAaC,EAAU5E,EAAK0E,GACjCD,EAAUG,EAAS/F,MAAMmB,GAAM0E,EACnC,CAEA,SAASG,EAAWC,EAAMC,EAAWC,GAC7BA,EACAF,EAAKG,UAAUC,IAAIH,GAGnBD,EAAKG,UAAUE,OAAOJ,EAE9B,CACA,SAASK,EAAiBN,EAAMC,GAC5B,OAAQlG,IACJgG,EAAWC,EAAMC,EAAWlG,EAAA,CAEpC,CACA,SAASwG,EAAuBxG,EAAOiG,GACnCL,EAAU5F,GAAQ1B,IACd2H,EAAKQ,YAAcnI,QAAmCA,EAAO,EAAE,GAEvE,CAEA,MAAMoI,EAAczB,EAAU,OAC9B,MAAM0B,EACFtI,YAAYuI,EAAKlE,GACb/D,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAIK,KAC3BhE,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzC,MAAM0H,EAAaH,EAAIC,cAAc,UACrCE,EAAWX,UAAUC,IAAIK,EAAY,MACrChE,EAAOlD,UAAUwH,aAAaD,GAC9BpI,KAAKU,QAAQ4H,YAAYF,GACzBpI,KAAKuI,cAAgBH,EACrB,MAAMI,EAAYP,EAAIC,cAAc,OACpCM,EAAUf,UAAUC,IAAIK,EAAY,MACpCF,EAAuB9D,EAAOmB,MAAM7D,MAAM,SAAUmH,GACpDxI,KAAKuI,cAAcD,YAAYE,EACnC,EAGJ,MAAMC,EACF/I,YAAYuI,EAAKlE,GACb/D,KAAK0F,QAAU,IAAIC,EACnB3F,KAAK0I,SAAW1I,KAAK0I,SAASjD,KAAKzF,MACnCA,KAAKkF,MAAQnB,EAAOmB,MACpBlF,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAKW,KAAO,IAAIqH,EAAWC,EAAK,CAC5B/C,MAAOlF,KAAKkF,MACZrE,UAAWb,KAAKa,YAEpBb,KAAKW,KAAK4H,cAAcI,iBAAiB,QAAS3I,KAAK0I,SAC3D,CACAA,WACI1I,KAAK0F,QAAQQ,KAAK,QAAS,CACvB0C,OAAQ5I,MAEhB,EAGJ,MAAM6I,EACFnJ,YAAYoJ,EAAc/E,GACtB,IAAIC,EACJhE,KAAK+I,YAAchF,aAAuC,EAASA,EAAOiF,WAC1EhJ,KAAKiJ,QAAmF,QAAxEjF,EAAKD,aAAuC,EAASA,EAAOmF,cAA2B,IAAPlF,EAAgBA,EAAM,CAACmF,EAAIC,IAAOD,IAAOC,EACzIpJ,KAAK0F,QAAU,IAAIC,EACnB3F,KAAKqJ,UAAYP,CACrB,CACIE,iBACA,OAAOhJ,KAAK+I,WAChB,CACI/B,eACA,OAAOhH,KAAKqJ,SAChB,CACIrC,aAASA,GACThH,KAAKsJ,YAAYtC,EAAU,CACvBuC,WAAW,EACXhI,MAAM,GAEd,CACA+H,YAAYtC,EAAUwC,GAClB,MAAMC,EAAOD,QAAyCA,EAAU,CAC5DD,WAAW,EACXhI,MAAM,GAEJmI,EAAmB1J,KAAK+I,YACxB/I,KAAK+I,YAAYY,UAAU3C,GAC3BA,EACA4C,EAAY5J,KAAKqJ,YACNrJ,KAAKiJ,QAAQW,EAAWF,IACxBD,EAAKF,aAGtBvJ,KAAK0F,QAAQQ,KAAK,eAAgB,CAC9B0C,OAAQ5I,OAEZA,KAAKqJ,UAAYK,EACjB1J,KAAK0F,QAAQQ,KAAK,SAAU,CACxBsD,QAASC,EACTI,iBAAkBD,EAClB5C,SAAU0C,EACVd,OAAQ5I,OAEhB,EAGJ,MAAM8J,EACFpK,YAAYoJ,GACR9I,KAAK0F,QAAU,IAAIC,EACnB3F,KAAK+J,OAASjB,CAClB,CACI9B,eACA,OAAOhH,KAAK+J,MAChB,CACI/C,aAAS3F,GACTrB,KAAKsJ,YAAYjI,EAAO,CACpBkI,WAAW,EACXhI,MAAM,GAEd,CACA+H,YAAYjI,EAAOmI,GACf,MAAMC,EAAOD,QAAyCA,EAAU,CAC5DD,WAAW,EACXhI,MAAM,GAEJqI,EAAY5J,KAAK+J,QACnBH,IAAcvI,GAAUoI,EAAKF,aAGjCvJ,KAAK0F,QAAQQ,KAAK,eAAgB,CAC9B0C,OAAQ5I,OAEZA,KAAK+J,OAAS1I,EACdrB,KAAK0F,QAAQQ,KAAK,SAAU,CACxBsD,QAASC,EACTI,iBAAkBD,EAClB5C,SAAUhH,KAAK+J,OACfnB,OAAQ5I,OAEhB,EAGJ,SAASgK,EAAYlB,EAAc/E,GAC/B,MAAMiF,EAAajF,aAAuC,EAASA,EAAOiF,WACpEE,EAASnF,aAAuC,EAASA,EAAOmF,OACtE,OAAKF,GAAeE,EAGb,IAAIL,EAAWC,EAAc/E,GAFzB,IAAI+F,EAAehB,EAGlC,CAEA,MAAMmB,EACFvK,YAAY0H,GACRpH,KAAK0F,QAAU,IAAIC,EACnB3F,KAAKkK,QAAU9C,EACf,IAAK,MAAM5E,KAAOxC,KAAKkK,QACTlK,KAAKkK,QAAQ1H,GACrBkD,QAAQL,GAAG,UAAU,KACnBrF,KAAK0F,QAAQQ,KAAK,SAAU,CACxB1D,IAAKA,EACLoG,OAAQ5I,MACZ,GAGZ,CACA6D,kBAAkBiF,GAEd,OADapG,OAAOyH,KAAKrB,GACbsB,QAAO,CAACC,EAAG7H,IACZE,OAAO4H,OAAOD,EAAG,CACpB7H,CAACA,GAAMwH,EAAYlB,EAAatG,OAErC,CAAC,EACR,CACAqB,kBAAkBiF,GACd,MAAMlJ,EAAOI,KAAKuK,WAAWzB,GAC7B,OAAO,IAAImB,EAASrK,EACxB,CACAkB,IAAI0B,GACA,OAAOxC,KAAKkK,QAAQ1H,GAAKwE,QAC7B,CACAjG,IAAIyB,EAAKnB,GACLrB,KAAKkK,QAAQ1H,GAAKwE,SAAW3F,CACjC,CACAA,MAAMmB,GACF,OAAOxC,KAAKkK,QAAQ1H,EACxB,EAGJ,SAASgI,EAAYnJ,EAAOoJ,GAWxB,OAAO3I,EAVMY,OAAOyH,KAAKM,GACLL,QAAO,CAACM,EAAKlI,KAC7B,QAAYI,IAAR8H,EACA,OAEJ,MACMC,GAASC,EADAH,EAAejI,IACRnB,EAAMmB,IAC5B,OAAOmI,EAAOE,UACRnI,OAAO4H,OAAO5H,OAAO4H,OAAO,CAAC,EAAGI,GAAM,CAAElI,CAACA,GAAMmI,EAAOtJ,aAAWuB,CAAS,GACjF,CAAC,GAER,CACA,SAASkI,EAAWzJ,EAAO0J,GACvB,OAAO1J,EAAM+I,QAAO,CAACM,EAAKM,KACtB,QAAYpI,IAAR8H,EACA,OAEJ,MAAMC,EAASI,EAAUC,GACzB,OAAKL,EAAOE,gBAA8BjI,IAAjB+H,EAAOtJ,MAGzB,IAAIqJ,EAAKC,EAAOtJ,YAHvB,CAG6B,GAC9B,GACP,CACA,SAAS4J,EAAS5J,GACd,OAAc,OAAVA,GAGoB,iBAAVA,CAClB,CACA,SAAS6J,EAA0BC,GAC/B,OAAQC,GAAcrJ,IAClB,IAAKqJ,QAAkBxI,IAANb,EACb,MAAO,CACH8I,WAAW,EACXxJ,WAAOuB,GAGf,GAAIwI,QAAkBxI,IAANb,EACZ,MAAO,CACH8I,WAAW,EACXxJ,WAAOuB,GAGf,MAAM+H,EAASQ,EAAMpJ,GACrB,YAAkBa,IAAX+H,EACD,CACEE,WAAW,EACXxJ,MAAOsJ,GAET,CACEE,WAAW,EACXxJ,WAAOuB,EACV,CAEb,CACA,SAASyI,EAA2BD,GAChC,MAAO,CACHE,OAASH,GAAUD,EAA0BC,EAA1BD,CAAiCE,GACpDG,QAASL,GAA2BnJ,GAAmB,kBAANA,EAAkBA,OAAIa,GAA9DsI,CAAyEE,GAClFI,OAAQN,GAA2BnJ,GAAmB,iBAANA,EAAiBA,OAAIa,GAA7DsI,CAAwEE,GAChFK,OAAQP,GAA2BnJ,GAAmB,iBAANA,EAAiBA,OAAIa,GAA7DsI,CAAwEE,GAChFM,SAAUR,GAA2BnJ,GACxB,mBAANA,EAAmBA,OAAIa,GADpBsI,CAC+BE,GACzCO,SAAWtK,GAAU6J,GAA2BnJ,GAAOA,IAAMV,EAAQA,OAAQuB,GAAxDsI,CAAoEE,GACzFQ,IAAKV,GAA2BnJ,GAAMA,GAAjCmJ,CAAoCE,GACzCS,OAASpB,GAAmBS,GAA2BnJ,IACnD,GAAKkJ,EAASlJ,GAGd,OAAOyI,EAAYzI,EAAG0I,EAAA,GAJES,CAKzBE,GACHU,MAAQC,GAAeb,GAA2BnJ,IAC9C,GAAKiK,MAAMC,QAAQlK,GAGnB,OAAO+I,EAAW/I,EAAGgK,EAAA,GAJFb,CAKpBE,GAEX,CACA,MAAMc,EAAgB,CAClBd,SAAUC,GAA2B,GACrCc,SAAUd,GAA2B,IAEzC,SAASe,EAAY/K,EAAOoJ,GACxB,MAAME,EAASuB,EAAcC,SAASN,OAAOpB,EAA9ByB,CAA8C7K,GAC7D,OAAOsJ,EAAOE,UAAYF,EAAOtJ,WAAQuB,CAC7C,CAEA,SAASyJ,EAAYC,GACjBC,QAAQC,KAAK,CACT,YAAYF,EAAK9J,WAAW8J,EAAKnL,aAAamL,EAAKG,SACnD,wDACFnM,KAAK,KACX,CAEA,SAASoM,EAAepF,GAIpB,OAHIA,GAAQA,EAAKqF,eACbrF,EAAKqF,cAAcC,YAAYtF,GAE5B,IACX,CAEA,MAAMuF,EACFnN,YAAY2B,GACRrB,KAAK+J,OAAS1I,CAClB,CACAwC,cAAcxC,GACV,MAAO,CACH,IAAIwL,EAAcxL,GAClB,CAAC2F,EAAUwC,KACPnI,EAAMiI,YAAYtC,EAAUwC,EAAA,EAGxC,CACI9D,cACA,OAAO1F,KAAK+J,OAAOrE,OACvB,CACIsB,eACA,OAAOhH,KAAK+J,OAAO/C,QACvB,EAGJ,MAAM8F,EAAcxG,EAAU,IAC9B,SAASyG,EAAgBzF,EAAM0F,GAC3B,OAAOpF,EAAiBN,EAAMwF,OAAYlK,EAAWoK,GACzD,CACA,MAAMC,UAAkBhD,EACpBvK,YAAY0H,GACR,IAAIpD,EACJxC,MAAM4F,GACNpH,KAAKkN,kBAAoBlN,KAAKkN,kBAAkBzH,KAAKzF,MACrDA,KAAKmN,gBAAkBnN,KAAKmN,gBAAgB1H,KAAKzF,MACjDA,KAAKoN,8BACDpN,KAAKoN,8BAA8B3H,KAAKzF,OAC3CA,KAAKqN,gBAAiBrN,KAAKsN,oBAAsBT,EAAcU,OAAOvD,EAAYhK,KAAKwN,uBACxFxN,KAAKqB,MAAM,YAAYqE,QAAQL,GAAG,SAAUrF,KAAKkN,mBACjDlN,KAAKqB,MAAM,UAAUqE,QAAQL,GAAG,SAAUrF,KAAKmN,iBACjB,QAA7BnJ,EAAKhE,KAAKc,IAAI,iBAA8B,IAAPkD,GAAyBA,EAAGyJ,eAAe/H,QAAQL,GAAG,SAAUrF,KAAKoN,8BAC/G,CACAvJ,cAAc6J,GACV,IAAI1J,EAAI2J,EAAIC,EACZ,MAAM9E,EAAe4E,QAA2DA,EAAmB,CAAC,EACpG,OAAO,IAAIT,EAAUhD,EAASM,WAAW,CACrC3J,SAA2C,QAAhCoD,EAAK8E,EAAalI,gBAA6B,IAAPoD,GAAgBA,EACnE6J,UAAU,EACV7M,OAAuC,QAA9B2M,EAAK7E,EAAa9H,cAA2B,IAAP2M,GAAgBA,EAC/DG,OAAuC,QAA9BF,EAAK9E,EAAagF,cAA2B,IAAPF,EAAgBA,EAAK,OAE5E,CACIH,qBACA,OAAOzN,KAAKqN,eAChB,CACAlF,mBAAmBb,GACfL,EAAUjH,KAAKqN,gBAAiBN,EAAgBzF,EAAM,aACtDH,EAAanH,KAAM,SAAU+M,EAAgBzF,EAAM,UACvD,CACAe,aAAalH,GACT8F,EAAUjH,KAAKqN,iBAAkBzM,IAC7BO,EAAOP,SAAWA,CAAA,GAE1B,CACAmN,aAAazG,GACTL,EAAUjH,KAAKqN,iBAAkBzM,IAC7B0G,EAAK0G,SAAWpN,GAAW,EAAK,CAAC,GAEzC,CACAqN,cAAcC,GACVlO,KAAKqB,MAAM,YAAYqE,QAAQL,GAAG,UAAWwI,IACrCA,GACAK,GAAA,GAGZ,CACAV,qBACI,MAAMM,EAAS9N,KAAKc,IAAI,UAExB,QADuBgN,GAASA,EAAOL,eAAezG,UAC7BhH,KAAKc,IAAI,WACtC,CACAqN,wBACInO,KAAKsN,mBAAmBtN,KAAKwN,qBACjC,CACAN,oBACIlN,KAAKmO,uBACT,CACAf,gCACIpN,KAAKmO,uBACT,CACAhB,gBAAgBpG,GACZ,IAAI/C,EACJ,MAAMoK,EAAarH,EAAG8C,iBACtBuE,SAAwDA,EAAWX,eAAe/H,QAAQK,IAAI,SAAU/F,KAAKoN,+BAC/E,QAA7BpJ,EAAKhE,KAAKc,IAAI,iBAA8B,IAAPkD,GAAyBA,EAAGyJ,eAAe/H,QAAQL,GAAG,SAAUrF,KAAKoN,+BAC3GpN,KAAKmO,uBACT,EAGJ,SAASE,IACL,MAAO,CAAC,YAAa,QAAS,OAAQ,WAC1C,CAEA,MAAMC,EAAchI,EAAU,IACxBiI,EAAwB,CAC1BC,UAAW,OACXC,MAAO,MACPlN,KAAM,MACNmN,SAAU,QAEd,MAAMC,EACFjP,YAAYqE,GACR/D,KAAK4O,QAAU,KACf5O,KAAK6O,MAAQ9K,EAAO8K,MACpB7O,KAAKW,KAAOoD,EAAOpD,KACnBX,KAAKa,UAAYkD,EAAOlD,UACxB,MAAMyG,EAAOtH,KAAKW,KAAKD,QACvBV,KAAK6O,MAAMxN,MAAM,aAAaqE,QAAQL,GAAG,UAAU,KAC/CgJ,IAAuBjI,SAAS0I,IAC5BxH,EAAKG,UAAUE,OAAO2G,OAAY1L,EAAW2L,EAAsBO,IAAI,IAE3E9O,KAAK6O,MAAM/N,IAAI,aAAasF,SAAS0I,IACjCxH,EAAKG,UAAUC,IAAI4G,OAAY1L,EAAW2L,EAAsBO,IAAI,GACxE,IAEJ9O,KAAKa,UAAUoN,eAAc,KACzBvB,EAAepF,EAAA,GAEvB,CACIwG,aACA,OAAO9N,KAAK4O,OAChB,CACId,WAAOA,GACP9N,KAAK4O,QAAUd,EACT,WAAY9N,KAAKa,UAAUqJ,QAQjClK,KAAKa,UAAUE,IAAI,SAAUf,KAAK4O,QAAU5O,KAAK4O,QAAQ/N,UAAY,MAPjEwL,EAAY,CACR7J,IAAK,SACLrB,OAAQ8L,EAAU9J,KAClBsJ,MAAO,0BAKnB,EAGJ,MAAMsC,EAAS,6BACf,SAASC,EAAYtO,GACjBA,EAAQuO,YACZ,CACA,SAASC,EAA6BxO,EAASwN,GAC3C,MAAMiB,EAAIzO,EAAQ0O,MAAMC,WACxB3O,EAAQ0O,MAAMC,WAAa,OAC3BnB,IACAxN,EAAQ0O,MAAMC,WAAaF,CAC/B,CACA,SAASG,EAAcrH,GACnB,YAA4BrF,IAArBqF,EAAIsH,YACf,CACA,SAASC,KACL,OAAOC,UACX,CACA,SAASC,KAEL,OADkB5N,EAAU0N,MACXG,QACrB,CACA,SAASC,GAAiBC,GACtB,MAAMC,EAAMD,EAAcE,cAAcC,YACxC,OAAKF,GAGa,aAAcA,EAE1BD,EAAcI,WAAW,KAAM,CAC7BC,oBAAoB,IALjB,IAQf,CACA,MAAMC,GAA4B,CAC9BC,MAAO,4BACPC,SAAU,4BACVC,OAAQ,yEAEZ,SAASC,GAAqBZ,EAAUa,GACpC,MAAMlJ,EAAOqI,EAASc,gBAAgB1B,EAAQ,OAE9C,OADAzH,EAAKoJ,UAAYP,GAA0BK,GACpClJ,CACX,CACA,SAASqJ,GAAgBhE,EAAejM,EAASmB,GAC7C8K,EAAciE,aAAalQ,EAASiM,EAAckE,SAAShP,GAC/D,CACA,SAASiP,GAAcpQ,GACfA,EAAQiM,eACRjM,EAAQiM,cAAcC,YAAYlM,EAE1C,CACA,SAASqQ,GAAoBrQ,GACzB,KAAOA,EAAQmQ,SAASzO,OAAS,GAC7B1B,EAAQkM,YAAYlM,EAAQmQ,SAAS,GAE7C,CACA,SAASG,GAAiBtQ,GACtB,KAAOA,EAAQuQ,WAAW7O,OAAS,GAC/B1B,EAAQkM,YAAYlM,EAAQuQ,WAAW,GAE/C,CACA,SAASC,GAAenK,GACpB,OAAIA,EAAGoK,cACIrP,EAAUiF,EAAGoK,eAEpB,2BAA4BpK,EACrBA,EAAGqK,uBAEP,IACX,CAEA,MAAMC,GAAc/K,EAAU,OAC9B,SAASgL,GAAgBrJ,EAAKhD,GAC1B,MAAMsM,EAAOtJ,EAAIuJ,yBAUjB,OATkBvM,EAAMnF,MAAM,MAAM2R,KAAKC,GAC9BzJ,EAAI0J,eAAeD,KAEpBtL,SAAQ,CAACwL,EAAU/P,KACrBA,EAAQ,GACR0P,EAAKjJ,YAAYL,EAAIC,cAAc,OAEvCqJ,EAAKjJ,YAAYsJ,EAAA,IAEdL,CACX,CACA,MAAMM,GACFnS,YAAYuI,EAAKlE,GACb/D,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAI2J,MAC3BtN,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzC,MAAMoR,EAAY7J,EAAIC,cAAc,OACpC4J,EAAUrK,UAAUC,IAAI2J,GAAY,MACpClK,EAAapD,EAAOmB,MAAO,SAAU7D,IAC7BW,EAAQX,GACRrB,KAAKU,QAAQ+G,UAAUC,IAAI2J,QAAYzO,EAAW,SAGlD5C,KAAKU,QAAQ+G,UAAUE,OAAO0J,QAAYzO,EAAW,QACrDoO,GAAiBc,GACjBA,EAAUxJ,YAAYgJ,GAAgBrJ,EAAK5G,IAC/C,IAEJrB,KAAKU,QAAQ4H,YAAYwJ,GACzB9R,KAAK+R,aAAeD,EACpB,MAAME,EAAY/J,EAAIC,cAAc,OACpC8J,EAAUvK,UAAUC,IAAI2J,GAAY,MACpCrR,KAAKU,QAAQ4H,YAAY0J,GACzBhS,KAAKiS,aAAeD,CACxB,EAGJ,MAAME,WAAwBvD,EAC1BjP,YAAYuI,EAAKlE,GACb,MAAMlD,EAAYkD,EAAOqB,gBAAgBvE,UACzCW,MAAMkB,OAAO4H,OAAO5H,OAAO4H,OAAO,CAAC,EAAGvG,GAAS,CAAEpD,KAAM,IAAIkR,GAAU5J,EAAK,CAClE/C,MAAOnB,EAAOmB,MACdrE,UAAWA,IACXA,UAAWA,KACnBb,KAAKkF,MAAQnB,EAAOmB,MACpBlF,KAAKoF,gBAAkBrB,EAAOqB,gBAC9BpF,KAAKW,KAAKsR,aAAa3J,YAAYtI,KAAKoF,gBAAgBzE,KAAKD,QACjE,EAGJ,MAAMyR,GAAoB,CACtBC,GAAI,SACJtO,KAAM,QACNuO,OAAO7O,GACH,MAAM8O,EAAIpG,EACJvB,EAASyB,EAAY5I,EAAQ,CAC/B2B,MAAOmN,EAAEnG,SAASV,OAClB9K,KAAM2R,EAAEnG,SAASR,SAAS,UAC1B1G,MAAOqN,EAAElH,SAASK,SAEtB,OAAOd,EAAS,CAAEnH,OAAQmH,GAAW,IACzC,EACAnK,WAAW+R,GACA,IAAIL,GAAgBK,EAAK5C,SAAU,CACtCd,MAAO0D,EAAK1D,MACZ3J,MAAO+E,EAASuI,WAAW,CACvBvN,MAAOsN,EAAK/O,OAAOyB,QAEvBG,gBAAiB,IAAIqD,EAAiB8J,EAAK5C,SAAU,CACjDzK,MAAO+E,EAASuI,WAAW,CACvBrN,MAAOoN,EAAK/O,OAAO2B,QAEvBtE,UAAW0R,EAAK1R,cAI5B4R,IAAIF,GACMA,EAAK/R,sBAAsB0R,IAG3BK,EAAK/R,WAAW4E,2BAA2BqD,EAG1C,IAAIzD,EAAUuN,EAAK/R,YALf,MASnB,MAAMkS,WAA6B/D,EAC/BjP,YAAYqE,GACRvC,MAAMuC,GACN/D,KAAKqB,MAAQ0C,EAAO1C,KACxB,EAGJ,SAASsR,KACL,OAAO,IAAI1I,EAAS,CAChB2I,UAAW5I,EAAY,GAAI,CACvBd,OAAQjH,KAGpB,CAEA,MAAM4Q,WAAiB5I,EACnBvK,YAAY0H,GACR5F,MAAM4F,EACV,CACAvD,cAAclC,GACV,MAAMmR,EAAU,CACZC,WAAW,EACXpR,SAAUA,EACVqR,eAAgB,KAChBC,iBAAiB,EACjBC,kBAAmB,MAEjBtT,EAAOqK,EAASM,WAAWuI,GACjC,OAAO,IAAID,GAASjT,EACxB,CACIuT,oBACA,IAAInP,EACJ,OAAgD,QAAxCA,EAAKhE,KAAKc,IAAI,4BAAyC,IAAPkD,EAAgBA,EAAKhE,KAAKc,IAAI,WAC1F,CACIsS,kBACA,IAAKpT,KAAKmT,cACN,MAAO,IAEX,MAAME,EAAWrT,KAAKc,IAAI,kBAC1B,OAAId,KAAKc,IAAI,qBAAuBkB,EAAQqR,GACjC,GAAGA,MAEP,MACX,CACAC,kBAAkBhM,EAAMiM,GACpB,MAAMC,EAAW,KACIxT,KAAKmT,cAElB7L,EAAKG,UAAUC,IAAI6L,GAGnBjM,EAAKG,UAAUE,OAAO4L,EAAA,EAG9BpM,EAAanH,KAAM,WAAYwT,GAC/BrM,EAAanH,KAAM,oBAAqBwT,EAC5C,CACAC,oBACIzT,KAAKe,IAAI,mBAAmB,GAC5Bf,KAAKe,IAAI,iBAAkB,MAC3Bf,KAAKe,IAAI,aAAa,EAC1B,EAEJ,SAAS2S,GAA4BC,EAAQC,GACzC,IAAIC,EAAS,EASb,OARA3E,EAA6B0E,GAAkB,KAC3CD,EAAO5S,IAAI,iBAAkB,MAC7B4S,EAAO5S,IAAI,qBAAqB,GAChCiO,EAAY4E,GACZC,EAASD,EAAiBE,aAC1BH,EAAO5S,IAAI,oBAAqB,MAChCiO,EAAY4E,EAAA,IAETC,CACX,CACA,SAASE,GAAYC,EAAU1M,GAC3BA,EAAK8H,MAAMyE,OAASG,EAASZ,WACjC,CACA,SAASa,GAAaD,EAAU1M,GAC5B0M,EAAS3S,MAAM,YAAYqE,QAAQL,GAAG,gBAAgB,KAElD,GADA2O,EAASjT,IAAI,aAAa,GACtBiB,EAAQgS,EAASlT,IAAI,mBAAoB,CACzC,MAAMoT,EAAIR,GAA4BM,EAAU1M,GAC5C4M,EAAI,GACJF,EAASjT,IAAI,iBAAkBmT,EAEvC,CACAF,EAASjT,IAAI,mBAAmB,GAChCiO,EAAY1H,EAAA,IAEhB0M,EAAStO,QAAQL,GAAG,UAAU,KAC1B0O,GAAYC,EAAU1M,EAAA,IAE1ByM,GAAYC,EAAU1M,GACtBA,EAAKqB,iBAAiB,iBAAkB5B,IACZ,WAApBA,EAAGoN,cAGPH,EAASP,mBAAiB,GAElC,CAEA,MAAMW,WAAoB7T,EACtBb,YAAYc,EAAY6T,GACpB7S,MAAMhB,GACNR,KAAKsU,SAAWD,CACpB,EAGJ,SAASE,GAAiB9B,EAAKjP,GAC3B,OAAOiP,EAAI+B,SAAS9R,OAAO4H,OAAO5H,OAAO4H,OAAO,CAAC,EAAG9G,GAAS,CAAE7C,KAAM,WACzE,CACA,SAAS8T,GAAiBhC,EAAKjP,GAC3B,OAAOiP,EAAI+B,SAAS9R,OAAO4H,OAAO5H,OAAO4H,OAAO,CAAC,EAAG9G,GAAS,CAAE7C,KAAM,WACzE,CACA,SAAS+T,GAAoBjC,EAAKkC,GAC9B,MAAMnR,EAASmR,QAA+CA,EAAa,CAAC,EAC5E,OAAOlC,EAAI+B,SAAS9R,OAAO4H,OAAO5H,OAAO4H,OAAO,CAAC,EAAG9G,GAAS,CAAE7C,KAAM,cACzE,CACA,SAASiU,GAAcnC,EAAKjP,GACxB,OAAOiP,EAAI+B,SAAS9R,OAAO4H,OAAO5H,OAAO4H,OAAO,CAAC,EAAG9G,GAAS,CAAE7C,KAAM,QACzE,CAEA,MAAMkU,GACFnV,YAAYoV,GACR9U,KAAK0F,QAAU,IAAIC,EACnB3F,KAAK+U,OAAS,GACd/U,KAAKgV,OAAS,IAAIC,IAClBjV,KAAKkV,cAAgBlV,KAAKkV,cAAczP,KAAKzF,MAC7CA,KAAKmV,iBAAmBnV,KAAKmV,iBAAiB1P,KAAKzF,MACnDA,KAAKoV,SAAWN,CACpB,CACIO,YACA,OAAOrV,KAAK+U,MAChB,CACAO,WACI,OAAOtJ,MAAMuJ,KAAKvV,KAAKgV,OAC3B,CACAQ,KAAKtH,GACD,IAAK,MAAMlD,KAAQhL,KAAKsV,WACpB,GAAIpH,EAASlD,GACT,OAAOA,EAGf,OAAO,IACX,CACAyK,SAASzK,GACL,OAAOhL,KAAKgV,OAAOU,IAAI1K,EAC3B,CACAtD,IAAIsD,EAAM2K,GACN,GAAI3V,KAAKyV,SAASzK,GACd,MAAMpH,EAAQgS,oBAElB,MAAM/T,OAAsBe,IAAd+S,EAA0BA,EAAY3V,KAAK+U,OAAO3S,OAChEpC,KAAK+U,OAAOc,OAAOhU,EAAO,EAAGmJ,GAC7BhL,KAAKgV,OAAOtN,IAAIsD,GAChB,MAAM8K,EAAU9V,KAAKoV,SAASpK,GAC1B8K,IACAA,EAAQpQ,QAAQL,GAAG,MAAOrF,KAAKkV,eAC/BY,EAAQpQ,QAAQL,GAAG,SAAUrF,KAAKmV,kBAClCW,EAAQR,WAAWlP,SAAS4E,IACxBhL,KAAKgV,OAAOtN,IAAIsD,EAAA,KAGxBhL,KAAK0F,QAAQQ,KAAK,MAAO,CACrBrE,MAAOA,EACPmJ,KAAMA,EACN+K,KAAM/V,KACNmB,OAAQnB,MAEhB,CACA2H,OAAOqD,GACH,MAAMnJ,EAAQ7B,KAAK+U,OAAOiB,QAAQhL,GAClC,GAAInJ,EAAQ,EACR,OAEJ7B,KAAK+U,OAAOc,OAAOhU,EAAO,GAC1B7B,KAAKgV,OAAOiB,OAAOjL,GACnB,MAAM8K,EAAU9V,KAAKoV,SAASpK,GAC1B8K,IACAA,EAAQpQ,QAAQK,IAAI,MAAO/F,KAAKkV,eAChCY,EAAQpQ,QAAQK,IAAI,SAAU/F,KAAKmV,mBAEvCnV,KAAK0F,QAAQQ,KAAK,SAAU,CACxBrE,MAAOA,EACPmJ,KAAMA,EACN+K,KAAM/V,KACNmB,OAAQnB,MAEhB,CACAkV,cAAcnO,GACV/G,KAAKgV,OAAOtN,IAAIX,EAAGiE,MACnBhL,KAAK0F,QAAQQ,KAAK,MAAO,CACrBrE,MAAOkF,EAAGlF,MACVmJ,KAAMjE,EAAGiE,KACT+K,KAAM/V,KACNmB,OAAQ4F,EAAG5F,QAEnB,CACAgU,iBAAiBpO,GACb/G,KAAKgV,OAAOiB,OAAOlP,EAAGiE,MACtBhL,KAAK0F,QAAQQ,KAAK,SAAU,CACxBrE,MAAOkF,EAAGlF,MACVmJ,KAAMjE,EAAGiE,KACT+K,KAAM/V,KACNmB,OAAQ4F,EAAG5F,QAEnB,EAGJ,MAAM+U,WAAwB3V,EAC1Bb,YAAYc,GACRgB,MAAMhB,GACNR,KAAKmW,iBAAmBnW,KAAKmW,iBAAiB1Q,KAAKzF,MACnDA,KAAKoW,SAAW,IAAIzQ,EACpB3F,KAAKS,YAAY4V,QAAQ3Q,QAAQL,GAAG,SAAUrF,KAAKmW,iBACvD,CACIlR,YACA,OAAOjF,KAAKS,YAAYyE,MAAMpE,IAAI,QACtC,CACImE,UAAMA,GACNjF,KAAKS,YAAYyE,MAAMnE,IAAI,QAASkE,EACxC,CACAI,GAAGC,EAAWC,GACV,MAAMC,EAAKD,EAAQE,KAAKzF,MAIxB,OAHAA,KAAKoW,SAAS/Q,GAAGC,GAAYyB,IACzBvB,EAAGuB,EAAGZ,MAAK,IAERnG,IACX,CACAsW,UACItW,KAAKS,YAAY4V,QAAQ5R,MAC7B,CACA0R,iBAAiBpP,GACb,MAAM1F,EAAQ0F,EAAG6B,OAAOzH,OAAOsD,OAC/BzE,KAAKoW,SAASlQ,KAAK,SAAU,CACzBC,MAAO,IAAI/E,EAAcpB,KAAM8B,EAAUT,GAAQrB,KAAKS,YAAY4V,QAAQlV,OAAOG,UAAWyF,EAAGyC,QAAQjI,OAE/G,EAGJ,MAAMgV,WAA+BrE,GACjCxS,YAAYuI,EAAKlE,GACbvC,MAAMyG,EAAKlE,GACX/D,KAAKqW,QAAUtS,EAAOsS,OAC1B,EAGJ,MAAMG,WAA0BjW,EAC5Bb,YAAYc,GACRgB,MAAMhB,GACNR,KAAKyW,iBAAmBzW,KAAKyW,iBAAiBhR,KAAKzF,MACnDA,KAAKoW,SAAW,IAAIzQ,EACpB3F,KAAKS,YAAY4V,QAAQ3Q,QAAQL,GAAG,SAAUrF,KAAKyW,iBACvD,CACIxR,YACA,OAAOjF,KAAKS,YAAYyE,MAAMpE,IAAI,QACtC,CACImE,UAAMA,GACNjF,KAAKS,YAAYyE,MAAMnE,IAAI,QAASkE,EACxC,CACAI,GAAGC,EAAWC,GACV,MAAMC,EAAKD,EAAQE,KAAKzF,MAIxB,OAHAA,KAAKoW,SAAS/Q,GAAGC,GAAYyB,IACzBvB,EAAGuB,EAAGZ,MAAK,IAERnG,IACX,CACAsW,UACItW,KAAKS,YAAY4V,QAAQ5R,MAC7B,CACAgS,iBAAiB1P,GACb,MAAM1F,EAAQ0F,EAAG6B,OAAOzH,OAAOsD,OAC/BzE,KAAKoW,SAASlQ,KAAK,SAAU,CACzBC,MAAO,IAAI1E,EAAczB,KAAM8B,EAAUT,GAAQrB,KAAKS,YAAY4V,QAAQlV,OAAOG,YAEzF,EAGJ,MAAMoV,WAAiCxE,GACnCxS,YAAYuI,EAAKlE,GACbvC,MAAMyG,EAAKlE,GACX/D,KAAKqW,QAAUtS,EAAOsS,QACtBrW,KAAKa,UAAUwH,aAAarI,KAAKqW,QAAQM,QACzC3W,KAAKa,UAAUoN,eAAc,KACzBjO,KAAKqW,QAAQpV,SAAO,GAE5B,EAGJ,SAAS2V,GAAmBnE,GACxB,OAAIA,aAAeoE,GACRpE,EAAI,QAEXA,aAAe2B,GACR3B,EAAI,SAAY,QAEpB,IACX,CACA,SAASqE,GAAmBC,EAAQvW,GAChC,MAAMiS,EAAMsE,EAAOvB,MAAM/C,GAAQA,EAAIhS,cAAgBD,IACrD,IAAKiS,EACD,MAAM7O,EAAQgS,oBAElB,OAAOnD,CACX,CACA,SAASuE,GAAoBzU,EAAKC,EAAK6B,GACnC,IAAKD,EAAcS,WAAWtC,GAC1B,MAAMqB,EAAQkB,cAElB,OAAO,IAAIV,EAAc7B,EAAKC,EAAK6B,EACvC,CACA,MAAMwS,WAAgBtW,EAClBb,YAAYc,EAAYyW,GACpBzV,MAAMhB,GACNR,KAAKkX,WAAalX,KAAKkX,WAAWzR,KAAKzF,MACvCA,KAAKmX,cAAgBnX,KAAKmX,cAAc1R,KAAKzF,MAC7CA,KAAKoX,mBAAqBpX,KAAKoX,mBAAmB3R,KAAKzF,MACvDA,KAAKqX,qBAAuBrX,KAAKqX,qBAAqB5R,KAAKzF,MAC3DA,KAAKoW,SAAW,IAAIzQ,EACpB3F,KAAKsX,QAAU,IAAIzC,GAAiB+B,IACpC5W,KAAKuX,MAAQN,EACb,MAAMO,EAAOxX,KAAKS,YAAY+W,KAC9BA,EAAK9R,QAAQL,GAAG,MAAOrF,KAAKkX,YAC5BM,EAAK9R,QAAQL,GAAG,SAAUrF,KAAKmX,eAC/BK,EAAK9R,QAAQL,GAAG,cAAerF,KAAKoX,oBACpCI,EAAK9R,QAAQL,GAAG,gBAAiBrF,KAAKqX,sBACtCG,EAAK3G,SAASzK,SAASqR,IACnBzX,KAAK0X,UAAUD,EAAA,GAEvB,CACI5G,eACA,OAAO7Q,KAAKS,YAAY+W,KAAK3G,SAASY,KAAKgG,GAAOX,GAAmB9W,KAAKsX,QAASG,IACvF,CACAE,SAAS9L,EAAQrJ,EAAKmS,GAClB,MAAMnR,EAASmR,QAA+CA,EAAa,CAAC,EACtE1M,EAAMjI,KAAKS,YAAYE,KAAKD,QAAQqP,cACpC0H,EAAKzX,KAAKuX,MAAMK,YAAY3P,EAAK+O,GAAoBnL,EAAQrJ,EAAKgB,EAAOlC,WAAYkC,GACrFiP,EAAM,IAAIyD,GAAgBuB,GAChC,OAAOzX,KAAK0H,IAAI+K,EAAKjP,EAAO3B,MAChC,CACAgW,WAAWhM,EAAQrJ,EAAKmS,GACpB,MAAMnR,EAASmR,QAA+CA,EAAa,CAAC,EACtE1M,EAAMjI,KAAKS,YAAYE,KAAKD,QAAQqP,cACpC0H,EAAKzX,KAAKuX,MAAMO,cAAc7P,EAAK+O,GAAoBnL,EAAQrJ,GAAMgB,GACrEiP,EAAM,IAAI+D,GAAkBiB,GAClC,OAAO3V,EAAU9B,KAAK0H,IAAI+K,EAAKjP,EAAO3B,OAC1C,CACAkW,UAAUvU,GACN,OAAOiR,GAAiBzU,KAAMwD,EAClC,CACAwU,UAAUxU,GACN,OAAO+Q,GAAiBvU,KAAMwD,EAClC,CACAyU,aAAatD,GACT,OAAOD,GAAoB1U,KAAM2U,EACrC,CACAuD,OAAO1U,GACH,OAAOoR,GAAc5U,KAAMwD,EAC/B,CACAkE,IAAI+K,EAAKkD,GACL3V,KAAKS,YAAY+W,KAAK9P,IAAI+K,EAAIhS,YAAakV,GAC3C,MAAMwC,EAAOnY,KAAKsX,QAAQ9B,MAAM4C,GAAMA,EAAE3X,cAAgBgS,EAAIhS,cAK5D,OAJI0X,GACAnY,KAAKsX,QAAQ3P,OAAOwQ,GAExBnY,KAAKsX,QAAQ5P,IAAI+K,GACVA,CACX,CACA9K,OAAO8K,GACHzS,KAAKS,YAAY+W,KAAK7P,OAAO8K,EAAIhS,YACrC,CACA+T,SAAShR,GACL,MAAMyE,EAAMjI,KAAKS,YAAYE,KAAKD,QAAQqP,cACpC0H,EAAKzX,KAAKuX,MAAM5E,YAAY1K,EAAKzE,GACjCiP,EAAMzS,KAAKuX,MAAMc,eAAeZ,GACtC,OAAOzX,KAAK0H,IAAI+K,EAAKjP,EAAO3B,MAChC,CACAwD,GAAGC,EAAWC,GACV,MAAMC,EAAKD,EAAQE,KAAKzF,MAIxB,OAHAA,KAAKoW,SAAS/Q,GAAGC,GAAYyB,IACzBvB,EAAGuB,EAAGZ,MAAK,IAERnG,IACX,CACA0X,UAAUD,GACMzX,KAAKsX,QAAQ9B,MAAM/C,GAAQA,EAAIhS,cAAgBgX,KAEvDzX,KAAKsX,QAAQ5P,IAAI1H,KAAKuX,MAAMc,eAAeZ,GAEnD,CACAP,WAAWnQ,GACP/G,KAAK0X,UAAU3Q,EAAGuR,gBACtB,CACAnB,cAAcpQ,GACV,GAAIA,EAAGwR,OAAQ,CACX,MAAM9F,EAAMqE,GAAmB9W,KAAKsX,QAASvQ,EAAGuR,iBAChDtY,KAAKsX,QAAQ3P,OAAO8K,EACxB,CACJ,CACA2E,mBAAmBrQ,GACf,MAAM0Q,EAAK1Q,EAAGuR,gBACd,GAAIb,aAAclB,GAAwB,CACtC,MAAM9D,EAAMqE,GAAmB9W,KAAKsX,QAASG,GACvCpB,EAAUoB,EAAGpB,QACnBrW,KAAKoW,SAASlQ,KAAK,SAAU,CACzBC,MAAO,IAAI/E,EAAcqR,EAAK3Q,EAAUuU,EAAQlV,OAAOsD,QAAS4R,EAAQlV,OAAOG,UAAWyF,EAAGyC,QAAQjI,OAE7G,MACK,GAAIkW,aAAc/E,GAAsB,CACzC,MAAMD,EAAMqE,GAAmB9W,KAAKsX,QAASG,GAC7CzX,KAAKoW,SAASlQ,KAAK,SAAU,CACzBC,MAAO,IAAI/E,EAAcqR,EAAKgF,EAAGpW,MAAM2F,cAAUpE,EAAWmE,EAAGyC,QAAQjI,OAE/E,CACJ,CACA8V,qBAAqBtQ,GACjB,KAAMA,EAAGuR,2BAA2B5B,IAChC,MAAM9S,EAAQgS,oBAElB,MAAMnD,EAAMqE,GAAmB9W,KAAKsX,QAASvQ,EAAGuR,iBAC1CjC,EAAUtP,EAAGuR,gBAAgBjC,QACnCrW,KAAKoW,SAASlQ,KAAK,SAAU,CACzBC,MAAO,IAAI1E,EAAcgR,EAAK3Q,EAAUuU,EAAQlV,OAAOsD,QAAS4R,EAAQlV,OAAOG,YAEvF,EAGJ,MAAMkX,WAAkBpE,GACpB1U,YAAYc,EAAYyW,GACpBzV,MAAMhB,EAAY,IAAIqW,GAAQrW,EAAWiY,eAAgBxB,IACzDjX,KAAKoW,SAAW,IAAIzQ,EACpB3F,KAAKS,YAAYuT,SACZ3S,MAAM,YACNqE,QAAQL,GAAG,UAAW0B,IACvB/G,KAAKoW,SAASlQ,KAAK,OAAQ,CACvBC,MAAO,IAAIzE,EAAY1B,KAAM+G,EAAG6B,OAAO5B,WAC3C,IAEJhH,KAAKsU,SAASjP,GAAG,UAAW0B,IACxB/G,KAAKoW,SAASlQ,KAAK,SAAU,CACzBC,MAAOY,GACX,IAEJ/G,KAAKsU,SAASjP,GAAG,UAAW0B,IACxB/G,KAAKoW,SAASlQ,KAAK,SAAU,CACzBC,MAAOY,GACX,GAER,CACIpF,eACA,OAAO3B,KAAKS,YAAYuT,SAASlT,IAAI,WACzC,CACIa,aAASA,GACT3B,KAAKS,YAAYuT,SAASjT,IAAI,WAAYY,EAC9C,CACIwD,YACA,OAAOnF,KAAKS,YAAYyE,MAAMpE,IAAI,QACtC,CACIqE,UAAMA,GACNnF,KAAKS,YAAYyE,MAAMnE,IAAI,QAASoE,EACxC,CACI0L,eACA,OAAO7Q,KAAKsU,SAASzD,QACzB,CACA8G,SAAS9L,EAAQrJ,EAAKmS,GAClB,OAAO3U,KAAKsU,SAASqD,SAAS9L,EAAQrJ,EAAKmS,EAC/C,CACAkD,WAAWhM,EAAQrJ,EAAKmS,GACpB,OAAO3U,KAAKsU,SAASuD,WAAWhM,EAAQrJ,EAAKmS,EACjD,CACAoD,UAAUvU,GACN,OAAOxD,KAAKsU,SAASyD,UAAUvU,EACnC,CACAwU,UAAUxU,GACN,OAAOxD,KAAKsU,SAAS0D,UAAUxU,EACnC,CACAyU,aAAatD,GACT,OAAO3U,KAAKsU,SAAS2D,aAAatD,EACtC,CACAuD,OAAO1U,GACH,OAAOxD,KAAKsU,SAAS4D,OAAO1U,EAChC,CACAkE,IAAI+K,EAAKkD,GACL,OAAO3V,KAAKsU,SAAS5M,IAAI+K,EAAKkD,EAClC,CACAhO,OAAO8K,GACHzS,KAAKsU,SAAS3M,OAAO8K,EACzB,CACA+B,SAAShR,GACL,OAAOxD,KAAKsU,SAASE,SAAShR,EAClC,CACA6B,GAAGC,EAAWC,GACV,MAAMC,EAAKD,EAAQE,KAAKzF,MAIxB,OAHAA,KAAKoW,SAAS/Q,GAAGC,GAAYyB,IACzBvB,EAAGuB,EAAGZ,MAAK,IAERnG,IACX,EAGJ,MAAM0Y,WAA2B/J,EAC7BjP,YAAYqE,GACRvC,MAAM,CACFqN,MAAO9K,EAAO8K,MACdlO,KAAMoD,EAAOpD,KACbE,UAAWkD,EAAO0U,eAAe5X,YAErCb,KAAKyY,eAAiB1U,EAAO0U,cACjC,EAGJ,MAAME,GACFjZ,YAAYuI,EAAKlE,GACb,MAAMwD,EAAYjB,EAAUvC,EAAOwC,UACnCvG,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAIH,KAC3BxD,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,QAC7C,EAGJ,SAASkY,GAA2BC,EAAKC,GACrC,IAAK,IAAIzW,EAAI,EAAGA,EAAIwW,EAAIzW,OAAQC,IAAK,CACjC,MAAMoV,EAAKoB,EAAIxW,GACf,GAAIoV,aAAclB,IAA0BkB,EAAGpB,UAAYyC,EACvD,OAAOrB,CAEf,CACA,OAAO,IACX,CACA,SAASsB,GAA6BF,EAAKC,GACvC,IAAK,IAAIzW,EAAI,EAAGA,EAAIwW,EAAIzW,OAAQC,IAAK,CACjC,MAAMoV,EAAKoB,EAAIxW,GACf,GAAIoV,aAAcf,IAA4Be,EAAGpB,UAAYyC,EACzD,OAAOrB,CAEf,CACA,OAAO,IACX,CACA,SAASuB,GAAyBH,EAAK9W,GACnC,IAAK,IAAIM,EAAI,EAAGA,EAAIwW,EAAIzW,OAAQC,IAAK,CACjC,MAAMoV,EAAKoB,EAAIxW,GACf,GAAIoV,aAAc/E,IAAwB+E,EAAGpW,QAAUU,EACnD,OAAO0V,CAEf,CACA,OAAO,IACX,CACA,SAASwB,GAAYxB,GACjB,OAAIA,aAAcyB,GACPzB,EAAGD,KAEVC,aAAciB,GACPjB,EAAGgB,eAAejB,KAEtB,IACX,CACA,SAAS2B,GAA0B1B,GAC/B,MAAMD,EAAOyB,GAAYxB,GACzB,OAAOD,EAAOA,EAAK,OAAY,IACnC,CACA,MAAM4B,GACF1Z,YAAYqE,GACR,IAAIC,EAAI2J,EACR3N,KAAKqZ,wBAA0BrZ,KAAKqZ,wBAAwB5T,KAAKzF,MACjEA,KAAKsZ,UAAYtZ,KAAKsZ,UAAU7T,KAAKzF,MACrCA,KAAKuZ,aAAevZ,KAAKuZ,aAAa9T,KAAKzF,MAC3CA,KAAKwZ,gBAAkBxZ,KAAKwZ,gBAAgB/T,KAAKzF,MACjDA,KAAKyZ,wBAA0BzZ,KAAKyZ,wBAAwBhU,KAAKzF,MACjEA,KAAK0Z,oBAAsB1Z,KAAK0Z,oBAAoBjU,KAAKzF,MACzDA,KAAK2Z,sBAAwB3Z,KAAK2Z,sBAAsBlU,KAAKzF,MAC7DA,KAAK4Z,oBAAsB5Z,KAAK4Z,oBAAoBnU,KAAKzF,MACzDA,KAAK6Z,wBAA0B7Z,KAAK6Z,wBAAwBpU,KAAKzF,MACjEA,KAAK8Z,oBAAsB9Z,KAAK8Z,oBAAoBrU,KAAKzF,MACzDA,KAAK+Z,yBAA2B/Z,KAAK+Z,yBAAyBtU,KAAKzF,MACnEA,KAAKga,2BACDha,KAAKga,2BAA2BvU,KAAKzF,MACzCA,KAAK0F,QAAU,IAAIC,EACnB3F,KAAKia,OAAiC,QAAvBjW,EAAKD,EAAO8K,aAA0B,IAAP7K,EAAgBA,EAAK,KAC5C,QAAtB2J,EAAK3N,KAAKia,cAA2B,IAAPtM,GAAyBA,EAAGtM,MAAM,aAAaqE,QAAQL,GAAG,SAAUrF,KAAKqZ,yBACxGrZ,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAKka,OAAS,IAAIrF,GAAiBsE,IACnCnZ,KAAKka,OAAOxU,QAAQL,GAAG,MAAOrF,KAAKsZ,WACnCtZ,KAAKka,OAAOxU,QAAQL,GAAG,SAAUrF,KAAKuZ,aAC1C,CACI1I,eACA,OAAO7Q,KAAKka,OAAO7E,KACvB,CACA3N,IAAI+P,EAAI9B,GACJ,IAAI3R,EACiB,QAApBA,EAAKyT,EAAG3J,cAA2B,IAAP9J,GAAyBA,EAAG2D,OAAO8P,GAC5DnV,EAAmBmV,EAAI,UACvBA,EAAG3J,OAAS9N,MAGZyX,EAAG,QAAazX,KAChBqM,EAAY,CACR7J,IAAK,SACLrB,OAAQ,kBACRsL,MAAO,mBAGfzM,KAAKka,OAAOxS,IAAI+P,EAAI9B,EACxB,CACAhO,OAAO8P,GACCnV,EAAmBmV,EAAI,UACvBA,EAAG3J,OAAS,MAGZ2J,EAAG,QAAa,KAChBpL,EAAY,CACR7J,IAAK,SACLrB,OAAQ,kBACRsL,MAAO,sBAGfzM,KAAKka,OAAOvS,OAAO8P,EACvB,CACAjC,KAAK2E,GACD,OAAOrY,EAAU9B,KAAKka,OAAO5E,WAAWtP,QAAQyR,GACrCA,aAAc0C,IAE7B,CACAb,UAAUvS,GACN/G,KAAKoa,mBACL,MAAM7B,EAASxR,EAAG5F,SAAW4F,EAAGgP,KAOhC,GANA/V,KAAK0F,QAAQQ,KAAK,MAAO,CACrBoS,gBAAiBvR,EAAGiE,KACpBnJ,MAAOkF,EAAGlF,MACV0W,OAAQA,EACR3P,OAAQ5I,QAEPuY,EACD,OAEJ,MAAMd,EAAK1Q,EAAGiE,KAMd,GALAyM,EAAG5W,UAAU6E,QAAQL,GAAG,SAAUrF,KAAK6Z,yBACvCpC,EAAG5I,MACExN,MAAM,aACNqE,QAAQL,GAAG,SAAUrF,KAAKyZ,yBAC/BhC,EAAG5W,UAAUoN,cAAcjO,KAAKwZ,iBAC5B/B,aAAclB,GACdkB,EAAGpB,QAAQ3Q,QAAQL,GAAG,SAAUrF,KAAK0Z,0BAEpC,GAAIjC,aAAcf,GACnBe,EAAGpB,QAAQ3Q,QAAQL,GAAG,SAAUrF,KAAK2Z,4BAEpC,GAAIlC,aAAc/E,GACnB+E,EAAGpW,MAAMqE,QAAQL,GAAG,SAAUrF,KAAK4Z,yBAElC,CACD,MAAMpC,EAAOyB,GAAYxB,GACzB,GAAID,EAAM,CACN,MAAM9R,EAAU8R,EAAK9R,QACrBA,EAAQL,GAAG,SAAUrF,KAAK8Z,qBAC1BpU,EAAQL,GAAG,cAAerF,KAAK+Z,0BAC/BrU,EAAQL,GAAG,gBAAiBrF,KAAKga,2BACrC,CACJ,CACJ,CACAT,aAAaxS,GACT/G,KAAKoa,mBACL,MAAM7B,EAASxR,EAAG5F,SAAW4F,EAAGgP,KAMhC,GALA/V,KAAK0F,QAAQQ,KAAK,SAAU,CACxBoS,gBAAiBvR,EAAGiE,KACpBuN,OAAQA,EACR3P,OAAQ5I,QAEPuY,EACD,OAEJ,MAAMd,EAAK1Q,EAAGiE,KACd,GAAIyM,aAAclB,GACdkB,EAAGpB,QAAQ3Q,QAAQK,IAAI,SAAU/F,KAAK0Z,0BAErC,GAAIjC,aAAcf,GACnBe,EAAGpB,QAAQ3Q,QAAQK,IAAI,SAAU/F,KAAK2Z,4BAErC,GAAIlC,aAAc/E,GACnB+E,EAAGpW,MAAMqE,QAAQK,IAAI,SAAU/F,KAAK4Z,yBAEnC,CACD,MAAMpC,EAAOyB,GAAYxB,GACzB,GAAID,EAAM,CACN,MAAM9R,EAAU8R,EAAK9R,QACrBA,EAAQK,IAAI,SAAU/F,KAAK8Z,qBAC3BpU,EAAQK,IAAI,cAAe/F,KAAK+Z,0BAChCrU,EAAQK,IAAI,gBAAiB/F,KAAKga,2BACtC,CACJ,CACJ,CACAI,mBACI,MAAMC,EAAera,KAAKka,OAAO7E,MAAMrP,QAAQyR,IAAQA,EAAG5W,UAAUC,IAAI,YAClEwZ,EAAmBD,EAAa,GAChCE,EAAkBF,EAAaA,EAAajY,OAAS,GAC3DpC,KAAKka,OAAO7E,MAAMjP,SAASqR,IACvB,MAAM+C,EAAK,GACP/C,IAAO6C,IACPE,EAAG1U,KAAK,SACH9F,KAAKia,SACNja,KAAKia,OAAOnZ,IAAI,aAAa2U,SAAS,cACtC+E,EAAG1U,KAAK,cAGZ2R,IAAO8C,IACPC,EAAG1U,KAAK,QACH9F,KAAKia,SAAUja,KAAKia,OAAOnZ,IAAI,aAAa2U,SAAS,aACtD+E,EAAG1U,KAAK,aAGhB2R,EAAG5I,MAAM9N,IAAI,YAAayZ,EAAA,GAElC,CACAf,0BACIzZ,KAAKoa,mBACLpa,KAAK0F,QAAQQ,KAAK,SAAU,CACxB0C,OAAQ5I,MAEhB,CACA6Z,wBAAwBY,GACpBza,KAAKoa,mBACLpa,KAAK0F,QAAQQ,KAAK,SAAU,CACxB0C,OAAQ5I,MAEhB,CACAwZ,kBACwBxZ,KAAKka,OAAO7E,MAAMrP,QAAQyR,GACnCA,EAAG5W,UAAUC,IAAI,cAEhBsF,SAASqR,IACjBzX,KAAKka,OAAOvS,OAAO8P,EAAA,GAE3B,CACAiC,oBAAoB3S,GAChB,MAAM0Q,EAAKmB,GAA2B5Y,KAAKwV,KAAKe,IAAyBxP,EAAG6B,QAC5E,IAAK6O,EACD,MAAM7T,EAAQ8W,kBAElB1a,KAAK0F,QAAQQ,KAAK,cAAe,CAC7BoS,gBAAiBb,EACjBjO,QAASzC,EAAGyC,QACZZ,OAAQ5I,MAEhB,CACA2Z,sBAAsB5S,GAClB,MAAM0Q,EAAKsB,GAA6B/Y,KAAKwV,KAAKkB,IAA2B3P,EAAG6B,QAChF,IAAK6O,EACD,MAAM7T,EAAQ8W,kBAElB1a,KAAK0F,QAAQQ,KAAK,gBAAiB,CAC/BoS,gBAAiBb,EACjB7O,OAAQ5I,MAEhB,CACA4Z,oBAAoB7S,GAChB,MAAM0Q,EAAKuB,GAAyBhZ,KAAKwV,KAAK9C,IAAuB3L,EAAG6B,QACxE,IAAK6O,EACD,MAAM7T,EAAQ8W,kBAElB1a,KAAK0F,QAAQQ,KAAK,cAAe,CAC7BoS,gBAAiBb,EACjBjO,QAASzC,EAAGyC,QACZZ,OAAQ5I,MAEhB,CACA8Z,oBAAoBa,GAChB3a,KAAKoa,mBACLpa,KAAK0F,QAAQQ,KAAK,SAAU,CACxB0C,OAAQ5I,MAEhB,CACA+Z,yBAAyBhT,GACrB/G,KAAK0F,QAAQQ,KAAK,cAAe,CAC7BoS,gBAAiBvR,EAAGuR,gBACpB9O,QAASzC,EAAGyC,QACZZ,OAAQ5I,MAEhB,CACAga,2BAA2BjT,GACvB/G,KAAK0F,QAAQQ,KAAK,gBAAiB,CAC/BoS,gBAAiBvR,EAAGuR,gBACpB1P,OAAQ5I,MAEhB,CACAqZ,0BACIrZ,KAAKoa,kBACT,EAGJ,MAAMlB,WAAuBvK,EACzBjP,YAAYuI,EAAKlE,GACbvC,MAAMkB,OAAO4H,OAAO5H,OAAO4H,OAAO,CAAC,EAAGvG,GAAS,CAAEpD,KAAM,IAAIgY,GAAU1Q,EAAK,CAClE1B,SAAU,MACV1F,UAAWkD,EAAOlD,eAE1Bb,KAAKkX,WAAalX,KAAKkX,WAAWzR,KAAKzF,MACvCA,KAAKmX,cAAgBnX,KAAKmX,cAAc1R,KAAKzF,MAC7C,MAAMwX,EAAO,IAAI4B,GAAU,CACvBvK,MAAO9K,EAAOgS,UAAOnT,EAAYmB,EAAO8K,MACxChO,UAAWkD,EAAOlD,YAEtB2W,EAAK9R,QAAQL,GAAG,MAAOrF,KAAKkX,YAC5BM,EAAK9R,QAAQL,GAAG,SAAUrF,KAAKmX,eAC/BnX,KAAKwX,KAAOA,EACZxX,KAAKa,UAAUoN,eAAc,KACzB,IAAK,IAAI5L,EAAIrC,KAAKwX,KAAK3G,SAASzO,OAAS,EAAGC,GAAK,EAAGA,IACrCrC,KAAKwX,KAAK3G,SAASxO,GAC3BxB,UAAUE,IAAI,YAAY,EACjC,GAER,CACAmW,WAAWnQ,GACFA,EAAGwR,QAGR5H,GAAgB3Q,KAAKW,KAAKD,QAASqG,EAAGuR,gBAAgB3X,KAAKD,QAASqG,EAAGlF,MAC3E,CACAsV,cAAcpQ,GACLA,EAAGwR,QAGRzH,GAAc/J,EAAGuR,gBAAgB3X,KAAKD,QAC1C,EAGJ,MAAMka,GAA0BtU,EAAU,OAE1C,MAAMuU,GACFnb,YAAYuI,EAAKlE,GACb,IAAIC,EACJhE,KAAK8a,WAAaxU,EAAqC,QAA1BtC,EAAKD,EAAOwC,gBAA6B,IAAPvC,EAAgBA,EAAK,OACpFhE,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAI1H,KAAK8a,aAAcF,MAC9C7W,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzCV,KAAK+a,UAAYhX,EAAOiQ,SACxBhU,KAAK+a,UAAUzH,kBAAkBtT,KAAKU,QAASV,KAAK8a,gBAAWlY,EAAW,aAC1EuE,EAAanH,KAAK+a,UAAW,YAAanT,EAAiB5H,KAAKU,QAASV,KAAK8a,gBAAWlY,EAAW,SACpG,MAAMwF,EAAaH,EAAIC,cAAc,UACrCE,EAAWX,UAAUC,IAAI1H,KAAK8a,WAAW,MACzC3T,EAAapD,EAAOmB,MAAO,SAAUC,IAC7BnD,EAAQmD,GACRnF,KAAKU,QAAQ+G,UAAUC,IAAI1H,KAAK8a,gBAAWlY,EAAW,QAGtD5C,KAAKU,QAAQ+G,UAAUE,OAAO3H,KAAK8a,gBAAWlY,EAAW,WAGjEmB,EAAOlD,UAAUwH,aAAaD,GAC9BpI,KAAKU,QAAQ4H,YAAYF,GACzBpI,KAAKuI,cAAgBH,EACrB,MAAM4S,EAAa/S,EAAIC,cAAc,OACrC8S,EAAWvT,UAAUC,IAAI1H,KAAK8a,WAAW,MACzC9a,KAAKU,QAAQ4H,YAAY0S,GACzB,MAAMxS,EAAYP,EAAIC,cAAc,OACpCM,EAAUf,UAAUC,IAAI1H,KAAK8a,WAAW,MACxCjT,EAAuB9D,EAAOmB,MAAM7D,MAAM,SAAUmH,GACpDxI,KAAKuI,cAAcD,YAAYE,GAC/BxI,KAAKib,aAAezS,EACpB,MAAM0S,EAAWjT,EAAIC,cAAc,OACnCgT,EAASzT,UAAUC,IAAI1H,KAAK8a,WAAW,MACvC9a,KAAKuI,cAAcD,YAAY4S,GAC/B,MAAMC,EAAgBpX,EAAO6P,iBAC7BuH,EAAc1T,UAAUC,IAAI1H,KAAK8a,WAAW,MAC5C9a,KAAKU,QAAQ4H,YAAY6S,GACzBnb,KAAK4T,iBAAmBuH,CAC5B,EAGJ,MAAMC,WAAyB1C,GAC3BhZ,YAAYuI,EAAKlE,GACb,IAAIC,EACJ,MAAMgQ,EAAWnB,GAAStF,OAAkC,QAA1BvJ,EAAKD,EAAOpC,gBAA6B,IAAPqC,GAAgBA,GAC9EqX,EAAK,IAAInC,GAAejR,EAAK,CAC/B4G,MAAO9K,EAAO8K,MACdkH,KAAMhS,EAAOgS,KACblV,UAAWkD,EAAOlD,YAEtBW,MAAMkB,OAAO4H,OAAO5H,OAAO4H,OAAO,CAAC,EAAGvG,GAAS,CAAE0U,eAAgB4C,EAAI1a,KAAM,IAAIka,GAAW5S,EAAK,CACvF2L,iBAAkByH,EAAG1a,KAAKD,QAC1BsT,SAAUA,EACV9O,MAAOnB,EAAOmB,MACdqB,SAAUxC,EAAOgS,KAAO,WAAQnT,EAChC/B,UAAWkD,EAAOlD,eAE1Bb,KAAKsb,cAAgBtb,KAAKsb,cAAc7V,KAAKzF,MAC7CA,KAAKkF,MAAQnB,EAAOmB,MACpBlF,KAAKgU,SAAWA,EAChBC,GAAajU,KAAKgU,SAAUhU,KAAKW,KAAKiT,kBACtC5T,KAAKyY,eAAejB,KAAK9R,QAAQL,GAAG,OAAO,KACvCrF,KAAKgU,SAASP,mBAAiB,IAEnCzT,KAAKyY,eAAejB,KAAK9R,QAAQL,GAAG,UAAU,KAC1CrF,KAAKgU,SAASP,mBAAiB,IAEnCzT,KAAKW,KAAK4H,cAAcI,iBAAiB,QAAS3I,KAAKsb,cAC3D,CACI3L,eACA,OAAO3P,KAAKW,KAAKD,QAAQqP,aAC7B,CACAuL,gBACItb,KAAKgU,SAASjT,IAAI,YAAaf,KAAKgU,SAASlT,IAAI,YACrD,EAGJ,MAAMya,GAAoB,CACtBnJ,GAAI,SACJtO,KAAM,QACNuO,OAAO7O,GACH,MAAM8O,EAAIpG,EACJvB,EAASyB,EAAY5I,EAAQ,CAC/B2B,MAAOmN,EAAEnG,SAASV,OAClB9K,KAAM2R,EAAEnG,SAASR,SAAS,UAC1BhK,SAAU2Q,EAAElH,SAASG,UAEzB,OAAOZ,EAAS,CAAEnH,OAAQmH,GAAW,IACzC,EACAnK,WAAW+R,GACA,IAAI6I,GAAiB7I,EAAK5C,SAAU,CACvCd,MAAO0D,EAAK1D,MACZlN,SAAU4Q,EAAK/O,OAAO7B,SACtBuD,MAAO+E,EAASuI,WAAW,CACvBrN,MAAOoN,EAAK/O,OAAO2B,QAEvBtE,UAAW0R,EAAK1R,YAGxB4R,IAAIF,GACMA,EAAK/R,sBAAsB4a,GAG1B,IAAI5C,GAAUjG,EAAK/R,WAAY+R,EAAK0E,MAFhC,MAMnB,MAAMuE,WAA+B9I,GACjChT,YAAYuI,EAAKlE,GACb,MAAMlD,EAAYkD,EAAOqB,gBAAgBvE,UACzCW,MAAMkB,OAAO4H,OAAO5H,OAAO4H,OAAO,CAAC,EAAGvG,GAAS,CAAE1C,MAAO0C,EAAOqB,gBAAgB/D,MAAOV,KAAM,IAAIkR,GAAU5J,EAAK,CACvG/C,MAAOnB,EAAOmB,MACdrE,UAAWA,IACXA,UAAWA,KACnBb,KAAKkF,MAAQnB,EAAOmB,MACpBlF,KAAKoF,gBAAkBrB,EAAOqB,gBAC9BpF,KAAKW,KAAKsR,aAAa3J,YAAYtI,KAAKoF,gBAAgBzE,KAAKD,QACjE,EAGJ,MAAM+a,WAAqBlb,GAG3B,MAAMmb,GAAcpV,EAAU,OAC9B,MAAMqV,GACFjc,YAAYuI,EAAKlE,GACb/D,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAIgU,MAC3B3X,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzC,MAAMkb,EAAS3T,EAAIC,cAAc,MACjC0T,EAAOnU,UAAUC,IAAIgU,GAAY,MACjC1b,KAAKU,QAAQ4H,YAAYsT,EAC7B,EAGJ,MAAMC,WAA4BlN,EAC9BjP,YAAYuI,EAAKlE,GACbvC,MAAMkB,OAAO4H,OAAO5H,OAAO4H,OAAO,CAAC,EAAGvG,GAAS,CAAEpD,KAAM,IAAIgb,GAAc1T,EAAK,CACtEpH,UAAWkD,EAAOlD,cAE9B,EAGJ,MAAMib,GAAuB,CACzB1J,GAAI,YACJtO,KAAM,QACNuO,OAAO7O,GACH,MACMmH,EAASyB,EAAY5I,EAAQ,CAC/B7C,KAFMuL,EAEEC,SAASR,SAAS,eAE9B,OAAOhB,EAAS,CAAEnH,OAAQmH,GAAW,IACzC,EACAnK,WAAW+R,GACA,IAAIsJ,GAAoBtJ,EAAK5C,SAAU,CAC1Cd,MAAO0D,EAAK1D,MACZhO,UAAW0R,EAAK1R,YAGxB4R,IAAIF,GACMA,EAAK/R,sBAAsBqb,GAG1B,IAAIJ,GAAalJ,EAAK/R,YAFlB,MAMbub,GAAczV,EAAU,OAC9B,MAAM0V,GACFtc,YAAYuI,EAAKlE,GACb/D,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAIqU,MAC3BhY,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzCyG,EAAapD,EAAOmB,MAAO,YAAa+W,IAChCA,EACAjc,KAAKU,QAAQ+G,UAAUC,IAAIqU,QAAYnZ,EAAW,QAGlD5C,KAAKU,QAAQ+G,UAAUE,OAAOoU,QAAYnZ,EAAW,WAG7D,MAAMwF,EAAaH,EAAIC,cAAc,UACrCE,EAAWX,UAAUC,IAAIqU,GAAY,MACrChY,EAAOlD,UAAUwH,aAAaD,GAC9BpI,KAAKU,QAAQ4H,YAAYF,GACzBpI,KAAKuI,cAAgBH,EACrB,MAAMI,EAAYP,EAAIC,cAAc,OACpCM,EAAUf,UAAUC,IAAIqU,GAAY,MACpClU,EAAuB9D,EAAOmB,MAAM7D,MAAM,SAAUmH,GACpDxI,KAAKuI,cAAcD,YAAYE,GAC/BxI,KAAKib,aAAezS,CACxB,EAGJ,MAAM0T,GACFxc,YAAYuI,EAAKlE,GACb/D,KAAK0F,QAAU,IAAIC,EACnB3F,KAAK0I,SAAW1I,KAAK0I,SAASjD,KAAKzF,MACnCA,KAAKkF,MAAQnB,EAAOmB,MACpBlF,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAKW,KAAO,IAAIqb,GAAY/T,EAAK,CAC7B/C,MAAOnB,EAAOmB,MACdrE,UAAWkD,EAAOlD,YAEtBb,KAAKW,KAAK4H,cAAcI,iBAAiB,QAAS3I,KAAK0I,SAC3D,CACAA,WACI1I,KAAK0F,QAAQQ,KAAK,QAAS,CACvB0C,OAAQ5I,MAEhB,EAGJ,MAAMmc,GACFzc,YAAYuI,EAAKlE,GACb/D,KAAKoc,aAAepc,KAAKoc,aAAa3W,KAAKzF,MAC3CA,KAAKqc,IAAM,IAAIH,GAAkBjU,EAAK,CAClC/C,MAAOnB,EAAOuY,UACdzb,UAAWoM,EAAUM,WAEzBvN,KAAKqc,IAAI3W,QAAQL,GAAG,QAASrF,KAAKoc,cAClCpc,KAAKuc,IAAM,IAAIrD,GAAejR,EAAK,CAC/B4G,MAAO8D,KACP9R,UAAWoM,EAAUM,WAEzBvN,KAAKkF,MAAQnB,EAAOmB,MACpBiC,EAAanH,KAAKkF,MAAO,YAAa+W,IAClCjc,KAAKwc,eAAetX,MAAMnE,IAAI,WAAYkb,GAC1Cjc,KAAKyc,kBAAkB5b,UAAUE,IAAI,UAAWkb,EAAA,GAExD,CACIO,qBACA,OAAOxc,KAAKqc,GAChB,CACII,wBACA,OAAOzc,KAAKuc,GAChB,CACAH,eACIpc,KAAKkF,MAAMnE,IAAI,YAAY,EAC/B,EAGJ,MAAM2b,GACFhd,YAAYc,EAAYmc,GACpB3c,KAAKS,YAAcD,EACnBR,KAAKsU,SAAWqI,CACpB,CACIxX,YACA,IAAInB,EACJ,OAAqE,QAA7DA,EAAKhE,KAAKS,YAAY+b,eAAetX,MAAMpE,IAAI,gBAA6B,IAAPkD,EAAgBA,EAAK,EACtG,CACImB,UAAMA,GACNnF,KAAKS,YAAY+b,eAAetX,MAAMnE,IAAI,QAASoE,EACvD,CACI8W,eACA,OAAOjc,KAAKS,YAAYyE,MAAMpE,IAAI,WACtC,CACImb,aAASA,GACTjc,KAAKS,YAAYyE,MAAMnE,IAAI,WAAYkb,EAC3C,CACIpL,eACA,OAAO7Q,KAAKsU,SAASzD,QACzB,CACAmH,UAAUxU,GACN,OAAOxD,KAAKsU,SAAS0D,UAAUxU,EACnC,CACAuU,UAAUvU,GACN,OAAOxD,KAAKsU,SAASyD,UAAUvU,EACnC,CACAyU,aAAatD,GACT,OAAO3U,KAAKsU,SAAS2D,aAAatD,EACtC,CACAuD,OAAO1U,GACH,OAAOxD,KAAKsU,SAAS4D,OAAO1U,EAChC,CACAkE,IAAI+K,EAAKkD,GACL3V,KAAKsU,SAAS5M,IAAI+K,EAAKkD,EAC3B,CACAhO,OAAO8K,GACHzS,KAAKsU,SAAS3M,OAAO8K,EACzB,CACAkF,SAAS9L,EAAQrJ,EAAKmS,GAClB,OAAO3U,KAAKsU,SAASqD,SAAS9L,EAAQrJ,EAAKmS,EAC/C,CACAkD,WAAWhM,EAAQrJ,EAAKmS,GACpB,OAAO3U,KAAKsU,SAASuD,WAAWhM,EAAQrJ,EAAKmS,EACjD,CACAH,SAAShR,GACL,OAAOxD,KAAKsU,SAASE,SAAShR,EAClC,EAGJ,MAAMoZ,WAAexI,GACjB1U,YAAYc,EAAYyW,GACpBzV,MAAMhB,EAAY,IAAIqW,GAAQrW,EAAWiY,eAAgBxB,IACzDjX,KAAK6c,WAAa7c,KAAK6c,WAAWpX,KAAKzF,MACvCA,KAAK8c,cAAgB9c,KAAK8c,cAAcrX,KAAKzF,MAC7CA,KAAK+c,UAAY/c,KAAK+c,UAAUtX,KAAKzF,MACrCA,KAAKoW,SAAW,IAAIzQ,EACpB3F,KAAKgd,YAAc,IAAIC,IACvBjd,KAAKsU,SAASjP,GAAG,UAAW0B,IACxB/G,KAAKoW,SAASlQ,KAAK,SAAU,CACzBC,MAAOY,GACX,IAEJ/G,KAAKsU,SAASjP,GAAG,UAAW0B,IACxB/G,KAAKoW,SAASlQ,KAAK,SAAU,CACzBC,MAAOY,GACX,IAEJ/G,KAAKS,YAAYyc,IAAIC,cAAczX,QAAQL,GAAG,SAAUrF,KAAK+c,WAC7D/c,KAAKS,YAAY2c,QAAQ1X,QAAQL,GAAG,MAAOrF,KAAK6c,YAChD7c,KAAKS,YAAY2c,QAAQ1X,QAAQL,GAAG,SAAUrF,KAAK8c,eACnD9c,KAAKS,YAAY2c,QAAQ/H,MAAMjP,SAASiX,IACpCrd,KAAKsd,cAAcD,EAAA,GAE3B,CACIE,YACA,OAAOvd,KAAKS,YAAY2c,QAAQ/H,MAAM5D,KAAK4L,IACvC,MAAM5K,EAAMzS,KAAKgd,YAAYlc,IAAIuc,GACjC,IAAK5K,EACD,MAAM7O,EAAQgS,oBAElB,OAAOnD,CAAA,GAEf,CACA+K,QAAQha,GACJ,MAAMyE,EAAMjI,KAAKS,YAAYE,KAAKD,QAAQqP,cACpCsN,EAAK,IAAIlB,GAAkBlU,EAAK,CAClCqU,UAAWrS,EAASuI,WAAW,CAC3ByJ,UAAU,EACV9W,MAAO3B,EAAO2B,QAElBD,MAAO+E,EAASuI,WAAW,CACvByJ,UAAU,MAGlBjc,KAAKS,YAAYiH,IAAI2V,EAAI7Z,EAAO3B,OAChC,MAAM4Q,EAAMzS,KAAKgd,YAAYlc,IAAIuc,GACjC,IAAK5K,EACD,MAAM7O,EAAQgS,oBAElB,OAAOnD,CACX,CACAgL,WAAW5b,GACP7B,KAAKS,YAAYkH,OAAO9F,EAC5B,CACAwD,GAAGC,EAAWC,GACV,MAAMC,EAAKD,EAAQE,KAAKzF,MAIxB,OAHAA,KAAKoW,SAAS/Q,GAAGC,GAAYyB,IACzBvB,EAAGuB,EAAGZ,MAAK,IAERnG,IACX,CACAsd,cAAcD,GACV,MAAMhJ,EAAUrU,KAAKsU,SAAS,QAAWkB,MAAM/C,GAAQA,EAAIhS,cAAgB4c,EAAGZ,oBAC9E,IAAKpI,EACD,MAAMzQ,EAAQgS,oBAElB,MAAMnD,EAAM,IAAIiK,GAAWW,EAAIhJ,GAC/BrU,KAAKgd,YAAYjc,IAAIsc,EAAI5K,EAC7B,CACAoK,WAAW9V,GACP/G,KAAKsd,cAAcvW,EAAGiE,KAC1B,CACA8R,cAAc/V,GAEV,IADY/G,KAAKgd,YAAYlc,IAAIiG,EAAGiE,MAEhC,MAAMpH,EAAQgS,oBAElB5V,KAAKgd,YAAY/G,OAAOlP,EAAGiE,KAC/B,CACA+R,UAAUhW,GACN/G,KAAKoW,SAASlQ,KAAK,SAAU,CACzBC,MAAO,IAAIvE,EAAiB5B,KAAM+G,EAAGC,WAE7C,EAGJ,MAAM0W,IAAqB,EAC3B,MAAMC,GACFje,cACIM,KAAK4d,sBAAwB5d,KAAK4d,sBAAsBnY,KAAKzF,MAC7DA,KAAK6d,MAAQ7T,GAAY,GACzBhK,KAAKmd,cAAgBnT,EAAY0T,IACjC1d,KAAK+U,OAAS,EAClB,CACArN,IAAIsD,EAAM2K,GACN,MAAM9T,EAAQ8T,QAA6CA,EAAY3V,KAAK+U,OAAO3S,OACnFpC,KAAK+U,OAAOc,OAAOhU,EAAO,EAAGmJ,GAC7BA,EAAKtF,QAAQL,GAAG,SAAUrF,KAAK4d,uBAC/B5d,KAAK8d,gBACT,CACAnW,OAAOqD,GACH,MAAMnJ,EAAQ7B,KAAK+U,OAAOiB,QAAQhL,GAC9BnJ,EAAQ,IAGZ7B,KAAK+U,OAAOc,OAAOhU,EAAO,GAC1BmJ,EAAKtF,QAAQK,IAAI,SAAU/F,KAAK4d,uBAChC5d,KAAK8d,iBACT,CACAA,iBACI,GAA2B,IAAvB9d,KAAK+U,OAAO3S,OAGZ,OAFApC,KAAKmd,cAAcnW,SAAW0W,QAC9B1d,KAAK6d,MAAM7W,UAAW,GAG1B,MAAM+W,EAAgB/d,KAAK+U,OAAOiJ,WAAWC,GAAMA,EAAEjX,WACjD+W,EAAgB,GAChB/d,KAAK+U,OAAO3O,SAAQ,CAAC6X,EAAG5b,KACpB4b,EAAEjX,SAAiB,IAAN3E,CAAM,IAEvBrC,KAAKmd,cAAcnW,SAAW,IAG9BhH,KAAK+U,OAAO3O,SAAQ,CAAC6X,EAAG5b,KACpB4b,EAAEjX,SAAW3E,IAAM0b,CAAA,IAEvB/d,KAAKmd,cAAcnW,SAAW+W,GAElC/d,KAAK6d,MAAM7W,UAAW,CAC1B,CACA4W,sBAAsB7W,GAClB,GAAIA,EAAGC,SAAU,CACb,MAAMnF,EAAQ7B,KAAK+U,OAAOiJ,WAAWC,GAAMA,IAAMlX,EAAG6B,SACpD5I,KAAK+U,OAAO3O,SAAQ,CAAC6X,EAAG5b,KACpB4b,EAAEjX,SAAW3E,IAAMR,CAAA,IAEvB7B,KAAKmd,cAAcnW,SAAWnF,CAClC,MAEI7B,KAAK8d,gBAEb,EAGJ,MAAMI,GAAc5X,EAAU,OAC9B,MAAM6X,GACFze,YAAYuI,EAAKlE,GACb/D,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAIwW,KAAetD,MAC1C7W,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzCuG,EAAUlD,EAAO8Z,MAAOjW,EAAiB5H,KAAKU,QAASwd,QAAYtb,EAAW,SAC9E,MAAM4F,EAAYP,EAAIC,cAAc,OACpCM,EAAUf,UAAUC,IAAIwW,GAAY,MACpCle,KAAKU,QAAQ4H,YAAYE,GACzBxI,KAAKoe,aAAe5V,EACpB,MAAMwS,EAAa/S,EAAIC,cAAc,OACrC8S,EAAWvT,UAAUC,IAAIwW,GAAY,MACrCle,KAAKU,QAAQ4H,YAAY0S,GACzB,MAAMqD,EAAeta,EAAOua,gBAC5BD,EAAa5W,UAAUC,IAAIwW,GAAY,MACvCle,KAAKU,QAAQ4H,YAAY+V,GACzBre,KAAKse,gBAAkBD,CAC3B,EAGJ,MAAME,WAAsB7F,GACxBhZ,YAAYuI,EAAKlE,GACb,MAAMya,EAAK,IAAItF,GAAejR,EAAK,CAC/B4G,MAAO9K,EAAO8K,MACdhO,UAAWkD,EAAOlD,YAEhBqc,EAAM,IAAIS,GAChBnc,MAAM,CACFqN,MAAO9K,EAAO8K,MACd4J,eAAgB+F,EAChB7d,KAAM,IAAIwd,GAAQlW,EAAK,CACnBqW,gBAAiBE,EAAG7d,KAAKD,QACzBmd,MAAOX,EAAIW,MACXhd,UAAWkD,EAAOlD,cAG1Bb,KAAK6c,WAAa7c,KAAK6c,WAAWpX,KAAKzF,MACvCA,KAAK8c,cAAgB9c,KAAK8c,cAAcrX,KAAKzF,MAC7CA,KAAKye,SAAW,IAAI5J,IAAiB,IAAM,OAC3C7U,KAAKye,SAAS/Y,QAAQL,GAAG,MAAOrF,KAAK6c,YACrC7c,KAAKye,SAAS/Y,QAAQL,GAAG,SAAUrF,KAAK8c,eACxC9c,KAAKkd,IAAMA,CACf,CACIE,cACA,OAAOpd,KAAKye,QAChB,CACA/W,IAAI2V,EAAI1H,GACJ3V,KAAKye,SAAS/W,IAAI2V,EAAI1H,EAC1B,CACAhO,OAAO9F,GACH7B,KAAKye,SAAS9W,OAAO3H,KAAKye,SAASpJ,MAAMxT,GAC7C,CACAgb,WAAW9V,GACP,MAAMsW,EAAKtW,EAAGiE,KACd2F,GAAgB3Q,KAAKW,KAAKyd,aAAcf,EAAGb,eAAe7b,KAAKD,QAASqG,EAAGlF,OAC3Ewb,EAAGb,eAAe3b,UAAUE,IAAI,SAAUf,KAAKa,WAC/Cb,KAAKyY,eAAejB,KAAK9P,IAAI2V,EAAGZ,kBAAmB1V,EAAGlF,OACtD7B,KAAKkd,IAAIxV,IAAI2V,EAAGnY,MAAM7D,MAAM,YAChC,CACAyb,cAAc/V,GACV,MAAMsW,EAAKtW,EAAGiE,KACd8F,GAAcuM,EAAGb,eAAe7b,KAAKD,SACrC2c,EAAGb,eAAe3b,UAAUE,IAAI,SAAU,MAC1Cf,KAAKyY,eAAejB,KAAK7P,OAAO0V,EAAGZ,mBACnCzc,KAAKkd,IAAIvV,OAAO0V,EAAGnY,MAAM7D,MAAM,YACnC,EAGJ,MAAMqd,GAAiB,CACnBtM,GAAI,MACJtO,KAAM,QACNuO,OAAO7O,GACH,MAAM8O,EAAIpG,EACJvB,EAASyB,EAAY5I,EAAQ,CAC/B+Z,MAAOjL,EAAEnG,SAASL,MAAMwG,EAAEnG,SAASN,OAAO,CAAE1G,MAAOmN,EAAEnG,SAASV,UAC9D9K,KAAM2R,EAAEnG,SAASR,SAAS,SAE9B,OAAKhB,GAAkC,IAAxBA,EAAO4S,MAAMnb,OAGrB,CAAEoB,OAAQmH,GAFN,IAGf,EACAnK,WAAW+R,GACP,MAAMoM,EAAI,IAAIJ,GAAchM,EAAK5C,SAAU,CACvCd,MAAO0D,EAAK1D,MACZhO,UAAW0R,EAAK1R,YAcpB,OAZA0R,EAAK/O,OAAO+Z,MAAMnX,SAASkM,IACvB,MAAM+K,EAAK,IAAIlB,GAAkB5J,EAAK5C,SAAU,CAC5C2M,UAAWrS,EAASuI,WAAW,CAC3ByJ,UAAU,EACV9W,MAAOmN,EAAEnN,QAEbD,MAAO+E,EAASuI,WAAW,CACvByJ,UAAU,MAGlB0C,EAAEjX,IAAI2V,EAAA,IAEHsB,CACX,EACAlM,IAAIF,GACMA,EAAK/R,sBAAsB+d,GAG1B,IAAI3B,GAAOrK,EAAK/R,WAAY+R,EAAK0E,MAF7B,MAMnB,SAAS2H,GAAsBC,EAAQtM,GACnC,MAAMuM,EAAKD,EAAOxM,OAAOE,EAAK/O,QAC9B,IAAKsb,EACD,OAAO,KAEX,MAAMle,EAAWsL,EAAcd,SAASG,QAAQgH,EAAK/O,OAAO,UAAanC,MACnEL,EAASkL,EAAcd,SAASG,QAAQgH,EAAK/O,OAAO,QAAWnC,MACrE,OAAOwd,EAAOre,WAAW,CACrBqO,MAAO8D,KACPhD,SAAU4C,EAAK5C,SACfnM,OAAQ1B,EAAUY,OAAO4H,OAAO5H,OAAO4H,OAAO,CAAC,EAAGwU,EAAGtb,QAAS,CAAE5C,SAAUA,EAAUI,OAAQA,KAC5FH,UAAWoM,EAAUM,OAAO,CACxB3M,SAAUA,EACVI,OAAQA,KAGpB,CAEA,MAAM+d,GACFrf,cACIM,KAAKY,UAAW,EAChBZ,KAAK0F,QAAU,IAAIC,CACvB,CACA1E,UAAY,CACZ+d,OACQhf,KAAKY,UAGTZ,KAAK0F,QAAQQ,KAAK,OAAQ,CACtB0C,OAAQ5I,MAEhB,EAGJ,MAAMif,GACFvf,YAAYuI,EAAKiX,GACblf,KAAKmf,WAAY,EACjBnf,KAAKof,SAAW,KAChBpf,KAAKqf,QAAUrf,KAAKqf,QAAQ5Z,KAAKzF,MACjCA,KAAKsf,KAAOrX,EACZjI,KAAK0F,QAAU,IAAIC,EACnB3F,KAAKuf,UAAYL,EACjBlf,KAAKwf,WACT,CACI5e,eACA,OAAOZ,KAAKmf,SAChB,CACIve,aAAS6e,GACTzf,KAAKmf,UAAYM,EACbzf,KAAKmf,UACLnf,KAAK0f,cAGL1f,KAAKwf,WAEb,CACAve,UACIjB,KAAK0f,aACT,CACAA,cACI,GAAsB,OAAlB1f,KAAKof,SACL,OAEJ,MAAMtP,EAAM9P,KAAKsf,KAAKtP,YAClBF,GACAA,EAAI6P,cAAc3f,KAAKof,UAE3Bpf,KAAKof,SAAW,IACpB,CACAI,YAEI,GADAxf,KAAK0f,cACD1f,KAAKuf,WAAa,EAClB,OAEJ,MAAMzP,EAAM9P,KAAKsf,KAAKtP,YAClBF,IACA9P,KAAKof,SAAWtP,EAAI8P,YAAY5f,KAAKqf,QAASrf,KAAKuf,WAE3D,CACAF,UACQrf,KAAKmf,WAGTnf,KAAK0F,QAAQQ,KAAK,OAAQ,CACtB0C,OAAQ5I,MAEhB,EAGJ,MAAM6f,GACFngB,YAAYqE,GACR/D,KAAK8f,eAAiB9f,KAAK8f,eAAera,KAAKzF,MAC/CA,KAAK+f,OAAShc,EAAOgc,OACrB/f,KAAKggB,OAASjc,EAAOic,OACrBhgB,KAAK0F,QAAU,IAAIC,EACnB3F,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKqB,MAAMqE,QAAQL,GAAG,SAAUrF,KAAK8f,gBACrC9f,KAAKmB,OAAS4C,EAAO5C,OACrBnB,KAAKyE,MACT,CACAA,OACI,MAAMwb,EAAcjgB,KAAKmB,OAAOsD,YACZ7B,IAAhBqd,IACAjgB,KAAKqB,MAAM2F,SAAWhH,KAAK+f,OAAOE,GAE1C,CACAC,OAAOlZ,GACHhH,KAAKggB,OAAOhgB,KAAKmB,OAAQ6F,EAC7B,CACA8Y,eAAe/Y,GACX/G,KAAKkgB,OAAOnZ,EAAGC,UACfhH,KAAK0F,QAAQQ,KAAK,SAAU,CACxBsD,QAASzC,EAAGyC,QACZxC,SAAUD,EAAGC,SACb4B,OAAQ5I,MAEhB,EAGJ,SAASmgB,GAAWC,EAAQC,GACxB,KAAOD,EAAOhe,OAASie,GACnBD,EAAOta,UAAKlD,EAEpB,CACA,SAAS0d,GAAiBD,GACtB,MAAMD,EAAS,GAEf,OADAD,GAAWC,EAAQC,GACZrW,EAAYoW,EACvB,CACA,SAASG,GAAoBH,GACzB,MAAMve,EAAQue,EAAOpK,aAAQpT,GAC7B,OAAOd,EAAUD,EAAQ,EAAIue,EAASA,EAAOI,MAAM,EAAG3e,GAC1D,CACA,SAAS4e,GAAmBL,EAAQM,GAChC,MAAMC,EAAY,IAAIJ,GAAoBH,GAASM,GAOnD,OANIC,EAAUve,OAASge,EAAOhe,OAC1Bue,EAAU9K,OAAO,EAAG8K,EAAUve,OAASge,EAAOhe,QAG9C+d,GAAWQ,EAAWP,EAAOhe,QAE1Bue,CACX,CAEA,MAAMC,GACFlhB,YAAYqE,GACR/D,KAAKqf,QAAUrf,KAAKqf,QAAQ5Z,KAAKzF,MACjCA,KAAK6gB,QAAU9c,EAAOgc,OACtB/f,KAAKmB,OAAS4C,EAAO5C,OACrBnB,KAAK0F,QAAU,IAAIC,EACnB3F,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAK2W,OAAS5S,EAAO4S,OACrB3W,KAAK2W,OAAOjR,QAAQL,GAAG,OAAQrF,KAAKqf,SACpCrf,KAAKyE,MACT,CACAxD,UACIjB,KAAK2W,OAAO1V,SAChB,CACAwD,OACI,MAAMwb,EAAcjgB,KAAKmB,OAAOsD,OAChC,QAAoB7B,IAAhBqd,EACA,OAEJ,MAAMG,EAASpgB,KAAKqB,MAAM2F,SACpB0Z,EAAW1gB,KAAK6gB,QAAQZ,GAC9BjgB,KAAKqB,MAAM2F,SAAWyZ,GAAmBL,EAAQM,GACjD1gB,KAAK0F,QAAQQ,KAAK,SAAU,CACxBc,SAAU0Z,EACV9X,OAAQ5I,MAEhB,CACAqf,QAAQ1E,GACJ3a,KAAKyE,MACT,EAGJ,MAAMqc,GACFphB,YAAYqhB,GACR/gB,KAAK+gB,YAAcA,CACvB,CACApX,UAAUtI,GACN,OAAOrB,KAAK+gB,YAAY3W,QAAO,CAACO,EAAQgU,IAC7BA,EAAEhV,UAAUgB,IACpBtJ,EACP,EAEJ,SAAS2f,GAAerC,EAAGsC,GACvB,GAAItC,aAAasC,EACb,OAAOtC,EAEX,GAAIA,aAAamC,GAAqB,CAClC,MAAMnW,EAASgU,EAAEoC,YAAY3W,QAAO,CAAC8W,EAAWC,IACxCD,IAGGC,aAAcF,EAAkBE,EAAK,OAC7C,MACH,GAAIxW,EACA,OAAOA,CAEf,CACA,OAAO,IACX,CAEA,MAAMyW,GACF1hB,YAAYqE,GACR/D,KAAKqhB,OAASpX,EAASuI,WAAW,CAC9B8O,IAAKvd,EAAOud,IACZC,IAAKxd,EAAOwd,KAEpB,CACA5X,UAAUtI,GACN,MAAMigB,EAAMthB,KAAKqhB,OAAOvgB,IAAI,OACtBygB,EAAMvhB,KAAKqhB,OAAOvgB,IAAI,OAC5B,OAAO0gB,KAAKD,IAAIC,KAAKF,IAAIjgB,EAAOkgB,GAAMD,EAC1C,EAGJ,MAAMG,GACF/hB,YAAY8J,GACRxJ,KAAKqhB,OAASpX,EAASuI,WAAW,CAC9BhJ,QAASA,GAEjB,CACIA,cACA,OAAOxJ,KAAKqhB,OAAOvgB,IAAI,UAC3B,CACA6I,UAAUtI,GACN,MAAMoI,EAAOzJ,KAAKqhB,OAAOvgB,IAAI,WAC7B,OAAoB,IAAhB2I,EAAKrH,QAGOqH,EAAKzD,QAAQgF,GAClBA,EAAK3J,QAAUA,IACvBe,OAAS,EAJDf,EAKcoI,EAAK,GAAGpI,KACrC,EAGJ,MAAMqgB,GACFhiB,YAAYqE,GACR/D,KAAKqhB,OAASpX,EAASuI,WAAW,CAC9B8O,IAAKvd,EAAOud,IACZC,IAAKxd,EAAOwd,KAEpB,CACII,eACA,OAAO3hB,KAAKqhB,OAAOvgB,IAAI,MAC3B,CACI8gB,eACA,OAAO5hB,KAAKqhB,OAAOvgB,IAAI,MAC3B,CACA6I,UAAUtI,GACN,MAAMigB,EAAMthB,KAAKqhB,OAAOvgB,IAAI,OACtBygB,EAAMvhB,KAAKqhB,OAAOvgB,IAAI,OAC5B,IAAI6J,EAAStJ,EAOb,OANKW,EAAQuf,KACT5W,EAAS6W,KAAKF,IAAI3W,EAAQ4W,IAEzBvf,EAAQsf,KACT3W,EAAS6W,KAAKD,IAAI5W,EAAQ2W,IAEvB3W,CACX,EAGJ,MAAMkX,GACFniB,YAAYoiB,EAAMC,EAAS,GACvB/hB,KAAK8hB,KAAOA,EACZ9hB,KAAK+hB,OAASA,CAClB,CACApY,UAAUtI,GACN,MAAMgJ,EAAIrK,KAAK+hB,OAAS/hB,KAAK8hB,KAE7B,OAAOzX,EADGmX,KAAKQ,OAAO3gB,EAAQgJ,GAAKrK,KAAK8hB,MACzB9hB,KAAK8hB,IACxB,EAGJ,MAAMG,GAAc3b,EAAU,OAC9B,MAAM4b,GACFxiB,YAAYuI,EAAKlE,GACb/D,KAAK8f,eAAiB9f,KAAK8f,eAAera,KAAKzF,MAC/CA,KAAKmiB,OAASpe,EAAOmB,MACrBlF,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAIua,MAC3Ble,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzC,MAAM0hB,EAAana,EAAIC,cAAc,UACrCka,EAAW3a,UAAUC,IAAIua,GAAY,MACrC9a,EAAanH,KAAKmiB,OAAQ,WAAY1Y,IAClCsH,GAAoBqR,GACpB3Y,EAAKrD,SAAQ,CAAC4E,EAAMnJ,KAChB,MAAMwgB,EAAapa,EAAIC,cAAc,UACrCma,EAAWC,QAAQzgB,MAAQ0gB,OAAO1gB,GAClCwgB,EAAWva,YAAckD,EAAKrL,KAC9B0iB,EAAWhhB,MAAQkhB,OAAOvX,EAAK3J,OAC/B+gB,EAAW9Z,YAAY+Z,EAAA,GAC3B,IAEJte,EAAOlD,UAAUwH,aAAa+Z,GAC9BpiB,KAAKU,QAAQ4H,YAAY8Z,GACzBpiB,KAAKwiB,cAAgBJ,EACrB,MAAMlH,EAAWjT,EAAIC,cAAc,OACnCgT,EAASzT,UAAUC,IAAIua,GAAY,MACnC/G,EAAS5S,YAAYiI,GAAqBtI,EAAK,aAC/CjI,KAAKU,QAAQ4H,YAAY4S,GACzBnX,EAAO1C,MAAMqE,QAAQL,GAAG,SAAUrF,KAAK8f,gBACvC9f,KAAK+J,OAAShG,EAAO1C,MACrBrB,KAAKyiB,SACT,CACAA,UACIziB,KAAKwiB,cAAcnhB,MAAQkhB,OAAOviB,KAAK+J,OAAO/C,SAClD,CACA8Y,iBACI9f,KAAKyiB,SACT,EAGJ,MAAMC,GACFhjB,YAAYuI,EAAKlE,GACb/D,KAAK2iB,gBAAkB3iB,KAAK2iB,gBAAgBld,KAAKzF,MACjDA,KAAKkF,MAAQnB,EAAOmB,MACpBlF,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAKW,KAAO,IAAIuhB,GAASja,EAAK,CAC1B/C,MAAOlF,KAAKkF,MACZ7D,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,YAEpBb,KAAKW,KAAK6hB,cAAc7Z,iBAAiB,SAAU3I,KAAK2iB,gBAC5D,CACAA,gBAAgBC,GACZ,MACMC,EADa/gB,EAAU8gB,EAAEE,eACJC,gBAAgB/X,KAAK,GAChD,IAAK6X,EACD,OAEJ,MAAMG,EAAYC,OAAOJ,EAAQP,QAAQzgB,OACzC7B,KAAKqB,MAAM2F,SAAWhH,KAAKkF,MAAMpE,IAAI,WAAWkiB,GAAW3hB,KAC/D,EAGJ,MAAM6hB,GAAc5c,EAAU,OAC9B,MAAM6c,GACFzjB,YAAYuI,EAAKlE,GACb/D,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAIwb,MAC3Bnf,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzCuG,EAAUlD,EAAOqf,MAAOxb,EAAiB5H,KAAKU,QAASwiB,QAAYtgB,EAAW,MAClF,EAGJ,MAAMygB,GACF3jB,YAAYuI,EAAKlE,GACb/D,KAAKojB,MAAQpZ,GAAY,GACzBhK,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAKW,KAAO,IAAIwiB,GAAUlb,EAAK,CAC3Bmb,MAAOpjB,KAAKojB,MACZviB,UAAWb,KAAKa,WAExB,EAGJ,MAAMyiB,GAAchd,EAAU,OAC9B,MAAMid,GACF7jB,YAAYuI,EAAKlE,GACb/D,KAAKwjB,UAAYxjB,KAAKwjB,UAAU/d,KAAKzF,MACrCA,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAI4b,MAC3Bvf,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzCV,KAAKmiB,OAASpe,EAAOmB,MACrBlF,KAAKmiB,OAAOzc,QAAQL,GAAG,SAAUrF,KAAKwjB,WACtC,MAAMC,EAAYxb,EAAIC,cAAc,SACpCub,EAAUhc,UAAUC,IAAI4b,GAAY,MACpCG,EAAU3f,KAAO,OACjBC,EAAOlD,UAAUwH,aAAaob,GAC9BzjB,KAAKU,QAAQ4H,YAAYmb,GACzBzjB,KAAK0jB,aAAeD,EACpB1f,EAAO1C,MAAMqE,QAAQL,GAAG,SAAUrF,KAAKwjB,WACvCxjB,KAAK+J,OAAShG,EAAO1C,MACrBrB,KAAKsW,SACT,CACAA,UACI,MAAMqN,EAAY3jB,KAAKmiB,OAAOrhB,IAAI,aAClCd,KAAK0jB,aAAariB,MAAQsiB,EAAU3jB,KAAK+J,OAAO/C,SACpD,CACAwc,YACIxjB,KAAKsW,SACT,EAGJ,MAAMsN,GACFlkB,YAAYuI,EAAKlE,GACb/D,KAAK6jB,eAAiB7jB,KAAK6jB,eAAepe,KAAKzF,MAC/CA,KAAK8jB,QAAU/f,EAAO6G,OACtB5K,KAAKkF,MAAQnB,EAAOmB,MACpBlF,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAKW,KAAO,IAAI4iB,GAAStb,EAAK,CAC1B/C,MAAOnB,EAAOmB,MACd7D,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,YAEpBb,KAAKW,KAAK+iB,aAAa/a,iBAAiB,SAAU3I,KAAK6jB,eAC3D,CACAA,eAAejB,GACX,MACMvhB,EADYS,EAAU8gB,EAAEE,eACNzhB,MAClB0iB,EAAc/jB,KAAK8jB,QAAQziB,GAC5BW,EAAQ+hB,KACT/jB,KAAKqB,MAAM2F,SAAW+c,GAE1B/jB,KAAKW,KAAK2V,SACd,EAGJ,SAAS0N,GAAa3iB,GAClB,OAAOkhB,OAAOlhB,EAClB,CACA,SAAS4iB,GAAgB5iB,GACrB,MAAc,UAAVA,KAGKA,CACb,CACA,SAAS6iB,GAAiB7iB,GACtB,OAAO2iB,GAAa3iB,EACxB,CAEA,MAAM8iB,GACFzkB,YAAYC,GACRK,KAAKL,KAAOA,CAChB,CACAykB,WACI,OAAOnB,OAAOjjB,KAAKL,KACvB,CACAU,WACI,OAAOL,KAAKL,IAChB,EAEJ,MAAM0kB,GAAuB,CACzB,KAAM,CAAClb,EAAIC,IAAOoY,KAAK8C,IAAInb,EAAIC,GAC/B,IAAK,CAACD,EAAIC,IAAOD,EAAKC,EACtB,IAAK,CAACD,EAAIC,IAAOD,EAAKC,EACtB,IAAK,CAACD,EAAIC,IAAOD,EAAKC,EACtB,IAAK,CAACD,EAAIC,IAAOD,EAAKC,EACtB,IAAK,CAACD,EAAIC,IAAOD,EAAKC,EACtB,KAAM,CAACD,EAAIC,IAAOD,GAAMC,EACxB,KAAM,CAACD,EAAIC,IAAOD,GAAMC,EACxB,MAAO,CAACD,EAAIC,IAAOD,IAAOC,EAC1B,IAAK,CAACD,EAAIC,IAAOD,EAAKC,EACtB,IAAK,CAACD,EAAIC,IAAOD,EAAKC,EACtB,IAAK,CAACD,EAAIC,IAAOD,EAAKC,GAE1B,MAAMmb,GACF7kB,YAAY8kB,EAAUC,EAAMC,GACxB1kB,KAAKykB,KAAOA,EACZzkB,KAAKwkB,SAAWA,EAChBxkB,KAAK0kB,MAAQA,CACjB,CACAN,WACI,MAAMO,EAAKN,GAAqBrkB,KAAKwkB,UACrC,IAAKG,EACD,MAAM,IAAIxgB,MAAM,gCAAgCnE,KAAKwkB,YAEzD,OAAOG,EAAG3kB,KAAKykB,KAAKL,WAAYpkB,KAAK0kB,MAAMN,WAC/C,CACA/jB,WACI,MAAO,CACH,KACAL,KAAKykB,KAAKpkB,WACVL,KAAKwkB,SACLxkB,KAAK0kB,MAAMrkB,WACX,KACFC,KAAK,IACX,EAEJ,MAAMskB,GAAsB,CACxB,IAAM7iB,GAAMA,EACZ,IAAMA,IAAOA,EACb,IAAMA,IAAOA,GAEjB,MAAM8iB,GACFnlB,YAAY8kB,EAAUM,GAClB9kB,KAAKwkB,SAAWA,EAChBxkB,KAAK+kB,WAAaD,CACtB,CACAV,WACI,MAAMO,EAAKC,GAAoB5kB,KAAKwkB,UACpC,IAAKG,EACD,MAAM,IAAIxgB,MAAM,+BAA+BnE,KAAKwkB,YAExD,OAAOG,EAAG3kB,KAAK+kB,WAAWX,WAC9B,CACA/jB,WACI,MAAO,CAAC,KAAML,KAAKwkB,SAAUxkB,KAAK+kB,WAAW1kB,WAAY,KAAKC,KAAK,IACvE,EAGJ,SAAS0kB,GAAcC,GACnB,MAAO,CAACtlB,EAAMulB,KACV,IAAK,IAAI7iB,EAAI,EAAGA,EAAI4iB,EAAQ7iB,OAAQC,IAAK,CACrC,MAAMsI,EAASsa,EAAQ5iB,GAAG1C,EAAMulB,GAChC,GAAe,KAAXva,EACA,OAAOA,CAEf,CACA,MAAO,GAEf,CACA,SAASwa,GAAexlB,EAAMulB,GAC1B,IAAIlhB,EACJ,MAAMohB,EAAIzlB,EAAK0lB,OAAOH,GAAQI,MAAM,QACpC,OAA8B,QAAtBthB,EAAMohB,GAAKA,EAAE,UAAwB,IAAPphB,EAAgBA,EAAK,EAC/D,CACA,SAASuhB,GAAiB5lB,EAAMulB,GAC5B,MAAMM,EAAK7lB,EAAK0lB,OAAOH,EAAQ,GAC/B,OAAOM,EAAGF,MAAM,WAAaE,EAAK,EACtC,CACA,SAASC,GAAkB9lB,EAAMulB,GAC7B,IAAIlhB,EACJ,MAAMohB,EAAIzlB,EAAK0lB,OAAOH,GAAQI,MAAM,WACpC,OAA8B,QAAtBthB,EAAMohB,GAAKA,EAAE,UAAwB,IAAPphB,EAAgBA,EAAK,EAC/D,CACA,SAAS0hB,GAAkB/lB,EAAMulB,GAC7B,MAAMS,EAAKF,GAAkB9lB,EAAMulB,GACnC,GAAW,KAAPS,EACA,OAAOA,EAEX,MAAMC,EAAOjmB,EAAK0lB,OAAOH,EAAQ,GAEjC,GAAa,MAATU,GAAyB,MAATA,EAChB,MAAO,GAEX,MAAMC,EAAMJ,GAAkB9lB,EAJ9BulB,GAAU,GAKV,MAAY,KAARW,EACO,GAEJD,EAAOC,CAClB,CACA,SAASC,GAAiBnmB,EAAMulB,GAC5B,MAAMtC,EAAIjjB,EAAK0lB,OAAOH,EAAQ,GAE9B,GADAA,GAAU,EACc,MAApBtC,EAAEmD,cACF,MAAO,GAEX,MAAMC,EAAKN,GAAkB/lB,EAAMulB,GACnC,MAAW,KAAPc,EACO,GAEJpD,EAAIoD,CACf,CACA,SAASC,GAA0BtmB,EAAMulB,GACrC,MAAMM,EAAK7lB,EAAK0lB,OAAOH,EAAQ,GAC/B,GAAW,MAAPM,EACA,OAAOA,EAEX,MAAMU,EAAMX,GAAiB5lB,EAAMulB,GAEnC,OADAA,GAAUgB,EAAI9jB,OACF,KAAR8jB,EACO,GAEJA,EAAMT,GAAkB9lB,EAAMulB,EACzC,CACA,SAASiB,GAAoBxmB,EAAMulB,GAC/B,MAAMkB,EAAMH,GAA0BtmB,EAAMulB,GAE5C,GADAA,GAAUkB,EAAIhkB,OACF,KAARgkB,EACA,MAAO,GAEX,MAAMC,EAAM1mB,EAAK0lB,OAAOH,EAAQ,GAEhC,GADAA,GAAUmB,EAAIjkB,OACF,MAARikB,EACA,MAAO,GAEX,MAAMC,EAAMb,GAAkB9lB,EAAMulB,GAEpC,OAAOkB,EAAMC,EAAMC,EAAMR,GAAiBnmB,EAD1CulB,GAAUoB,EAAIlkB,OAElB,CACA,SAASmkB,GAAoB5mB,EAAMulB,GAC/B,MAAMmB,EAAM1mB,EAAK0lB,OAAOH,EAAQ,GAEhC,GADAA,GAAUmB,EAAIjkB,OACF,MAARikB,EACA,MAAO,GAEX,MAAMC,EAAMb,GAAkB9lB,EAAMulB,GAEpC,OADAA,GAAUoB,EAAIlkB,OACF,KAARkkB,EACO,GAEJD,EAAMC,EAAMR,GAAiBnmB,EAAMulB,EAC9C,CACA,SAASsB,GAAoB7mB,EAAMulB,GAC/B,MAAMkB,EAAMH,GAA0BtmB,EAAMulB,GAE5C,OADAA,GAAUkB,EAAIhkB,OACF,KAARgkB,EACO,GAEJA,EAAMN,GAAiBnmB,EAAMulB,EACxC,CACA,MAAMuB,GAAqBzB,GAAc,CACrCmB,GACAI,GACAC,KAEJ,SAASE,GAAkB/mB,EAAMulB,GAC7B,IAAIlhB,EACJ,MAAMohB,EAAIzlB,EAAK0lB,OAAOH,GAAQI,MAAM,UACpC,OAA8B,QAAtBthB,EAAMohB,GAAKA,EAAE,UAAwB,IAAPphB,EAAgBA,EAAK,EAC/D,CACA,SAAS2iB,GAAyBhnB,EAAMulB,GACpC,MAAM0B,EAASjnB,EAAK0lB,OAAOH,EAAQ,GAEnC,GADAA,GAAU0B,EAAOxkB,OACY,OAAzBwkB,EAAOb,cACP,MAAO,GAEX,MAAMc,EAAMH,GAAkB/mB,EAAMulB,GACpC,MAAY,KAAR2B,EACO,GAEJD,EAASC,CACpB,CACA,SAASC,GAAgBnnB,EAAMulB,GAC3B,IAAIlhB,EACJ,MAAMohB,EAAIzlB,EAAK0lB,OAAOH,GAAQI,MAAM,WACpC,OAA8B,QAAtBthB,EAAMohB,GAAKA,EAAE,UAAwB,IAAPphB,EAAgBA,EAAK,EAC/D,CACA,SAAS+iB,GAAwBpnB,EAAMulB,GACnC,MAAM0B,EAASjnB,EAAK0lB,OAAOH,EAAQ,GAEnC,GADAA,GAAU0B,EAAOxkB,OACY,OAAzBwkB,EAAOb,cACP,MAAO,GAEX,MAAMiB,EAAMF,GAAgBnnB,EAAMulB,GAClC,MAAY,KAAR8B,EACO,GAEJJ,EAASI,CACpB,CACA,SAASC,GAActnB,EAAMulB,GACzB,IAAIlhB,EACJ,MAAMohB,EAAIzlB,EAAK0lB,OAAOH,GAAQI,MAAM,eACpC,OAA8B,QAAtBthB,EAAMohB,GAAKA,EAAE,UAAwB,IAAPphB,EAAgBA,EAAK,EAC/D,CACA,SAASkjB,GAAsBvnB,EAAMulB,GACjC,MAAM0B,EAASjnB,EAAK0lB,OAAOH,EAAQ,GAEnC,GADAA,GAAU0B,EAAOxkB,OACY,OAAzBwkB,EAAOb,cACP,MAAO,GAEX,MAAMoB,EAAMF,GAActnB,EAAMulB,GAChC,MAAY,KAARiC,EACO,GAEJP,EAASO,CACpB,CACA,MAAMC,GAA+BpC,GAAc,CAC/C2B,GACAI,GACAG,KAEEG,GAAqBrC,GAAc,CACrCoC,GACAX,KAGJ,SAASa,GAAa3nB,EAAMulB,GACxB,MAAMqC,EAAMF,GAAmB1nB,EAAMulB,GAErC,OADAA,GAAUqC,EAAInlB,OACF,KAARmlB,EACO,KAEJ,CACHC,UAAW,IAAIrD,GAAkBoD,GACjCrC,OAAQA,EAEhB,CACA,SAASuC,GAA6B9nB,EAAMulB,GACxC,MAAMP,EAAKhlB,EAAK0lB,OAAOH,EAAQ,GAE/B,GADAA,GAAUP,EAAGviB,OACF,MAAPuiB,EACA,OAAO,KAEX,MAAMG,EAAO4C,GAAgB/nB,EAAMulB,GACnC,IAAKJ,EACD,OAAO,KAEXI,EAASJ,EAAKI,OACdA,GAAUC,GAAexlB,EAAMulB,GAAQ9iB,OACvC,MAAMulB,EAAKhoB,EAAK0lB,OAAOH,EAAQ,GAE/B,OADAA,GAAUyC,EAAGvlB,OACF,MAAPulB,EACO,KAEJ,CACHH,UAAW1C,EAAK0C,UAChBtC,OAAQA,EAEhB,CACA,SAAS0C,GAAuBjoB,EAAMulB,GAClC,IAAIlhB,EACJ,OAA8C,QAArCA,EAAKsjB,GAAa3nB,EAAMulB,UAA4B,IAAPlhB,EAAgBA,EAAKyjB,GAA6B9nB,EAAMulB,EAClH,CACA,SAAS2C,GAAqBloB,EAAMulB,GAChC,MAAMJ,EAAO8C,GAAuBjoB,EAAMulB,GAC1C,GAAIJ,EACA,OAAOA,EAEX,MAAMH,EAAKhlB,EAAK0lB,OAAOH,EAAQ,GAE/B,GADAA,GAAUP,EAAGviB,OACF,MAAPuiB,GAAqB,MAAPA,GAAqB,MAAPA,EAC5B,OAAO,KAEX,MAAM4C,EAAMM,GAAqBloB,EAAMulB,GACvC,OAAKqC,EAIE,CACHrC,OAFJA,EAASqC,EAAIrC,OAGTsC,UAAW,IAAI3C,GAAmBF,EAAI4C,EAAIC,YALnC,IAOf,CACA,SAASM,GAAmBC,EAAKpoB,EAAMulB,GACnCA,GAAUC,GAAexlB,EAAMulB,GAAQ9iB,OACvC,MAAMuiB,EAAKoD,EAAI/hB,QAAQ2e,GAAOhlB,EAAKqoB,WAAWrD,EAAIO,KAAS,GAC3D,OAAKP,GAGLO,GAAUP,EAAGviB,OAEN,CACH8iB,OAFJA,GAAUC,GAAexlB,EAAMulB,GAAQ9iB,OAGnCoiB,SAAUG,IANH,IAQf,CACA,SAASsD,GAAsCC,EAAYH,GACvD,MAAO,CAACpoB,EAAMulB,KACV,MAAMiD,EAAYD,EAAWvoB,EAAMulB,GACnC,IAAKiD,EACD,OAAO,KAEXjD,EAASiD,EAAUjD,OACnB,IAAIJ,EAAOqD,EAAUX,UACrB,OAAS,CACL,MAAM7C,EAAKmD,GAAmBC,EAAKpoB,EAAMulB,GACzC,IAAKP,EACD,MAEJO,EAASP,EAAGO,OACZ,MAAMkD,EAAWF,EAAWvoB,EAAMulB,GAClC,IAAKkD,EACD,OAAO,KAEXlD,EAASkD,EAASlD,OAClBJ,EAAO,IAAIP,GAAoBI,EAAGH,SAAUM,EAAMsD,EAASZ,UAC/D,CACA,OAAO1C,EACD,CACEI,OAAQA,EACRsC,UAAW1C,GAEb,IAAI,CAElB,CACA,MAAMuD,GAAiC,CACnC,CAAC,MACD,CAAC,IAAK,IAAK,KACX,CAAC,IAAK,KACN,CAAC,KAAM,MAAO,MACd,CAAC,KACD,CAAC,KACD,CAAC,MACHje,QAAO,CAACQ,EAAQmd,IACPE,GAAsCrd,EAAQmd,IACtDF,IACH,SAASH,GAAgB/nB,EAAMulB,GAE3B,OADAA,GAAUC,GAAexlB,EAAMulB,GAAQ9iB,OAChCimB,GAA+B1oB,EAAMulB,EAChD,CACA,SAASoD,GAA0B3oB,GAC/B,MAAMmlB,EAAO4C,GAAgB/nB,EAAM,GACnC,OAAKmlB,EAGUA,EAAKI,OAASC,GAAexlB,EAAMmlB,EAAKI,QAAQ9iB,SAChDzC,EAAKyC,OACT,KAEJ0iB,EAAK0C,UAND,IAOf,CAEA,SAASe,GAAY5oB,GACjB,IAAIqE,EACJ,MAAMwkB,EAAIF,GAA0B3oB,GACpC,OAAqE,QAA7DqE,EAAKwkB,aAA6B,EAASA,EAAEpE,kBAA+B,IAAPpgB,EAAgBA,EAAK,IACtG,CACA,SAASykB,GAAkBpnB,GACvB,GAAqB,iBAAVA,EACP,OAAOA,EAEX,GAAqB,iBAAVA,EAAoB,CAC3B,MAAMqnB,EAAKH,GAAYlnB,GACvB,IAAKW,EAAQ0mB,GACT,OAAOA,CAEf,CACA,OAAO,CACX,CACA,SAASC,GAAetnB,GACpB,OAAOkhB,OAAOlhB,EAClB,CACA,SAASunB,GAAsBC,GAC3B,OAAQxnB,GACGA,EAAMynB,QAAQtH,KAAKF,IAAIE,KAAKD,IAAIsH,EAAQ,IAAK,GAE5D,CAEA,MAAME,GAAiBH,GAAsB,GAC7C,SAASI,GAAiB3nB,GACtB,OAAO0nB,GAAe1nB,GAAS,GACnC,CAEA,SAAS4nB,GAAkB5nB,GACvB,OAAOkhB,OAAOlhB,EAClB,CACA,SAAS6nB,GAAa7nB,GAClB,OAAOA,CACX,CAEA,SAAS8nB,IAAcC,QAAEA,EAAOC,UAAEA,EAASC,QAAEA,EAAOC,SAAEA,IAClD,IAAIC,GAAW,EACf,SAASC,EAAgBvb,GACjBsb,IAGJA,GAAW,EACXtb,IACAsb,GAAW,EACf,CACAJ,EAAQ1jB,QAAQL,GAAG,UAAW0B,IAC1B0iB,GAAgB,KACZJ,EAAU/f,YAAYggB,EAAQF,EAASC,GAAYtiB,EAAGyC,QAAO,GACjE,IAEJ6f,EAAU3jB,QAAQL,GAAG,UAAW0B,IAC5B0iB,GAAgB,KACZL,EAAQ9f,YAAYigB,EAASH,EAASC,GAAYtiB,EAAGyC,QAAO,IAEhEigB,GAAgB,KACZJ,EAAU/f,YAAYggB,EAAQF,EAASC,GAAYtiB,EAAGyC,QAAO,GACjE,IAEJigB,GAAgB,KACZJ,EAAU/f,YAAYggB,EAAQF,EAASC,GAAY,CAC/C9f,WAAW,EACXhI,MAAM,GACV,GAER,CAEA,SAASmoB,GAAcC,EAAUxf,GAC7B,MAAM2X,EAAO6H,GAAYxf,EAAKyf,OAAS,GAAM,IAAMzf,EAAK0f,SAAW,GAAK,GACxE,OAAI1f,EAAK2f,OACGhI,EAEH3X,EAAK4f,SACFjI,EAEL,CACX,CACA,SAASkI,GAAoBjjB,GACzB,MAAO,CACH6iB,OAAQ7iB,EAAG6iB,OACXG,QAAoB,cAAXhjB,EAAGvE,IACZqnB,SAAU9iB,EAAG8iB,SACbC,MAAkB,YAAX/iB,EAAGvE,IAElB,CACA,SAASynB,GAAsBljB,GAC3B,MAAO,CACH6iB,OAAQ7iB,EAAG6iB,OACXG,QAAoB,cAAXhjB,EAAGvE,IACZqnB,SAAU9iB,EAAG8iB,SACbC,MAAkB,eAAX/iB,EAAGvE,IAElB,CACA,SAAS0nB,GAAmB1nB,GACxB,MAAe,YAARA,GAA6B,cAARA,CAChC,CACA,SAAS2nB,GAAW3nB,GAChB,OAAO0nB,GAAmB1nB,IAAgB,cAARA,GAA+B,eAARA,CAC7D,CAEA,SAAS4nB,GAAgBrjB,EAAIO,GACzB,IAAItD,EAAI2J,EACR,MAAMmC,EAAMxI,EAAKyI,cAAcC,YACzBqa,EAAO/iB,EAAKgjB,wBAClB,MAAO,CACHC,EAAGxjB,EAAGyjB,QAA0C,QAA/BxmB,EAAM8L,GAAOA,EAAI2a,eAA6B,IAAPzmB,EAAgBA,EAAK,GAAKqmB,EAAK5F,MACvFiG,EAAG3jB,EAAG4jB,QAA0C,QAA/Bhd,EAAMmC,GAAOA,EAAI8a,eAA6B,IAAPjd,EAAgBA,EAAK,GAAK0c,EAAKQ,KAE/F,CACA,MAAMC,GACFprB,YAAYgB,GACRV,KAAK+qB,WAAa,KAClB/qB,KAAKgrB,qBAAuBhrB,KAAKgrB,qBAAqBvlB,KAAKzF,MAC3DA,KAAKirB,mBAAqBjrB,KAAKirB,mBAAmBxlB,KAAKzF,MACvDA,KAAKkrB,aAAelrB,KAAKkrB,aAAazlB,KAAKzF,MAC3CA,KAAKmrB,YAAcnrB,KAAKmrB,YAAY1lB,KAAKzF,MACzCA,KAAKorB,aAAeprB,KAAKorB,aAAa3lB,KAAKzF,MAC3CA,KAAKqrB,cAAgBrrB,KAAKqrB,cAAc5lB,KAAKzF,MAC7CA,KAAKsrB,MAAQ5qB,EACbV,KAAK0F,QAAU,IAAIC,EACnBjF,EAAQiI,iBAAiB,aAAc3I,KAAKqrB,cAAe,CACvDE,SAAS,IAEb7qB,EAAQiI,iBAAiB,YAAa3I,KAAKorB,aAAc,CACrDG,SAAS,IAEb7qB,EAAQiI,iBAAiB,WAAY3I,KAAKmrB,aAC1CzqB,EAAQiI,iBAAiB,YAAa3I,KAAKkrB,aAC/C,CACAM,iBAAiBC,GACb,MAAMpB,EAAOrqB,KAAKsrB,MAAMhB,wBACxB,MAAO,CACHoB,OAAQ,CACJC,MAAOtB,EAAKsB,MACZ9X,OAAQwW,EAAKxW,QAEjB+X,MAAOH,EACD,CACElB,EAAGkB,EAAOlB,EACVG,EAAGe,EAAOf,GAEZ,KAEd,CACAQ,aAAankB,GACT,IAAI/C,EACJ+C,EAAG8kB,iBACyB,QAA3B7nB,EAAK+C,EAAG+b,qBAAkC,IAAP9e,GAAyBA,EAAG8nB,QAChE,MAAM7jB,EAAMjI,KAAKsrB,MAAMvb,cACvB9H,EAAIU,iBAAiB,YAAa3I,KAAKgrB,sBACvC/iB,EAAIU,iBAAiB,UAAW3I,KAAKirB,oBACrCjrB,KAAK0F,QAAQQ,KAAK,OAAQ,CACtB0jB,OAAQ7iB,EAAG6iB,OACXmC,KAAM/rB,KAAKwrB,iBAAiBpB,GAAgBrjB,EAAI/G,KAAKsrB,QACrD1iB,OAAQ5I,KACR6pB,SAAU9iB,EAAG8iB,UAErB,CACAmB,qBAAqBjkB,GACjB/G,KAAK0F,QAAQQ,KAAK,OAAQ,CACtB0jB,OAAQ7iB,EAAG6iB,OACXmC,KAAM/rB,KAAKwrB,iBAAiBpB,GAAgBrjB,EAAI/G,KAAKsrB,QACrD1iB,OAAQ5I,KACR6pB,SAAU9iB,EAAG8iB,UAErB,CACAoB,mBAAmBlkB,GACf,MAAMkB,EAAMjI,KAAKsrB,MAAMvb,cACvB9H,EAAI+jB,oBAAoB,YAAahsB,KAAKgrB,sBAC1C/iB,EAAI+jB,oBAAoB,UAAWhsB,KAAKirB,oBACxCjrB,KAAK0F,QAAQQ,KAAK,KAAM,CACpB0jB,OAAQ7iB,EAAG6iB,OACXmC,KAAM/rB,KAAKwrB,iBAAiBpB,GAAgBrjB,EAAI/G,KAAKsrB,QACrD1iB,OAAQ5I,KACR6pB,SAAU9iB,EAAG8iB,UAErB,CACAwB,cAActkB,GACVA,EAAG8kB,iBACH,MAAMI,EAAQllB,EAAGmlB,cAAclhB,KAAK,GAC9Bqf,EAAOrqB,KAAKsrB,MAAMhB,wBACxBtqB,KAAK0F,QAAQQ,KAAK,OAAQ,CACtB0jB,OAAQ7iB,EAAG6iB,OACXmC,KAAM/rB,KAAKwrB,iBAAiBS,EACtB,CACE1B,EAAG0B,EAAME,QAAU9B,EAAK5F,KACxBiG,EAAGuB,EAAMG,QAAU/B,EAAKQ,UAE1BjoB,GACNgG,OAAQ5I,KACR6pB,SAAU9iB,EAAG8iB,WAEjB7pB,KAAK+qB,WAAakB,CACtB,CACAb,aAAarkB,GACT,MAAMklB,EAAQllB,EAAGmlB,cAAclhB,KAAK,GAC9Bqf,EAAOrqB,KAAKsrB,MAAMhB,wBACxBtqB,KAAK0F,QAAQQ,KAAK,OAAQ,CACtB0jB,OAAQ7iB,EAAG6iB,OACXmC,KAAM/rB,KAAKwrB,iBAAiBS,EACtB,CACE1B,EAAG0B,EAAME,QAAU9B,EAAK5F,KACxBiG,EAAGuB,EAAMG,QAAU/B,EAAKQ,UAE1BjoB,GACNgG,OAAQ5I,KACR6pB,SAAU9iB,EAAG8iB,WAEjB7pB,KAAK+qB,WAAakB,CACtB,CACAd,YAAYpkB,GACR,IAAI/C,EACJ,MAAMioB,EAA4C,QAAnCjoB,EAAK+C,EAAGmlB,cAAclhB,KAAK,UAAuB,IAAPhH,EAAgBA,EAAKhE,KAAK+qB,WAC9EV,EAAOrqB,KAAKsrB,MAAMhB,wBACxBtqB,KAAK0F,QAAQQ,KAAK,KAAM,CACpB0jB,OAAQ7iB,EAAG6iB,OACXmC,KAAM/rB,KAAKwrB,iBAAiBS,EACtB,CACE1B,EAAG0B,EAAME,QAAU9B,EAAK5F,KACxBiG,EAAGuB,EAAMG,QAAU/B,EAAKQ,UAE1BjoB,GACNgG,OAAQ5I,KACR6pB,SAAU9iB,EAAG8iB,UAErB,EAGJ,SAASwC,GAAShrB,EAAOirB,EAAQC,EAAMC,EAAQC,GAE3C,OAAOD,GADInrB,EAAQirB,IAAWC,EAAOD,IAChBG,EAAOD,EAChC,CACA,SAASE,GAAiBrrB,GAGtB,OAFakhB,OAAOlhB,EAAMynB,QAAQ,KAChBhpB,MAAM,KAAK,GACjB6sB,QAAQ,MAAO,IAAIvqB,MACnC,CACA,SAASwqB,GAAevrB,EAAOkgB,EAAKD,GAChC,OAAOE,KAAKD,IAAIC,KAAKF,IAAIjgB,EAAOkgB,GAAMD,EAC1C,CACA,SAASuL,GAAUxrB,EAAOigB,GACtB,OAAQjgB,EAASigB,EAAOA,GAAOA,CACnC,CAEA,MAAMwL,GAAcxmB,EAAU,OAC9B,MAAMymB,GACFrtB,YAAYuI,EAAKlE,GACb/D,KAAKwjB,UAAYxjB,KAAKwjB,UAAU/d,KAAKzF,MACrCA,KAAKmiB,OAASpe,EAAOmB,MACrBlF,KAAKmiB,OAAOzc,QAAQL,GAAG,SAAUrF,KAAKwjB,WACtCxjB,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAIolB,KAAeA,QAAYlqB,EAAW,QAC7DmB,EAAOipB,eACPhtB,KAAKU,QAAQ+G,UAAUC,IAAIolB,QAAYlqB,EAAWmB,EAAOipB,gBAE7DjpB,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzC,MAAM+iB,EAAYxb,EAAIC,cAAc,SACpCub,EAAUhc,UAAUC,IAAIolB,GAAY,MACpCrJ,EAAU3f,KAAO,OACjBC,EAAOlD,UAAUwH,aAAaob,GAC9BzjB,KAAKU,QAAQ4H,YAAYmb,GACzBzjB,KAAK0jB,aAAeD,EACpBzjB,KAAKitB,kBAAoBjtB,KAAKitB,kBAAkBxnB,KAAKzF,MACrDA,KAAKktB,UAAYnpB,EAAOopB,SACxBntB,KAAKktB,UAAUxnB,QAAQL,GAAG,SAAUrF,KAAKitB,mBACzCjtB,KAAKU,QAAQ+G,UAAUC,IAAIolB,MAC3B9sB,KAAK0jB,aAAajc,UAAUC,IAAIolB,GAAY,MAC5C,MAAMM,EAAWnlB,EAAIC,cAAc,OACnCklB,EAAS3lB,UAAUC,IAAIolB,GAAY,MACnC9sB,KAAKU,QAAQ4H,YAAY8kB,GACzBptB,KAAKqtB,YAAcD,EACnB,MAAME,EAAYrlB,EAAIwI,gBAAgB1B,EAAQ,OAC9Cue,EAAU7lB,UAAUC,IAAIolB,GAAY,MACpC9sB,KAAKqtB,YAAY/kB,YAAYglB,GAC7B,MAAMC,EAAWtlB,EAAIwI,gBAAgB1B,EAAQ,QAC7Cwe,EAAS9lB,UAAUC,IAAIolB,GAAY,OACnCQ,EAAUhlB,YAAYilB,GACtBvtB,KAAKwtB,eAAiBD,EACtB,MAAME,EAAWxlB,EAAIwI,gBAAgB1B,EAAQ,QAC7C0e,EAAShmB,UAAUC,IAAIolB,GAAY,OACnCQ,EAAUhlB,YAAYmlB,GACtBztB,KAAK0tB,eAAiBD,EACtB,MAAME,EAAc1lB,EAAIC,cAAc,OACtCylB,EAAYlmB,UAAUC,IAAIpB,EAAU,KAAVA,IAC1BtG,KAAKqtB,YAAY/kB,YAAYqlB,GAC7B3tB,KAAK4tB,aAAeD,EACpB5pB,EAAO1C,MAAMqE,QAAQL,GAAG,SAAUrF,KAAKwjB,WACvCxjB,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKsW,SACT,CACA2W,kBAAkBlmB,GACd,GAAoB,OAAhBA,EAAGC,SAEH,YADAhH,KAAKU,QAAQ+G,UAAUE,OAAOmlB,QAAYlqB,EAAW,QAGzD5C,KAAKU,QAAQ+G,UAAUC,IAAIolB,QAAYlqB,EAAW,QAClD,MAAM2nB,EAAIxjB,EAAGC,SAAWhH,KAAKmiB,OAAOrhB,IAAI,iBAClC+sB,EAAMtD,GAAKA,EAAI,GAAI,EAAKA,EAAI,EAAI,EAAK,GACrCuD,EAAMlB,IAAgBiB,GAAK,EAAI,GACrC7tB,KAAK0tB,eAAeK,eAAe,KAAM,IAAK,CAAC,KAAKF,EAAMC,QAAUD,QAAUA,EAAMC,MAAS,KAAKvD,SAASA,OAAOjqB,KAAK,MACvHN,KAAKwtB,eAAeO,eAAe,KAAM,IAAK,UAAUxD,OACxD,MAAM5G,EAAY3jB,KAAKmiB,OAAOrhB,IAAI,aAClCd,KAAK4tB,aAAa9lB,YAAc6b,EAAU3jB,KAAKqB,MAAM2F,UACrDhH,KAAK4tB,aAAaxe,MAAMqV,KAAO,GAAG8F,KACtC,CACAjU,UACI,MAAMqN,EAAY3jB,KAAKmiB,OAAOrhB,IAAI,aAClCd,KAAK0jB,aAAariB,MAAQsiB,EAAU3jB,KAAKqB,MAAM2F,SACnD,CACAwc,YACIxjB,KAAKsW,SACT,EAGJ,MAAM0X,GACFtuB,YAAYuI,EAAKlE,GACb,IAAIC,EACJhE,KAAKiuB,gBAAkB,EACvBjuB,KAAK6jB,eAAiB7jB,KAAK6jB,eAAepe,KAAKzF,MAC/CA,KAAKkuB,gBAAkBluB,KAAKkuB,gBAAgBzoB,KAAKzF,MACjDA,KAAKmuB,cAAgBnuB,KAAKmuB,cAAc1oB,KAAKzF,MAC7CA,KAAKouB,eAAiBpuB,KAAKouB,eAAe3oB,KAAKzF,MAC/CA,KAAKquB,eAAiBruB,KAAKquB,eAAe5oB,KAAKzF,MAC/CA,KAAKsuB,aAAetuB,KAAKsuB,aAAa7oB,KAAKzF,MAC3CA,KAAKuuB,UAAYxqB,EAAO4lB,SACxB3pB,KAAK8jB,QAAU/f,EAAO6G,OACtB5K,KAAKkF,MAAQnB,EAAOmB,MACpBlF,KAAKwuB,aAA6C,QAA7BxqB,EAAKD,EAAO0qB,mBAAgC,IAAPzqB,EAAgBA,EAAK,KAC/EhE,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAKktB,UAAYljB,EAAY,MAC7BhK,KAAKW,KAAO,IAAIosB,GAAe9kB,EAAK,CAChC+kB,cAAejpB,EAAOipB,cACtBG,SAAUntB,KAAKktB,UACfhoB,MAAOlF,KAAKkF,MACZ7D,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,YAEpBb,KAAKW,KAAK+iB,aAAa/a,iBAAiB,SAAU3I,KAAK6jB,gBACvD7jB,KAAKW,KAAK+iB,aAAa/a,iBAAiB,UAAW3I,KAAKkuB,iBACxDluB,KAAKW,KAAK+iB,aAAa/a,iBAAiB,QAAS3I,KAAKmuB,eACtD,MAAMO,EAAK,IAAI5D,GAAe9qB,KAAKW,KAAK0sB,aACxCqB,EAAGhpB,QAAQL,GAAG,OAAQrF,KAAKouB,gBAC3BM,EAAGhpB,QAAQL,GAAG,OAAQrF,KAAKquB,gBAC3BK,EAAGhpB,QAAQL,GAAG,KAAMrF,KAAKsuB,aAC7B,CACAK,gBAAgBttB,GACZ,IAAI2C,EAAI2J,EACR,MAAM4T,EAAmC,QAA5Bvd,EAAKhE,KAAKwuB,oBAAiC,IAAPxqB,OAAgB,EAASA,EAAGlD,IAAI,YAC3EwgB,EAAmC,QAA5B3T,EAAK3N,KAAKwuB,oBAAiC,IAAP7gB,OAAgB,EAASA,EAAG7M,IAAI,YACjF,IAAIiB,EAAIV,EAOR,YANYuB,IAAR2e,IACAxf,EAAIyf,KAAKF,IAAIvf,EAAGwf,SAER3e,IAAR0e,IACAvf,EAAIyf,KAAKD,IAAIxf,EAAGuf,IAEbvf,CACX,CACA8hB,eAAejB,GACX,MACMvhB,EADYS,EAAU8gB,EAAEE,eACNzhB,MAClB0iB,EAAc/jB,KAAK8jB,QAAQziB,GAC5BW,EAAQ+hB,KACT/jB,KAAKqB,MAAM2F,SAAWhH,KAAK2uB,gBAAgB5K,IAE/C/jB,KAAKW,KAAK2V,SACd,CACA4X,gBAAgBnnB,GACZ,MAAM+a,EAAO4H,GAAc1pB,KAAKuuB,UAAWvE,GAAoBjjB,IAClD,IAAT+a,GAGJ9hB,KAAKqB,MAAMiI,YAAYtJ,KAAK2uB,gBAAgB3uB,KAAKqB,MAAM2F,SAAW8a,GAAO,CACrEvY,WAAW,EACXhI,MAAM,GAEd,CACA4sB,cAAcpnB,GAEG,IADA2iB,GAAc1pB,KAAKuuB,UAAWvE,GAAoBjjB,KAI/D/G,KAAKqB,MAAMiI,YAAYtJ,KAAKqB,MAAM2F,SAAU,CACxCuC,WAAW,EACXhI,MAAM,GAEd,CACA6sB,iBACIpuB,KAAKiuB,gBAAkBjuB,KAAKqB,MAAM2F,SAClChH,KAAKktB,UAAUlmB,SAAW,CAC9B,CACA4nB,sBAAsB7C,GAClB,IAAKA,EAAKH,MACN,OAAO,KAEX,MAAMiD,EAAK9C,EAAKH,MAAMrB,EAAIwB,EAAKL,OAAOC,MAAQ,EAC9C,OAAO3rB,KAAK2uB,gBAAgB3uB,KAAKiuB,gBAAkBY,EAAK7uB,KAAKkF,MAAMpE,IAAI,iBAC3E,CACAutB,eAAetnB,GACX,MAAMhF,EAAI/B,KAAK4uB,sBAAsB7nB,EAAGglB,MAC9B,OAANhqB,IAGJ/B,KAAKqB,MAAMiI,YAAYvH,EAAG,CACtBwH,WAAW,EACXhI,MAAM,IAEVvB,KAAKktB,UAAUlmB,SAAWhH,KAAKqB,MAAM2F,SAAWhH,KAAKiuB,gBACzD,CACAK,aAAavnB,GACT,MAAMhF,EAAI/B,KAAK4uB,sBAAsB7nB,EAAGglB,MAC9B,OAANhqB,IAGJ/B,KAAKqB,MAAMiI,YAAYvH,EAAG,CACtBwH,WAAW,EACXhI,MAAM,IAEVvB,KAAKktB,UAAUlmB,SAAW,KAC9B,EAGJ,MAAM8nB,GAAcxoB,EAAU,OAC9B,MAAMyoB,GACFrvB,YAAYuI,EAAKlE,GACb/D,KAAKwjB,UAAYxjB,KAAKwjB,UAAU/d,KAAKzF,MACrCA,KAAKmiB,OAASpe,EAAOmB,MACrBlF,KAAKmiB,OAAOzc,QAAQL,GAAG,SAAUrF,KAAKwjB,WACtCxjB,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAIonB,MAC3B/qB,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzC,MAAMsuB,EAAY/mB,EAAIC,cAAc,OACpC8mB,EAAUvnB,UAAUC,IAAIonB,GAAY,MACpC/qB,EAAOlD,UAAUkN,aAAaihB,GAC9BhvB,KAAKU,QAAQ4H,YAAY0mB,GACzBhvB,KAAKivB,aAAeD,EACpB,MAAM5B,EAAWnlB,EAAIC,cAAc,OACnCklB,EAAS3lB,UAAUC,IAAIonB,GAAY,MACnC9uB,KAAKivB,aAAa3mB,YAAY8kB,GAC9BptB,KAAKqtB,YAAcD,EACnBrpB,EAAO1C,MAAMqE,QAAQL,GAAG,SAAUrF,KAAKwjB,WACvCxjB,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKyiB,SACT,CACAA,UACI,MAAMnQ,EAAIsa,GAAeP,GAASrsB,KAAKqB,MAAM2F,SAAUhH,KAAKmiB,OAAOrhB,IAAI,YAAad,KAAKmiB,OAAOrhB,IAAI,YAAa,EAAG,KAAM,EAAG,KAC7Hd,KAAKqtB,YAAYje,MAAMuc,MAAQ,GAAGrZ,IACtC,CACAkR,YACIxjB,KAAKyiB,SACT,EAGJ,MAAMyM,GACFxvB,YAAYuI,EAAKlE,GACb/D,KAAKmvB,WAAanvB,KAAKmvB,WAAW1pB,KAAKzF,MACvCA,KAAKovB,SAAWpvB,KAAKovB,SAAS3pB,KAAKzF,MACnCA,KAAKqvB,qBAAuBrvB,KAAKqvB,qBAAqB5pB,KAAKzF,MAC3DA,KAAKsuB,aAAetuB,KAAKsuB,aAAa7oB,KAAKzF,MAC3CA,KAAKuuB,UAAYxqB,EAAO4lB,SACxB3pB,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAKkF,MAAQnB,EAAOmB,MACpBlF,KAAKW,KAAO,IAAIouB,GAAW9mB,EAAK,CAC5B/C,MAAOlF,KAAKkF,MACZ7D,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,YAEpBb,KAAKsvB,WAAa,IAAIxE,GAAe9qB,KAAKW,KAAKsuB,cAC/CjvB,KAAKsvB,WAAW5pB,QAAQL,GAAG,OAAQrF,KAAKqvB,sBACxCrvB,KAAKsvB,WAAW5pB,QAAQL,GAAG,OAAQrF,KAAKqvB,sBACxCrvB,KAAKsvB,WAAW5pB,QAAQL,GAAG,KAAMrF,KAAKsuB,cACtCtuB,KAAKW,KAAKsuB,aAAatmB,iBAAiB,UAAW3I,KAAKmvB,YACxDnvB,KAAKW,KAAKsuB,aAAatmB,iBAAiB,QAAS3I,KAAKovB,SAC1D,CACAG,oBAAoB9sB,EAAGgH,GACdhH,EAAEmpB,OAGP5rB,KAAKqB,MAAMiI,YAAY+iB,GAASO,GAAenqB,EAAEmpB,MAAMrB,EAAG,EAAG9nB,EAAEipB,OAAOC,OAAQ,EAAGlpB,EAAEipB,OAAOC,MAAO3rB,KAAKkF,MAAMpE,IAAI,YAAad,KAAKkF,MAAMpE,IAAI,aAAc2I,EAC9J,CACA4lB,qBAAqBtoB,GACjB/G,KAAKuvB,oBAAoBxoB,EAAGglB,KAAM,CAC9BxiB,WAAW,EACXhI,MAAM,GAEd,CACA+sB,aAAavnB,GACT/G,KAAKuvB,oBAAoBxoB,EAAGglB,KAAM,CAC9BxiB,WAAW,EACXhI,MAAM,GAEd,CACA4tB,WAAWpoB,GACP,MAAM+a,EAAO4H,GAAc1pB,KAAKuuB,UAAWtE,GAAsBljB,IACpD,IAAT+a,GAGJ9hB,KAAKqB,MAAMiI,YAAYtJ,KAAKqB,MAAM2F,SAAW8a,EAAM,CAC/CvY,WAAW,EACXhI,MAAM,GAEd,CACA6tB,SAASroB,GAEQ,IADA2iB,GAAc1pB,KAAKuuB,UAAWtE,GAAsBljB,KAIjE/G,KAAKqB,MAAMiI,YAAYtJ,KAAKqB,MAAM2F,SAAU,CACxCuC,WAAW,EACXhI,MAAM,GAEd,EAGJ,MAAMiuB,GAAclpB,EAAU,UAC9B,MAAMmpB,GACF/vB,YAAYuI,EAAKlE,GACb/D,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAI8nB,MAC3B,MAAME,EAAaznB,EAAIC,cAAc,OACrCwnB,EAAWjoB,UAAUC,IAAI8nB,GAAY,MACrCxvB,KAAK2vB,YAAc5rB,EAAO6rB,WAC1BF,EAAWpnB,YAAYtI,KAAK2vB,YAAYjvB,SACxCV,KAAKU,QAAQ4H,YAAYonB,GACzB,MAAMG,EAAW5nB,EAAIC,cAAc,OACnC2nB,EAASpoB,UAAUC,IAAI8nB,GAAY,MACnCxvB,KAAK8vB,UAAY/rB,EAAOgsB,SACxBF,EAASvnB,YAAYtI,KAAK8vB,UAAUpvB,SACpCV,KAAKU,QAAQ4H,YAAYunB,EAC7B,EAGJ,MAAMG,GACFtwB,YAAYuI,EAAKlE,GACb/D,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAKiwB,SAAW,IAAIf,GAAiBjnB,EAAK,CACtC0hB,SAAU5lB,EAAO4lB,SACjBzkB,MAAOnB,EAAO0qB,YACdptB,MAAO0C,EAAO1C,MACdR,UAAWb,KAAKa,YAEpBb,KAAKkwB,OAAS,IAAIlC,GAAqB/lB,EAAK,CACxC0hB,SAAU5lB,EAAO4lB,SACjB/e,OAAQ7G,EAAO6G,OACf1F,MAAOnB,EAAOosB,UACd1B,YAAa1qB,EAAO0qB,YACpBptB,MAAO0C,EAAO1C,MACdR,UAAWkD,EAAOlD,YAEtBb,KAAKW,KAAO,IAAI8uB,GAAexnB,EAAK,CAChC2nB,WAAY5vB,KAAKiwB,SAAStvB,KAC1BovB,SAAU/vB,KAAKkwB,OAAOvvB,MAE9B,CACIyvB,uBACA,OAAOpwB,KAAKiwB,QAChB,CACII,qBACA,OAAOrwB,KAAKkwB,MAChB,EAGJ,SAASI,GAAenvB,EAAQE,GAC5BF,EAAOuD,MAAMrD,EACjB,CAEA,SAASkvB,GAAiBlvB,GACtB,MAAMiR,EAAIpG,EACV,OAAIF,MAAMC,QAAQ5K,GACPiR,EAAEnG,SAASL,MAAMwG,EAAEnG,SAASN,OAAO,CACtClM,KAAM2S,EAAEnG,SAASV,OACjBpK,MAAOiR,EAAEnG,SAASP,MAFf0G,CAGHjR,GAAOA,MAEM,iBAAVA,EACAiR,EAAEnG,SAASP,IAAIvK,GACjBA,WAFT,CAKJ,CACA,SAASmvB,GAAkBnvB,GACvB,GAAc,WAAVA,GAAgC,UAAVA,EACtB,OAAOA,CAGf,CACA,SAASovB,GAA0BpvB,GAC/B,MAAMiR,EAAIpG,EACV,OAAOoG,EAAEnG,SAASN,OAAO,CACrByV,IAAKhP,EAAElH,SAASI,OAChB+V,IAAKjP,EAAElH,SAASI,OAChBsW,KAAMxP,EAAElH,SAASI,QAHd8G,CAIJjR,GAAOA,KACd,CACA,SAASqvB,GAAqBlnB,GAC1B,GAAIwC,MAAMC,QAAQzC,GACd,OAAOA,EAEX,MAAM6L,EAAQ,GAId,OAHA3S,OAAOyH,KAAKX,GAASpD,SAASzG,IAC1B0V,EAAMvP,KAAK,CAAEnG,KAAMA,EAAM0B,MAAOmI,EAAQ7J,IAAM,IAE3C0V,CACX,CACA,SAASsb,GAAqBnnB,GAC1B,OAAQxH,EAAQwH,GAEV,KADA,IAAIiY,GAAeiP,GAAqB5uB,EAAU0H,IAE5D,CACA,SAASonB,GAAS5nB,GACd,MAAM2V,EAAI3V,EAAagY,GAAehY,EAAY6Y,IAAkB,KACpE,OAAKlD,EAGEA,EAAEmD,KAFE,IAGf,CACA,SAAS+O,GAAyB7nB,EAAYhC,GAC1C,MAAMma,EAAKnY,GAAcgY,GAAehY,EAAY6Y,IACpD,OAAIV,EACOuL,GAAiBvL,EAAGW,MAExBN,KAAKF,IAAIoL,GAAiB1lB,GAAW,EAChD,CACA,SAAS8pB,GAAY9nB,GACjB,MAAM8Y,EAAO8O,GAAS5nB,GACtB,OAAO8Y,QAAmCA,EAAO,CACrD,CACA,SAASiP,GAAyB/nB,EAAYhC,GAC1C,IAAIhD,EACJ,MAAMmd,EAAKnY,GAAcgY,GAAehY,EAAY6Y,IAC9CmP,EAAOxP,KAAKyP,IAA+D,QAA1DjtB,EAAKmd,aAA+B,EAASA,EAAGW,YAAyB,IAAP9d,EAAgBA,EAAKgD,GAC9G,OAAgB,IAATgqB,EAAa,GAAMxP,KAAK8C,IAAI,GAAI9C,KAAK0P,MAAM1P,KAAK2P,MAAMH,IAAS,EAC1E,CAEA,MAAMI,GAAc9qB,EAAU,OAC9B,MAAM+qB,GACF3xB,YAAYuI,EAAKlE,GACb/D,KAAK8f,eAAiB9f,KAAK8f,eAAera,KAAKzF,MAC/CA,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAI0pB,MAC3BrtB,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzC,MAAMoR,EAAY7J,EAAIC,cAAc,SACpC4J,EAAUrK,UAAUC,IAAI0pB,GAAY,MACpCpxB,KAAKU,QAAQ4H,YAAYwJ,GACzB,MAAM2R,EAAYxb,EAAIC,cAAc,SACpCub,EAAUhc,UAAUC,IAAI0pB,GAAY,MACpC3N,EAAU3f,KAAO,WACjBgO,EAAUxJ,YAAYmb,GACtBzjB,KAAK0jB,aAAeD,EACpB1f,EAAOlD,UAAUwH,aAAarI,KAAK0jB,cACnC,MAAM4N,EAAcrpB,EAAIC,cAAc,OACtCopB,EAAY7pB,UAAUC,IAAI0pB,GAAY,MACtCtf,EAAUxJ,YAAYgpB,GACtB,MAAMpW,EAAW3K,GAAqBtI,EAAK,SAC3CqpB,EAAYhpB,YAAY4S,GACxBnX,EAAO1C,MAAMqE,QAAQL,GAAG,SAAUrF,KAAK8f,gBACvC9f,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKyiB,SACT,CACAA,UACIziB,KAAK0jB,aAAa6N,QAAUvxB,KAAKqB,MAAM2F,QAC3C,CACA8Y,iBACI9f,KAAKyiB,SACT,EAGJ,MAAM+O,GACF9xB,YAAYuI,EAAKlE,GACb/D,KAAK6jB,eAAiB7jB,KAAK6jB,eAAepe,KAAKzF,MAC/CA,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAKW,KAAO,IAAI0wB,GAAappB,EAAK,CAC9B5G,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,YAEpBb,KAAKW,KAAK+iB,aAAa/a,iBAAiB,SAAU3I,KAAK6jB,eAC3D,CACAA,eAAejB,GACX,MAAMa,EAAY3hB,EAAU8gB,EAAEE,eAC9B9iB,KAAKqB,MAAM2F,SAAWyc,EAAU8N,OACpC,EAGJ,SAASE,GAAmBjuB,GACxB,MAAMud,EAAc,GACd2Q,EAAKf,GAAqBntB,EAAOgG,SAIvC,OAHIkoB,GACA3Q,EAAYjb,KAAK4rB,GAEd,IAAI5Q,GAAoBC,EACnC,CACA,MAAM4Q,GAAqB,CACvBvf,GAAI,aACJtO,KAAM,QACNuO,OAAQ,CAAChR,EAAOmC,KACZ,GAAqB,kBAAVnC,EACP,OAAO,KAEX,MACMsJ,EAASyB,EAAY5I,EAAQ,CAC/BgG,QAFM0C,EAEKd,SAASE,OAAOilB,MAE/B,OAAO5lB,EACD,CACE7B,aAAczH,EACdmC,OAAQmH,GAEV,IAAI,EAEd0L,QAAS,CACL0J,OAAS6R,GAAU3N,GACnBjb,WAAauJ,GAASkf,GAAmBlf,EAAK/O,QAC9Cwc,OAAS4R,GAAUtB,IAEvB9vB,WAAa+R,IACT,MAAMtK,EAAMsK,EAAK5C,SACXtO,EAAQkR,EAAKlR,MACbsd,EAAIpM,EAAKvJ,WACT0oB,EAAK/S,GAAKqC,GAAerC,EAAG8C,IAClC,OAAIiQ,EACO,IAAIhP,GAAeza,EAAK,CAC3B/C,MAAO,IAAI+E,EAAS,CAChBT,QAASkoB,EAAGrQ,OAAOhgB,MAAM,aAE7BA,MAAOA,EACPR,UAAW0R,EAAK1R,YAGjB,IAAI2wB,GAAmBvpB,EAAK,CAC/B5G,MAAOA,EACPR,UAAW0R,EAAK1R,WACpB,GAIFgxB,GAAcvrB,EAAU,OAC9B,MAAMwrB,GACFpyB,YAAYuI,EAAKlE,GACb/D,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAImqB,MAC3B9tB,EAAOiQ,SAASV,kBAAkBtT,KAAKU,QAASmxB,QAAYjvB,EAAW,aACvEuE,EAAapD,EAAOiQ,SAAU,YAAapM,EAAiB5H,KAAKU,QAASmxB,QAAYjvB,EAAW,SACjG,MAAM6qB,EAAWxlB,EAAIC,cAAc,OACnCulB,EAAShmB,UAAUC,IAAImqB,GAAY,MACnC7xB,KAAKU,QAAQ4H,YAAYmlB,GACzB,MAAMsE,EAAa9pB,EAAIC,cAAc,OACrC6pB,EAAWtqB,UAAUC,IAAImqB,GAAY,MACrCpE,EAASnlB,YAAYypB,GACrB/xB,KAAKgyB,cAAgBD,EACrB,MAAMlC,EAAW5nB,EAAIC,cAAc,OAInC,GAHA2nB,EAASpoB,UAAUC,IAAImqB,GAAY,MACnCpE,EAASnlB,YAAYunB,GACrB7vB,KAAKiyB,YAAcpC,EACS,WAAxB9rB,EAAOmuB,aAA2B,CAClC,MAAMC,EAAalqB,EAAIC,cAAc,OACrCiqB,EAAW1qB,UAAUC,IAAImqB,GAAY,MACrC7xB,KAAKU,QAAQ4H,YAAY6pB,GACzBnyB,KAAKoyB,cAAgBD,CACzB,MAEInyB,KAAKoyB,cAAgB,IAE7B,EAGJ,SAASC,GAAY7J,EAAG8J,EAAGxZ,GACvB,MAAMyZ,EAAK3F,GAAepE,EAAI,IAAK,EAAG,GAChCgK,EAAK5F,GAAe0F,EAAI,IAAK,EAAG,GAChCG,EAAK7F,GAAe9T,EAAI,IAAK,EAAG,GAChC4Z,EAAOlR,KAAKF,IAAIiR,EAAIC,EAAIC,GACxBE,EAAOnR,KAAKD,IAAIgR,EAAIC,EAAIC,GACxB9T,EAAI+T,EAAOC,EACjB,IAAIze,EAAI,EACJ+J,EAAI,EACR,MAAM2U,GAAKD,EAAOD,GAAQ,EAc1B,OAbU,IAAN/T,IACAV,EAAIU,GAAK,EAAI6C,KAAKyP,IAAIyB,EAAOC,EAAO,IAEhCze,EADAqe,IAAOG,GACFF,EAAKC,GAAM9T,EAEX6T,IAAOE,EACR,GAAKD,EAAKF,GAAM5T,EAGhB,GAAK4T,EAAKC,GAAM7T,EAExBzK,EAAIA,EAAI,GAAKA,EAAI,EAAI,EAAI,IAEtB,CAAK,IAAJA,EAAa,IAAJ+J,EAAa,IAAJ2U,EAC9B,CACA,SAASC,GAAY3e,EAAG+J,EAAG2U,GACvB,MAAME,GAAM5e,EAAK,IAAO,KAAO,IACzB6e,EAAKnG,GAAe3O,EAAI,IAAK,EAAG,GAChC+U,EAAKpG,GAAegG,EAAI,IAAK,EAAG,GAChCjU,GAAK,EAAI6C,KAAKyP,IAAI,EAAI+B,EAAK,IAAMD,EACjCxI,EAAI5L,GAAK,EAAI6C,KAAKyP,IAAI6B,EAAO,GAAM,EAAK,IACxC1N,EAAI4N,EAAKrU,EAAI,EACnB,IAAI4T,EAAIC,EAAIC,EAmBZ,OAjBKF,EAAIC,EAAIC,GADTK,GAAM,GAAKA,EAAK,GACD,CAACnU,EAAG4L,EAAG,GAEjBuI,GAAM,IAAMA,EAAK,IACP,CAACvI,EAAG5L,EAAG,GAEjBmU,GAAM,KAAOA,EAAK,IACR,CAAC,EAAGnU,EAAG4L,GAEjBuI,GAAM,KAAOA,EAAK,IACR,CAAC,EAAGvI,EAAG5L,GAEjBmU,GAAM,KAAOA,EAAK,IACR,CAACvI,EAAG,EAAG5L,GAGP,CAACA,EAAG,EAAG4L,GAEnB,CAAY,KAAVgI,EAAKnN,GAAqB,KAAVoN,EAAKpN,GAAqB,KAAVqN,EAAKrN,GAClD,CACA,SAAS6N,GAAYzK,EAAG8J,EAAGxZ,GACvB,MAAMyZ,EAAK3F,GAAepE,EAAI,IAAK,EAAG,GAChCgK,EAAK5F,GAAe0F,EAAI,IAAK,EAAG,GAChCG,EAAK7F,GAAe9T,EAAI,IAAK,EAAG,GAChC4Z,EAAOlR,KAAKF,IAAIiR,EAAIC,EAAIC,GAExBhwB,EAAIiwB,EADGlR,KAAKD,IAAIgR,EAAIC,EAAIC,GAE9B,IAAIve,EAeJ,OAbIA,EADM,IAANzR,EACI,EAECiwB,IAASH,IACAC,EAAKC,GAAMhwB,EAAK,EAAK,GAAK,EAApC,GAECiwB,IAASF,EACV,KAAOC,EAAKF,GAAM9vB,EAAI,GAGtB,KAAO8vB,EAAKC,GAAM/vB,EAAI,GAIvB,CAACyR,EAAO,KAFI,IAATwe,EAAa,EAAIjwB,EAAIiwB,GAEP,IADdA,EAEd,CACA,SAASQ,GAAYhf,EAAG+J,EAAGlc,GACvB,MAAM+wB,EAAKjG,GAAU3Y,EAAG,KAClB6e,EAAKnG,GAAe3O,EAAI,IAAK,EAAG,GAChCkV,EAAKvG,GAAe7qB,EAAI,IAAK,EAAG,GAChC4c,EAAIwU,EAAKJ,EACTxI,EAAI5L,GAAK,EAAI6C,KAAKyP,IAAI6B,EAAO,GAAM,EAAK,IACxC1N,EAAI+N,EAAKxU,EACf,IAAI4T,EAAIC,EAAIC,EAmBZ,OAjBKF,EAAIC,EAAIC,GADTK,GAAM,GAAKA,EAAK,GACD,CAACnU,EAAG4L,EAAG,GAEjBuI,GAAM,IAAMA,EAAK,IACP,CAACvI,EAAG5L,EAAG,GAEjBmU,GAAM,KAAOA,EAAK,IACR,CAAC,EAAGnU,EAAG4L,GAEjBuI,GAAM,KAAOA,EAAK,IACR,CAAC,EAAGvI,EAAG5L,GAEjBmU,GAAM,KAAOA,EAAK,IACR,CAACvI,EAAG,EAAG5L,GAGP,CAACA,EAAG,EAAG4L,GAEnB,CAAY,KAAVgI,EAAKnN,GAAqB,KAAVoN,EAAKpN,GAAqB,KAAVqN,EAAKrN,GAClD,CACA,SAASgO,GAAYlf,EAAG+J,EAAG2U,GACvB,MAAMS,EAAKT,EAAI3U,GAAM,IAAMuD,KAAKyP,IAAI,EAAI2B,EAAI,MAAU,IACtD,MAAO,CACH1e,EACO,IAAPmf,EAAWpV,GAAM,IAAMuD,KAAKyP,IAAI,EAAI2B,EAAI,MAASS,EAAK,EACtDT,EAAI3U,GAAM,IAAMuD,KAAKyP,IAAI,EAAI2B,EAAI,MAAU,IAEnD,CACA,SAASU,GAAYpf,EAAG+J,EAAGlc,GACvB,MAAMsxB,EAAK,IAAM7R,KAAKyP,IAAIlvB,GAAM,IAAMkc,GAAM,IAAM,KAClD,MAAO,CAAC/J,EAAU,IAAPmf,EAAWpV,EAAKlc,EAAKsxB,EAAK,EAAItxB,GAAK,IAAMkc,GAAO,IAC/D,CACA,SAASsV,GAAqBC,GAC1B,MAAO,CAACA,EAAM,GAAIA,EAAM,GAAIA,EAAM,GACtC,CACA,SAASC,GAAqBD,EAAOE,GACjC,MAAO,CAACF,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAIE,EAC1C,CACA,MAAMC,GAAqB,CACvBC,IAAK,CACDA,IAAK,CAAC1f,EAAG+J,EAAG2U,IAAM,CAAC1e,EAAG+J,EAAG2U,GACzBiB,IAAKT,GACLU,IAAKjB,IAETgB,IAAK,CACDD,IAAKN,GACLO,IAAK,CAAC3f,EAAG+J,EAAGlc,IAAM,CAACmS,EAAG+J,EAAGlc,GACzB+xB,IAAKZ,IAETY,IAAK,CACDF,IAAKvB,GACLwB,IAAKZ,GACLa,IAAK,CAACtL,EAAG8J,EAAGxZ,IAAM,CAAC0P,EAAG8J,EAAGxZ,KAGjC,SAASib,GAAsBC,EAAMlwB,GACjC,MAAO,CACM,UAATA,EAAmB,EAAa,QAATkwB,EAAiB,IAAM,IACrC,UAATlwB,EAAmB,EAAa,QAATkwB,EAAiB,IAAM,IACrC,UAATlwB,EAAmB,EAAa,QAATkwB,EAAiB,IAAM,IAEtD,CACA,SAASC,GAAaC,EAAK5S,GACvB,OAAO4S,IAAQ5S,EAAMA,EAAMuL,GAAUqH,EAAK5S,EAC9C,CACA,SAAS6S,GAAyBC,EAAYJ,EAAMlwB,GAChD,IAAIE,EACJ,MAAMqwB,EAAKN,GAAsBC,EAAMlwB,GACvC,MAAO,CACM,QAATkwB,EACMpH,GAAewH,EAAW,GAAI,EAAGC,EAAG,IACpCJ,GAAaG,EAAW,GAAIC,EAAG,IACrCzH,GAAewH,EAAW,GAAI,EAAGC,EAAG,IACpCzH,GAAewH,EAAW,GAAI,EAAGC,EAAG,IACpCzH,GAAwC,QAAxB5oB,EAAKowB,EAAW,UAAuB,IAAPpwB,EAAgBA,EAAK,EAAG,EAAG,GAEnF,CACA,SAASswB,GAAiBd,EAAOQ,EAAMze,EAAMgf,GACzC,MAAMC,EAAMT,GAAsBC,EAAMze,GAClCkf,EAAMV,GAAsBC,EAAMO,GACxC,OAAOf,EAAM/hB,KAAI,CAACkN,EAAG9c,IAAU8c,EAAK6V,EAAI3yB,GAAU4yB,EAAI5yB,IAC1D,CACA,SAAS6yB,GAAaN,EAAY7e,EAAMgf,GACpC,MAAMI,EAAWL,GAAiBF,EAAY7e,EAAKye,KAAMze,EAAKzR,KAAM,OAEpE,OAAOwwB,GADQX,GAAmBpe,EAAKye,MAAMO,EAAGP,SAASW,GACzBJ,EAAGP,KAAM,MAAOO,EAAGzwB,KACvD,CAEA,SAAS8wB,GAAoBryB,EAAKC,GAC9B,MAAmB,iBAARD,IAAoBP,EAAQO,IAGhCC,KAAOD,GAA2B,iBAAbA,EAAIC,EACpC,CACA,MAAMqyB,GACFhxB,aAAaC,EAAO,OAChB,OAAO,IAAI+wB,GAAM,CAAC,EAAG,EAAG,GAAI,MAAO/wB,EACvC,CACAD,kBAAkBtB,EAAKuB,EAAO,OAC1B,MAAM0vB,EAAQ,MAAOjxB,EAAM,CAACA,EAAIimB,EAAGjmB,EAAI+vB,EAAG/vB,EAAIuW,EAAGvW,EAAI6V,GAAK,CAAC7V,EAAIimB,EAAGjmB,EAAI+vB,EAAG/vB,EAAIuW,GAC7E,OAAO,IAAI+b,GAAMrB,EAAO,MAAO1vB,EACnC,CACAD,oBAAoBixB,EAAOhxB,EAAO,OAC9B,OAAOgxB,EAAMC,aAAajxB,EAC9B,CACAD,wBAAwBtB,GACpB,OAAQqyB,GAAoBryB,EAAK,MAC7BqyB,GAAoBryB,EAAK,MACzBqyB,GAAoBryB,EAAK,IACjC,CACAsB,yBAAyBtB,GACrB,OAAOvC,KAAKg1B,iBAAiBzyB,IAAQqyB,GAAoBryB,EAAK,IAClE,CACAsB,qBAAqBtB,GACjB,OAAOvC,KAAKg1B,iBAAiBzyB,EACjC,CACAsB,cAAcsF,EAAIC,GACd,GAAID,EAAG6qB,OAAS5qB,EAAG4qB,KACf,OAAO,EAEX,MAAMiB,EAAS9rB,EAAG+rB,OACZC,EAAS/rB,EAAG8rB,OAClB,IAAK,IAAI7yB,EAAI,EAAGA,EAAI4yB,EAAO7yB,OAAQC,IAC/B,GAAI4yB,EAAO5yB,KAAO8yB,EAAO9yB,GACrB,OAAO,EAGf,OAAO,CACX,CACA3C,YAAY8zB,EAAOQ,EAAMlwB,EAAO,OAC5B9D,KAAKg0B,KAAOA,EACZh0B,KAAK8D,KAAOA,EACZ9D,KAAKk1B,OAASf,GAAyBX,EAAOQ,EAAMlwB,EACxD,CACAsxB,cAAcC,EAAUvxB,EAAO,OAC3B,OAAO2vB,GAAqBiB,GAAanB,GAAqBvzB,KAAKk1B,QAAS,CAAElB,KAAMh0B,KAAKg0B,KAAMlwB,KAAM9D,KAAK8D,MAAQ,CAAEkwB,KAAMqB,QAA2CA,EAAWr1B,KAAKg0B,K,KAAMlwB,IAAS9D,KAAKk1B,OAAO,GACpN,CACAH,aAAajxB,EAAO,OAChB,MAAMwxB,EAAWt1B,KAAKo1B,cAAc,MAAOtxB,GAC3C,MAAO,CACH0kB,EAAG8M,EAAS,GACZhD,EAAGgD,EAAS,GACZxc,EAAGwc,EAAS,GACZld,EAAGkd,EAAS,GAEpB,EAGJ,MAAMC,GAAcjvB,EAAU,QAC9B,MAAMkvB,GACF91B,YAAYuI,EAAKlE,GACb/D,KAAKy1B,YAAc,KACnBz1B,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAI6tB,MAC3BxxB,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzC,MAAMg1B,EAAUztB,EAAIC,cAAc,OAClCwtB,EAAQjuB,UAAUC,IAAI6tB,GAAY,QAClC,MAAMI,EAAS1tB,EAAIC,cAAc,OACjCytB,EAAOluB,UAAUC,IAAI6tB,GAAY,OACjCv1B,KAAK41B,eAAiB7xB,EAAO8xB,cAC7BF,EAAOrtB,YAAYtI,KAAK41B,eAAel1B,SACvCg1B,EAAQptB,YAAYqtB,GACpB,MAAMG,EAAQ7tB,EAAIC,cAAc,OAChC4tB,EAAMruB,UAAUC,IAAI6tB,GAAY,MAChCv1B,KAAK+1B,cAAgBhyB,EAAOiyB,aAC5BF,EAAMxtB,YAAYtI,KAAK+1B,cAAcr1B,SACrCg1B,EAAQptB,YAAYwtB,GACpB91B,KAAKU,QAAQ4H,YAAYotB,GACzB,MAAMO,EAAUhuB,EAAIC,cAAc,OAKlC,GAJA+tB,EAAQxuB,UAAUC,IAAI6tB,GAAY,QAClCv1B,KAAK8vB,UAAY/rB,EAAOgsB,SACxBkG,EAAQ3tB,YAAYtI,KAAK8vB,UAAUpvB,SACnCV,KAAKU,QAAQ4H,YAAY2tB,GACrBlyB,EAAOmyB,WAAY,CACnBl2B,KAAKy1B,YAAc,CACfU,QAASpyB,EAAOmyB,WAAWC,QAC3Bx2B,KAAMoE,EAAOmyB,WAAWv2B,MAE5B,MAAMy2B,EAAQnuB,EAAIC,cAAc,OAChCkuB,EAAM3uB,UAAUC,IAAI6tB,GAAY,MAChC,MAAMc,EAASpuB,EAAIC,cAAc,OACjCmuB,EAAO5uB,UAAUC,IAAI6tB,GAAY,OACjCc,EAAO/tB,YAAYtI,KAAKy1B,YAAYU,QAAQz1B,SAC5C01B,EAAM9tB,YAAY+tB,GAClB,MAAMC,EAASruB,EAAIC,cAAc,OACjCouB,EAAO7uB,UAAUC,IAAI6tB,GAAY,OACjCe,EAAOhuB,YAAYtI,KAAKy1B,YAAY91B,KAAKe,SACzC01B,EAAM9tB,YAAYguB,GAClBt2B,KAAKU,QAAQ4H,YAAY8tB,EAC7B,CACJ,CACIG,2BACA,MAAMC,EAAQ,CACVx2B,KAAK41B,eAAel1B,QACpBV,KAAK+1B,cAAcr1B,QACnBV,KAAK8vB,UAAU2G,qBACZz2B,KAAK8vB,UAAU4G,UAAUjlB,KAAK1P,GAAMA,EAAE2hB,gBAK7C,OAHI1jB,KAAKy1B,aACLe,EAAM1wB,KAAK9F,KAAKy1B,YAAYU,QAAQz1B,QAASV,KAAKy1B,YAAY91B,KAAK+jB,cAEhE8S,CACX,EAGJ,SAASG,GAAet1B,GACpB,MAAiB,QAAVA,EAAkB,MAAkB,UAAVA,EAAoB,aAAUuB,CACnE,CACA,SAASg0B,GAAsBpzB,GAC3B,MAAM8O,EAAIpG,EACV,OAAOE,EAAY5I,EAAQ,CACvBkwB,MAAOphB,EAAElH,SAASG,QAClBupB,MAAOxiB,EAAElH,SAASS,OAAO,CACrB6nB,MAAOphB,EAAElH,SAASG,QAClBzH,KAAMwO,EAAElH,SAASE,OAAOqrB,MAE5Bh1B,SAAU2Q,EAAElH,SAASG,QACrBsrB,OAAQvkB,EAAElH,SAASE,OAAOklB,KAElC,CACA,SAASsG,GAAoBC,GACzB,OAAOA,EAAW,GAAM,CAC5B,CACA,SAASC,GAAiBxzB,GACtB,IAAIQ,EACJ,OAA+B,QAAvBA,EAAKR,EAAOsxB,aAA0B,IAAP9wB,OAAgB,EAASA,EAAGF,IACvE,CAEA,SAASmzB,GAAwBC,EAAIC,GACjC,OAAQD,EAAGxD,QAAUyD,EAAGzD,OACpBwD,EAAGlD,OAASmD,EAAGnD,MACfkD,EAAGE,WAAaD,EAAGC,UACnBF,EAAGpzB,OAASqzB,EAAGrzB,IACvB,CACA,SAASuzB,GAA2B13B,EAAMgiB,GACtC,MAAMyD,EAAIzlB,EAAK2lB,MAAM,WACrB,OAAKF,EAGE5D,KAAKD,IAAuB,IAAnB+V,WAAWlS,EAAE,IAAazD,EAAUA,GAFzCH,KAAKD,IAAI+V,WAAW33B,GAAOgiB,EAG1C,CACA,MAAM4V,GAAmB,CACrBC,IAAMC,GAAUA,EAChBC,KAAOD,GAAmB,IAATA,EAAgB,IACjCE,IAAMF,GAAmB,IAATA,GAAiB,EAAIjW,KAAKoW,IAC1CC,KAAOJ,GAAkB,IAARA,GAErB,SAASK,GAAsBn4B,GAC3B,MAAMylB,EAAIzlB,EAAK2lB,MAAM,mCACrB,IAAKF,EACD,OAAOkS,WAAW33B,GAEtB,MAAM83B,EAAQH,WAAWlS,EAAE,IACrB2S,EAAO3S,EAAE,GACf,OAAOmS,GAAiBQ,GAAMN,EAClC,CACA,SAASO,GAAkCr4B,GACvC,MAAMylB,EAAIzlB,EAAK2lB,MAAM,oFACrB,IAAKF,EACD,OAAO,KAEX,MAAMoO,EAAQ,CACV6D,GAA2BjS,EAAE,GAAI,KACjCiS,GAA2BjS,EAAE,GAAI,KACjCiS,GAA2BjS,EAAE,GAAI,MAErC,OAAI6S,MAAMzE,EAAM,KAAOyE,MAAMzE,EAAM,KAAOyE,MAAMzE,EAAM,IAC3C,KAEJA,CACX,CACA,SAAS0E,GAA+Bp0B,GACpC,OAAQnE,IACJ,MAAM6zB,EAAQwE,GAAkCr4B,GAChD,OAAO6zB,EAAQ,IAAIqB,GAAMrB,EAAO,MAAO1vB,GAAQ,IAAI,CAE3D,CACA,SAASq0B,GAAmCx4B,GACxC,MAAMylB,EAAIzlB,EAAK2lB,MAAM,6GACrB,IAAKF,EACD,OAAO,KAEX,MAAMoO,EAAQ,CACV6D,GAA2BjS,EAAE,GAAI,KACjCiS,GAA2BjS,EAAE,GAAI,KACjCiS,GAA2BjS,EAAE,GAAI,KACjCiS,GAA2BjS,EAAE,GAAI,IAErC,OAAI6S,MAAMzE,EAAM,KACZyE,MAAMzE,EAAM,KACZyE,MAAMzE,EAAM,KACZyE,MAAMzE,EAAM,IACL,KAEJA,CACX,CACA,SAAS4E,GAAgCt0B,GACrC,OAAQnE,IACJ,MAAM6zB,EAAQ2E,GAAmCx4B,GACjD,OAAO6zB,EAAQ,IAAIqB,GAAMrB,EAAO,MAAO1vB,GAAQ,IAAI,CAE3D,CACA,SAASu0B,GAAwB14B,GAC7B,MAAMylB,EAAIzlB,EAAK2lB,MAAM,wGACrB,IAAKF,EACD,OAAO,KAEX,MAAMoO,EAAQ,CACVsE,GAAsB1S,EAAE,IACxBiS,GAA2BjS,EAAE,GAAI,KACjCiS,GAA2BjS,EAAE,GAAI,MAErC,OAAI6S,MAAMzE,EAAM,KAAOyE,MAAMzE,EAAM,KAAOyE,MAAMzE,EAAM,IAC3C,KAEJA,CACX,CACA,SAAS8E,GAAqBx0B,GAC1B,OAAQnE,IACJ,MAAM6zB,EAAQ6E,GAAwB14B,GACtC,OAAO6zB,EAAQ,IAAIqB,GAAMrB,EAAO,MAAO1vB,GAAQ,IAAI,CAE3D,CACA,SAASy0B,GAAyB54B,GAC9B,MAAMylB,EAAIzlB,EAAK2lB,MAAM,iIACrB,IAAKF,EACD,OAAO,KAEX,MAAMoO,EAAQ,CACVsE,GAAsB1S,EAAE,IACxBiS,GAA2BjS,EAAE,GAAI,KACjCiS,GAA2BjS,EAAE,GAAI,KACjCiS,GAA2BjS,EAAE,GAAI,IAErC,OAAI6S,MAAMzE,EAAM,KACZyE,MAAMzE,EAAM,KACZyE,MAAMzE,EAAM,KACZyE,MAAMzE,EAAM,IACL,KAEJA,CACX,CACA,SAASgF,GAAsB10B,GAC3B,OAAQnE,IACJ,MAAM6zB,EAAQ+E,GAAyB54B,GACvC,OAAO6zB,EAAQ,IAAIqB,GAAMrB,EAAO,MAAO1vB,GAAQ,IAAI,CAE3D,CACA,SAAS20B,GAA2B94B,GAChC,MAAM+4B,EAAO/4B,EAAK2lB,MAAM,8CACxB,GAAIoT,EACA,MAAO,CACHx4B,SAASw4B,EAAK,GAAKA,EAAK,GAAI,IAC5Bx4B,SAASw4B,EAAK,GAAKA,EAAK,GAAI,IAC5Bx4B,SAASw4B,EAAK,GAAKA,EAAK,GAAI,KAGpC,MAAMC,EAAUh5B,EAAK2lB,MAAM,8DAC3B,OAAIqT,EACO,CACHz4B,SAASy4B,EAAQ,GAAI,IACrBz4B,SAASy4B,EAAQ,GAAI,IACrBz4B,SAASy4B,EAAQ,GAAI,KAGtB,IACX,CACA,SAASC,GAAiBj5B,GACtB,MAAM6zB,EAAQiF,GAA2B94B,GACzC,OAAO6zB,EAAQ,IAAIqB,GAAMrB,EAAO,MAAO,OAAS,IACpD,CACA,SAASqF,GAA4Bl5B,GACjC,MAAM+4B,EAAO/4B,EAAK2lB,MAAM,4DACxB,GAAIoT,EACA,MAAO,CACHx4B,SAASw4B,EAAK,GAAKA,EAAK,GAAI,IAC5Bx4B,SAASw4B,EAAK,GAAKA,EAAK,GAAI,IAC5Bx4B,SAASw4B,EAAK,GAAKA,EAAK,GAAI,IAC5BrM,GAASnsB,SAASw4B,EAAK,GAAKA,EAAK,GAAI,IAAK,EAAG,IAAK,EAAG,IAG7D,MAAMC,EAAUh5B,EAAK2lB,MAAM,+EAC3B,OAAIqT,EACO,CACHz4B,SAASy4B,EAAQ,GAAI,IACrBz4B,SAASy4B,EAAQ,GAAI,IACrBz4B,SAASy4B,EAAQ,GAAI,IACrBtM,GAASnsB,SAASy4B,EAAQ,GAAI,IAAK,EAAG,IAAK,EAAG,IAG/C,IACX,CACA,SAASG,GAAkBn5B,GACvB,MAAM6zB,EAAQqF,GAA4Bl5B,GAC1C,OAAO6zB,EAAQ,IAAIqB,GAAMrB,EAAO,MAAO,OAAS,IACpD,CACA,SAASuF,GAA8Bp5B,GACnC,MAAMylB,EAAIzlB,EAAK2lB,MAAM,yGACrB,IAAKF,EACD,OAAO,KAEX,MAAMoO,EAAQ,CACV8D,WAAWlS,EAAE,IACbkS,WAAWlS,EAAE,IACbkS,WAAWlS,EAAE,KAEjB,OAAI6S,MAAMzE,EAAM,KAAOyE,MAAMzE,EAAM,KAAOyE,MAAMzE,EAAM,IAC3C,KAEJA,CACX,CACA,SAASwF,GAA2Bl1B,GAChC,OAAQnE,IACJ,MAAM6zB,EAAQuF,GAA8Bp5B,GAC5C,OAAO6zB,EAAQ,IAAIqB,GAAMrB,EAAO,MAAO1vB,GAAQ,IAAI,CAE3D,CACA,SAASm1B,GAA+Bt5B,GACpC,MAAMylB,EAAIzlB,EAAK2lB,MAAM,yIACrB,IAAKF,EACD,OAAO,KAEX,MAAMoO,EAAQ,CACV8D,WAAWlS,EAAE,IACbkS,WAAWlS,EAAE,IACbkS,WAAWlS,EAAE,IACbkS,WAAWlS,EAAE,KAEjB,OAAI6S,MAAMzE,EAAM,KACZyE,MAAMzE,EAAM,KACZyE,MAAMzE,EAAM,KACZyE,MAAMzE,EAAM,IACL,KAEJA,CACX,CACA,SAAS0F,GAA4Bp1B,GACjC,OAAQnE,IACJ,MAAM6zB,EAAQyF,GAA+Bt5B,GAC7C,OAAO6zB,EAAQ,IAAIqB,GAAMrB,EAAO,MAAO1vB,GAAQ,IAAI,CAE3D,CACA,MAAMq1B,GAAoB,CACtB,CACIvuB,OAAQ6tB,GACR9tB,OAAQ,CACJ+oB,OAAO,EACPM,KAAM,MACNoD,SAAU,QAGlB,CACIxsB,OAAQiuB,GACRluB,OAAQ,CACJ+oB,OAAO,EACPM,KAAM,MACNoD,SAAU,QAGlB,CACIxsB,OAAQotB,GACRrtB,OAAQ,CACJ+oB,OAAO,EACPM,KAAM,MACNoD,SAAU,SAGlB,CACIxsB,OAAQutB,GACRxtB,OAAQ,CACJ+oB,OAAO,EACPM,KAAM,MACNoD,SAAU,SAGlB,CACIxsB,OAAQytB,GACR1tB,OAAQ,CACJ+oB,OAAO,EACPM,KAAM,MACNoD,SAAU,SAGlB,CACIxsB,OAAQ2tB,GACR5tB,OAAQ,CACJ+oB,OAAO,EACPM,KAAM,MACNoD,SAAU,SAGlB,CACIxsB,OAAQmuB,GACRpuB,OAAQ,CACJ+oB,OAAO,EACPM,KAAM,MACNoD,SAAU,WAGlB,CACIxsB,OAAQquB,GACRtuB,OAAQ,CACJ+oB,OAAO,EACPM,KAAM,MACNoD,SAAU,YAItB,SAASgC,GAAkBz5B,GACvB,OAAOw5B,GAAkB/uB,QAAO,CAACivB,GAAMzuB,OAAEA,EAAQD,OAAQ2uB,KACjDD,IAGGzuB,EAAOjL,GAAQ25B,EAAY,OACnC,KACP,CACA,SAASC,GAAwB55B,EAAMmE,EAAO,OAC1C,MAAM0kB,EAAI4Q,GAAkBz5B,GAC5B,OAAK6oB,EAGc,QAAfA,EAAE4O,UAA+B,UAATtzB,EACjBpB,OAAO4H,OAAO5H,OAAO4H,OAAO,CAAC,EAAGke,GAAI,CAAE1kB,KAAM,QAEpC,SAAf0kB,EAAE4O,SACK10B,OAAO4H,OAAO5H,OAAO4H,OAAO,CAAC,EAAGke,GAAI,CAAE1kB,KAAMA,IAEhD,KARI,IASf,CACA,MAAM01B,GAAkB,CACpBC,IAAK,CACDb,GACAE,GACAZ,GAA+B,OAC/BE,GAAgC,OAChCE,GAAqB,OACrBE,GAAsB,OACtBQ,GAA2B,OAC3BE,GAA4B,QAEhCQ,MAAO,CACHxB,GAA+B,SAC/BE,GAAgC,SAChCE,GAAqB,SACrBE,GAAsB,SACtBQ,GAA2B,SAC3BE,GAA4B,WAGpC,SAASS,GAA+B71B,GACpC,MAAMmhB,EAAUuU,GAAgB11B,GAChC,OAAQzC,IACJ,GAAqB,iBAAVA,EACP,OAAOwzB,GAAM+E,MAAM91B,GAEvB,MAAM6G,EAASsa,EAAQ7a,QAAO,CAACivB,EAAMzuB,IAC7ByuB,GAGGzuB,EAAOvJ,IACf,MACH,OAAOsJ,QAAuCA,EAASkqB,GAAM+E,MAAM91B,EAAK,CAEhF,CACA,SAAS+1B,GAAwB/1B,GAC7B,MAAMmhB,EAAUuU,GAAgB11B,GAChC,OAAQzC,GACG4jB,EAAQ7a,QAAO,CAACivB,EAAMzuB,IACrByuB,GAGGzuB,EAAOvJ,IACf,KAEX,CACA,SAASy4B,GAASC,GACd,MAAMC,EAAMpN,GAAepL,KAAK0P,MAAM6I,GAAO,EAAG,KAAK15B,SAAS,IAC9D,OAAsB,IAAf25B,EAAI53B,OAAe,IAAI43B,IAAQA,CAC1C,CACA,SAASC,GAAoB54B,EAAOulB,EAAS,KAIzC,MAAO,GAAGA,IAHI2M,GAAqBlyB,EAAM+zB,cAAc,QAClD3jB,IAAIqoB,IACJx5B,KAAK,KAEd,CACA,SAAS45B,GAAqB74B,EAAOulB,EAAS,KAC1C,MAAMuT,EAAY94B,EAAM+zB,cAAc,OAItC,MAAO,GAAGxO,IAHI,CAACuT,EAAU,GAAIA,EAAU,GAAIA,EAAU,GAAmB,IAAfA,EAAU,IAC9D1oB,IAAIqoB,IACJx5B,KAAK,KAEd,CACA,SAAS85B,GAA2B/4B,EAAOg5B,GACvC,MAAM1W,EAAYiF,GAAmC,UAAbyR,EAAuB,EAAI,GAEnE,MAAO,OADO9G,GAAqBlyB,EAAM+zB,cAAc,MAAOiF,IAAW5oB,KAAKsoB,GAASpW,EAAUoW,KAC7Ez5B,KAAK,QAC7B,CACA,SAASg6B,GAAkCx2B,GACvC,OAAQzC,GACG+4B,GAA2B/4B,EAAOyC,EAEjD,CACA,SAASy2B,GAA4Bl5B,EAAOg5B,GACxC,MAAMG,EAAa5R,GAAsB,GACnC6R,EAAe7R,GAAmC,UAAbyR,EAAuB,EAAI,GAKtE,MAAO,QAJOh5B,EAAM+zB,cAAc,MAAOiF,GAAU5oB,KAAI,CAACsoB,EAAMl4B,KAC9B,IAAVA,EAAc24B,EAAaC,GAC5BV,KAEAz5B,KAAK,QAC9B,CACA,SAASo6B,GAAmC52B,GACxC,OAAQzC,GACGk5B,GAA4Bl5B,EAAOyC,EAElD,CACA,SAAS62B,GAA2Bt5B,GAChC,MAAMu5B,EAAa,CACfhS,GAAsB,GACtBI,GACAA,IAGJ,MAAO,OADOuK,GAAqBlyB,EAAM+zB,cAAc,QAAQ3jB,KAAI,CAACsoB,EAAMl4B,IAAU+4B,EAAW/4B,GAAOk4B,KAClFz5B,KAAK,QAC7B,CACA,SAASu6B,GAA4Bx5B,GACjC,MAAMu5B,EAAa,CACfhS,GAAsB,GACtBI,GACAA,GACAJ,GAAsB,IAK1B,MAAO,QAHOvnB,EACT+zB,cAAc,OACd3jB,KAAI,CAACsoB,EAAMl4B,IAAU+4B,EAAW/4B,GAAOk4B,KACvBz5B,KAAK,QAC9B,CACA,SAASw6B,GAAuBz5B,EAAOyC,GACnC,MAAM6f,EAAYiF,GAA+B,UAAT9kB,EAAmB,EAAI,GACzDi3B,EAAQ,CAAC,IAAK,IAAK,KAEzB,MAAO,IADOxH,GAAqBlyB,EAAM+zB,cAAc,MAAOtxB,IAAO2N,KAAI,CAACsoB,EAAMl4B,IAAU,GAAGk5B,EAAMl5B,OAAW8hB,EAAUoW,OACvGz5B,KAAK,QAC1B,CACA,SAAS06B,GAA8Bl3B,GACnC,OAAQzC,GAAUy5B,GAAuBz5B,EAAOyC,EACpD,CACA,SAASm3B,GAAwB55B,EAAOyC,GACpC,MAAM02B,EAAa5R,GAAsB,GACnC6R,EAAe7R,GAA+B,UAAT9kB,EAAmB,EAAI,GAC5Di3B,EAAQ,CAAC,IAAK,IAAK,IAAK,KAK9B,MAAO,IAJO15B,EAAM+zB,cAAc,MAAOtxB,GAAM2N,KAAI,CAACsoB,EAAMl4B,KACtD,MAAM8hB,EAAsB,IAAV9hB,EAAc24B,EAAaC,EAC7C,MAAO,GAAGM,EAAMl5B,OAAW8hB,EAAUoW,IAAO,IAE/Bz5B,KAAK,QAC1B,CACA,SAAS46B,GAA+Bp3B,GACpC,OAAQzC,GAAU45B,GAAwB55B,EAAOyC,EACrD,CACA,MAAMq3B,GAA0B,CAC5B,CACIC,OAAQ,CACJ1H,OAAO,EACPM,KAAM,MACNoD,SAAU,MACVtzB,KAAM,OAEVu3B,YAAapB,IAEjB,CACImB,OAAQ,CACJ1H,OAAO,EACPM,KAAM,MACNoD,SAAU,MACVtzB,KAAM,OAEVu3B,YAAanB,IAEjB,CACIkB,OAAQ,CACJ1H,OAAO,EACPM,KAAM,MACNoD,SAAU,OACVtzB,KAAM,OAEVu3B,YAAaV,IAEjB,CACIS,OAAQ,CACJ1H,OAAO,EACPM,KAAM,MACNoD,SAAU,OACVtzB,KAAM,OAEVu3B,YAAaR,OAEd,CAAC,MAAO,SAASzwB,QAAO,CAACivB,EAAMv1B,IACvB,IACAu1B,EACH,CACI+B,OAAQ,CACJ1H,OAAO,EACPM,KAAM,MACNoD,SAAU,OACVtzB,KAAMA,GAEVu3B,YAAaf,GAAkCx2B,IAEnD,CACIs3B,OAAQ,CACJ1H,OAAO,EACPM,KAAM,MACNoD,SAAU,OACVtzB,KAAMA,GAEVu3B,YAAaX,GAAmC52B,IAEpD,CACIs3B,OAAQ,CACJ1H,OAAO,EACPM,KAAM,MACNoD,SAAU,SACVtzB,KAAMA,GAEVu3B,YAAaL,GAA8Bl3B,IAE/C,CACIs3B,OAAQ,CACJ1H,OAAO,EACPM,KAAM,MACNoD,SAAU,SACVtzB,KAAMA,GAEVu3B,YAAaH,GAA+Bp3B,MAGrD,KAEP,SAASw3B,GAAqBF,GAC1B,OAAOD,GAAwB/wB,QAAO,CAACivB,EAAMkC,IACrClC,IAGGpC,GAAwBsE,EAAIH,OAAQA,GACrCG,EAAIF,YACJ,OACP,KACP,CAEA,MAAMG,GAAcl1B,EAAU,OAC9B,MAAMm1B,GACF/7B,YAAYuI,EAAKlE,GACb/D,KAAK8f,eAAiB9f,KAAK8f,eAAera,KAAKzF,MAC/CA,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKqB,MAAMqE,QAAQL,GAAG,SAAUrF,KAAK8f,gBACrC9f,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAI8zB,MAC3Bz3B,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzCqD,EAAOlD,UAAUkN,aAAa/N,KAAKU,SACnC,MAAMg7B,EAAUzzB,EAAIC,cAAc,OAClCwzB,EAAQj0B,UAAUC,IAAI8zB,GAAY,MAClCx7B,KAAKU,QAAQ4H,YAAYozB,GACzB,MAAMC,EAAY1zB,EAAIC,cAAc,OACpCyzB,EAAUl0B,UAAUC,IAAI8zB,GAAY,MACpCE,EAAQpzB,YAAYqzB,GACpB37B,KAAK47B,WAAaD,EAClB,MAAME,EAAa5zB,EAAIC,cAAc,OACrC2zB,EAAWp0B,UAAUC,IAAI8zB,GAAY,MACrCx7B,KAAKU,QAAQ4H,YAAYuzB,GACzB77B,KAAK87B,YAAcD,EACnB,MAAME,EAAc9zB,EAAIC,cAAc,OACtC6zB,EAAYt0B,UAAUC,IAAI8zB,GAAY,MACtCx7B,KAAK87B,YAAYxzB,YAAYyzB,GAC7B/7B,KAAKg8B,aAAeD,EACpB/7B,KAAKyiB,SACT,CACAA,UACI,MAAM9D,EAAI3e,KAAKqB,MAAM2F,SACfmzB,EAAYxb,EAAEyW,cAAc,OAC5B6G,EAAY,IAAIpH,GAAM,CAACsF,EAAU,GAAIA,EAAU,GAAIA,EAAU,GAAI,GAAI,OACrE+B,EAAa,IAAIrH,GAAM,CAACsF,EAAU,GAAIA,EAAU,GAAIA,EAAU,GAAI,KAAM,OACxEgC,EAAgB,CAClB,WACA5B,GAA4B0B,GAC5B1B,GAA4B2B,IAEhCl8B,KAAK47B,WAAWxsB,MAAMgtB,WAAa,mBAAmBD,EAAc77B,KAAK,QACzEN,KAAKg8B,aAAa5sB,MAAMitB,gBAAkB9B,GAA4B5b,GACtE,MAAM8F,EAAO4H,GAAS8N,EAAU,GAAI,EAAG,EAAG,EAAG,KAC7Cn6B,KAAK87B,YAAY1sB,MAAMqV,KAAO,GAAGA,IACrC,CACA3E,iBACI9f,KAAKyiB,SACT,EAGJ,MAAM6Z,GACF58B,YAAYuI,EAAKlE,GACb/D,KAAKmvB,WAAanvB,KAAKmvB,WAAW1pB,KAAKzF,MACvCA,KAAKovB,SAAWpvB,KAAKovB,SAAS3pB,KAAKzF,MACnCA,KAAKouB,eAAiBpuB,KAAKouB,eAAe3oB,KAAKzF,MAC/CA,KAAKquB,eAAiBruB,KAAKquB,eAAe5oB,KAAKzF,MAC/CA,KAAKsuB,aAAetuB,KAAKsuB,aAAa7oB,KAAKzF,MAC3CA,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAKW,KAAO,IAAI86B,GAAaxzB,EAAK,CAC9B5G,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,YAEpBb,KAAKsvB,WAAa,IAAIxE,GAAe9qB,KAAKW,KAAKD,SAC/CV,KAAKsvB,WAAW5pB,QAAQL,GAAG,OAAQrF,KAAKouB,gBACxCpuB,KAAKsvB,WAAW5pB,QAAQL,GAAG,OAAQrF,KAAKquB,gBACxCruB,KAAKsvB,WAAW5pB,QAAQL,GAAG,KAAMrF,KAAKsuB,cACtCtuB,KAAKW,KAAKD,QAAQiI,iBAAiB,UAAW3I,KAAKmvB,YACnDnvB,KAAKW,KAAKD,QAAQiI,iBAAiB,QAAS3I,KAAKovB,SACrD,CACAG,oBAAoB9sB,EAAGgH,GACnB,IAAKhH,EAAEmpB,MACH,OAEJ,MAAM8H,EAAQjxB,EAAEmpB,MAAMrB,EAAI9nB,EAAEipB,OAAOC,MAC7BhN,EAAI3e,KAAKqB,MAAM2F,UACdkN,EAAG+J,EAAGlc,GAAK4c,EAAEyW,cAAc,OAClCp1B,KAAKqB,MAAMiI,YAAY,IAAIurB,GAAM,CAAC3gB,EAAG+J,EAAGlc,EAAG2xB,GAAQ,OAAQjqB,EAC/D,CACA2kB,eAAernB,GACX/G,KAAKuvB,oBAAoBxoB,EAAGglB,KAAM,CAC9BxiB,WAAW,EACXhI,MAAM,GAEd,CACA8sB,eAAetnB,GACX/G,KAAKuvB,oBAAoBxoB,EAAGglB,KAAM,CAC9BxiB,WAAW,EACXhI,MAAM,GAEd,CACA+sB,aAAavnB,GACT/G,KAAKuvB,oBAAoBxoB,EAAGglB,KAAM,CAC9BxiB,WAAW,EACXhI,MAAM,GAEd,CACA4tB,WAAWpoB,GACP,MAAM+a,EAAO4H,GAAcoN,IAAoB,GAAO7M,GAAsBljB,IAC5E,GAAa,IAAT+a,EACA,OAEJ,MAAMnD,EAAI3e,KAAKqB,MAAM2F,UACdkN,EAAG+J,EAAGlc,EAAGqW,GAAKuG,EAAEyW,cAAc,OACrCp1B,KAAKqB,MAAMiI,YAAY,IAAIurB,GAAM,CAAC3gB,EAAG+J,EAAGlc,EAAGqW,EAAI0J,GAAO,OAAQ,CAC1DvY,WAAW,EACXhI,MAAM,GAEd,CACA6tB,SAASroB,GAEQ,IADA2iB,GAAcoN,IAAoB,GAAO7M,GAAsBljB,KAI5E/G,KAAKqB,MAAMiI,YAAYtJ,KAAKqB,MAAM2F,SAAU,CACxCuC,WAAW,EACXhI,MAAM,GAEd,EAGJ,MAAMg7B,GAAcj2B,EAAU,UAC9B,SAASk2B,GAAwBv0B,GAC7B,MAAMma,EAAana,EAAIC,cAAc,UAC/BmN,EAAQ,CACV,CAAE1V,KAAM,MAAO0B,MAAO,OACtB,CAAE1B,KAAM,MAAO0B,MAAO,OACtB,CAAE1B,KAAM,MAAO0B,MAAO,QAS1B,OAPA+gB,EAAW9Z,YAAY+M,EAAMjL,QAAO,CAACmH,EAAMvG,KACvC,MAAM6X,EAAU5a,EAAIC,cAAc,UAIlC,OAHA2a,EAAQ/a,YAAckD,EAAKrL,KAC3BkjB,EAAQxhB,MAAQ2J,EAAK3J,MACrBkQ,EAAKjJ,YAAYua,GACVtR,CAAA,GACRtJ,EAAIuJ,2BACA4Q,CACX,CACA,MAAMqa,GACF/8B,YAAYuI,EAAKlE,GACb/D,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAI60B,MAC3Bx4B,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzC,MAAMg8B,EAAWz0B,EAAIC,cAAc,OACnCw0B,EAASj1B,UAAUC,IAAI60B,GAAY,MACnCv8B,KAAK28B,UAAYH,GAAwBv0B,GACzCjI,KAAK28B,UAAUl1B,UAAUC,IAAI60B,GAAY,OACzCG,EAASp0B,YAAYtI,KAAKy2B,mBAC1B1yB,EAAOlD,UAAUwH,aAAarI,KAAK28B,WACnC,MAAMC,EAAiB30B,EAAIC,cAAc,OACzC00B,EAAen1B,UAAUC,IAAI60B,GAAY,OACzCK,EAAet0B,YAAYiI,GAAqBtI,EAAK,aACrDy0B,EAASp0B,YAAYs0B,GACrB58B,KAAKU,QAAQ4H,YAAYo0B,GACzB,MAAMG,EAAY50B,EAAIC,cAAc,OACpC20B,EAAUp1B,UAAUC,IAAI60B,GAAY,MACpCv8B,KAAKU,QAAQ4H,YAAYu0B,GACzB78B,KAAK88B,WAAaD,EAClB78B,KAAK+8B,WAAah5B,EAAO2yB,UACzB12B,KAAKg9B,kBACL/1B,EAAUlD,EAAOk5B,WAAYjJ,IACzBh0B,KAAK28B,UAAUt7B,MAAQ2yB,CAAA,GAE/B,CACIyC,wBACA,OAAOz2B,KAAK28B,SAChB,CACIjG,gBACA,OAAO12B,KAAK+8B,UAChB,CACIrG,cAAUA,GACV12B,KAAK+8B,WAAarG,EAClB12B,KAAKg9B,iBACT,CACAA,kBACIjsB,GAAoB/Q,KAAK88B,YACzB,MAAM70B,EAAMjI,KAAKU,QAAQqP,cACzB/P,KAAK+8B,WAAW32B,SAASrE,IACrB,MAAMm7B,EAAWj1B,EAAIC,cAAc,OACnCg1B,EAASz1B,UAAUC,IAAI60B,GAAY,MACnCW,EAAS50B,YAAYvG,EAAErB,SACvBV,KAAK88B,WAAWx0B,YAAY40B,EAAA,GAEpC,EAGJ,SAASC,GAAkBr5B,GACvB,OAAO8kB,GAA+B,UAAT9kB,EAAmB,EAAI,EACxD,CACA,SAASs5B,GAAmBpJ,EAAMlwB,EAAMjC,GACpC,MAAMyf,EAAMyS,GAAsBC,EAAMlwB,GAAMjC,GAC9C,OAAO,IAAIuf,GAAwB,CAC/BG,IAAK,EACLD,IAAKA,GAEb,CACA,SAAS+b,GAA0Bp1B,EAAKlE,EAAQlC,GAC5C,OAAO,IAAImsB,GAAqB/lB,EAAK,CACjC+kB,cAAyB,IAAVnrB,EAAc,MAAkB,IAAVA,EAAkB,MAAQ,MAC/D8nB,SAAUmN,IAAoB,GAC9BlsB,OAAQ7G,EAAO6G,OACf1F,MAAO+E,EAASuI,WAAW,CACvB8qB,cAAoC,UAArBv5B,EAAOw5B,UAAwB,IAAO,EACrD5Z,UAAWwZ,GAAkBp5B,EAAOw5B,aAExCl8B,MAAO2I,EAAY,EAAG,CAClBhB,WAAYo0B,GAAmBr5B,EAAOk5B,UAAWl5B,EAAOw5B,UAAW17B,KAEvEhB,UAAWkD,EAAOlD,WAE1B,CACA,MAAM28B,GACF99B,YAAYuI,EAAKlE,GACb/D,KAAKy9B,oBAAsBz9B,KAAKy9B,oBAAoBh4B,KAAKzF,MACzDA,KAAK09B,WAAa35B,EAAOw5B,UACzBv9B,KAAK8jB,QAAU/f,EAAO6G,OACtB5K,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAKi9B,UAAYjzB,EAAYhK,KAAKqB,MAAM2F,SAASgtB,MACjDh0B,KAAK29B,KAAO39B,KAAK49B,4BAA4B31B,GAC7CjI,KAAKW,KAAO,IAAI87B,GAAcx0B,EAAK,CAC/Bg1B,UAAWj9B,KAAKi9B,UAChBvG,UAAW,CAAC12B,KAAK29B,KAAK,GAAGh9B,KAAMX,KAAK29B,KAAK,GAAGh9B,KAAMX,KAAK29B,KAAK,GAAGh9B,MAC/DE,UAAWb,KAAKa,YAEpBb,KAAKW,KAAK81B,kBAAkB9tB,iBAAiB,SAAU3I,KAAKy9B,oBAChE,CACAG,4BAA4B31B,GACxB,MAAM41B,EAAK,CACPZ,UAAWj9B,KAAKi9B,UAAUj2B,SAC1Bu2B,UAAWv9B,KAAK09B,WAChB9yB,OAAQ5K,KAAK8jB,QACbjjB,UAAWb,KAAKa,WAEdi9B,EAAM,CACRT,GAA0Bp1B,EAAK41B,EAAI,GACnCR,GAA0Bp1B,EAAK41B,EAAI,GACnCR,GAA0Bp1B,EAAK41B,EAAI,IAiBvC,OAfAC,EAAI13B,SAAQ,CAAC23B,EAAIl8B,KACbsnB,GAAc,CACVC,QAASppB,KAAKqB,MACdgoB,UAAW0U,EAAG18B,MACdioB,QAAUhX,GACCA,EAAEtL,SAASouB,cAAcp1B,KAAKi9B,UAAUj2B,SAAUhH,KAAK09B,YAAY77B,GAE9E0nB,SAAU,CAACjX,EAAG2L,KACV,MAAM+f,EAAah+B,KAAKi9B,UAAUj2B,SAC5BwsB,EAAQlhB,EAAEtL,SAASouB,cAAc4I,EAAYh+B,KAAK09B,YAExD,OADAlK,EAAM3xB,GAASoc,EAAEjX,SACV,IAAI6tB,GAAMpB,GAAqBF,GAAqBC,GAAQA,EAAM,IAAKwK,EAAYh+B,KAAK09B,WAAU,GAEjH,IAEGI,CACX,CACAL,oBAAoB12B,GAChB,MAAMqb,EAAarb,EAAG+b,cACtB9iB,KAAKi9B,UAAUj2B,SAAWob,EAAW/gB,MACrCrB,KAAK29B,KAAO39B,KAAK49B,4BAA4B59B,KAAKW,KAAKD,QAAQqP,eAC/D/P,KAAKW,KAAK+1B,UAAY,CAClB12B,KAAK29B,KAAK,GAAGh9B,KACbX,KAAK29B,KAAK,GAAGh9B,KACbX,KAAK29B,KAAK,GAAGh9B,KAErB,EAGJ,MAAMs9B,GAAc33B,EAAU,OAC9B,MAAM43B,GACFx+B,YAAYuI,EAAKlE,GACb/D,KAAK8f,eAAiB9f,KAAK8f,eAAera,KAAKzF,MAC/CA,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKqB,MAAMqE,QAAQL,GAAG,SAAUrF,KAAK8f,gBACrC9f,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAIu2B,MAC3Bl6B,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzCqD,EAAOlD,UAAUkN,aAAa/N,KAAKU,SACnC,MAAMi7B,EAAY1zB,EAAIC,cAAc,OACpCyzB,EAAUl0B,UAAUC,IAAIu2B,GAAY,MACpCj+B,KAAKU,QAAQ4H,YAAYqzB,GACzB,MAAME,EAAa5zB,EAAIC,cAAc,OACrC2zB,EAAWp0B,UAAUC,IAAIu2B,GAAY,MACrCj+B,KAAKU,QAAQ4H,YAAYuzB,GACzB77B,KAAK87B,YAAcD,EACnB77B,KAAKyiB,SACT,CACAA,UACI,MAAM9D,EAAI3e,KAAKqB,MAAM2F,UACdkN,GAAKyK,EAAEyW,cAAc,OAC5Bp1B,KAAK87B,YAAY1sB,MAAMitB,gBAAkBjC,GAA2B,IAAIvF,GAAM,CAAC3gB,EAAG,IAAK,KAAM,QAC7F,MAAMuQ,EAAO4H,GAASnY,EAAG,EAAG,IAAK,EAAG,KACpClU,KAAK87B,YAAY1sB,MAAMqV,KAAO,GAAGA,IACrC,CACA3E,iBACI9f,KAAKyiB,SACT,EAGJ,MAAM0b,GACFz+B,YAAYuI,EAAKlE,GACb/D,KAAKmvB,WAAanvB,KAAKmvB,WAAW1pB,KAAKzF,MACvCA,KAAKovB,SAAWpvB,KAAKovB,SAAS3pB,KAAKzF,MACnCA,KAAKouB,eAAiBpuB,KAAKouB,eAAe3oB,KAAKzF,MAC/CA,KAAKquB,eAAiBruB,KAAKquB,eAAe5oB,KAAKzF,MAC/CA,KAAKsuB,aAAetuB,KAAKsuB,aAAa7oB,KAAKzF,MAC3CA,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAKW,KAAO,IAAIu9B,GAAaj2B,EAAK,CAC9B5G,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,YAEpBb,KAAKsvB,WAAa,IAAIxE,GAAe9qB,KAAKW,KAAKD,SAC/CV,KAAKsvB,WAAW5pB,QAAQL,GAAG,OAAQrF,KAAKouB,gBACxCpuB,KAAKsvB,WAAW5pB,QAAQL,GAAG,OAAQrF,KAAKquB,gBACxCruB,KAAKsvB,WAAW5pB,QAAQL,GAAG,KAAMrF,KAAKsuB,cACtCtuB,KAAKW,KAAKD,QAAQiI,iBAAiB,UAAW3I,KAAKmvB,YACnDnvB,KAAKW,KAAKD,QAAQiI,iBAAiB,QAAS3I,KAAKovB,SACrD,CACAG,oBAAoB9sB,EAAGgH,GACnB,IAAKhH,EAAEmpB,MACH,OAEJ,MAAMsI,EAAM7H,GAASO,GAAenqB,EAAEmpB,MAAMrB,EAAG,EAAG9nB,EAAEipB,OAAOC,OAAQ,EAAGlpB,EAAEipB,OAAOC,MAAO,EAAG,KACnFhN,EAAI3e,KAAKqB,MAAM2F,UACf,CAAGiX,EAAGlc,EAAGqW,GAAKuG,EAAEyW,cAAc,OACpCp1B,KAAKqB,MAAMiI,YAAY,IAAIurB,GAAM,CAACX,EAAKjW,EAAGlc,EAAGqW,GAAI,OAAQ3O,EAC7D,CACA2kB,eAAernB,GACX/G,KAAKuvB,oBAAoBxoB,EAAGglB,KAAM,CAC9BxiB,WAAW,EACXhI,MAAM,GAEd,CACA8sB,eAAetnB,GACX/G,KAAKuvB,oBAAoBxoB,EAAGglB,KAAM,CAC9BxiB,WAAW,EACXhI,MAAM,GAEd,CACA+sB,aAAavnB,GACT/G,KAAKuvB,oBAAoBxoB,EAAGglB,KAAM,CAC9BxiB,WAAW,EACXhI,MAAM,GAEd,CACA4tB,WAAWpoB,GACP,MAAM+a,EAAO4H,GAAcoN,IAAoB,GAAQ7M,GAAsBljB,IAC7E,GAAa,IAAT+a,EACA,OAEJ,MAAMnD,EAAI3e,KAAKqB,MAAM2F,UACdkN,EAAG+J,EAAGlc,EAAGqW,GAAKuG,EAAEyW,cAAc,OACrCp1B,KAAKqB,MAAMiI,YAAY,IAAIurB,GAAM,CAAC3gB,EAAI4N,EAAM7D,EAAGlc,EAAGqW,GAAI,OAAQ,CAC1D7O,WAAW,EACXhI,MAAM,GAEd,CACA6tB,SAASroB,GAEQ,IADA2iB,GAAcoN,IAAoB,GAAQ7M,GAAsBljB,KAI7E/G,KAAKqB,MAAMiI,YAAYtJ,KAAKqB,MAAM2F,SAAU,CACxCuC,WAAW,EACXhI,MAAM,GAEd,EAGJ,MAAM68B,GAAc93B,EAAU,OACxB+3B,GAAe,GACrB,MAAMC,GACF5+B,YAAYuI,EAAKlE,GACb/D,KAAK8f,eAAiB9f,KAAK8f,eAAera,KAAKzF,MAC/CA,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKqB,MAAMqE,QAAQL,GAAG,SAAUrF,KAAK8f,gBACrC9f,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAI02B,MAC3Br6B,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzCqD,EAAOlD,UAAUkN,aAAa/N,KAAKU,SACnC,MAAM69B,EAAat2B,EAAIC,cAAc,UACrCq2B,EAAW1qB,OAASwqB,GACpBE,EAAW5S,MAAQ0S,GACnBE,EAAW92B,UAAUC,IAAI02B,GAAY,MACrCp+B,KAAKU,QAAQ4H,YAAYi2B,GACzBv+B,KAAK6P,cAAgB0uB,EACrB,MAAM1C,EAAa5zB,EAAIC,cAAc,OACrC2zB,EAAWp0B,UAAUC,IAAI02B,GAAY,MACrCp+B,KAAKU,QAAQ4H,YAAYuzB,GACzB77B,KAAK87B,YAAcD,EACnB77B,KAAKyiB,SACT,CACAA,UACI,MAAM+b,EAAM5uB,GAAiB5P,KAAK6P,eAClC,IAAK2uB,EACD,OAEJ,MACMC,EADIz+B,KAAKqB,MAAM2F,SACFouB,cAAc,OAC3BzJ,EAAQ3rB,KAAK6P,cAAc8b,MAC3B9X,EAAS7T,KAAK6P,cAAcgE,OAC5B6qB,EAAUF,EAAIG,aAAa,EAAG,EAAGhT,EAAO9X,GACxCkY,EAAO2S,EAAQ3S,KACrB,IAAK,IAAI6S,EAAK,EAAGA,EAAK/qB,EAAQ+qB,IAC1B,IAAK,IAAIC,EAAK,EAAGA,EAAKlT,EAAOkT,IAAM,CAC/B,MAAM5gB,EAAIoO,GAASwS,EAAI,EAAGlT,EAAO,EAAG,KAC9B5pB,EAAIsqB,GAASuS,EAAI,EAAG/qB,EAAQ,IAAK,GACjCyhB,EAAWpC,GAAYuL,EAAS,GAAIxgB,EAAGlc,GACvCM,EAAwB,GAAnBu8B,EAAKjT,EAAQkT,GACxB9S,EAAK1pB,GAAKizB,EAAS,GACnBvJ,EAAK1pB,EAAI,GAAKizB,EAAS,GACvBvJ,EAAK1pB,EAAI,GAAKizB,EAAS,GACvBvJ,EAAK1pB,EAAI,GAAK,GAClB,CAEJm8B,EAAIM,aAAaJ,EAAS,EAAG,GAC7B,MAAMja,EAAO4H,GAASoS,EAAS,GAAI,EAAG,IAAK,EAAG,KAC9Cz+B,KAAK87B,YAAY1sB,MAAMqV,KAAO,GAAGA,KACjC,MAAMoG,EAAMwB,GAASoS,EAAS,GAAI,EAAG,IAAK,IAAK,GAC/Cz+B,KAAK87B,YAAY1sB,MAAMyb,IAAM,GAAGA,IACpC,CACA/K,iBACI9f,KAAKyiB,SACT,EAGJ,MAAMsc,GACFr/B,YAAYuI,EAAKlE,GACb/D,KAAKmvB,WAAanvB,KAAKmvB,WAAW1pB,KAAKzF,MACvCA,KAAKovB,SAAWpvB,KAAKovB,SAAS3pB,KAAKzF,MACnCA,KAAKouB,eAAiBpuB,KAAKouB,eAAe3oB,KAAKzF,MAC/CA,KAAKquB,eAAiBruB,KAAKquB,eAAe5oB,KAAKzF,MAC/CA,KAAKsuB,aAAetuB,KAAKsuB,aAAa7oB,KAAKzF,MAC3CA,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAKW,KAAO,IAAI29B,GAAcr2B,EAAK,CAC/B5G,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,YAEpBb,KAAKsvB,WAAa,IAAIxE,GAAe9qB,KAAKW,KAAKD,SAC/CV,KAAKsvB,WAAW5pB,QAAQL,GAAG,OAAQrF,KAAKouB,gBACxCpuB,KAAKsvB,WAAW5pB,QAAQL,GAAG,OAAQrF,KAAKquB,gBACxCruB,KAAKsvB,WAAW5pB,QAAQL,GAAG,KAAMrF,KAAKsuB,cACtCtuB,KAAKW,KAAKD,QAAQiI,iBAAiB,UAAW3I,KAAKmvB,YACnDnvB,KAAKW,KAAKD,QAAQiI,iBAAiB,QAAS3I,KAAKovB,SACrD,CACAG,oBAAoB9sB,EAAGgH,GACnB,IAAKhH,EAAEmpB,MACH,OAEJ,MAAMoT,EAAa3S,GAAS5pB,EAAEmpB,MAAMrB,EAAG,EAAG9nB,EAAEipB,OAAOC,MAAO,EAAG,KACvDtqB,EAAQgrB,GAAS5pB,EAAEmpB,MAAMlB,EAAG,EAAGjoB,EAAEipB,OAAO7X,OAAQ,IAAK,IACpDK,EAAA,EAAOkE,GAAKpY,KAAKqB,MAAM2F,SAASouB,cAAc,OACrDp1B,KAAKqB,MAAMiI,YAAY,IAAIurB,GAAM,CAAC3gB,EAAG8qB,EAAY39B,EAAO+W,GAAI,OAAQ3O,EACxE,CACA2kB,eAAernB,GACX/G,KAAKuvB,oBAAoBxoB,EAAGglB,KAAM,CAC9BxiB,WAAW,EACXhI,MAAM,GAEd,CACA8sB,eAAetnB,GACX/G,KAAKuvB,oBAAoBxoB,EAAGglB,KAAM,CAC9BxiB,WAAW,EACXhI,MAAM,GAEd,CACA+sB,aAAavnB,GACT/G,KAAKuvB,oBAAoBxoB,EAAGglB,KAAM,CAC9BxiB,WAAW,EACXhI,MAAM,GAEd,CACA4tB,WAAWpoB,GACHojB,GAAWpjB,EAAGvE,MACduE,EAAG8kB,iBAEP,MAAO3X,EAAG+J,EAAGlc,EAAGqW,GAAKpY,KAAKqB,MAAM2F,SAASouB,cAAc,OACjDzL,EAAWmN,IAAoB,GAC/BnR,EAAK+D,GAAcC,EAAUM,GAAsBljB,IACnDk4B,EAAKvV,GAAcC,EAAUK,GAAoBjjB,IAC5C,IAAP4e,GAAmB,IAAPsZ,GAGhBj/B,KAAKqB,MAAMiI,YAAY,IAAIurB,GAAM,CAAC3gB,EAAG+J,EAAI0H,EAAI5jB,EAAIk9B,EAAI7mB,GAAI,OAAQ,CAC7D7O,WAAW,EACXhI,MAAM,GAEd,CACA6tB,SAASroB,GACL,MAAM4iB,EAAWmN,IAAoB,GAC/BnR,EAAK+D,GAAcC,EAAUM,GAAsBljB,IACnDk4B,EAAKvV,GAAcC,EAAUK,GAAoBjjB,IAC5C,IAAP4e,GAAmB,IAAPsZ,GAGhBj/B,KAAKqB,MAAMiI,YAAYtJ,KAAKqB,MAAM2F,SAAU,CACxCuC,WAAW,EACXhI,MAAM,GAEd,EAGJ,MAAM29B,GACFx/B,YAAYuI,EAAKlE,GACb/D,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAKm/B,WAAa,IAAIhB,GAAmBl2B,EAAK,CAC1C5G,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,YAEpBb,KAAKo/B,YAAc,IAAIL,GAAoB92B,EAAK,CAC5C5G,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,YAEpBb,KAAKq/B,UAAYt7B,EAAOu7B,cAClB,CACEnJ,QAAS,IAAImG,GAAmBr0B,EAAK,CACjC5G,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,YAEpBlB,KAAM,IAAIquB,GAAqB/lB,EAAK,CAChC2C,OAAQ2d,GACRoB,SAAU,GACVzkB,MAAO+E,EAASuI,WAAW,CACvB8qB,cAAe,IACf3Z,UAAWiF,GAAsB,KAErCvnB,MAAO2I,EAAY,EAAG,CAClBhB,WAAY,IAAIoY,GAAwB,CAAEG,IAAK,EAAGD,IAAK,MAE3DzgB,UAAWb,KAAKa,aAGtB,KACFb,KAAKq/B,WACLlW,GAAc,CACVC,QAASppB,KAAKqB,MACdgoB,UAAWrpB,KAAKq/B,UAAU1/B,KAAK0B,MAC/BioB,QAAUhX,GACCA,EAAEtL,SAASouB,gBAAgB,GAEtC7L,SAAU,CAACjX,EAAG2L,KACV,MAAMuV,EAAQlhB,EAAEtL,SAASouB,gBAEzB,OADA5B,EAAM,GAAKvV,EAAEjX,SACN,IAAI6tB,GAAMrB,EAAOlhB,EAAEtL,SAASgtB,KAAI,IAInDh0B,KAAKkwB,OAAS,IAAIsN,GAAoBv1B,EAAK,CACvCs1B,UAAWx5B,EAAOw5B,UAClB3yB,OAAQ2d,GACRlnB,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,YAEpBb,KAAKW,KAAO,IAAI60B,GAAgBvtB,EAAK,CACjCiuB,WAAYl2B,KAAKq/B,UACX,CACElJ,QAASn2B,KAAKq/B,UAAUlJ,QAAQx1B,KAChChB,KAAMK,KAAKq/B,UAAU1/B,KAAKgB,MAE5B,KACNq1B,aAAch2B,KAAKm/B,WAAWx+B,KAC9B2+B,cAAev7B,EAAOu7B,cACtBzJ,cAAe71B,KAAKo/B,YAAYz+B,KAChCovB,SAAU/vB,KAAKkwB,OAAOvvB,KACtBE,UAAWb,KAAKa,WAExB,CACIwvB,qBACA,OAAOrwB,KAAKkwB,MAChB,EAGJ,MAAMqP,GAAcj5B,EAAU,SAC9B,MAAMk5B,GACF9/B,YAAYuI,EAAKlE,GACb/D,KAAK8f,eAAiB9f,KAAK8f,eAAera,KAAKzF,MAC/C+D,EAAO1C,MAAMqE,QAAQL,GAAG,SAAUrF,KAAK8f,gBACvC9f,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAI63B,MAC3Bx7B,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzC,MAAMqxB,EAAa9pB,EAAIC,cAAc,OACrC6pB,EAAWtqB,UAAUC,IAAI63B,GAAY,OACrCv/B,KAAKU,QAAQ4H,YAAYypB,GACzB/xB,KAAKy/B,YAAc1N,EACnB,MAAM3pB,EAAaH,EAAIC,cAAc,UACrCE,EAAWX,UAAUC,IAAI63B,GAAY,MACrCx7B,EAAOlD,UAAUwH,aAAaD,GAC9BpI,KAAKU,QAAQ4H,YAAYF,GACzBpI,KAAKuI,cAAgBH,EACrBpI,KAAKyiB,SACT,CACAA,UACI,MAAMphB,EAAQrB,KAAKqB,MAAM2F,SACzBhH,KAAKy/B,YAAYrwB,MAAMitB,gBAAkBnC,GAAqB74B,EAClE,CACAye,iBACI9f,KAAKyiB,SACT,EAGJ,MAAMid,GACFhgC,YAAYuI,EAAKlE,GACb/D,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAKW,KAAO,IAAI6+B,GAAgBv3B,EAAK,CACjC5G,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,WAExB,EAGJ,MAAM8+B,GACFjgC,YAAYuI,EAAKlE,GACb/D,KAAK4/B,cAAgB5/B,KAAK4/B,cAAcn6B,KAAKzF,MAC7CA,KAAK6/B,eAAiB7/B,KAAK6/B,eAAep6B,KAAKzF,MAC/CA,KAAK8/B,kBAAoB9/B,KAAK8/B,kBAAkBr6B,KAAKzF,MACrDA,KAAK+/B,qBAAuB//B,KAAK+/B,qBAAqBt6B,KAAKzF,MAC3DA,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAK+a,UAAYlI,GAAStF,OAAOxJ,EAAOpC,UACxC3B,KAAKggC,SAAW,IAAIN,GAAsBz3B,EAAK,CAC3C5G,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,YAEpB,MAAMuH,EAAapI,KAAKggC,SAASr/B,KAAK4H,cACtCH,EAAWO,iBAAiB,OAAQ3I,KAAK4/B,eACzCx3B,EAAWO,iBAAiB,QAAS3I,KAAK6/B,gBAC1C7/B,KAAKkwB,OAAS,IAAItM,GAAe3b,EAAK,CAClC2C,OAAQ7G,EAAO6G,OACf1F,MAAO+E,EAASuI,WAAW,CACvBmR,UAAW5f,EAAO4f,YAEtBtiB,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,YAEpBb,KAAKW,KAAO,IAAImxB,GAAU7pB,EAAK,CAC3B+L,SAAUhU,KAAK+a,UACfmX,aAAcnuB,EAAOmuB,eAEzBlyB,KAAKW,KAAKqxB,cAAc1pB,YAAYtI,KAAKggC,SAASr/B,KAAKD,SACvDV,KAAKW,KAAKsxB,YAAY3pB,YAAYtI,KAAKkwB,OAAOvvB,KAAKD,SACnDV,KAAKigC,MACuB,UAAxBl8B,EAAOmuB,aACD,IAAI7O,GAAgBpb,EAAK,CACvBpH,UAAWb,KAAKa,YAElB,KACV,MAAMq/B,EAAU,IAAIhB,GAAsBj3B,EAAK,CAC3Cs1B,UAAWx5B,EAAOw5B,UAClB+B,cAAev7B,EAAOu7B,cACtBj+B,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,YAEpBq/B,EAAQv/B,KAAK41B,qBAAqBnwB,SAASkB,IACvCA,EAAKqB,iBAAiB,OAAQ3I,KAAK8/B,mBACnCx4B,EAAKqB,iBAAiB,UAAW3I,KAAK+/B,qBAAoB,IAE9D//B,KAAKmgC,SAAWD,EACZlgC,KAAKigC,OACLjgC,KAAKW,KAAKD,QAAQ4H,YAAYtI,KAAKigC,MAAMt/B,KAAKD,SAC9CV,KAAKigC,MAAMt/B,KAAKD,QAAQ4H,YAAY43B,EAAQv/B,KAAKD,SACjDyoB,GAAc,CACVC,QAASppB,KAAK+a,UAAU1Z,MAAM,YAC9BgoB,UAAWrpB,KAAKigC,MAAM7c,MACtBkG,QAAUhX,GAAMA,EAAEtL,SAClBuiB,SAAU,CAAC5O,EAAGsD,IAAMA,EAAEjX,YAGrBhH,KAAKW,KAAKyxB,gBACfpyB,KAAKW,KAAKyxB,cAAc9pB,YAAYtI,KAAKmgC,SAASx/B,KAAKD,SACvDuT,GAAajU,KAAK+a,UAAW/a,KAAKW,KAAKyxB,eAE/C,CACI/B,qBACA,OAAOrwB,KAAKkwB,MAChB,CACA0P,cAAchd,GACV,IAAK5iB,KAAKigC,MACN,OAEJ,MAAM34B,EAAOtH,KAAKW,KAAKD,QACjB0/B,EAAat+B,EAAU8gB,EAAEzR,eAC1BivB,GAAe94B,EAAK+4B,SAASD,KAC9BpgC,KAAKigC,MAAM7c,MAAMpc,UAAW,EAEpC,CACA64B,iBACI7/B,KAAK+a,UAAUha,IAAI,YAAaf,KAAK+a,UAAUja,IAAI,aAC/Cd,KAAK+a,UAAUja,IAAI,aACnBd,KAAKmgC,SAASx/B,KAAK41B,qBAAqB,GAAGzK,OAEnD,CACAgU,kBAAkB/4B,GACd,IAAK/G,KAAKigC,MACN,OAEJ,MAAM34B,EAAOtH,KAAKigC,MAAMt/B,KAAKD,QACvB0/B,EAAalvB,GAAenK,GAC9Bq5B,GAAc94B,EAAK+4B,SAASD,IAG5BA,GACAA,IAAepgC,KAAKggC,SAASr/B,KAAK4H,gBACjC+G,EAAchI,EAAKyI,iBAGxB/P,KAAKigC,MAAM7c,MAAMpc,UAAW,EAChC,CACA+4B,qBAAqBh5B,GACb/G,KAAKigC,MACU,WAAXl5B,EAAGvE,MACHxC,KAAKigC,MAAM7c,MAAMpc,UAAW,GAG3BhH,KAAKW,KAAKyxB,eACA,WAAXrrB,EAAGvE,KACHxC,KAAKggC,SAASr/B,KAAK4H,cAAcujB,OAG7C,EAGJ,SAASwU,GAAgBj/B,EAAOg5B,GAC5B,OAAIxF,GAAM0L,cAAcl/B,GACbwzB,GAAMriB,WAAWnR,EAAOg5B,GAE5BxF,GAAM+E,MAAMS,EACvB,CACA,SAASmG,GAAiBn/B,GACtB,OAAOkyB,GAAqBlyB,EAAM+zB,cAAc,QAAQhrB,QAAO,CAACO,EAAQovB,IAC7DpvB,GAAW,EAAyB,IAAnB6W,KAAK0P,MAAM6I,IACpC,EACP,CACA,SAAS0G,GAAkBp/B,GACvB,OAAQA,EAAM+zB,cAAc,OAAOhrB,QAAO,CAACO,EAAQovB,EAAMl4B,IAE9C8I,GAAW,EADwC,IAA9C6W,KAAK0P,MAAgB,IAAVrvB,EAAqB,IAAPk4B,EAAaA,IAEnD,KAAO,CACd,CACA,SAAS2G,GAAiBnZ,GACtB,OAAO,IAAIsN,GAAM,CAAEtN,GAAO,GAAM,IAAOA,GAAO,EAAK,IAAY,IAANA,GAAa,MAC1E,CACA,SAASoZ,GAAkBpZ,GACvB,OAAO,IAAIsN,GAAM,CACZtN,GAAO,GAAM,IACbA,GAAO,GAAM,IACbA,GAAO,EAAK,IACb8E,GAAe,IAAN9E,EAAY,EAAG,IAAK,EAAG,IACjC,MACP,CACA,SAASqZ,GAAmBv/B,GACxB,MAAqB,iBAAVA,EACAwzB,GAAM+E,QAEV8G,GAAiBr/B,EAC5B,CACA,SAASw/B,GAAoBx/B,GACzB,MAAqB,iBAAVA,EACAwzB,GAAM+E,QAEV+G,GAAkBt/B,EAC7B,CAEA,SAASy/B,GAAwB1F,GAC7B,MAAM73B,EAAY+3B,GAAqBF,GACvC,OAAO73B,EACD,CAACpC,EAAQE,KACPivB,GAAenvB,EAAQoC,EAAUlC,GAAA,EAEnC,IACV,CACA,SAAS0/B,GAAwBzB,GAC7B,MAAM0B,EAAgB1B,EAAgBmB,GAAoBD,GAC1D,MAAO,CAACr/B,EAAQE,KACZivB,GAAenvB,EAAQ6/B,EAAc3/B,GAAA,CAE7C,CACA,SAAS4/B,GAAqB9/B,EAAQE,EAAOg5B,GACzC,MAAM93B,EAAMlB,EAAM0zB,aAAasF,GAC/Bl5B,EAAOwD,cAAc,IAAKpC,EAAIimB,GAC9BrnB,EAAOwD,cAAc,IAAKpC,EAAI+vB,GAC9BnxB,EAAOwD,cAAc,IAAKpC,EAAIuW,GAC9B3X,EAAOwD,cAAc,IAAKpC,EAAI6V,EAClC,CACA,SAAS8oB,GAAoB//B,EAAQE,EAAOg5B,GACxC,MAAM93B,EAAMlB,EAAM0zB,aAAasF,GAC/Bl5B,EAAOwD,cAAc,IAAKpC,EAAIimB,GAC9BrnB,EAAOwD,cAAc,IAAKpC,EAAI+vB,GAC9BnxB,EAAOwD,cAAc,IAAKpC,EAAIuW,EAClC,CACA,SAASqoB,GAAwB7B,EAAejF,GAC5C,MAAO,CAACl5B,EAAQigC,KACR9B,EACA2B,GAAqB9/B,EAAQigC,EAAS/G,GAGtC6G,GAAoB//B,EAAQigC,EAAS/G,EAAA,CAGjD,CAEA,SAASgH,GAAqBC,GAC1B,IAAIt9B,EACJ,UAAKs9B,aAAiD,EAASA,EAAY5N,UAAkG,QAAtF1vB,EAAKs9B,aAAiD,EAASA,EAAYxM,aAA0B,IAAP9wB,OAAgB,EAASA,EAAG0vB,OAIrN,CACA,SAAS6N,GAAkBjC,GACvB,OAAOA,EACAv9B,GAAMm4B,GAAqBn4B,EAAG,MAC9BA,GAAMk4B,GAAoBl4B,EAAG,KACxC,CACA,SAASy/B,GAAWh+B,GAChB,MAAI,UAAWA,GAGX,SAAUA,GAA0B,UAAhBA,EAAO7C,IAInC,CACA,MAAM8gC,GAAyB,CAC3BrvB,GAAI,qBACJtO,KAAM,QACNuO,OAAQ,CAAChR,EAAOmC,KACZ,GAAqB,iBAAVnC,EACP,OAAO,KAEX,IAAKmgC,GAAWh+B,GACZ,OAAO,KAEX,MAAMmH,EAASisB,GAAsBpzB,GACrC,OAAOmH,EACD,CACE7B,aAAczH,EACdmC,OAAQmH,GAEV,IAAI,EAEd0L,QAAS,CACL0J,OAASxN,GACE8uB,GAAqB9uB,EAAK/O,QAC3Bq9B,GACAD,GAEV13B,OAAQ2rB,GAAM3rB,OACd8W,OAASzN,GACEwuB,GAAwBM,GAAqB9uB,EAAK/O,UAGjEhD,WAAa+R,IACT,MAAM+sB,EAAgB+B,GAAqB9uB,EAAK/O,QAC1C7B,EAAW,aAAc4Q,EAAK/O,OAAS+O,EAAK/O,OAAO7B,cAAWiB,EAC9Di0B,EAAS,WAAYtkB,EAAK/O,OAAS+O,EAAK/O,OAAOqzB,YAASj0B,EAC9D,OAAO,IAAI+8B,GAAgBptB,EAAK5C,SAAU,CACtC4tB,UAAW,MACX57B,SAAUA,SAA2CA,EACrDgiB,UAAW4d,GAAkBjC,GAC7B10B,OAAQivB,GAAwB,OAChC3H,aAAc2E,QAAuCA,EAAS,QAC9DyI,cAAeA,EACfj+B,MAAOkR,EAAKlR,MACZR,UAAW0R,EAAK1R,WACpB,GAIR,SAAS6gC,GAAmB54B,GACxB,OAAO+rB,GAAM8M,kBAAkB74B,EACnC,CACA,SAAS84B,GAAwBvH,GAC7B,OAAQh5B,GACGi/B,GAAgBj/B,EAAOg5B,EAEtC,CACA,SAASwH,GAA2BvC,EAAex7B,GAC/C,OAAQzC,GACAi+B,EACOrE,GAAwB55B,EAAOyC,GAEnCg3B,GAAuBz5B,EAAOyC,EAE7C,CACA,MAAMg+B,GAAyB,CAC3B1vB,GAAI,qBACJtO,KAAM,QACNuO,OAAQ,CAAChR,EAAOmC,KACZ,IAAKqxB,GAAM0L,cAAcl/B,GACrB,OAAO,KAEX,MAAMsJ,EAASisB,GAAsBpzB,GACrC,OAAOmH,EACD,CACE7B,aAAczH,EACdmC,OAAQmH,GAEV,IAAI,EAEd0L,QAAS,CACL0J,OAASxN,GAASqvB,GAAwB5K,GAAiBzkB,EAAK/O,SAChE0F,OAAQ2rB,GAAM3rB,OACd8W,OAASzN,GAAS4uB,GAAwBO,GAAmBnvB,EAAKzJ,cAAekuB,GAAiBzkB,EAAK/O,UAE3GhD,WAAa+R,IACT,IAAIvO,EACJ,MAAMs7B,EAAgBzK,GAAM8M,kBAAkBpvB,EAAKzJ,cAC7CnH,EAAW,aAAc4Q,EAAK/O,OAAS+O,EAAK/O,OAAO7B,cAAWiB,EAC9Di0B,EAAS,WAAYtkB,EAAK/O,OAAS+O,EAAK/O,OAAOqzB,YAASj0B,EACxDkB,EAAgD,QAAxCE,EAAKgzB,GAAiBzkB,EAAK/O,eAA4B,IAAPQ,EAAgBA,EAAK,MACnF,OAAO,IAAI27B,GAAgBptB,EAAK5C,SAAU,CACtC4tB,UAAWz5B,EACXnC,SAAUA,SAA2CA,EACrDgiB,UAAWke,GAA2BvC,EAAex7B,GACrD8G,OAAQivB,GAAwB/1B,GAChCouB,aAAc2E,QAAuCA,EAAS,QAC9DyI,cAAeA,EACfj+B,MAAOkR,EAAKlR,MACZR,UAAW0R,EAAK1R,WACpB,GAIFkhC,GAAyB,CAC3B3vB,GAAI,qBACJtO,KAAM,QACNuO,OAAQ,CAAChR,EAAOmC,KACZ,GAAqB,iBAAVnC,EACP,OAAO,KAEX,GAAI,SAAUmC,GAA0B,SAAhBA,EAAO7C,KAC3B,OAAO,KAEX,MAAMy6B,EAAS7B,GAAwBl4B,EAAO21B,GAAiBxzB,IAC/D,IAAK43B,EACD,OAAO,KAGX,IADoBE,GAAqBF,GAErC,OAAO,KAEX,MAAMzwB,EAASisB,GAAsBpzB,GACrC,OAAOmH,EACD,CACE7B,aAAczH,EACdmC,OAAQmH,GAEV,IAAI,EAEd0L,QAAS,CACL0J,OAASxN,IAAW,IAAIvO,EAAI,OAAO21B,GAAwE,QAAxC31B,EAAKgzB,GAAiBzkB,EAAK/O,eAA4B,IAAPQ,EAAgBA,EAAK,MAAK,EAC7IkF,OAAQ2rB,GAAM3rB,OACd8W,OAASzN,IACL,MAAM6oB,EAAS7B,GAAwBhnB,EAAKzJ,aAAckuB,GAAiBzkB,EAAK/O,SAChF,IAAK43B,EACD,MAAMx3B,EAAQgS,oBAElB,MAAMoK,EAAS8gB,GAAwB1F,GACvC,IAAKpb,EACD,MAAMpc,EAAQkB,cAElB,OAAOkb,CAAA,GAGfxf,WAAa+R,IACT,MAAM6oB,EAAS7B,GAAwBhnB,EAAKzJ,aAAckuB,GAAiBzkB,EAAK/O,SAChF,IAAK43B,EACD,MAAMx3B,EAAQgS,oBAElB,MAAMylB,EAAcC,GAAqBF,GACzC,IAAKC,EACD,MAAMz3B,EAAQgS,oBAElB,MAAMjU,EAAW,aAAc4Q,EAAK/O,OAAS+O,EAAK/O,OAAO7B,cAAWiB,EAC9Di0B,EAAS,WAAYtkB,EAAK/O,OAAS+O,EAAK/O,OAAOqzB,YAASj0B,EAC9D,OAAO,IAAI+8B,GAAgBptB,EAAK5C,SAAU,CACtC4tB,UAAWnC,EAAOt3B,KAClBnC,SAAUA,SAA2CA,EACrDgiB,UAAW0X,EACXzwB,OAAQivB,GAAwBuB,EAAOt3B,MACvCouB,aAAc2E,QAAuCA,EAAS,QAC9DyI,cAAelE,EAAO1H,MACtBryB,MAAOkR,EAAKlR,MACZR,UAAW0R,EAAK1R,WACpB,GAIR,MAAMmhC,GACFtiC,YAAYqE,GACR/D,KAAKo0B,WAAarwB,EAAOqwB,WACzBp0B,KAAKiiC,KAAOl+B,EAAOm+B,QACvB,CACAv4B,UAAUtI,GACN,MAAMmyB,EAAQxzB,KAAKiiC,KACdE,aAAa9gC,GACboQ,KAAI,CAACsoB,EAAMl4B,KAAY,IAAImC,EAAI2J,EAAI,OAAwG,QAAhGA,EAAuC,QAAjC3J,EAAKhE,KAAKo0B,WAAWvyB,UAA2B,IAAPmC,OAAgB,EAASA,EAAG2F,UAAUowB,UAA0B,IAAPpsB,EAAgBA,EAAKosB,CAAI,IACjL,OAAO/5B,KAAKiiC,KAAKG,eAAe5O,EACpC,EAGJ,MAAM6O,GAAc/7B,EAAU,UAC9B,MAAMg8B,GACF5iC,YAAYuI,EAAKlE,GACb/D,KAAK02B,UAAY3yB,EAAO2yB,UACxB12B,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAI26B,MAC3BriC,KAAK02B,UAAUtwB,SAASrE,IACpB,MAAMwgC,EAAWt6B,EAAIC,cAAc,OACnCq6B,EAAS96B,UAAUC,IAAI26B,GAAY,MACnCE,EAASj6B,YAAYvG,EAAErB,SACvBV,KAAKU,QAAQ4H,YAAYi6B,EAAA,GAEjC,EAGJ,SAASC,GAAqBv6B,EAAKlE,EAAQlC,GACvC,OAAO,IAAImsB,GAAqB/lB,EAAK,CACjC+kB,cAAyB,IAAVnrB,EAAc,MAAQA,IAAUkC,EAAO0+B,KAAKrgC,OAAS,EAAI,MAAQ,MAChFunB,SAAU5lB,EAAO0+B,KAAK5gC,GAAO8nB,SAC7B/e,OAAQ7G,EAAO6G,OACf1F,MAAOnB,EAAO0+B,KAAK5gC,GAAOsuB,UAC1B9uB,MAAO2I,EAAY,EAAG,CAClBhB,WAAYjF,EAAO0+B,KAAK5gC,GAAOmH,aAEnCnI,UAAWkD,EAAOlD,WAE1B,CACA,MAAM6hC,GACFhjC,YAAYuI,EAAKlE,GACb/D,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAK2iC,KAAO5+B,EAAO0+B,KAAKhxB,KAAI,CAACkJ,EAAG9Y,IAAU2gC,GAAqBv6B,EAAKlE,EAAQlC,KAC5E7B,KAAK2iC,KAAKv8B,SAAQ,CAACuY,EAAG9c,KAClBsnB,GAAc,CACVC,QAASppB,KAAKqB,MACdgoB,UAAW1K,EAAEtd,MACbioB,QAAUhX,GACCvO,EAAOm+B,SAASC,aAAa7vB,EAAEtL,UAAUnF,GAEpD0nB,SAAU,CAACjX,EAAG2L,KACV,MAAMuV,EAAQzvB,EAAOm+B,SAASC,aAAa7vB,EAAEtL,UAE7C,OADAwsB,EAAM3xB,GAASoc,EAAEjX,SACVjD,EAAOm+B,SAASE,eAAe5O,EAAA,GAE9C,IAEJxzB,KAAKW,KAAO,IAAI2hC,GAAgBr6B,EAAK,CACjCyuB,UAAW12B,KAAK2iC,KAAKlxB,KAAKqN,GAAOA,EAAGne,QAE5C,EAGJ,SAASiiC,GAAqBp/B,EAAQsF,GAClC,MAAI,SAAUtF,IAAWxB,EAAQwB,EAAOse,MAC7B,IAAID,GAAere,EAAOse,KAAMhZ,GAEpC,IACX,CACA,SAAS+5B,GAAsBr/B,GAC3B,OAAKxB,EAAQwB,EAAO8d,MAAStf,EAAQwB,EAAO+d,KAMvCvf,EAAQwB,EAAO8d,MAAStf,EAAQwB,EAAO+d,KAMrC,KALI,IAAIG,GAAgB,CACvBJ,IAAK9d,EAAO8d,IACZC,IAAK/d,EAAO+d,MART,IAAIH,GAAwB,CAC/BE,IAAK9d,EAAO8d,IACZC,IAAK/d,EAAO+d,KAUxB,CACA,SAASuhB,GAAgBnkB,GACrB,MAAMokB,EAAM/hB,GAAerC,EAAGyC,IAC9B,GAAI2hB,EACA,MAAO,CAACA,EAAI1hB,OAAOvgB,IAAI,OAAQiiC,EAAI1hB,OAAOvgB,IAAI,QAElD,MAAMua,EAAK2F,GAAerC,EAAG+C,IAC7B,OAAIrG,EACO,CAACA,EAAGuG,SAAUvG,EAAGsG,UAErB,MAAC/e,OAAWA,EACvB,CACA,SAASogC,GAAmBx/B,EAC5BsF,GACI,MAAMiY,EAAc,GACdI,EAAKyhB,GAAqBp/B,EAAQsF,GACpCqY,GACAJ,EAAYjb,KAAKqb,GAErB,MAAM9F,EAAKwnB,GAAsBr/B,GAC7B6X,GACA0F,EAAYjb,KAAKuV,GAErB,MAAMqW,EAAKf,GAAqBntB,EAAOgG,SAIvC,OAHIkoB,GACA3Q,EAAYjb,KAAK4rB,GAEd,IAAI5Q,GAAoBC,EACnC,CACA,MAAMkiB,GAAoB,CACtB7wB,GAAI,eACJtO,KAAM,QACNuO,OAAQ,CAAChR,EAAOmC,KACZ,GAAqB,iBAAVnC,EACP,OAAO,KAEX,MAAMiR,EAAIpG,EACJvB,EAASyB,EAAY5I,EAAQ,CAC/B43B,OAAQ9oB,EAAElH,SAASM,SACnB4V,IAAKhP,EAAElH,SAASI,OAChB+V,IAAKjP,EAAElH,SAASI,OAChBhC,QAAS8I,EAAElH,SAASE,OAAOilB,IAC3BzO,KAAMxP,EAAElH,SAASI,SAErB,OAAOb,EACD,CACE7B,aAAczH,EACdmC,OAAQmH,GAEV,IAAI,EAEd0L,QAAS,CACL0J,OAAS6R,GAAUnJ,GACnBzf,WAAauJ,GAASywB,GAAmBzwB,EAAK/O,OAAQ+O,EAAKzJ,cAC3DkX,OAAS4R,GAAUtB,IAEvB9vB,WAAa+R,IACT,IAAIvO,EACJ,MAAM3C,EAAQkR,EAAKlR,MACbsd,EAAIpM,EAAKvJ,WACT0oB,EAAK/S,GAAKqC,GAAerC,EAAG8C,IAClC,GAAIiQ,EACA,OAAO,IAAIhP,GAAenQ,EAAK5C,SAAU,CACrCzK,MAAO,IAAI+E,EAAS,CAChBT,QAASkoB,EAAGrQ,OAAOhgB,MAAM,aAE7BA,MAAOA,EACPR,UAAW0R,EAAK1R,YAGxB,MAAM8iB,EAAkF,QAArE3f,EAAM,WAAYuO,EAAK/O,OAAS+O,EAAK/O,OAAO43B,YAASx4B,SAA+B,IAAPoB,EAAgBA,EAAK4kB,GAAsBiI,GAAyBlS,EAAGtd,EAAM2F,WACvK+7B,EAAMpkB,GAAKqC,GAAerC,EAAGyC,IACnC,OAAI2hB,EACO,IAAI/S,GAAqBzd,EAAK5C,SAAU,CAC3Cga,SAAUmH,GAAYnS,GACtB/T,OAAQ2d,GACRkG,YAAa,IAAIxkB,EAAS,CACtB0X,SAAUohB,EAAI1hB,OAAOhgB,MAAM,OAC3BugB,SAAUmhB,EAAI1hB,OAAOhgB,MAAM,SAE/B8uB,UAAWlmB,EAASuI,WAAW,CAC3B8qB,cAAevM,GAAyBpS,EAAGtd,EAAM2F,UACjD2c,UAAWA,IAEftiB,MAAOA,EACPR,UAAW0R,EAAK1R,YAGjB,IAAImtB,GAAqBzb,EAAK5C,SAAU,CAC3Cga,SAAUmH,GAAYnS,GACtB/T,OAAQ2d,GACRrjB,MAAO+E,EAASuI,WAAW,CACvB8qB,cAAevM,GAAyBpS,EAAGtd,EAAM2F,UACjD2c,UAAWA,IAEftiB,MAAOA,EACPR,UAAW0R,EAAK1R,WACpB,GAIR,MAAMqiC,GACFxjC,YAAY6qB,EAAI,EAAGG,EAAI,GACnB1qB,KAAKuqB,EAAIA,EACTvqB,KAAK0qB,EAAIA,CACb,CACA0K,gBACI,MAAO,CAACp1B,KAAKuqB,EAAGvqB,KAAK0qB,EACzB,CACA7mB,gBAAgBtB,GACZ,GAAIP,EAAQO,GACR,OAAO,EAEX,MAAMgoB,EAAIhoB,EAAIgoB,EACRG,EAAInoB,EAAImoB,EACd,MAAiB,iBAANH,GAA+B,iBAANG,CAIxC,CACA7mB,cAAcsF,EAAIC,GACd,OAAOD,EAAGohB,IAAMnhB,EAAGmhB,GAAKphB,EAAGuhB,IAAMthB,EAAGshB,CACxC,CACAyY,WACI,MAAO,CACH5Y,EAAGvqB,KAAKuqB,EACRG,EAAG1qB,KAAK0qB,EAEhB,EAEJ,MAAM0Y,GAAkB,CACpBjB,aAAe7vB,GAAMA,EAAE8iB,gBACvBgN,eAAiB5O,GAAU,IAAI0P,MAAW1P,IAGxC6P,GAAc/8B,EAAU,OAC9B,MAAMg9B,GACF5jC,YAAYuI,EAAKlE,GACb/D,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAI27B,MAC3Bt/B,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzCuG,EAAUlD,EAAOpC,SAAUiG,EAAiB5H,KAAKU,QAAS2iC,QAAYzgC,EAAW,cACjF,MAAM6qB,EAAWxlB,EAAIC,cAAc,OACnCulB,EAAShmB,UAAUC,IAAI27B,GAAY,MACnCrjC,KAAKU,QAAQ4H,YAAYmlB,GACzB,MAAMrlB,EAAaH,EAAIC,cAAc,UACrCE,EAAWX,UAAUC,IAAI27B,GAAY,MACrCj7B,EAAWE,YAAYiI,GAAqBtI,EAAK,WACjDlE,EAAOlD,UAAUwH,aAAaD,GAC9BqlB,EAASnlB,YAAYF,GACrBpI,KAAKuI,cAAgBH,EACrB,MAAMynB,EAAW5nB,EAAIC,cAAc,OAInC,GAHA2nB,EAASpoB,UAAUC,IAAI27B,GAAY,MACnC5V,EAASnlB,YAAYunB,GACrB7vB,KAAKiyB,YAAcpC,EACS,WAAxB9rB,EAAOmuB,aAA2B,CAClC,MAAMC,EAAalqB,EAAIC,cAAc,OACrCiqB,EAAW1qB,UAAUC,IAAI27B,GAAY,MACrCrjC,KAAKU,QAAQ4H,YAAY6pB,GACzBnyB,KAAKoyB,cAAgBD,CACzB,MAEInyB,KAAKoyB,cAAgB,IAE7B,EAGJ,MAAMmR,GAAcj9B,EAAU,QAC9B,MAAMk9B,GACF9jC,YAAYuI,EAAKlE,GACb/D,KAAKyjC,kBAAoBzjC,KAAKyjC,kBAAkBh+B,KAAKzF,MACrDA,KAAK8f,eAAiB9f,KAAK8f,eAAera,KAAKzF,MAC/CA,KAAK0jC,UAAY3/B,EAAO4/B,SACxB3jC,KAAK4jC,UAAY7/B,EAAO4d,SACxB3hB,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAI67B,MACL,UAAlBx/B,EAAO8/B,QACP7jC,KAAKU,QAAQ+G,UAAUC,IAAI67B,QAAY3gC,EAAW,MAEtDmB,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzC,MAAMojC,EAAU77B,EAAIC,cAAc,OAClC47B,EAAQr8B,UAAUC,IAAI67B,GAAY,MAClCx/B,EAAOlD,UAAUkN,aAAa+1B,GAC9B9jC,KAAKU,QAAQ4H,YAAYw7B,GACzB9jC,KAAK+jC,WAAaD,EAClB,MAAME,EAAU/7B,EAAIwI,gBAAgB1B,EAAQ,OAC5Ci1B,EAAQv8B,UAAUC,IAAI67B,GAAY,MAClCvjC,KAAK+jC,WAAWz7B,YAAY07B,GAC5BhkC,KAAKikC,SAAWD,EAChB,MAAME,EAAYj8B,EAAIwI,gBAAgB1B,EAAQ,QAC9Cm1B,EAAUz8B,UAAUC,IAAI67B,GAAY,OACpCW,EAAUnW,eAAe,KAAM,KAAM,KACrCmW,EAAUnW,eAAe,KAAM,KAAM,OACrCmW,EAAUnW,eAAe,KAAM,KAAM,QACrCmW,EAAUnW,eAAe,KAAM,KAAM,OACrC/tB,KAAKikC,SAAS37B,YAAY47B,GAC1B,MAAMC,EAAYl8B,EAAIwI,gBAAgB1B,EAAQ,QAC9Co1B,EAAU18B,UAAUC,IAAI67B,GAAY,OACpCY,EAAUpW,eAAe,KAAM,KAAM,OACrCoW,EAAUpW,eAAe,KAAM,KAAM,KACrCoW,EAAUpW,eAAe,KAAM,KAAM,OACrCoW,EAAUpW,eAAe,KAAM,KAAM,QACrC/tB,KAAKikC,SAAS37B,YAAY67B,GAC1B,MAAMC,EAAWn8B,EAAIwI,gBAAgB1B,EAAQ,QAC7Cq1B,EAAS38B,UAAUC,IAAI67B,GAAY,MACnCa,EAASrW,eAAe,KAAM,KAAM,OACpCqW,EAASrW,eAAe,KAAM,KAAM,OACpC/tB,KAAKikC,SAAS37B,YAAY87B,GAC1BpkC,KAAKqkC,UAAYD,EACjB,MAAMvI,EAAa5zB,EAAIC,cAAc,OACrC2zB,EAAWp0B,UAAUC,IAAI67B,GAAY,MACrCvjC,KAAK+jC,WAAWz7B,YAAYuzB,GAC5B77B,KAAK87B,YAAcD,EACnB93B,EAAO1C,MAAMqE,QAAQL,GAAG,SAAUrF,KAAK8f,gBACvC9f,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKyiB,SACT,CACI8T,2BACA,MAAO,CAACv2B,KAAK+jC,WACjB,CACAthB,UACI,MAAO8H,EAAGG,GAAK1qB,KAAKqB,MAAM2F,SAASouB,gBAC7B9T,EAAMthB,KAAK4jC,UACXU,EAAKjY,GAAS9B,GAAIjJ,GAAMA,EAAK,EAAG,KAChCijB,EAAKlY,GAAS3B,GAAIpJ,GAAMA,EAAK,EAAG,KAChCkjB,EAAMxkC,KAAK0jC,UAAY,IAAMa,EAAKA,EACxCvkC,KAAKqkC,UAAUtW,eAAe,KAAM,KAAM,GAAGuW,MAC7CtkC,KAAKqkC,UAAUtW,eAAe,KAAM,KAAM,GAAGyW,MAC7CxkC,KAAK87B,YAAY1sB,MAAMqV,KAAO,GAAG6f,KACjCtkC,KAAK87B,YAAY1sB,MAAMyb,IAAM,GAAG2Z,IACpC,CACA1kB,iBACI9f,KAAKyiB,SACT,CACAghB,oBACIzjC,KAAKyiB,SACT,EAGJ,SAASgiB,GAAc19B,EAAI29B,EAAWf,GAClC,MAAO,CACHja,GAAcgb,EAAU,GAAIza,GAAsBljB,IAClD2iB,GAAcgb,EAAU,GAAI1a,GAAoBjjB,KAAQ48B,EAAW,GAAI,GAE/E,CACA,MAAMgB,GACFjlC,YAAYuI,EAAKlE,GACb/D,KAAK4kC,cAAgB5kC,KAAK4kC,cAAcn/B,KAAKzF,MAC7CA,KAAK6kC,YAAc7kC,KAAK6kC,YAAYp/B,KAAKzF,MACzCA,KAAKouB,eAAiBpuB,KAAKouB,eAAe3oB,KAAKzF,MAC/CA,KAAKquB,eAAiBruB,KAAKquB,eAAe5oB,KAAKzF,MAC/CA,KAAKsuB,aAAetuB,KAAKsuB,aAAa7oB,KAAKzF,MAC3CA,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAK8kC,WAAa/gC,EAAO2gC,UACzB1kC,KAAK4jC,UAAY7/B,EAAO4d,SACxB3hB,KAAK0jC,UAAY3/B,EAAO4/B,SACxB3jC,KAAKW,KAAO,IAAI6iC,GAAkBv7B,EAAK,CACnC07B,SAAU3jC,KAAK0jC,UACfG,OAAQ9/B,EAAO8/B,OACfliB,SAAU3hB,KAAK4jC,UACfviC,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,YAEpBb,KAAKsvB,WAAa,IAAIxE,GAAe9qB,KAAKW,KAAKojC,YAC/C/jC,KAAKsvB,WAAW5pB,QAAQL,GAAG,OAAQrF,KAAKouB,gBACxCpuB,KAAKsvB,WAAW5pB,QAAQL,GAAG,OAAQrF,KAAKquB,gBACxCruB,KAAKsvB,WAAW5pB,QAAQL,GAAG,KAAMrF,KAAKsuB,cACtCtuB,KAAKW,KAAKojC,WAAWp7B,iBAAiB,UAAW3I,KAAK4kC,eACtD5kC,KAAKW,KAAKojC,WAAWp7B,iBAAiB,QAAS3I,KAAK6kC,YACxD,CACAtV,oBAAoB9sB,EAAGgH,GACnB,IAAKhH,EAAEmpB,MACH,OAEJ,MAAMtK,EAAMthB,KAAK4jC,UACXU,EAAKjY,GAAS5pB,EAAEmpB,MAAMrB,EAAG,EAAG9nB,EAAEipB,OAAOC,OAAQrK,GAAMA,GACnDijB,EAAKlY,GAASrsB,KAAK0jC,UAAYjhC,EAAEipB,OAAO7X,OAASpR,EAAEmpB,MAAMlB,EAAIjoB,EAAEmpB,MAAMlB,EAAG,EAAGjoB,EAAEipB,OAAO7X,QAASyN,GAAMA,GACzGthB,KAAKqB,MAAMiI,YAAY,IAAI45B,GAAQoB,EAAIC,GAAK96B,EAChD,CACA2kB,eAAernB,GACX/G,KAAKuvB,oBAAoBxoB,EAAGglB,KAAM,CAC9BxiB,WAAW,EACXhI,MAAM,GAEd,CACA8sB,eAAetnB,GACX/G,KAAKuvB,oBAAoBxoB,EAAGglB,KAAM,CAC9BxiB,WAAW,EACXhI,MAAM,GAEd,CACA+sB,aAAavnB,GACT/G,KAAKuvB,oBAAoBxoB,EAAGglB,KAAM,CAC9BxiB,WAAW,EACXhI,MAAM,GAEd,CACAqjC,cAAc79B,GACNojB,GAAWpjB,EAAGvE,MACduE,EAAG8kB,iBAEP,MAAOgD,EAAIkW,GAAMN,GAAc19B,EAAI/G,KAAK8kC,WAAY9kC,KAAK0jC,WAC9C,IAAP7U,GAAmB,IAAPkW,GAGhB/kC,KAAKqB,MAAMiI,YAAY,IAAI45B,GAAQljC,KAAKqB,MAAM2F,SAASujB,EAAIsE,EAAI7uB,KAAKqB,MAAM2F,SAAS0jB,EAAIqa,GAAK,CACxFx7B,WAAW,EACXhI,MAAM,GAEd,CACAsjC,YAAY99B,GACR,MAAO8nB,EAAIkW,GAAMN,GAAc19B,EAAI/G,KAAK8kC,WAAY9kC,KAAK0jC,WAC9C,IAAP7U,GAAmB,IAAPkW,GAGhB/kC,KAAKqB,MAAMiI,YAAYtJ,KAAKqB,MAAM2F,SAAU,CACxCuC,WAAW,EACXhI,MAAM,GAEd,EAGJ,MAAMyjC,GACFtlC,YAAYuI,EAAKlE,GACb,IAAIC,EAAI2J,EACR3N,KAAK8/B,kBAAoB9/B,KAAK8/B,kBAAkBr6B,KAAKzF,MACrDA,KAAK+/B,qBAAuB//B,KAAK+/B,qBAAqBt6B,KAAKzF,MAC3DA,KAAKilC,iBAAmBjlC,KAAKilC,iBAAiBx/B,KAAKzF,MACnDA,KAAKklC,kBAAoBllC,KAAKklC,kBAAkBz/B,KAAKzF,MACrDA,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAK+a,UAAYlI,GAAStF,OAAOxJ,EAAOpC,UACxC3B,KAAKigC,MACuB,UAAxBl8B,EAAOmuB,aACD,IAAI7O,GAAgBpb,EAAK,CACvBpH,UAAWb,KAAKa,YAElB,KACV,MAAMskC,EAAO,IAAIR,GAAwB18B,EAAK,CAC1Cy8B,UAAW,CAAC3gC,EAAO0+B,KAAK,GAAG9Y,SAAU5lB,EAAO0+B,KAAK,GAAG9Y,UACpDga,SAAU5/B,EAAO4/B,SACjBE,OAAQ9/B,EAAOmuB,aACfvQ,SAAU5d,EAAO4d,SACjBtgB,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,YAEpBskC,EAAKxkC,KAAK41B,qBAAqBnwB,SAASkB,IACpCA,EAAKqB,iBAAiB,OAAQ3I,KAAK8/B,mBACnCx4B,EAAKqB,iBAAiB,UAAW3I,KAAK+/B,qBAAoB,IAE9D//B,KAAKmgC,SAAWgF,EAChBnlC,KAAKkwB,OAAS,IAAIwS,GAAsBz6B,EAAK,CACzCi6B,SAAUkB,GACVX,KAAM1+B,EAAO0+B,KACb73B,OAAQ7G,EAAO6G,OACfvJ,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,YAEpBb,KAAKW,KAAO,IAAI2iC,GAAYr7B,EAAK,CAC7BtG,SAAU3B,KAAK+a,UAAU1Z,MAAM,YAC/B6wB,aAAcnuB,EAAOmuB,aACrBrxB,UAAWb,KAAKa,YAEpBb,KAAKW,KAAKsxB,YAAY3pB,YAAYtI,KAAKkwB,OAAOvvB,KAAKD,SAChB,QAAlCsD,EAAKhE,KAAKW,KAAK4H,qBAAkC,IAAPvE,GAAyBA,EAAG2E,iBAAiB,OAAQ3I,KAAKilC,kBAClE,QAAlCt3B,EAAK3N,KAAKW,KAAK4H,qBAAkC,IAAPoF,GAAyBA,EAAGhF,iBAAiB,QAAS3I,KAAKklC,mBAClGllC,KAAKigC,OACLjgC,KAAKW,KAAKD,QAAQ4H,YAAYtI,KAAKigC,MAAMt/B,KAAKD,SAC9CV,KAAKigC,MAAMt/B,KAAKD,QAAQ4H,YAAYtI,KAAKmgC,SAASx/B,KAAKD,SACvDyoB,GAAc,CACVC,QAASppB,KAAK+a,UAAU1Z,MAAM,YAC9BgoB,UAAWrpB,KAAKigC,MAAM7c,MACtBkG,QAAUhX,GAAMA,EAAEtL,SAClBuiB,SAAU,CAAC5O,EAAGsD,IAAMA,EAAEjX,YAGrBhH,KAAKW,KAAKyxB,gBACfpyB,KAAKW,KAAKyxB,cAAc9pB,YAAYtI,KAAKmgC,SAASx/B,KAAKD,SACvDuT,GAAajU,KAAK+a,UAAW/a,KAAKW,KAAKyxB,eAE/C,CACA6S,iBAAiBriB,GACb,IAAK5iB,KAAKigC,MACN,OAEJ,MAAM34B,EAAOtH,KAAKW,KAAKD,QACjB0/B,EAAat+B,EAAU8gB,EAAEzR,eAC1BivB,GAAe94B,EAAK+4B,SAASD,KAC9BpgC,KAAKigC,MAAM7c,MAAMpc,UAAW,EAEpC,CACAk+B,oBACIllC,KAAK+a,UAAUha,IAAI,YAAaf,KAAK+a,UAAUja,IAAI,aAC/Cd,KAAK+a,UAAUja,IAAI,aACnBd,KAAKmgC,SAASx/B,KAAK41B,qBAAqB,GAAGzK,OAEnD,CACAgU,kBAAkB/4B,GACd,IAAK/G,KAAKigC,MACN,OAEJ,MAAM34B,EAAOtH,KAAKigC,MAAMt/B,KAAKD,QACvB0/B,EAAalvB,GAAenK,GAC9Bq5B,GAAc94B,EAAK+4B,SAASD,IAG5BA,GACAA,IAAepgC,KAAKW,KAAK4H,gBACxB+G,EAAchI,EAAKyI,iBAGxB/P,KAAKigC,MAAM7c,MAAMpc,UAAW,EAChC,CACA+4B,qBAAqBh5B,GACb/G,KAAKigC,MACU,WAAXl5B,EAAGvE,MACHxC,KAAKigC,MAAM7c,MAAMpc,UAAW,GAG3BhH,KAAKW,KAAKyxB,eACA,WAAXrrB,EAAGvE,KACHxC,KAAKW,KAAK4H,cAAcujB,OAGpC,EAGJ,MAAMsZ,GACF1lC,YAAY6qB,EAAI,EAAGG,EAAI,EAAG2a,EAAI,GAC1BrlC,KAAKuqB,EAAIA,EACTvqB,KAAK0qB,EAAIA,EACT1qB,KAAKqlC,EAAIA,CACb,CACAjQ,gBACI,MAAO,CAACp1B,KAAKuqB,EAAGvqB,KAAK0qB,EAAG1qB,KAAKqlC,EACjC,CACAxhC,gBAAgBtB,GACZ,GAAIP,EAAQO,GACR,OAAO,EAEX,MAAMgoB,EAAIhoB,EAAIgoB,EACRG,EAAInoB,EAAImoB,EACR2a,EAAI9iC,EAAI8iC,EACd,MAAiB,iBAAN9a,GACM,iBAANG,GACM,iBAAN2a,CAIf,CACAxhC,cAAcsF,EAAIC,GACd,OAAOD,EAAGohB,IAAMnhB,EAAGmhB,GAAKphB,EAAGuhB,IAAMthB,EAAGshB,GAAKvhB,EAAGk8B,IAAMj8B,EAAGi8B,CACzD,CACAlC,WACI,MAAO,CACH5Y,EAAGvqB,KAAKuqB,EACRG,EAAG1qB,KAAK0qB,EACR2a,EAAGrlC,KAAKqlC,EAEhB,EAEJ,MAAMC,GAAkB,CACpBnD,aAAe7vB,GAAMA,EAAE8iB,gBACvBgN,eAAiB5O,GAAU,IAAI4R,MAAW5R,IAG9C,SAAS+R,GAAmBlkC,GACxB,OAAO+jC,GAAQn6B,SAAS5J,GAClB,IAAI+jC,GAAQ/jC,EAAMkpB,EAAGlpB,EAAMqpB,EAAGrpB,EAAMgkC,GACpC,IAAID,EACd,CACA,SAASI,GAAarkC,EAAQE,GAC1BF,EAAOwD,cAAc,IAAKtD,EAAMkpB,GAChCppB,EAAOwD,cAAc,IAAKtD,EAAMqpB,GAChCvpB,EAAOwD,cAAc,IAAKtD,EAAMgkC,EACpC,CAEA,SAASI,GAAmBjiC,EAAQsF,GAChC,OAAO,IAAIk5B,GAAkB,CACzBE,SAAUoD,GACVlR,WAAY,CACRsR,GAA0B,MAAOliC,EAASA,EAAO+mB,OAAI3nB,EAAWkG,EAAayhB,GAC7Emb,GAA0B,MAAOliC,EAASA,EAAOknB,OAAI9nB,EAAWkG,EAAa4hB,GAC7Egb,GAA0B,MAAOliC,EAASA,EAAO6hC,OAAIziC,EAAWkG,EAAau8B,KAGzF,CACA,SAASM,GAAa78B,EAAcE,GAChC,MAAO,CACH2gB,SAAUmH,GAAY9nB,GACtBA,WAAYA,EACZmnB,UAAWlmB,EAASuI,WAAW,CAC3B8qB,cAAevM,GAAyB/nB,EAAYF,GACpD6a,UAAWiF,GAAsBiI,GAAyB7nB,EAAYF,MAGlF,CACA,MAAM88B,GAAqB,CACvBxzB,GAAI,gBACJtO,KAAM,QACNuO,OAAQ,CAAChR,EAAOmC,KACZ,IAAK4hC,GAAQn6B,SAAS5J,GAClB,OAAO,KAEX,MAAMiR,EAAIpG,EACJvB,EAASyB,EAAY5I,EAAQ,CAC/B+mB,EAAGjY,EAAElH,SAASE,OAAOmlB,IACrB/F,EAAGpY,EAAElH,SAASE,OAAOmlB,IACrB4U,EAAG/yB,EAAElH,SAASE,OAAOmlB,MAEzB,OAAO9lB,EACD,CACE7B,aAAczH,EACdmC,OAAQmH,GAEV,IAAI,EAEd0L,QAAS,CACL0J,OAAS6R,GAAU2T,GACnBv8B,WAAauJ,GAASkzB,GAAmBlzB,EAAK/O,OAAQ+O,EAAKzJ,cAC3DI,OAAQk8B,GAAQl8B,OAChB8W,OAAS4R,GAAU4T,IAEvBhlC,WAAa+R,IACT,MAAMlR,EAAQkR,EAAKlR,MACbsd,EAAIpM,EAAKvJ,WACf,KAAM2V,aAAaqjB,IACf,MAAMp+B,EAAQgS,oBAElB,OAAO,IAAI8sB,GAAsBnwB,EAAK5C,SAAU,CAC5CuyB,SAAUoD,GACV7C,KAAM,CACFkD,GAAatkC,EAAM2F,SAASujB,EAAG5L,EAAEyV,WAAW,IAC5CuR,GAAatkC,EAAM2F,SAAS0jB,EAAG/L,EAAEyV,WAAW,IAC5CuR,GAAatkC,EAAM2F,SAASq+B,EAAG1mB,EAAEyV,WAAW,KAEhDxpB,OAAQ2d,GACRlnB,MAAOA,EACPR,UAAW0R,EAAK1R,WACpB,GAIR,MAAMglC,GACFnmC,YAAY6qB,EAAI,EAAGG,EAAI,EAAG2a,EAAI,EAAGS,EAAI,GACjC9lC,KAAKuqB,EAAIA,EACTvqB,KAAK0qB,EAAIA,EACT1qB,KAAKqlC,EAAIA,EACTrlC,KAAK8lC,EAAIA,CACb,CACA1Q,gBACI,MAAO,CAACp1B,KAAKuqB,EAAGvqB,KAAK0qB,EAAG1qB,KAAKqlC,EAAGrlC,KAAK8lC,EACzC,CACAjiC,gBAAgBtB,GACZ,GAAIP,EAAQO,GACR,OAAO,EAEX,MAAMgoB,EAAIhoB,EAAIgoB,EACRG,EAAInoB,EAAImoB,EACR2a,EAAI9iC,EAAI8iC,EACRS,EAAIvjC,EAAIujC,EACd,MAAiB,iBAANvb,GACM,iBAANG,GACM,iBAAN2a,GACM,iBAANS,CAIf,CACAjiC,cAAcsF,EAAIC,GACd,OAAOD,EAAGohB,IAAMnhB,EAAGmhB,GAAKphB,EAAGuhB,IAAMthB,EAAGshB,GAAKvhB,EAAGk8B,IAAMj8B,EAAGi8B,GAAKl8B,EAAG28B,IAAM18B,EAAG08B,CAC1E,CACA3C,WACI,MAAO,CACH5Y,EAAGvqB,KAAKuqB,EACRG,EAAG1qB,KAAK0qB,EACR2a,EAAGrlC,KAAKqlC,EACRS,EAAG9lC,KAAK8lC,EAEhB,EAEJ,MAAMC,GAAkB,CACpB5D,aAAe7vB,GAAMA,EAAE8iB,gBACvBgN,eAAiB5O,GAAU,IAAIqS,MAAWrS,IAG9C,SAASwS,GAAmB3kC,GACxB,OAAOwkC,GAAQ56B,SAAS5J,GAClB,IAAIwkC,GAAQxkC,EAAMkpB,EAAGlpB,EAAMqpB,EAAGrpB,EAAMgkC,EAAGhkC,EAAMykC,GAC7C,IAAID,EACd,CACA,SAASI,GAAa9kC,EAAQE,GAC1BF,EAAOwD,cAAc,IAAKtD,EAAMkpB,GAChCppB,EAAOwD,cAAc,IAAKtD,EAAMqpB,GAChCvpB,EAAOwD,cAAc,IAAKtD,EAAMgkC,GAChClkC,EAAOwD,cAAc,IAAKtD,EAAMykC,EACpC,CAEA,SAASI,GAAmB1iC,EAAQsF,GAChC,OAAO,IAAIk5B,GAAkB,CACzBE,SAAU6D,GACV3R,WAAY,CACRsR,GAA0B,MAAOliC,EAASA,EAAO+mB,OAAI3nB,EAAWkG,EAAayhB,GAC7Emb,GAA0B,MAAOliC,EAASA,EAAOknB,OAAI9nB,EAAWkG,EAAa4hB,GAC7Egb,GAA0B,MAAOliC,EAASA,EAAO6hC,OAAIziC,EAAWkG,EAAau8B,GAC7EK,GAA0B,MAAOliC,EAASA,EAAOsiC,OAAIljC,EAAWkG,EAAag9B,KAGzF,CACA,SAASK,GAAar9B,EAAcE,GAChC,MAAO,CACH2gB,SAAUmH,GAAY9nB,GACtBA,WAAYA,EACZmnB,UAAWlmB,EAASuI,WAAW,CAC3B8qB,cAAevM,GAAyB/nB,EAAYF,GACpD6a,UAAWiF,GAAsBiI,GAAyB7nB,EAAYF,MAGlF,CACA,MAAMs9B,GAAqB,CACvBh0B,GAAI,gBACJtO,KAAM,QACNuO,OAAQ,CAAChR,EAAOmC,KACZ,IAAKqiC,GAAQ56B,SAAS5J,GAClB,OAAO,KAEX,MAAMiR,EAAIpG,EACJvB,EAASyB,EAAY5I,EAAQ,CAC/B+mB,EAAGjY,EAAElH,SAASE,OAAOmlB,IACrB/F,EAAGpY,EAAElH,SAASE,OAAOmlB,IACrB4U,EAAG/yB,EAAElH,SAASE,OAAOmlB,IACrBqV,EAAGxzB,EAAElH,SAASE,OAAOmlB,MAEzB,OAAO9lB,EACD,CACE7B,aAAczH,EACdmC,OAAQmH,GAEV,IAAI,EAEd0L,QAAS,CACL0J,OAAS6R,GAAUoU,GACnBh9B,WAAauJ,GAAS2zB,GAAmB3zB,EAAK/O,OAAQ+O,EAAKzJ,cAC3DI,OAAQ28B,GAAQ38B,OAChB8W,OAAS4R,GAAUqU,IAEvBzlC,WAAa+R,IACT,MAAMlR,EAAQkR,EAAKlR,MACbsd,EAAIpM,EAAKvJ,WACf,KAAM2V,aAAaqjB,IACf,MAAMp+B,EAAQgS,oBAElB,OAAO,IAAI8sB,GAAsBnwB,EAAK5C,SAAU,CAC5CuyB,SAAU6D,GACVtD,KAAMphC,EAAM2F,SACPouB,gBACA3jB,KAAI,CAACsoB,EAAMl4B,IAAUskC,GAAapM,EAAMpb,EAAEyV,WAAWvyB,MAC1D+I,OAAQ2d,GACRlnB,MAAOA,EACPR,UAAW0R,EAAK1R,WACpB,GAIR,SAASwlC,GAAmB7iC,GACxB,MAAMud,EAAc,GACd2Q,EAAKf,GAAqBntB,EAAOgG,SAIvC,OAHIkoB,GACA3Q,EAAYjb,KAAK4rB,GAEd,IAAI5Q,GAAoBC,EACnC,CACA,MAAMulB,GAAoB,CACtBl0B,GAAI,eACJtO,KAAM,QACNuO,OAAQ,CAAChR,EAAOmC,KACZ,GAAqB,iBAAVnC,EACP,OAAO,KAEX,MACMsJ,EAASyB,EAAY5I,EAAQ,CAC/BgG,QAFM0C,EAEKd,SAASE,OAAOilB,MAE/B,OAAO5lB,EACD,CACE7B,aAAczH,EACdmC,OAAQmH,GAEV,IAAI,EAEd0L,QAAS,CACL0J,OAAS6R,GAAU3I,GACnBjgB,WAAauJ,GAAS8zB,GAAmB9zB,EAAK/O,QAC9Cwc,OAAS4R,GAAUtB,IAEvB9vB,WAAa+R,IACT,MAAMtK,EAAMsK,EAAK5C,SACXtO,EAAQkR,EAAKlR,MACbsd,EAAIpM,EAAKvJ,WACT0oB,EAAK/S,GAAKqC,GAAerC,EAAG8C,IAClC,OAAIiQ,EACO,IAAIhP,GAAeza,EAAK,CAC3B/C,MAAO,IAAI+E,EAAS,CAChBT,QAASkoB,EAAGrQ,OAAOhgB,MAAM,aAE7BA,MAAOA,EACPR,UAAW0R,EAAK1R,YAGjB,IAAI+iB,GAAe3b,EAAK,CAC3B2C,OAAS7I,GAAMA,EACfmD,MAAO+E,EAASuI,WAAW,CACvBmR,UAAWuF,KAEf7nB,MAAOA,EACPR,UAAW0R,EAAK1R,WACpB,GAIF0lC,GAAY,CACdC,QAAS,CACLC,gBAAiB,IACjBC,iBAAkB,IAIpBC,GAAcrgC,EAAU,OAC9B,MAAMsgC,GACFlnC,YAAYuI,EAAKlE,GACb/D,KAAK6mC,eAAiB7mC,KAAK6mC,eAAephC,KAAKzF,MAC/CA,KAAK8mC,WAAa/iC,EAAO4f,UACzB3jB,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAIi/B,MAC3B5iC,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzC,MAAMqmC,EAAe9+B,EAAIC,cAAc,YACvC6+B,EAAat/B,UAAUC,IAAIi/B,GAAY,MACvCI,EAAa33B,MAAMyE,OAAS,wBAAwB9P,EAAOijC,aAC3DD,EAAaE,UAAW,EACxBljC,EAAOlD,UAAUwH,aAAa0+B,GAC9B/mC,KAAKU,QAAQ4H,YAAYy+B,GACzB/mC,KAAKknC,cAAgBH,EACrBhjC,EAAO1C,MAAMqE,QAAQL,GAAG,SAAUrF,KAAK6mC,gBACvC7mC,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKyiB,SACT,CACAA,UACI,MAAMnb,EAAOtH,KAAKknC,cACZC,EAAe7/B,EAAK8/B,YAAc9/B,EAAK+/B,aAAe//B,EAAKwM,aAC3DwzB,EAAQ,GACdtnC,KAAKqB,MAAM2F,SAASZ,SAAS/E,SACXuB,IAAVvB,GACAimC,EAAMxhC,KAAK9F,KAAK8mC,WAAWzlC,GAAA,IAGnCiG,EAAKQ,YAAcw/B,EAAMhnC,KAAK,MAC1B6mC,IACA7/B,EAAK8/B,UAAY9/B,EAAK+/B,aAE9B,CACAR,iBACI7mC,KAAKyiB,SACT,EAGJ,MAAM8kB,GACF7nC,YAAYuI,EAAKlE,GACb/D,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAKW,KAAO,IAAIimC,GAAa3+B,EAAK,CAC9B0b,UAAW5f,EAAO4f,UAClBqjB,UAAWjjC,EAAOijC,UAClB3lC,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,WAExB,EAGJ,MAAM2mC,GAAclhC,EAAU,OAC9B,MAAMmhC,GACF/nC,YAAYuI,EAAKlE,GACb/D,KAAK6mC,eAAiB7mC,KAAK6mC,eAAephC,KAAKzF,MAC/CA,KAAK8mC,WAAa/iC,EAAO4f,UACzB3jB,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAI8/B,MAC3BzjC,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzC,MAAM+iB,EAAYxb,EAAIC,cAAc,SACpCub,EAAUhc,UAAUC,IAAI8/B,GAAY,MACpC/jB,EAAUwjB,UAAW,EACrBxjB,EAAU3f,KAAO,OACjBC,EAAOlD,UAAUwH,aAAaob,GAC9BzjB,KAAKU,QAAQ4H,YAAYmb,GACzBzjB,KAAK0jB,aAAeD,EACpB1f,EAAO1C,MAAMqE,QAAQL,GAAG,SAAUrF,KAAK6mC,gBACvC7mC,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKyiB,SACT,CACAA,UACI,MAAMpB,EAASrhB,KAAKqB,MAAM2F,SACpB0gC,EAAYrmB,EAAOA,EAAOjf,OAAS,GACzCpC,KAAK0jB,aAAariB,WACAuB,IAAd8kC,EAA0B1nC,KAAK8mC,WAAWY,GAAa,EAC/D,CACAb,iBACI7mC,KAAKyiB,SACT,EAGJ,MAAMklB,GACFjoC,YAAYuI,EAAKlE,GACb/D,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAKW,KAAO,IAAI8mC,GAAcx/B,EAAK,CAC/B0b,UAAW5f,EAAO4f,UAClBtiB,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,WAExB,EAGJ,MAAM+mC,GAAuB,CACzBx1B,GAAI,eACJtO,KAAM,UACNuO,OAAQ,CAAChR,EAAOmC,KACZ,GAAqB,kBAAVnC,EACP,OAAO,KAEX,MACMsJ,EAASyB,EAAY5I,EAAQ,CAC/BwjC,UAFM96B,EAEOd,SAASI,SAE1B,OAAOb,EACD,CACE7B,aAAczH,EACdmC,OAAQmH,GAEV,IAAI,EAEd0L,QAAS,CACL0J,OAAS6R,GAAU3N,IAEvBzjB,WAAa+R,IACT,IAAIvO,EACJ,OAAmC,IAA/BuO,EAAKlR,MAAM2F,SAAS5E,OACb,IAAIulC,GAAoBp1B,EAAK5C,SAAU,CAC1CgU,UAAWO,GACX7iB,MAAOkR,EAAKlR,MACZR,UAAW0R,EAAK1R,YAGjB,IAAI0mC,GAAmBh1B,EAAK5C,SAAU,CACzCgU,UAAWO,GACX8iB,UAA4C,QAAhChjC,EAAKuO,EAAK/O,OAAOwjC,iBAA8B,IAAPhjC,EAAgBA,EAAKuiC,GAAUC,QAAQE,iBAC3FrlC,MAAOkR,EAAKlR,MACZR,UAAW0R,EAAK1R,WACpB,GAIF0G,GAAYjB,EAAU,OAC5B,MAAMuhC,GACFnoC,YAAYuI,EAAKlE,GACb/D,KAAK8nC,gBAAkB9nC,KAAK8nC,gBAAgBriC,KAAKzF,MACjDA,KAAK6mC,eAAiB7mC,KAAK6mC,eAAephC,KAAKzF,MAC/CA,KAAKU,QAAUuH,EAAIC,cAAc,OACjClI,KAAKU,QAAQ+G,UAAUC,IAAIH,MAC3BxD,EAAOlD,UAAUsH,mBAAmBnI,KAAKU,SACzCV,KAAK8mC,WAAa/iC,EAAO4f,UACzB3jB,KAAKmiB,OAASpe,EAAOmB,MACrBlF,KAAK+nC,QAAUhkC,EAAOmhB,OACtBllB,KAAK+nC,QAAQriC,QAAQL,GAAG,SAAUrF,KAAK8nC,iBACvC,MAAM9D,EAAU/7B,EAAIwI,gBAAgB1B,EAAQ,OAC5Ci1B,EAAQv8B,UAAUC,IAAIH,GAAU,MAChCy8B,EAAQ50B,MAAMyE,OAAS,wBAAwB9P,EAAOijC,aACtDhnC,KAAKU,QAAQ4H,YAAY07B,GACzBhkC,KAAKikC,SAAWD,EAChB,MAAMI,EAAWn8B,EAAIwI,gBAAgB1B,EAAQ,YAC7C/O,KAAKikC,SAAS37B,YAAY87B,GAC1BpkC,KAAKqkC,UAAYD,EACjB,MAAMzW,EAAc1lB,EAAIC,cAAc,OACtCylB,EAAYlmB,UAAUC,IAAIH,GAAU,KAAMjB,EAAU,KAAVA,IAC1CtG,KAAKU,QAAQ4H,YAAYqlB,GACzB3tB,KAAK4tB,aAAeD,EACpB5pB,EAAO1C,MAAMqE,QAAQL,GAAG,SAAUrF,KAAK6mC,gBACvC7mC,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKyiB,SACT,CACIulB,mBACA,OAAOhoC,KAAKikC,QAChB,CACAxhB,UACI,MAAMiJ,EAAS1rB,KAAKikC,SAAS3Z,wBACvB2d,EAAWjoC,KAAKqB,MAAM2F,SAAS5E,OAAS,EACxCmf,EAAMvhB,KAAKmiB,OAAOrhB,IAAI,YACtBwgB,EAAMthB,KAAKmiB,OAAOrhB,IAAI,YACtBonC,EAAS,GACfloC,KAAKqB,MAAM2F,SAASZ,SAAQ,CAACrE,EAAGF,KAC5B,QAAUe,IAANb,EACA,OAEJ,MAAMwoB,EAAI8B,GAASxqB,EAAO,EAAGomC,EAAU,EAAGvc,EAAOC,OAC3CjB,EAAI2B,GAAStqB,EAAGwf,EAAKD,EAAKoK,EAAO7X,OAAQ,GAC/Cq0B,EAAOpiC,KAAK,CAACykB,EAAGG,GAAGpqB,KAAK,SAE5BN,KAAKqkC,UAAUtW,eAAe,KAAM,SAAUma,EAAO5nC,KAAK,MAC1D,MAAMqtB,EAAc3tB,KAAK4tB,aACnBvsB,EAAQrB,KAAKqB,MAAM2F,SAAShH,KAAK+nC,QAAQ/gC,UAC/C,QAAcpE,IAAVvB,EAEA,YADAssB,EAAYlmB,UAAUE,OAAOJ,GAAU,IAAK,MAGhD,MAAM4gC,EAAK9b,GAASrsB,KAAK+nC,QAAQ/gC,SAAU,EAAGihC,EAAU,EAAGvc,EAAOC,OAC5Dyc,EAAK/b,GAAShrB,EAAOkgB,EAAKD,EAAKoK,EAAO7X,OAAQ,GACpD8Z,EAAYve,MAAMqV,KAAO,GAAG0jB,MAC5Bxa,EAAYve,MAAMyb,IAAM,GAAGud,MAC3Bza,EAAY7lB,YAAc,GAAG9H,KAAK8mC,WAAWzlC,KACxCssB,EAAYlmB,UAAU44B,SAAS94B,GAAU,IAAK,QAC/ComB,EAAYlmB,UAAUC,IAAIH,GAAU,IAAK,KAAMA,GAAU,IAAK,OAC9DyH,EAAY2e,GACZA,EAAYlmB,UAAUE,OAAOJ,GAAU,IAAK,OAEpD,CACAs/B,iBACI7mC,KAAKyiB,SACT,CACAqlB,kBACI9nC,KAAKyiB,SACT,EAGJ,MAAM4lB,GACF3oC,YAAYuI,EAAKlE,GAkBb,GAjBA/D,KAAKsoC,kBAAoBtoC,KAAKsoC,kBAAkB7iC,KAAKzF,MACrDA,KAAKuoC,mBAAqBvoC,KAAKuoC,mBAAmB9iC,KAAKzF,MACvDA,KAAKwoC,oBAAsBxoC,KAAKwoC,oBAAoB/iC,KAAKzF,MACzDA,KAAKyoC,oBAAsBzoC,KAAKyoC,oBAAoBhjC,KAAKzF,MACzDA,KAAK0oC,kBAAoB1oC,KAAK0oC,kBAAkBjjC,KAAKzF,MACrDA,KAAKmiB,OAASpe,EAAOmB,MACrBlF,KAAKqB,MAAQ0C,EAAO1C,MACpBrB,KAAKa,UAAYkD,EAAOlD,UACxBb,KAAK+nC,QAAU/9B,GAAY,GAC3BhK,KAAKW,KAAO,IAAIknC,GAAa5/B,EAAK,CAC9Bid,OAAQllB,KAAK+nC,QACbpkB,UAAW5f,EAAO4f,UAClBqjB,UAAWjjC,EAAOijC,UAClB9hC,MAAOlF,KAAKmiB,OACZ9gB,MAAOrB,KAAKqB,MACZR,UAAWb,KAAKa,YAEfyO,EAAcrH,GAId,CACD,MAAMymB,EAAK,IAAI5D,GAAe9qB,KAAKW,KAAKD,SACxCguB,EAAGhpB,QAAQL,GAAG,OAAQrF,KAAKwoC,qBAC3B9Z,EAAGhpB,QAAQL,GAAG,OAAQrF,KAAKyoC,qBAC3B/Z,EAAGhpB,QAAQL,GAAG,KAAMrF,KAAK0oC,kBAC7B,MARI1oC,KAAKW,KAAKD,QAAQiI,iBAAiB,YAAa3I,KAAKsoC,mBACrDtoC,KAAKW,KAAKD,QAAQiI,iBAAiB,aAAc3I,KAAKuoC,mBAQ9D,CACAA,qBACIvoC,KAAK+nC,QAAQ/gC,UAAW,CAC5B,CACAshC,kBAAkBvhC,GACd,MAAM2kB,EAAS1rB,KAAKW,KAAKD,QAAQ4pB,wBACjCtqB,KAAK+nC,QAAQ/gC,SAAWwa,KAAK0P,MAAM7E,GAAStlB,EAAG4hC,QAAS,EAAGjd,EAAOC,MAAO,EAAG3rB,KAAKqB,MAAM2F,SAAS5E,QACpG,CACAomC,oBAAoBzhC,GAChB/G,KAAKyoC,oBAAoB1hC,EAC7B,CACA0hC,oBAAoB1hC,GACXA,EAAGglB,KAAKH,MAIb5rB,KAAK+nC,QAAQ/gC,SAAWwa,KAAK0P,MAAM7E,GAAStlB,EAAGglB,KAAKH,MAAMrB,EAAG,EAAGxjB,EAAGglB,KAAKL,OAAOC,MAAO,EAAG3rB,KAAKqB,MAAM2F,SAAS5E,SAHzGpC,KAAK+nC,QAAQ/gC,UAAW,CAIhC,CACA0hC,oBACI1oC,KAAK+nC,QAAQ/gC,UAAW,CAC5B,EAGJ,SAAS4hC,GAAgBplC,GACrB,MAAO,WAAYA,IAAWxB,EAAQwB,EAAO43B,QACvC53B,EAAO43B,OACPxS,GAAsB,EAChC,CACA,SAASigB,GAAkBt2B,GACvB,IAAIvO,EACJ,OAAmC,IAA/BuO,EAAKlR,MAAM2F,SAAS5E,OACb,IAAIulC,GAAoBp1B,EAAK5C,SAAU,CAC1CgU,UAAWilB,GAAgBr2B,EAAK/O,QAChCnC,MAAOkR,EAAKlR,MACZR,UAAW0R,EAAK1R,YAGjB,IAAI0mC,GAAmBh1B,EAAK5C,SAAU,CACzCgU,UAAWilB,GAAgBr2B,EAAK/O,QAChCwjC,UAA4C,QAAhChjC,EAAKuO,EAAK/O,OAAOwjC,iBAA8B,IAAPhjC,EAAgBA,EAAKuiC,GAAUC,QAAQE,iBAC3FrlC,MAAOkR,EAAKlR,MACZR,UAAW0R,EAAK1R,WAExB,CACA,SAASioC,GAAmBv2B,GACxB,IAAIvO,EAAI2J,EAAIC,EACZ,OAAO,IAAIy6B,GAAmB91B,EAAK5C,SAAU,CACzCgU,UAAWilB,GAAgBr2B,EAAK/O,QAChCwjC,UAA4C,QAAhChjC,EAAKuO,EAAK/O,OAAOwjC,iBAA8B,IAAPhjC,EAAgBA,EAAKuiC,GAAUC,QAAQE,iBAC3FxhC,MAAO+E,EAASuI,WAAW,CACvBmP,SAAqE,QAA1DhU,EAAM,QAAS4E,EAAK/O,OAAS+O,EAAK/O,OAAO8d,IAAM,YAA0B,IAAP3T,EAAgBA,EAAK,IAClGiU,SAAqE,QAA1DhU,EAAM,QAAS2E,EAAK/O,OAAS+O,EAAK/O,OAAO+d,IAAM,YAA0B,IAAP3T,EAAgBA,EAAK,IAEtGvM,MAAOkR,EAAKlR,MACZR,UAAW0R,EAAK1R,WAExB,CACA,SAASkoC,GAAgBvlC,GACrB,MAAO,SAAUA,GAA0B,UAAhBA,EAAO7C,IACtC,CACA,MAAMqoC,GAAsB,CACxB52B,GAAI,iBACJtO,KAAM,UACNuO,OAAQ,CAAChR,EAAOmC,KACZ,GAAqB,iBAAVnC,EACP,OAAO,KAEX,MAAMiR,EAAIpG,EACJvB,EAASyB,EAAY5I,EAAQ,CAC/B43B,OAAQ9oB,EAAElH,SAASM,SACnBs7B,UAAW10B,EAAElH,SAASI,OACtB8V,IAAKhP,EAAElH,SAASI,OAChB+V,IAAKjP,EAAElH,SAASI,OAChB7K,KAAM2R,EAAElH,SAASK,SAErB,OAAOd,EACD,CACE7B,aAAczH,EACdmC,OAAQmH,GAEV,IAAI,EAEd0L,QAAS,CACL4yB,kBAAoBzlC,GAAYulC,GAAgBvlC,GAAU,GAAK,EAC/Duc,OAAS6R,GAAUnJ,IAEvBjoB,WAAa+R,GACLw2B,GAAgBx2B,EAAK/O,QACdslC,GAAmBv2B,GAEvBs2B,GAAkBt2B,IAI3B22B,GAAsB,CACxB92B,GAAI,iBACJtO,KAAM,UACNuO,OAAQ,CAAChR,EAAOmC,KACZ,GAAqB,iBAAVnC,EACP,OAAO,KAEX,MAAMiR,EAAIpG,EACJvB,EAASyB,EAAY5I,EAAQ,CAC/BwjC,UAAW10B,EAAElH,SAASI,OACtB29B,UAAW72B,EAAElH,SAASG,UAE1B,OAAOZ,EACD,CACE7B,aAAczH,EACdmC,OAAQmH,GAEV,IAAI,EAEd0L,QAAS,CACL0J,OAAS6R,GAAU3I,IAEvBzoB,WAAa+R,IACT,IAAIvO,EACJ,MAAM3C,EAAQkR,EAAKlR,MAGnB,OAFkBA,EAAM2F,SAAS5E,OAAS,GACrC,cAAemQ,EAAK/O,QAAU+O,EAAK/O,OAAO2lC,UAEpC,IAAI5B,GAAmBh1B,EAAK5C,SAAU,CACzCgU,UAAWuF,GACX8d,UAA4C,QAAhChjC,EAAKuO,EAAK/O,OAAOwjC,iBAA8B,IAAPhjC,EAAgBA,EAAKuiC,GAAUC,QAAQE,iBAC3FrlC,MAAOA,EACPR,UAAW0R,EAAK1R,YAGjB,IAAI8mC,GAAoBp1B,EAAK5C,SAAU,CAC1CgU,UAAWuF,GACX7nB,MAAOA,EACPR,UAAW0R,EAAK1R,WACpB,GAIR,SAASuoC,GAA6BvqB,EAAQtM,GAC1C,MAAM5H,EAASkU,EAAOxM,OAAOE,EAAKpR,OAAOsD,OAAQ8N,EAAK/O,QACtD,GAAIxB,EAAQ2I,GACR,OAAO,KAEX,MAAM2H,EAAIpG,EACJm9B,EAAY,CACdloC,OAAQoR,EAAKpR,OACb2H,aAAc6B,EAAO7B,aACrBtF,OAAQmH,EAAOnH,QAEbuc,EAASlB,EAAOxI,QAAQ0J,OAAOspB,GAC/BrgC,EAAa6V,EAAOxI,QAAQrN,WAC5B6V,EAAOxI,QAAQrN,WAAWqgC,QAC1BzmC,EACAvB,EAAQ2I,EAAY+V,EAAOpV,EAAO7B,cAAe,CACnDE,WAAYA,EACZE,OAAQ2V,EAAOxI,QAAQnN,SAErBmN,EAAU,IAAIwJ,GAAa,CAC7BE,OAAQA,EACR5e,OAAQoR,EAAKpR,OACbE,MAAOA,EACP2e,OAAQnB,EAAOxI,QAAQ2J,OAAOqpB,KAE5BzoC,EAAW0R,EAAElH,SAASG,QAAQgH,EAAK/O,OAAO5C,UAAUS,MACpDL,EAASsR,EAAElH,SAASG,QAAQgH,EAAK/O,OAAOxC,QAAQK,MAChDb,EAAaqe,EAAOre,WAAW,CACjCwI,WAAYA,EACZ2G,SAAU4C,EAAK5C,SACf7G,aAAc6B,EAAO7B,aACrBtF,OAAQmH,EAAOnH,OACfnC,MAAOgV,EAAQhV,MACfR,UAAWoM,EAAUM,OAAO,CACxB3M,SAAUA,EACVI,OAAQA,MAGViE,EAAQqN,EAAElH,SAASK,OAAO8G,EAAK/O,OAAOyB,OAAO5D,MACnD,OAAO,IAAIkV,GAAuBhE,EAAK5C,SAAU,CAC7C0G,QAASA,EACTxH,MAAO8D,KACPzN,MAAO+E,EAASuI,WAAW,CACvBvN,MAAOA,QAAqCA,EAAQsN,EAAKpR,OAAOqB,MAEpE4C,gBAAiB5E,GAEzB,CAEA,SAAS8oC,GAAa35B,EAAUuP,GAC5B,OAAoB,IAAbA,EACD,IAAIH,GACJ,IAAIE,GAAetP,EAAUuP,QAA2CA,EAAWqnB,GAAUC,QAAQC,gBAC/G,CACA,SAAS8C,GAA+B1qB,EAAQtM,GAC5C,IAAIvO,EAAI2J,EAAIC,EACZ,MAAM47B,EAAIt9B,EACJvB,EAASkU,EAAOxM,OAAOE,EAAKpR,OAAOsD,OAAQ8N,EAAK/O,QACtD,GAAIxB,EAAQ2I,GACR,OAAO,KAEX,MAAM8+B,EAAc,CAChBtoC,OAAQoR,EAAKpR,OACb2H,aAAc6B,EAAO7B,aACrBtF,OAAQmH,EAAOnH,QAEbuc,EAASlB,EAAOxI,QAAQ0J,OAAO0pB,GAC/BppB,EACoD,QADtC1S,EAAgE,QAA1D3J,EAAKwlC,EAAEp+B,SAASI,OAAO+G,EAAK/O,OAAO6c,YAAYhf,aAA0B,IAAP2C,EAAgBA,EAAM6a,EAAOxI,QAAQ4yB,mBAC7HpqB,EAAOxI,QAAQ4yB,kBAAkBt+B,EAAOnH,eAA6B,IAAPmK,EAAgBA,EAAK,EACjFuR,EAAWsqB,EAAEp+B,SAASI,OAAO+G,EAAK/O,OAAO0b,UAAU7d,MACnDgV,EAAU,IAAIuK,GAAe,CAC/Bb,OAAQA,EACR5e,OAAQoR,EAAKpR,OACbwV,OAAQ2yB,GAAa/2B,EAAK5C,SAAUuP,GACpC7d,MAAOif,GAAiBD,KAEtBzf,EAAW4oC,EAAEp+B,SAASG,QAAQgH,EAAK/O,OAAO5C,UAAUS,MACpDL,EAASwoC,EAAEp+B,SAASG,QAAQgH,EAAK/O,OAAOxC,QAAQK,MAChDb,EAAaqe,EAAOre,WAAW,CACjCmP,SAAU4C,EAAK5C,SACfnM,OAAQmH,EAAOnH,OACfnC,MAAOgV,EAAQhV,MACfR,UAAWoM,EAAUM,OAAO,CACxB3M,SAAUA,EACVI,OAAQA,MAGViE,EAA8D,QAArD2I,EAAK47B,EAAEp+B,SAASK,OAAO8G,EAAK/O,OAAOyB,OAAO5D,aAA0B,IAAPuM,EAAgBA,EAAK2E,EAAKpR,OAAOqB,IAC7G,OAAO,IAAIkU,GAAyBnE,EAAK5C,SAAU,CAC/C0G,QAASA,EACTxH,MAAO8D,KACPzN,MAAO+E,EAASuI,WAAW,CACvBvN,MAAOA,IAEXG,gBAAiB5E,GAEzB,CAEA,MAAMkpC,GACFhqC,cACIM,KAAK2pC,YAAc,CACfC,OAAQ,GACRC,OAAQ,GACRC,SAAU,GAElB,CACAC,SACI,MAAO,IACA/pC,KAAK2pC,YAAYC,UACjB5pC,KAAK2pC,YAAYE,UACjB7pC,KAAK2pC,YAAYG,SAE5B,CACAE,SAASxhB,GACU,UAAXA,EAAE1kB,KACF9D,KAAK2pC,YAAYC,OAAOK,QAAQzhB,GAEhB,UAAXA,EAAE1kB,KACP9D,KAAK2pC,YAAYE,OAAOI,QAAQzhB,GAEhB,YAAXA,EAAE1kB,MACP9D,KAAK2pC,YAAYG,SAASG,QAAQzhB,EAE1C,CACA5Q,YAAYjI,EAAUxO,EAAQqC,GAE1B,GAAIxB,EADiBb,EAAOsD,QAExB,MAAM,IAAIb,EAAQ,CACdV,QAAS,CACLV,IAAKrB,EAAOqB,KAEhBsB,KAAM,yBAGd,MAAM2T,EAAKzX,KAAK2pC,YAAYE,OAAOz/B,QAAO,CAACO,EAAQkU,IAAWlU,QAAuCA,EAASy+B,GAA6BvqB,EAAQ,CAC/IlP,SAAUA,EACVxO,OAAQA,EACRqC,OAAQA,KACR,MACJ,GAAIiU,EACA,OAAOA,EAEX,MAAM,IAAI7T,EAAQ,CACdV,QAAS,CACLV,IAAKrB,EAAOqB,KAEhBsB,KAAM,wBAEd,CACAgU,cAAcnI,EAAUxO,EAAQqC,GAC5B,MAAMiU,EAAKzX,KAAK2pC,YAAYG,SAAS1/B,QAAO,CAACO,EAAQkU,IAAWlU,QAAuCA,EAAS4+B,GAA+B1qB,EAAQ,CACnJlP,SAAUA,EACVnM,OAAQA,EACRrC,OAAQA,KACR,MACJ,GAAIsW,EACA,OAAOA,EAEX,MAAM,IAAI7T,EAAQ,CACdV,QAAS,CACLV,IAAKrB,EAAOqB,KAEhBsB,KAAM,wBAEd,CACA6O,YAAYhD,EAAUnM,GAClB,MAAMiU,EAAKzX,KAAK2pC,YAAYC,OAAOx/B,QAAO,CAACO,EAAQkU,IAAWlU,QAAuCA,EAASiU,GAAsBC,EAAQ,CACxIlP,SAAUA,EACVnM,OAAQA,KACR,MACJ,IAAKiU,EACD,MAAM,IAAI7T,EAAQ,CACdE,KAAM,iBACNZ,QAAS,CACLM,OAAQA,KAIpB,OAAOiU,CACX,CACAY,eAAeZ,GACX,GAAIA,aAAclB,GACd,OAAO,IAAIL,GAAgBuB,GAE/B,GAAIA,aAAcf,GACd,OAAO,IAAIF,GAAkBiB,GAEjC,GAAIA,aAAcyB,GACd,OAAO,IAAIrC,GAAQY,EAAIzX,MAE3B,MAAMyS,EAAMzS,KAAK2pC,YAAYC,OAAOx/B,QAAO,CAACO,EAAQkU,IAAWlU,QAAuCA,EAASkU,EAAOpM,IAAI,CACtHjS,WAAYiX,EACZR,KAAMjX,QACN,MACJ,IAAKyS,EACD,MAAM7O,EAAQgS,oBAElB,OAAOnD,CACX,EAGJ,SAASy3B,KACL,MAAMjzB,EAAO,IAAIyyB,GAqBjB,MApBA,CACIS,GACAvE,GACAQ,GACAE,GACArD,GACAlB,GACAD,GACAL,GACA9P,GACAiW,GACAsB,GACAF,GACA72B,GACAoJ,GACAO,GACA4C,IACFtY,SAASkM,IACP2E,EAAK+yB,SAAS13B,EAAA,IAEX2E,CACX,CAEA,SAASmzB,GAAmB/oC,GACxB,OAAO6hC,GAAQj4B,SAAS5J,GAClB,IAAI6hC,GAAQ7hC,EAAMkpB,EAAGlpB,EAAMqpB,GAC3B,IAAIwY,EACd,CACA,SAASmH,GAAalpC,EAAQE,GAC1BF,EAAOwD,cAAc,IAAKtD,EAAMkpB,GAChCppB,EAAOwD,cAAc,IAAKtD,EAAMqpB,EACpC,CAEA,SAASgb,GAA0BliC,EAAQsF,GACvC,IAAKtF,EACD,OAEJ,MAAMud,EAAc,GACdgd,EAAK6E,GAAqBp/B,EAAQsF,GACpCi1B,GACAhd,EAAYjb,KAAKi4B,GAErB,MAAMuM,EAAKzH,GAAsBr/B,GAIjC,OAHI8mC,GACAvpB,EAAYjb,KAAKwkC,GAEd,IAAIxpB,GAAoBC,EACnC,CACA,SAASwpB,GAAiB/mC,EAAQsF,GAC9B,OAAO,IAAIk5B,GAAkB,CACzBE,SAAUkB,GACVhP,WAAY,CACRsR,GAA0B,MAAOliC,EAASA,EAAO+mB,OAAI3nB,EAAWkG,EAAayhB,GAC7Emb,GAA0B,MAAOliC,EAASA,EAAOknB,OAAI9nB,EAAWkG,EAAa4hB,KAGzF,CACA,SAAS8f,GAA6BxhC,EAAYhC,GAC9C,MAAOua,EAAKD,GAAOtY,EAAa85B,GAAgB95B,GAAc,GAC9D,IAAKhH,EAAQuf,KAASvf,EAAQsf,GAC1B,OAAOE,KAAKF,IAAIE,KAAKyP,IAAI1P,QAAiCA,EAAM,GAAIC,KAAKyP,IAAI3P,QAAiCA,EAAM,IAExH,MAAMQ,EAAOgP,GAAY9nB,GACzB,OAAOwY,KAAKF,IAAqB,GAAjBE,KAAKyP,IAAInP,GAAiC,GAArBN,KAAKyP,IAAIjqB,GAClD,CACA,SAASyjC,GAAoB3hC,EAAcE,GACvC,MAAM0hC,EAAK1hC,aAAsBg5B,GAC3Bh5B,EAAWorB,WAAW,QACtBxxB,EACA+nC,EAAK3hC,aAAsBg5B,GAC3Bh5B,EAAWorB,WAAW,QACtBxxB,EACAgoC,EAAKJ,GAA6BE,EAAI5hC,EAAayhB,GACnDsgB,EAAKL,GAA6BG,EAAI7hC,EAAa4hB,GACzD,OAAOlJ,KAAKF,IAAIspB,EAAIC,EACxB,CACA,SAASC,GAAWhiC,EAAcE,GAC9B,MAAO,CACH2gB,SAAUmH,GAAY9nB,GACtBA,WAAYA,EACZmnB,UAAWlmB,EAASuI,WAAW,CAC3B8qB,cAAevM,GAAyB/nB,EAAYF,GACpD6a,UAAWiF,GAAsBiI,GAAyB7nB,EAAYF,MAGlF,CACA,SAASiiC,GAAcvnC,GACnB,KAAM,MAAOA,GACT,OAAO,EAEX,MAAMwnC,EAAUxnC,EAAOknB,EACvB,QAAKsgB,GAGE,aAAcA,KAAYA,EAAQC,QAC7C,CACA,MAAMd,GAAqB,CACvB/3B,GAAI,gBACJtO,KAAM,QACNuO,OAAQ,CAAChR,EAAOmC,KACZ,IAAK0/B,GAAQj4B,SAAS5J,GAClB,OAAO,KAEX,MAAMiR,EAAIpG,EACJvB,EAASyB,EAAY5I,EAAQ,CAC/B7B,SAAU2Q,EAAElH,SAASG,QACrBsrB,OAAQvkB,EAAElH,SAASE,OAAOklB,IAC1BjG,EAAGjY,EAAElH,SAASE,OAAOmlB,IACrB/F,EAAGpY,EAAElH,SAASS,OAAO,CACjBo/B,SAAU34B,EAAElH,SAASG,QACrB+V,IAAKhP,EAAElH,SAASI,OAChB+V,IAAKjP,EAAElH,SAASI,OAChBsW,KAAMxP,EAAElH,SAASI,WAGzB,OAAOb,EACD,CACE7B,aAAczH,EACdmC,OAAQmH,GAEV,IAAI,EAEd0L,QAAS,CACL0J,OAAS6R,GAAUwY,GACnBphC,WAAauJ,GAASg4B,GAAiBh4B,EAAK/O,OAAQ+O,EAAKzJ,cACzDI,OAAQg6B,GAAQh6B,OAChB8W,OAAS4R,GAAUyY,IAEvB7pC,WAAa+R,IACT,MAAMtK,EAAMsK,EAAK5C,SACXtO,EAAQkR,EAAKlR,MACbsd,EAAIpM,EAAKvJ,WACf,KAAM2V,aAAaqjB,IACf,MAAMp+B,EAAQgS,oBAElB,MAAMjU,EAAW,aAAc4Q,EAAK/O,OAAS+O,EAAK/O,OAAO7B,cAAWiB,EAC9Di0B,EAAS,WAAYtkB,EAAK/O,OAAS+O,EAAK/O,OAAOqzB,YAASj0B,EAC9D,OAAO,IAAIoiC,GAAkB/8B,EAAK,CAC9Bw6B,KAAM,CACFqI,GAAWzpC,EAAM2F,SAASujB,EAAG5L,EAAEyV,WAAW,IAC1C0W,GAAWzpC,EAAM2F,SAAS0jB,EAAG/L,EAAEyV,WAAW,KAE9CzyB,SAAUA,SAA2CA,EACrDgiC,SAAUoH,GAAcx4B,EAAK/O,QAC7Bme,SAAU8oB,GAAoBppC,EAAM2F,SAAU2X,GAC9C/T,OAAQ2d,GACR2J,aAAc2E,QAAuCA,EAAS,QAC9Dx1B,MAAOA,EACPR,UAAW0R,EAAK1R,WACpB,GAIR,MAAMqqC,WAAgB3qC,EAClBb,YAAYc,GACRgB,MAAMhB,GACNR,KAAKoW,SAAW,IAAIzQ,EACpB3F,KAAKS,YAAY2E,gBAAgB/D,MAAMqE,QAAQL,GAAG,UAAW0B,IACzD/G,KAAKoW,SAASlQ,KAAK,SAAU,CACzBC,MAAO,IAAI/E,EAAcpB,KAAM+G,EAAGC,WACtC,GAER,CACI/B,YACA,OAAOjF,KAAKS,YAAYyE,MAAMpE,IAAI,QACtC,CACImE,UAAMA,GACNjF,KAAKS,YAAYyE,MAAMnE,IAAI,QAASkE,EACxC,CACIuE,cACA,OAAOxJ,KAAKS,YAAY2E,gBAAgBF,MAAMpE,IAAI,UACtD,CACI0I,YAAQA,GACRxJ,KAAKS,YAAY2E,gBAAgBF,MAAMnE,IAAI,UAAWyI,EAC1D,CACInI,YACA,OAAOrB,KAAKS,YAAY2E,gBAAgB/D,MAAM2F,QAClD,CACI3F,UAAMA,GACNrB,KAAKS,YAAY2E,gBAAgB/D,MAAM2F,SAAW3F,CACtD,CACAgE,GAAGC,EAAWC,GACV,MAAMC,EAAKD,EAAQE,KAAKzF,MAIxB,OAHAA,KAAKoW,SAAS/Q,GAAGC,GAAYyB,IACzBvB,EAAGuB,EAAGZ,MAAK,IAERnG,IACX,EAGJ,MAAMmrC,WAAkB5qC,EACpBb,YAAYc,GACRgB,MAAMhB,GACNR,KAAKoW,SAAW,IAAIzQ,EACpB3F,KAAKS,YAAY2E,gBAAgB/D,MAAMqE,QAAQL,GAAG,UAAW0B,IACzD/G,KAAKoW,SAASlQ,KAAK,SAAU,CACzBC,MAAO,IAAI/E,EAAcpB,KAAM+G,EAAGC,WACtC,GAER,CACI/B,YACA,OAAOjF,KAAKS,YAAYyE,MAAMpE,IAAI,QACtC,CACImE,UAAMA,GACNjF,KAAKS,YAAYyE,MAAMnE,IAAI,QAASkE,EACxC,CACI0c,eACA,OAAO3hB,KAAKS,YAAY2E,gBAAgBgrB,iBAAiBlrB,MAAMpE,IAAI,WACvE,CACI6gB,aAASA,GACT3hB,KAAKS,YAAY2E,gBAAgBgrB,iBAAiBlrB,MAAMnE,IAAI,WAAY4gB,EAC5E,CACIC,eACA,OAAO5hB,KAAKS,YAAY2E,gBAAgBgrB,iBAAiBlrB,MAAMpE,IAAI,WACvE,CACI8gB,aAASA,GACT5hB,KAAKS,YAAY2E,gBAAgBgrB,iBAAiBlrB,MAAMnE,IAAI,WAAY6gB,EAC5E,CACIvgB,YACA,OAAOrB,KAAKS,YAAY2E,gBAAgB/D,MAAM2F,QAClD,CACI3F,UAAMA,GACNrB,KAAKS,YAAY2E,gBAAgB/D,MAAM2F,SAAW3F,CACtD,CACAgE,GAAGC,EAAWC,GACV,MAAMC,EAAKD,EAAQE,KAAKzF,MAIxB,OAHAA,KAAKoW,SAAS/Q,GAAGC,GAAYyB,IACzBvB,EAAGuB,EAAGZ,MAAK,IAERnG,IACX,EAGJ,MAAMorC,WAAgB7qC,EAClBb,YAAYc,GACRgB,MAAMhB,GACNR,KAAKoW,SAAW,IAAIzQ,EACpB3F,KAAKS,YAAY2E,gBAAgB/D,MAAMqE,QAAQL,GAAG,UAAW0B,IACzD/G,KAAKoW,SAASlQ,KAAK,SAAU,CACzBC,MAAO,IAAI/E,EAAcpB,KAAM+G,EAAGC,WACtC,GAER,CACI/B,YACA,OAAOjF,KAAKS,YAAYyE,MAAMpE,IAAI,QACtC,CACImE,UAAMA,GACNjF,KAAKS,YAAYyE,MAAMnE,IAAI,QAASkE,EACxC,CACI0e,gBACA,OAAO3jB,KAAKS,YAAY2E,gBAAgBF,MAAMpE,IAAI,YACtD,CACI6iB,cAAUA,GACV3jB,KAAKS,YAAY2E,gBAAgBF,MAAMnE,IAAI,YAAa4iB,EAC5D,CACItiB,YACA,OAAOrB,KAAKS,YAAY2E,gBAAgB/D,MAAM2F,QAClD,CACI3F,UAAMA,GACNrB,KAAKS,YAAY2E,gBAAgB/D,MAAM2F,SAAW3F,CACtD,CACAgE,GAAGC,EAAWC,GACV,MAAMC,EAAKD,EAAQE,KAAKzF,MAIxB,OAHAA,KAAKoW,SAAS/Q,GAAGC,GAAYyB,IACzBvB,EAAGuB,EAAGZ,MAAK,IAERnG,IACX,EAGJ,MAAMqrC,GACK,CACHj5B,GAAI,OACJtO,KAAM,QACNuO,OAAO7O,GACH,MAAM8O,EAAIpG,EACJvB,EAASyB,EAAY5I,EAAQ,CAC/BgG,QAAS8I,EAAEnG,SAASb,OAAOilB,IAC3BlvB,MAAOiR,EAAEnG,SAASP,IAClBjL,KAAM2R,EAAEnG,SAASR,SAAS,QAC1B1G,MAAOqN,EAAElH,SAASK,SAEtB,OAAOd,EAAS,CAAEnH,OAAQmH,GAAW,IACzC,EACAnK,WAAW+R,GACP,MAAMmf,EAAK,IAAIjQ,GAAeiP,GAAqBne,EAAK/O,OAAOgG,UACzDnI,EAAQ2I,EAAYuI,EAAK/O,OAAOnC,MAAO,CACzC2H,WAAY0oB,IAEV4Z,EAAK,IAAI5oB,GAAenQ,EAAK5C,SAAU,CACzCzK,MAAO,IAAI+E,EAAS,CAChBT,QAASkoB,EAAGrQ,OAAOhgB,MAAM,aAE7BA,MAAOA,EACPR,UAAW0R,EAAK1R,YAEpB,OAAO,IAAI2a,GAAuBjJ,EAAK5C,SAAU,CAC7Cd,MAAO0D,EAAK1D,MACZ3J,MAAO+E,EAASuI,WAAW,CACvBvN,MAAOsN,EAAK/O,OAAOyB,QAEvBG,gBAAiBkmC,GAEzB,EACA74B,IAAIF,GACMA,EAAK/R,sBAAsBgb,IAG3BjJ,EAAK/R,WAAW4E,2BAA2Bsd,GAG1C,IAAIwoB,GAAQ34B,EAAK/R,YALb,MAavB,SAAS+qC,GAAiBC,GACtB,OAAOA,EAAQphC,QAAO,CAACO,EAAQxJ,IACpBuB,OAAO4H,OAAOK,EAAQ,CACzB,CAACxJ,EAAOG,WAAYH,EAAOsD,UAEhC,CAAC,EACR,CAIA,SAASgnC,GAAiBC,EAAUC,GAChCD,EAAStlC,SAASiQ,IACd,MAAMhV,EAAQsqC,EAAOt1B,EAAQlV,OAAOG,gBACtBsB,IAAVvB,GACAgV,EAAQ2J,OAAO3J,EAAQlV,OAAQkV,EAAQ0J,OAAO1e,GAAA,GAG1D,CAEA,MAAMuqC,WAAgBpzB,GAIlB9Y,YAAYc,EAAYyW,GACpBzV,MAAMhB,EAAYyW,EACtB,CACIvW,cACA,OAAOV,KAAKS,YAAYE,KAAKD,OACjC,CAKAmrC,aAAaF,GAMTF,GALiBzrC,KAAKS,YAAYgY,eAAejB,KAC5ChC,KAAKe,IACL9E,KAAKq6B,GACCA,EAAIz1B,UAEYs1B,GAC3B3rC,KAAKsW,SACT,CAKAy1B,eAMI,OAAOR,GALSvrC,KAAKS,YAAYgY,eAAejB,KAC3ChC,KAAKe,IACL9E,KAAKq6B,GACCA,EAAIz1B,QAAQlV,SAG3B,CAIAmV,UAEItW,KAAKS,YAAYgY,eAAejB,KAC3BhC,KAAKe,IACLnQ,SAAS0lC,IACVA,EAAIz1B,QAAQ5R,MAAI,IAGpBzE,KAAKS,YAAYgY,eAAejB,KAC3BhC,KAAKkB,IACLtQ,SAAS4lC,IACVA,EAAI31B,QAAQ5R,MAAI,GAExB,EAGJ,MAAMwnC,WAAuB7wB,GACzB1b,YAAYuI,EAAKlE,GACbvC,MAAMyG,EAAK,CACPtG,SAAUoC,EAAOpC,SACjBkN,MAAO9K,EAAO8K,MACd3J,MAAOnB,EAAOmB,MACd6Q,MAAM,EACNlV,UAAWkD,EAAOlD,WAE1B,EAGJ,MAAMqrC,GAAoB,CACtB95B,GAAI,SACJtO,KAAM,QACNuO,OAAO7O,GACH,MAAM8O,EAAIpG,EACJvB,EAASyB,EAAY5I,EAAQ,CAC/B8d,IAAKhP,EAAEnG,SAASX,OAChB+V,IAAKjP,EAAEnG,SAASX,OAChB7K,KAAM2R,EAAEnG,SAASR,SAAS,UAC1ByvB,OAAQ9oB,EAAElH,SAASM,SACnBzG,MAAOqN,EAAElH,SAASK,OAClBpK,MAAOiR,EAAElH,SAASI,SAEtB,OAAOb,EAAS,CAAEnH,OAAQmH,GAAW,IACzC,EACAnK,WAAW+R,GACP,IAAIvO,EAAI2J,EACR,MAAM7E,EAA4C,QAA5B9E,EAAKuO,EAAK/O,OAAOnC,aAA0B,IAAP2C,EAAgBA,EAAK,EACzE++B,EAAM,IAAI3hB,GAAwB,CACpCE,IAAK/O,EAAK/O,OAAO8d,IACjBC,IAAKhP,EAAK/O,OAAO+d,MAEf4qB,EAAK,IAAInc,GAAqBzd,EAAK5C,SAAU,CAC/Cga,SAAU,EACV/e,OAAQ2d,GACRkG,YAAa,IAAIxkB,EAAS,CACtB0X,SAAUohB,EAAI1hB,OAAOhgB,MAAM,OAC3BugB,SAAUmhB,EAAI1hB,OAAOhgB,MAAM,SAE/B8uB,UAAWlmB,EAASuI,WAAW,CAC3B8qB,cAAevM,QAAyBnuB,EAAWkG,GACnD6a,UAAyC,QAA7BhW,EAAK4E,EAAK/O,OAAO43B,cAA2B,IAAPztB,EAAgBA,EAAKgb,KAE1EtnB,MAAO2I,EAAYlB,EAAc,CAC7BE,WAAY+5B,IAEhBliC,UAAW0R,EAAK1R,YAEpB,OAAO,IAAI2a,GAAuBjJ,EAAK5C,SAAU,CAC7Cd,MAAO0D,EAAK1D,MACZ3J,MAAO+E,EAASuI,WAAW,CACvBvN,MAAOsN,EAAK/O,OAAOyB,QAEvBG,gBAAiB+mC,GAEzB,EACA15B,IAAIF,GACMA,EAAK/R,sBAAsBgb,IAG3BjJ,EAAK/R,WAAW4E,2BAA2B4qB,GAG1C,IAAImb,GAAU54B,EAAK/R,YALf,MASb4rC,GACK,CACHh6B,GAAI,OACJtO,KAAM,QACNuO,OAAO7O,GACH,MAAM8O,EAAIpG,EACJvB,EAASyB,EAAY5I,EAAQ,CAC/B2H,MAAOmH,EAAEnG,SAAST,SAClBrK,MAAOiR,EAAEnG,SAASP,IAClBjL,KAAM2R,EAAEnG,SAASR,SAAS,QAC1ByvB,OAAQ9oB,EAAElH,SAASM,SACnBzG,MAAOqN,EAAElH,SAASK,SAEtB,OAAOd,EAAS,CAAEnH,OAAQmH,GAAW,IACzC,EACAnK,WAAW+R,GACP,IAAIvO,EACJ,MAAMsnC,EAAK,IAAI1nB,GAAerR,EAAK5C,SAAU,CACzC/E,OAAQ2H,EAAK/O,OAAO2H,MACpBjG,MAAO+E,EAASuI,WAAW,CACvBmR,UAAyC,QAA7B3f,EAAKuO,EAAK/O,OAAO43B,cAA2B,IAAPp3B,EAAgBA,EAAOjC,GAAMwgB,OAAOxgB,KAEzFV,MAAO2I,EAAYuI,EAAK/O,OAAOnC,OAC/BR,UAAW0R,EAAK1R,YAEpB,OAAO,IAAI2a,GAAuBjJ,EAAK5C,SAAU,CAC7Cd,MAAO0D,EAAK1D,MACZ3J,MAAO+E,EAASuI,WAAW,CACvBvN,MAAOsN,EAAK/O,OAAOyB,QAEvBG,gBAAiBkmC,GAEzB,EACA74B,IAAIF,GACMA,EAAK/R,sBAAsBgb,IAG3BjJ,EAAK/R,WAAW4E,2BAA2Bwe,GAG1C,IAAIwnB,GAAQ74B,EAAK/R,YALb,MAUvB,SAAS6rC,GAA4BpkC,GACjC,MAAMX,EAAOW,EAAIC,cAAc,OAK/B,OAJAZ,EAAKG,UAAUC,IAAIpB,EAAU,MAAVA,IACf2B,EAAIqkC,MACJrkC,EAAIqkC,KAAKhkC,YAAYhB,GAElBA,CACX,CACA,SAASilC,GAAWtkC,EAAKmK,EAAIo6B,GACzB,GAAIvkC,EAAIwkC,cAAc,uBAAuBr6B,MACzC,OAEJ,MAAMs6B,EAAYzkC,EAAIC,cAAc,SACpCwkC,EAAUpqB,QAAQqqB,QAAUv6B,EAC5Bs6B,EAAU5kC,YAAc0kC,EACxBvkC,EAAI2kC,KAAKtkC,YAAYokC,EACzB,CAIA,MAAMG,WAAajB,GACflsC,YAAYotC,GACR,IAAI9oC,EAAI2J,EACR,MAAM5J,EAAS+oC,QAA+CA,EAAa,CAAC,EACtE7kC,EAAiC,QAA1BjE,EAAKD,EAAO4L,gBAA6B,IAAP3L,EAAgBA,EAAK0L,KAC9DuH,EAAOizB,KASb1oC,MARuB,IAAIyqC,GAAehkC,EAAK,CAC3CtG,SAAUoC,EAAOpC,SACjBkN,MAAO8D,KACPzN,MAAO+E,EAASuI,WAAW,CACvBrN,MAAOpB,EAAOoB,QAElBtE,UAAWoM,EAAUM,WAEH0J,GACtBjX,KAAKuX,MAAQN,EACbjX,KAAK+sC,eAA6C,QAA3Bp/B,EAAK5J,EAAOipC,iBAA8B,IAAPr/B,EAAgBA,EAAK0+B,GAA4BpkC,GAC3GjI,KAAK+sC,eAAezkC,YAAYtI,KAAKU,SACrCV,KAAKsf,KAAOrX,EACZjI,KAAKitC,qBAAuBlpC,EAAOipC,UACnChtC,KAAKktC,sBACT,CACIv9B,eACA,IAAK3P,KAAKsf,KACN,MAAM1b,EAAQ8W,kBAElB,OAAO1a,KAAKsf,IAChB,CACAre,UACI,MAAMka,EAAgBnb,KAAK+sC,eAC3B,IAAK5xB,EACD,MAAMvX,EAAQ8W,kBAElB,GAAI1a,KAAKitC,oBAAqB,CAC1B,MAAME,EAAahyB,EAAcxO,cAC7BwgC,GACAA,EAAWvgC,YAAYuO,EAE/B,CACAnb,KAAK+sC,eAAiB,KACtB/sC,KAAKsf,KAAO,KACZ9d,MAAMP,SACV,CACAmsC,eAAeC,IACK,WAAYA,EACtB,CAACA,EAAOxuB,QACR,YAAawuB,EACTA,EAAOC,QACP,IACFlnC,SAASkM,IACbtS,KAAKuX,MAAMyyB,SAAS13B,GACpBtS,KAAKutC,kBAAkBj7B,EAAA,GAE/B,CACAi7B,kBAAkB1uB,GACVA,EAAO2tB,KACPD,GAAWvsC,KAAK2P,SAAU,UAAUkP,EAAOzM,KAAMyM,EAAO2tB,IAEhE,CACAU,uBAEIX,GAAWvsC,KAAK2P,SAAU,UAAW,66vBACrC3P,KAAKuX,MAAMwyB,SAAS3jC,SAASyY,IACzB7e,KAAKutC,kBAAkB1uB,EAAA,IAE3B7e,KAAKotC,eAAe,CAChBE,QAAS,CACLpB,GACAb,GACA3sB,GACA0tB,KAGZ,EAGJ,MAAMoB,GAAU,IAAI/tC,EAAO,SAE3BD,EAAQe,SAAWA,EACnBf,EAAQwF,UAAYA,EACpBxF,EAAQgZ,UAAYA,GACpBhZ,EAAQ0W,gBAAkBA,GAC1B1W,EAAQ0rC,QAAUA,GAClB1rC,EAAQgX,kBAAoBA,GAC5BhX,EAAQqtC,KAAOA,GACfrtC,EAAQic,aAAeA,GACvBjc,EAAQ2rC,UAAYA,GACpB3rC,EAAQod,OAASA,GACjBpd,EAAQkd,WAAaA,GACrBld,EAAQ4rC,QAAUA,GAClB5rC,EAAQ4B,cAAgBA,EACxB5B,EAAQguC,QAAUA,GAElB9qC,OAAO+qC,eAAejuC,EAAS,aAAc,CAAE6B,OAAO,GAE1D,CA/8OmEqsC,CAAQC,GCD3E,IAAIC,EAAM,MACR/pC,WAAWuU,EAAGU,GACZ,GAAgB,iBAALA,EACT,IAAK,IAAIzW,EAAI,EAAGwrC,EAAMz1B,EAAEhW,OAAQC,EAAIwrC,EAAKxrC,IACvC+V,EAAE/V,IAAMyW,OAEV,IAAK,IAAIzW,EAAI,EAAGwrC,EAAMz1B,EAAEhW,OAAQC,EAAIwrC,EAAKxrC,IACvC+V,EAAE/V,IAAMyW,EAAEzW,IAAM,EAEpB,OAAO+V,CACT,CACAvU,gBAAgBuU,EAAGU,GACjB,GAAgB,iBAALA,EACT,IAAK,IAAIzW,EAAI,EAAGwrC,EAAMz1B,EAAEhW,OAAQC,EAAIwrC,EAAKxrC,IACvC+V,EAAE/V,IAAMyW,OAEV,IAAK,IAAIzW,EAAI,EAAGwrC,EAAMz1B,EAAEhW,OAAQC,EAAIwrC,EAAKxrC,IACvC+V,EAAE/V,IAAMyW,EAAEzW,IAAM,EAEpB,OAAO+V,CACT,CACAvU,gBAAgBuU,EAAGU,GACjB,GAAgB,iBAALA,EACT,IAAK,IAAIzW,EAAI,EAAGwrC,EAAMz1B,EAAEhW,OAAQC,EAAIwrC,EAAKxrC,IACvC+V,EAAE/V,IAAMyW,MACL,CACL,GAAIV,EAAEhW,QAAU0W,EAAE1W,OAChB,MAAM,IAAI+B,MAAM,wEAAwEiU,EAAE/X,4BAA4ByY,EAAEzY,cAE1H,IAAK,IAAIgC,EAAI,EAAGwrC,EAAMz1B,EAAEhW,OAAQC,EAAIwrC,EAAKxrC,IACvC+V,EAAE/V,IAAMyW,EAAEzW,EACd,CACA,OAAO+V,CACT,CACAvU,cAAcuU,EAAGU,GACf,GAAgB,iBAALA,EAAe,CACxB,GAAU,IAANA,EACF,MAAM,IAAI3U,MAAM,yBAClB,IAAK,IAAI9B,EAAI,EAAGwrC,EAAMz1B,EAAEhW,OAAQC,EAAIwrC,EAAKxrC,IACvC+V,EAAE/V,IAAMyW,CACZ,KAAO,CACL,GAAIV,EAAEhW,QAAU0W,EAAE1W,OAChB,MAAM,IAAI+B,MAAM,sEAAsEiU,EAAE/X,wBAAwByY,EAAEzY,cAEpH,IAAK,IAAIgC,EAAI,EAAGwrC,EAAMz1B,EAAEhW,OAAQC,EAAIwrC,EAAKxrC,IACvC+V,EAAE/V,IAAMyW,EAAEzW,EACd,CACA,OAAO+V,CACT,CACAvU,WAAWuU,EAAGU,GACZ,GAAIV,EAAEhW,QAAU0W,EAAE1W,OAChB,MAAM,IAAI+B,MAAM,6BAClB,IAAI1B,EAAI,EACR,IAAK,IAAIJ,EAAI,EAAGwrC,EAAMz1B,EAAEhW,OAAQC,EAAIwrC,EAAKxrC,IACvCI,GAAK2V,EAAE/V,GAAKyW,EAAEzW,GAEhB,OAAOI,CACT,CACAoB,eAAeuU,EAAGU,GAChB,OAAOV,EAAE,GAAKU,EAAE,GAAKV,EAAE,GAAKU,EAAE,EAChC,CACAjV,aAAauU,EAAGU,GACd,OAAO,IAAIg1B,EAAG11B,EAAE,GAAKU,EAAE,GAAKV,EAAE,GAAKU,EAAE,GAAIV,EAAE,GAAKU,EAAE,GAAKV,EAAE,GAAKU,EAAE,GAAIV,EAAE,GAAKU,EAAE,GAAKV,EAAE,GAAKU,EAAE,GAC7F,CACAjV,iBAAiBuU,GACf,OAAOoJ,KAAKusB,KAAKH,EAAIvnB,IAAIjO,EAAGA,GAC9B,CACAvU,YAAYuU,EAAG41B,GACb,IAAI5oB,OAAkB,IAAd4oB,EAAuBJ,EAAII,UAAU51B,GAAK41B,EAClD,OAAU,IAAN5oB,EACK0oB,EAAGG,KAAK71B,EAAEhW,QACZwrC,EAAIM,OAAO91B,EAAGgN,EACvB,CACAvhB,WAAWuU,GACT,OAAOw1B,EAAIn8B,IAAI2G,EAAGoJ,KAAKyP,IACzB,CACAptB,aAAauU,GACX,OAAOw1B,EAAIn8B,IAAI2G,EAAGoJ,KAAK0P,MACzB,CACArtB,YAAYuU,GACV,OAAOw1B,EAAIn8B,IAAI2G,EAAGoJ,KAAK2sB,KACzB,CACAtqC,aAAauU,GACX,OAAOw1B,EAAIn8B,IAAI2G,EAAGoJ,KAAKQ,MACzB,CACAne,WAAWuU,GACT,IAAIgN,EAAInC,OAAOmrB,UACXvsC,EAAQ,EACZ,IAAK,IAAIQ,EAAI,EAAGwrC,EAAMz1B,EAAEhW,OAAQC,EAAIwrC,EAAKxrC,IACvC+iB,EAAI5D,KAAKF,IAAI8D,EAAGhN,EAAE/V,IACd+iB,IAAMhN,EAAE/V,KACVR,EAAQQ,GAEZ,MAAO,CAAEhB,MAAO+jB,E,MAAGvjB,EACrB,CACAgC,WAAWuU,GACT,IAAIgN,EAAInC,OAAOorB,UACXxsC,EAAQ,EACZ,IAAK,IAAIQ,EAAI,EAAGwrC,EAAMz1B,EAAEhW,OAAQC,EAAIwrC,EAAKxrC,IACvC+iB,EAAI5D,KAAKD,IAAI6D,EAAGhN,EAAE/V,IACd+iB,IAAMhN,EAAE/V,KACVR,EAAQQ,GAEZ,MAAO,CAAEhB,MAAO+jB,E,MAAGvjB,EACrB,CACAgC,WAAWuU,GACT,IAAI6F,EAAI,EACR,IAAK,IAAI5b,EAAI,EAAGwrC,EAAMz1B,EAAEhW,OAAQC,EAAIwrC,EAAKxrC,IACvC4b,GAAK7F,EAAE/V,GACT,OAAO4b,CACT,CACApa,WAAWuU,EAAGk2B,GACZ,IAAK,IAAIjsC,EAAI,EAAGwrC,EAAMz1B,EAAEhW,OAAQC,EAAIwrC,EAAKxrC,IACvC+V,EAAE/V,GAAKisC,EAAGl2B,EAAE/V,GAAIA,EAAG+V,GAErB,OAAOA,CACT,GAEEm2B,EAAM,MACR7uC,cACEM,KAAKwuC,OACP,CACIntC,YACF,OAAOrB,KAAKyuC,GACd,CACIC,gBACF,OAAO,IAAIC,UAAUJ,EAAIK,YAAY5uC,KAAKyuC,KAC5C,CACAD,QACExuC,KAAKyuC,IAAMF,EAAIM,cAAc,EAAG,EAClC,CACAC,QAAQC,EAAKC,EAAK,CAAC,EAAG,IACpB,MAAM5pB,EAAImpB,EAAIU,gBAAgBF,EAAI,IAAM,EAAGA,EAAI,IAAM,EAAGC,GAExD,OADAhvC,KAAKyuC,IAAMF,EAAIW,SAASlvC,KAAKyuC,IAAKrpB,GAC3BplB,IACT,CACAmvC,SAASC,EAAKJ,EAAK,CAAC,EAAG,IACrB,MAAM5pB,EAAImpB,EAAIc,iBAAiB7tB,KAAK8tB,IAAIF,GAAM5tB,KAAK+tB,IAAIH,GAAMJ,GAE7D,OADAhvC,KAAKyuC,IAAMF,EAAIW,SAASlvC,KAAKyuC,IAAKrpB,GAC3BplB,IACT,CACAwvC,YAAYT,GACV,MAAM3pB,EAAImpB,EAAIkB,kBAAkBV,EAAI,IAAM,EAAGA,EAAI,IAAM,GAEvD,OADA/uC,KAAKyuC,IAAMF,EAAIW,SAASlvC,KAAKyuC,IAAKrpB,GAC3BplB,IACT,CACA0vC,QAAQX,EAAKC,EAAK,CAAC,EAAG,IACpB,MAAM5pB,EAAImpB,EAAIoB,gBAAgBnuB,KAAKouB,IAAIb,EAAI,IAAM,GAAIvtB,KAAKouB,IAAIb,EAAI,IAAM,GAAIC,GAE5E,OADAhvC,KAAKyuC,IAAMF,EAAIW,SAASlvC,KAAKyuC,IAAKrpB,GAC3BplB,IACT,CACA6D,WAAWuU,EAAGU,GACZ,GAAgB,iBAALA,EAAe,CACxB,GAAIV,EAAE,GAAGhW,QAAU0W,EAAE,GAAG1W,OACtB,MAAM,IAAI+B,MAAM,6DAClB,GAAIiU,EAAEhW,QAAU0W,EAAE1W,OAChB,MAAM,IAAI+B,MAAM,4DACpB,CACA,IAAImuB,EAAI,IAAIud,EACRC,EAAoB,iBAALh3B,EACnB,IAAK,IAAIzW,EAAI,EAAGwrC,EAAMz1B,EAAEhW,OAAQC,EAAIwrC,EAAKxrC,IACvCiwB,EAAExsB,KAAKsS,EAAE/V,GAAG0tC,KAAKD,EAAQh3B,EAAIA,EAAEzW,KAEjC,OAAOiwB,CACT,CACAzuB,gBAAgBuU,EAAGU,EAAGk3B,GAAa,EAAOC,GAAc,GACtD,IAAI3d,EAAI,IAAIud,EACZ,GAAgB,iBAAL/2B,EACT,GAAIm3B,EAAa,CACf,GAAI73B,EAAEhW,QAAU0W,EAAE1W,OAChB,MAAM,IAAI+B,MAAM,gFAClB,IAAK,IAAI+rC,EAAK,EAAGC,EAAO/3B,EAAEhW,OAAQ8tC,EAAKC,EAAMD,IAC3C5d,EAAExsB,KAAKsS,EAAE83B,GAAIE,UAAUt3B,EAAEo3B,IAE7B,KAAO,CACL,IAAKF,GAAc53B,EAAE,GAAGhW,QAAU0W,EAAE1W,OAClC,MAAM,IAAI+B,MAAM,+EAClB,GAAI6rC,GAAc53B,EAAE,GAAGhW,QAAU0W,EAAE,GAAG1W,OACpC,MAAM,IAAI+B,MAAM,sFACb6rC,IACHl3B,EAAIy1B,EAAI8B,UAAUv3B,IACpB,IAAK,IAAIo3B,EAAK,EAAGC,EAAO/3B,EAAEhW,OAAQ8tC,EAAKC,EAAMD,IAAM,CACjD,IAAI59B,EAAIw7B,EAAGG,KAAKn1B,EAAE1W,OAAQ,GAC1B,IAAK,IAAIkuC,EAAK,EAAGC,EAAOz3B,EAAE1W,OAAQkuC,EAAKC,EAAMD,IAC3Ch+B,EAAEg+B,GAAM1C,EAAIvnB,IAAIjO,EAAE83B,GAAKp3B,EAAEw3B,IAE3Bhe,EAAExsB,KAAKwM,EACT,CACF,MAEA,IAAK,IAAI49B,EAAK,EAAGC,EAAO/3B,EAAEhW,OAAQ8tC,EAAKC,EAAMD,IAC3C5d,EAAExsB,KAAKsS,EAAE83B,GAAIE,UAAUt3B,IAG3B,OAAOwZ,CACT,CACAzuB,gBAAgByuB,EAAGzwB,EAAO2uC,GAAe,GACvC,IAAInL,EAAI,GACR,IAAK,IAAIhjC,EAAI,EAAGwrC,EAAMvb,EAAElwB,OAAQC,EAAIwrC,EAAKxrC,IAAK,CAC5C,GAAIiwB,EAAEjwB,GAAGD,OAAS,EAAIP,IAA0B,IAAjB2uC,EAC7B,KAAM,SAAS3uC,qBACjBwjC,EAAEv/B,KAAKwsB,EAAEjwB,GAAGR,IAAU2uC,EACxB,CACA,OAAO,IAAI1C,EAAGzI,EAChB,CACAxhC,WAAWyuB,EAAGke,GAAe,EAAOC,GAAa,GAC/C,IAAIj2B,EAAK,IAAIq1B,EACThC,EAAM4C,EAAane,EAAEloB,QAAO,CAACgO,EAAGU,IAAM0I,KAAKF,IAAIlJ,EAAGU,EAAE1W,SAAS,GAAKkwB,EAAE,GAAGlwB,OAC3E,IAAK,IAAIC,EAAI,EAAGA,EAAIwrC,EAAKxrC,IACvBmY,EAAG1U,KAAKyoC,EAAImC,SAASpe,EAAGjwB,EAAGmuC,IAE7B,OAAOh2B,CACT,CACA3W,iBAAiByuB,EAAGke,GAAe,EAAOC,GAAa,GACrD,OAAOlC,EAAIoC,IAAIre,EAAGke,EAAcC,EAClC,CACA5sC,mBAAmBuhB,GACjB,MAAO,CAACA,EAAE,GAAG,GAAIA,EAAE,GAAG,GAAIA,EAAE,GAAG,GAAIA,EAAE,GAAG,GAAIA,EAAE,GAAG,GAAIA,EAAE,GAAG,GAC5D,CACAvhB,mBAAmB+sC,EAAIxrB,GACrB,IAAImF,EAAIqmB,EAAG,GAAKxrB,EAAE,GAAG,GAAKwrB,EAAG,GAAKxrB,EAAE,GAAG,GAAKA,EAAE,GAAG,GAC7CsF,EAAIkmB,EAAG,GAAKxrB,EAAE,GAAG,GAAKwrB,EAAG,GAAKxrB,EAAE,GAAG,GAAKA,EAAE,GAAG,GACjD,OAAO,IAAI0oB,EAAGvjB,EAAGG,EACnB,CACA7mB,qBAAqB0mB,EAAGG,GACtB,OAAO,IAAImlB,EACT,IAAI/B,EAAGvjB,EAAG,EAAG,GACb,IAAIujB,EAAG,EAAGpjB,EAAG,GACb,IAAIojB,EAAG,EAAG,EAAG,GAEjB,CACAjqC,sBAAsBgtC,EAAMC,GAC1B,OAAO,IAAIjB,EACT,IAAI/B,EAAG+C,EAAMC,EAAM,GACnB,IAAIhD,GAAIgD,EAAMD,EAAM,GACpB,IAAI/C,EAAG,EAAG,EAAG,GAEjB,CACAjqC,qBAAqBktC,EAAMC,GACzB,OAAO,IAAInB,EACT,IAAI/B,EAAG,EAAGiD,EAAM,GAChB,IAAIjD,EAAGkD,EAAM,EAAG,GAChB,IAAIlD,EAAG,EAAG,EAAG,GAEjB,CACAjqC,yBAAyB0mB,EAAGG,GAC1B,OAAO,IAAImlB,EACT,IAAI/B,EAAG,EAAG,EAAG,GACb,IAAIA,EAAG,EAAG,EAAG,GACb,IAAIA,EAAGvjB,EAAGG,EAAG,GAEjB,CACA7mB,uBAAuBotC,EAAIC,EAAIlC,GAC7B,IAAI5pB,EAAImpB,EAAIM,cAAcoC,EAAIC,GAG9B,OAFA9rB,EAAE,GAAG,IAAM4pB,EAAG,GAAKiC,EAAKjC,EAAG,GAC3B5pB,EAAE,GAAG,IAAM4pB,EAAG,GAAKkC,EAAKlC,EAAG,GACpB5pB,CACT,CACAvhB,wBAAwBgtC,EAAMC,EAAM9B,GAClC,IAAI5pB,EAAImpB,EAAI4C,eAAeN,EAAMC,GAGjC,OAFA1rB,EAAE,GAAG,GAAK4pB,EAAG,IAAM,EAAI6B,GAAQ7B,EAAG,GAAK8B,EACvC1rB,EAAE,GAAG,GAAK4pB,EAAG,IAAM,EAAI6B,GAAQ7B,EAAG,GAAK8B,EAChC1rB,CACT,CACAvhB,uBAAuBktC,EAAMC,EAAMhC,GACjC,IAAI5pB,EAAImpB,EAAI6C,cAAcL,EAAMC,GAGhC,OAFA5rB,EAAE,GAAG,IAAM4pB,EAAG,GAAKgC,EACnB5rB,EAAE,GAAG,IAAM4pB,EAAG,GAAK+B,EACZ3rB,CACT,CACAvhB,yBAAyBwtC,EAAIC,GAC3B,IAAIC,EAAYC,EAAKD,UAAUF,EAAIC,GACnC,GAAiB,MAAbC,EACF,MAAO,CACL,IAAIzD,EAAG,EAAC,EAAI,EAAG,IACf,IAAIA,EAAG,CAAC,EAAG,EAAG,IACd,IAAIA,EAAG,CAACuD,EAAG,GAAKC,EAAG,GAAI,EAAG,KAEvB,CACL,IAAIG,EAAKF,EAAUE,GACfC,EAAoC,EAA7BlwB,KAAKmwB,KAAKJ,EAAUK,OAC3Bf,EAAOrvB,KAAK8tB,IAAIoC,GAChBZ,EAAOtvB,KAAK+tB,IAAImC,GACpB,MAAO,CACL,IAAI5D,EAAG,CAAC+C,EAAMC,EAAM,IACpB,IAAIhD,EAAG,CAACgD,GAAOD,EAAM,IACrB,IAAI/C,EAAG,EAAE2D,EAAKX,EAAMW,EAAKA,EAAKZ,EAAM,IAExC,CACF,GAIEgB,EAAe,CAACtvC,EAAKuvC,EAAQ,aAAeC,EAAKvlC,KAAK,+BAAiCslC,EAAOvvC,GAE9FivC,EAAO,MACT3tC,iBAAiBmuC,EAAQva,EAAOuW,GAC9B,IAAI1b,EAAI,IAAIud,EAAM,IAAI/B,EAAGkE,GAAS,IAAIlE,EAAGkE,IAEzC,OADA1f,EAAE,GAAG2f,QAAQxa,EAAOuW,GAAW,GACxB1b,CACT,CACAzuB,aAAawtC,EAAIC,GACf,OAAOA,EAAG,GAAKD,EAAG,IAAO,OAAI,GAAUC,EAAG,GAAKD,EAAG,KAAOC,EAAG,GAAKD,EAAG,GACtE,CACAxtC,iBAAiBwtC,EAAIC,GACnB,GAAIA,EAAG,GAAKD,EAAG,IAAO,EAEf,CACL,IAAIjsB,GAAKksB,EAAG,GAAKD,EAAG,KAAOC,EAAG,GAAKD,EAAG,IAClC1yB,EAAI0yB,EAAG,GAAKjsB,EAAIisB,EAAG,GACvB,MAAO,CAAEO,MAAOxsB,EAAGqsB,GAAI9yB,EAAGuzB,GAAU,IAAN9sB,OAAU,GAAUzG,EAAIyG,EACxD,CACF,CACAvhB,kBAAkB6N,EAAMk/B,GACtB,IAAIuB,EAAQJ,EAAKK,YAAY1gC,GAC7B,OAAQygC,EAAM,GAAG,GAAKA,EAAM,GAAG,KAAOvB,EAAG,GAAKuB,EAAM,GAAG,KAAOvB,EAAG,GAAKuB,EAAM,GAAG,KAAOA,EAAM,GAAG,GAAKA,EAAM,GAAG,GAC/G,CACAtuC,iBAAiBwtC,EAAIC,EAAIe,EAAIC,EAAY,KACvC,IAAIl6B,EAAI,IAAI01B,EAAG,EAAG,EAAG,GAAGvZ,GAAG8c,GAAIkB,UAAUjB,GACrCx4B,EAAI,IAAIg1B,EAAG,EAAG,EAAG,GAAGvZ,GAAG8c,GAAIkB,UAAUF,GACzC,OAAOj6B,EAAEo6B,OAAO15B,GAAGo1B,OAAO,KAAKhlC,OAAO,IAAI4kC,EAAG,EAAG,EAAG,GAAIwE,EACzD,CACAzuC,iBAAiB6N,GACf,IAAIygC,EAAQJ,EAAKK,YAAY1gC,GAC7B,OAAOygC,EAAM/vC,QAAU,EAAI+vC,EAAM,GAAGI,UAAUJ,EAAM,IAAInE,YAAc,CACxE,CACAnqC,mBAAmB6N,GACjB,IAAIygC,EAAQJ,EAAKK,YAAY1gC,GAC7B,OAAOygC,EAAM/vC,QAAU,EAAI+vC,EAAM,GAAGI,UAAUJ,EAAM,IAAIM,cAAgB,CAC1E,CACA5uC,2BAA2B6N,EAAMk/B,EAAI8B,GAAe,GAClD,IAAIP,EAAQJ,EAAKK,YAAY1gC,GAC7B,GAAIygC,EAAM,GAAGjpC,OAAOipC,EAAM,IACxB,OACF,IAAI/5B,EAAI+5B,EAAM,GAAGI,UAAUJ,EAAM,IAC7Br5B,EAAIq5B,EAAM,GAAGI,UAAU3B,GACvB+B,EAAO75B,EAAEy5B,UAAUn6B,EAAEw6B,SAAS95B,IAClC,OAAO45B,EAAeC,EAAOA,EAAK5C,KAAKa,EACzC,CACA/sC,sBAAsB6N,EAAMk/B,GAC1B,IAAIuB,EAAQJ,EAAKK,YAAY1gC,GACzBmhC,EAAmBrB,EAAKsB,oBAAoBX,EAAOvB,GAAI,GAC3D,OAAIiC,EACKA,EAAiB7E,YAEjBmE,EAAM,GAAGI,UAAU3B,GAAI5C,WAElC,CACAnqC,sBAAsBkvC,EAAIC,GACxB,IAAIC,EAAMlB,EAAKK,YAAYW,GACvBG,EAAMnB,EAAKK,YAAYY,GACvB56B,EAAIo5B,EAAKD,UAAU0B,EAAI,GAAIA,EAAI,IAC/Bn6B,EAAI04B,EAAKD,UAAU2B,EAAI,GAAIA,EAAI,IAC/BC,EAAKF,EAAI,GACTG,EAAKF,EAAI,GACb,GAAS,MAAL96B,EAAa,CACf,GAAS,MAALU,EACF,OACF,IAAIu6B,GAAMv6B,EAAE84B,OAASwB,EAAG,GAAKD,EAAG,IAAMC,EAAG,GACzC,OAAO,IAAItF,EAAGqF,EAAG,GAAIE,EACvB,CACE,GAAS,MAALv6B,EAAa,CACf,IAAIu6B,GAAMj7B,EAAEw5B,OAASuB,EAAG,GAAKC,EAAG,IAAMD,EAAG,GACzC,OAAO,IAAIrF,EAAGsF,EAAG,GAAIC,EACvB,CAAO,GAAIv6B,EAAE84B,OAASx5B,EAAEw5B,MAAO,CAC7B,IAAItN,GAAMlsB,EAAEw5B,MAAQuB,EAAG,GAAKr6B,EAAE84B,MAAQwB,EAAG,GAAKA,EAAG,GAAKD,EAAG,KAAO/6B,EAAEw5B,MAAQ94B,EAAE84B,OACxErN,EAAKnsB,EAAEw5B,OAAStN,EAAK6O,EAAG,IAAMA,EAAG,GACrC,OAAO,IAAIrF,EAAGxJ,EAAIC,EACpB,CACE,OAAInsB,EAAEq5B,IAAM34B,EAAE24B,GACL,IAAI3D,EAAGqF,EAAG,GAAIA,EAAG,SAExB,CAIR,CACAtvC,uBAAuBkvC,EAAIC,GACzB,IAAIC,EAAMlB,EAAKK,YAAYW,GACvBG,EAAMnB,EAAKK,YAAYY,GACvBpC,EAAKY,EAAK8B,eAAeL,EAAKC,GAClC,OAAOtC,GAAM2C,EAAKC,YAAY5C,EAAIqC,EAAI,GAAIA,EAAI,KAAOM,EAAKC,YAAY5C,EAAIsC,EAAI,GAAIA,EAAI,IAAMtC,OAAK,CACnG,CACA/sC,8BAA8B6N,EAAM+hC,GAClC,IAAItB,EAAQJ,EAAKK,YAAY1gC,GACzBgiC,EAAO3B,EAAKK,YAAYqB,GACxB7C,EAAKY,EAAK8B,eAAenB,EAAOuB,GACpC,OAAO9C,GAAM2C,EAAKC,YAAY5C,EAAIuB,EAAM,GAAIA,EAAM,IAAMvB,OAAK,CAC/D,CACA/sC,0BAA0B8vC,EAAWC,EAAMC,GAAc,GACvD,IAAIC,EAAa/B,EAAKK,YAAYuB,GAC9BI,EAAQhC,EAAKK,YAAYwB,GACzBtF,EAAKuF,EAAcrC,EAAKwC,uBAAyBxC,EAAKyC,gBACtDC,EAAM,IAAIrE,EACd,IAAK,IAAIxtC,EAAI,EAAGwrC,EAAMkG,EAAM3xC,OAAQC,EAAIwrC,EAAKxrC,IAAK,CAChD,IAAI8xC,EAAO9xC,IAAMwrC,EAAM,EAAI,EAAIxrC,EAAI,EAC/BI,EAAI6rC,EAAG,CAACyF,EAAM1xC,GAAI0xC,EAAMI,IAAQL,GAChCrxC,GACFyxC,EAAIpuC,KAAKrD,EACb,CACA,OAAOyxC,EAAI9xC,OAAS,EAAI8xC,OAAM,CAChC,CACArwC,wBAAwBuwC,EAAQC,EAAQC,GAAQ,GAC9C,IAAIC,EAAQ,IAAI1E,EACZvB,EAAKgG,EAAQ9C,EAAKwC,uBAAyBxC,EAAKyC,gBACpD,IAAK,IAAIO,KAAMJ,EACb,IAAK,IAAIK,KAAMJ,EAAQ,CACrB,IAAIK,EAAMpG,EAAGkG,EAAIC,GACbC,GACFH,EAAMzuC,KAAK4uC,EACf,CAEF,OAAOH,CACT,CACA1wC,8BAA8B4vC,EAAKkB,GACjC,IAAIjB,EAAO3B,EAAKK,YAAYqB,GACxBtkC,EAAIqiC,EAAKD,UAAU,IAAIzD,EAAG4F,EAAK,IAAIkB,SAASD,GAAS,IAAI7G,EAAG4F,EAAK,IAAIkB,SAASD,IAC9EriB,EAAI,IAAIud,EAKZ,OAJI1gC,GAAKA,EAAE+iC,IACT5f,EAAExsB,KAAK,IAAIgoC,EAAG6G,EAAO,GAAKxlC,EAAE+iC,GAAIyC,EAAO,KACrCxlC,GAAKA,EAAEsiC,IACTnf,EAAExsB,KAAK,IAAIgoC,EAAG6G,EAAO,GAAIA,EAAO,GAAKxlC,EAAEsiC,KAClCnf,CACT,CACAzuB,+BAA+B6N,EAAMijC,GACnC,IAAIxC,EAAQJ,EAAKK,YAAY1gC,GACzB4gB,EAAIkf,EAAKqD,uBAAuB1C,EAAOwC,GACvCG,EAAK,IAAIjF,EACb,IAAK,IAAIxtC,EAAI,EAAGwrC,EAAMvb,EAAElwB,OAAQC,EAAIwrC,EAAKxrC,IACnCkxC,EAAKC,YAAYlhB,EAAEjwB,GAAI8vC,EAAM,GAAIA,EAAM,KACzC2C,EAAGhvC,KAAKwsB,EAAEjwB,IAEd,OAAOyyC,CACT,CACAjxC,uBAAuB6N,EAAM2Y,GAC3B,IAAI8nB,EAAQJ,EAAKK,YAAY1gC,GACzBqjC,EAAQhD,EAAKK,YAAY/nB,GACzB2qB,EAAMzB,EAAK0B,YAAYpF,EAAMqF,YAAY/C,IAC7C,OAAKgD,EAAUC,mBAAmBJ,EAAKD,GAEhCvD,EAAK6D,iBAAiB,CAAClD,GAAQgD,EAAUG,MAAMP,IAD7C,IAAIlF,CAEf,CACAhsC,iBAAiB6N,EAAM6V,GACrB,IAAI4qB,EAAQJ,EAAKK,YAAY1gC,GACzBwiC,EAAM,IAAIrE,EACd,IAAK,IAAIxtC,EAAI,EAAGA,GAAKklB,EAAKllB,IACxB6xC,EAAIpuC,KAAKytC,EAAKgC,YAAYpD,EAAM,GAAIA,EAAM,GAAI9vC,GAAKklB,EAAM,KAE3D,OAAO2sB,CACT,CACArwC,YAAY6N,EAAM8jC,EAAM3zC,EAAQ,EAAG4zC,GAAe,GAChD,IAAItD,EAAQJ,EAAKK,YAAY1gC,GAEzBgkC,EAAKvD,EADW,IAAVtwC,EAAc,EAAI,GACR0wC,UAAUJ,EAAMtwC,IACpC,GAAc,IAAV6zC,EAAG,IAAwB,IAAZF,EAAK,GACtB,OAAOrD,EAAMtwC,GACf,GAAI4zC,EAAc,CAChB,IAAIhzC,EAAIizC,EAAG3d,OAAOmX,SAASsG,EAAK,IAChC,OAAOrD,EAAMtwC,GAAOkuC,KAAKttC,EAC3B,CAAO,CACL,IAAI4nB,EAAO8qB,EAAUQ,WAAWxD,EAAMtwC,GAAQ2zC,GAC1CF,EAAQH,EAAUG,MAAMjrB,GACxBurB,EAAU,EAMd,OAJEA,EADEp0B,KAAKyP,IAAIykB,EAAG,GAAKA,EAAG,IAAMl0B,KAAKyP,IAAIukB,EAAK,GAAKA,EAAK,IAC1CE,EAAG,GAAK,EAAI,EAAI,EAEhBA,EAAG,GAAK,EAAI,EAAI,EAErBlE,EAAK8B,eAAegC,EAAMM,GAAUzD,EAC7C,CACF,CACAtuC,cAAc6N,EAAM8jC,EAAMK,EAAU,QAASC,GAAS,GACpD,IAAI3D,EAAQJ,EAAKK,YAAY1gC,GAEzBvC,EAAI2mC,EAAS,EAAI,EACjB/d,EAAOoa,EAFH2D,EAAS,EAAI,GAEDvD,UAAUJ,EAAMhjC,IACpC,GAA2B,IAAvB4oB,EAAK0a,cACP,OAAO,IAAI5C,EACb9X,EAAKA,OACL,IAAIvd,EAAK+4B,EAAKwC,cAAche,GAAMmX,SAASsG,EAAK,IAAI9tC,IAAIyqC,EAAMhjC,IAC9D,MAAe,SAAX0mC,GACFr7B,EAAG9S,IAAIqwB,EAAKqY,UAAUoF,EAAK,KACpB,IAAI3F,EAAMsC,EAAMhjC,GAAIqL,EAAG,GAAIA,EAAG,KAE9B,IAAIq1B,EAAMr1B,EAAG,GAAIA,EAAG,GAE/B,CACA3W,cAAc6N,GACZ,IAAIygC,EAAQJ,EAAKK,YAAY1gC,GAC7B,OAAO,IAAIm+B,EAAMsC,EAAM,GAAG6D,KAAK7D,EAAM,IAAKA,EAAM,GAAG8D,KAAK9D,EAAM,IAChE,GAEEgD,EAAY,MACdtxC,YAAYqyC,EAASC,EAAatiC,GAChC,OAAOshC,EAAUiB,YAAYF,EAASC,EAAatiC,EACrD,CACAhQ,mBAAmBqyC,EAASC,EAAatiC,GACvC,IAAI2hC,EAA6B,iBAAfW,EAA0B,CAACA,EAAatiC,GAAUsiC,GAAeA,EACnF,OAAO,IAAItG,EAAM,IAAI/B,EAAGoI,GAAU,IAAIpI,EAAGoI,GAASxuC,IAAI8tC,GACxD,CACA3xC,kBAAkBwyC,EAAQF,EAAatiC,GACrC,IAAIyiC,EAA6B,iBAAfH,EAA0B,CAACA,EAAc,GAAItiC,GAAUsiC,GAAe,GAAK,IAAIrI,EAAGqI,GAAajI,OAAO,GACxH,OAAO,IAAI2B,EAAM,IAAI/B,EAAGuI,GAAQzB,SAAS0B,GAAO,IAAIxI,EAAGuI,GAAQ3uC,IAAI4uC,GACrE,CACAzyC,gBAAgBqwC,EAAKqC,GAAS,GAC5B,OAAOC,EAAOC,SAASvC,EAAKqC,EAC9B,CACA1yC,gBAAgBqwC,EAAKwC,GAAU,GAC7B,IAAIC,EAAO5E,EAAKK,YAAY8B,GACxBj2B,EAAIk3B,EAAUK,KAAKmB,GACnBvxB,EAAIsxB,EAAUz4B,EAAE0D,WAAWtgB,MAAQ4c,EAAE2D,WAAWvgB,MACpD,OAAO8zC,EAAUQ,WAAWR,EAAUkB,OAAOM,GAAOvxB,EAAGA,EACzD,CACAvhB,YAAYqwC,GACV,IAAI5hC,EAAIy/B,EAAKK,YAAY8B,GACzB,OAAO5hC,EAAE,GAAG2jC,KAAK3jC,EAAE,IAAIsiC,SAAStiC,EAAE,GAAG0jC,KAAK1jC,EAAE,IAC9C,CACAzO,cAAcqwC,GACZ,IAAI5hC,EAAIy/B,EAAKK,YAAY8B,GACrB3yB,EAAMjP,EAAE,GAAG0jC,KAAK1jC,EAAE,IAClBgP,EAAMhP,EAAE,GAAG2jC,KAAK3jC,EAAE,IACtB,OAAOiP,EAAI7Z,IAAI4Z,EAAIixB,UAAUhxB,GAAK2sB,OAAO,GAC3C,CACArqC,eAAewmB,GACb,IAAI0qB,EAAQhD,EAAKK,YAAY/nB,GACzBusB,EAAK7B,EAAM,GAAGiB,KAAKjB,EAAM,IACzBzD,EAAKyD,EAAM,GAAGkB,KAAKlB,EAAM,IAC7B,OAAO,IAAIlF,EAAM+G,EAAI,IAAI9I,EAAGwD,EAAG/mB,EAAGqsB,EAAGlsB,GAAI4mB,EAAI,IAAIxD,EAAG8I,EAAGrsB,EAAG+mB,EAAG5mB,GAC/D,CACA7mB,aAAawmB,GACX,IAAKusB,EAAIvF,EAAIC,EAAIe,GAAM8C,EAAU0B,QAAQxsB,GACzC,MAAO,CACL,IAAIwlB,EAAM+G,EAAIvF,GACd,IAAIxB,EAAMwB,EAAIC,GACd,IAAIzB,EAAMyB,EAAIe,GACd,IAAIxC,EAAMwC,EAAIuE,GAElB,CACA/yC,mBAAmBizC,GACjB,IAAIC,EAAShF,EAAKK,YAAY0E,GAC1BE,EAASjF,EAAKkF,QAAQF,GAAQ,GAC9Bx1B,EAAMusB,EAAGG,KAAK,EAAGhrB,OAAOorB,WACxB/sB,EAAMwsB,EAAGG,KAAK,EAAGhrB,OAAOmrB,WAC5B,IAAK,IAAI/rC,EAAI,EAAGwrC,EAAMmJ,EAAO50C,OAAQC,EAAIwrC,EAAKxrC,IAAK,CACjD,IAAI60C,EAAI,EACR,IAAK,IAAI9xB,KAAK4xB,EAAO30C,GAGnB,GAFAkf,EAAI21B,GAAK11B,KAAKD,IAAIA,EAAI21B,GAAI9xB,EAAE8xB,IAC5B51B,EAAI41B,GAAK11B,KAAKF,IAAIA,EAAI41B,GAAI9xB,EAAE8xB,MACtBA,GAAK,EACT,KAEN,CACA,OAAO,IAAIrH,EAAMtuB,EAAKD,EACxB,CACAzd,eAAewmB,GACb,OAAO8qB,EAAU0B,QAAQxsB,EAC3B,CACAxmB,iBAAiBwmB,EAAMgsB,GACrB,IAAItB,EAAQhD,EAAKK,YAAY/nB,GACzBwsB,EAAU1B,EAAU0B,QAAQ9B,GAC5BoC,EAAoB,MAAVd,EAAmB,IAAIvI,EAAGuI,GAAUlB,EAAUkB,OAAOtB,GACnE,OAAO8B,EAAQplC,KAAKkN,GAAM,IAAIkxB,EAAMlxB,EAAGw4B,GAASlC,eAClD,CACApxC,cAAcwmB,EAAM+sB,EAAQ,GAAKC,GAAS,GACxC,IAAItC,EAAQhD,EAAKK,YAAY/nB,GACzB9I,EAAMwzB,EAAM,GAAGiB,KAAKjB,EAAM,IAC1BzzB,EAAMyzB,EAAM,GAAGkB,KAAKlB,EAAM,IAC1BuC,EAAMD,EAASE,EAAIC,KAAKj2B,EAAI,GAAID,EAAI,GAAI81B,GAASG,EAAIC,KAAKj2B,EAAI,GAAID,EAAI,GAAI81B,GAC9E,OAAOC,EAAS,CAAC,IAAIxH,EAAMtuB,EAAK,IAAIusB,EAAGxsB,EAAI,GAAIg2B,IAAO,IAAIzH,EAAM,IAAI/B,EAAGvsB,EAAI,GAAI+1B,GAAMh2B,IAAQ,CAAC,IAAIuuB,EAAMtuB,EAAK,IAAIusB,EAAGwJ,EAAKh2B,EAAI,KAAM,IAAIuuB,EAAM,IAAI/B,EAAGwJ,EAAK/1B,EAAI,IAAKD,GACpK,CACAzd,mBAAmBwmB,EAAMumB,GACvB,IAAImE,EAAQhD,EAAKK,YAAY/nB,GAC7B,OAAOkpB,EAAKC,YAAY5C,EAAImE,EAAM,GAAIA,EAAM,GAC9C,CACAlxC,0BAA0B4zC,EAAOC,EAAOC,GAAmB,GACzD,IAAIC,EAAS7F,EAAKK,YAAYqF,GAC1BI,EAAS9F,EAAKK,YAAYsF,GAK9B,OAJIC,IACFC,EAASrE,EAAK0B,YAAY2C,GAC1BC,EAAStE,EAAK0B,YAAY4C,MAExBD,EAAO,GAAG,GAAKC,EAAO,GAAG,IAAMA,EAAO,GAAG,GAAKD,EAAO,GAAG,OAExDA,EAAO,GAAG,GAAKC,EAAO,GAAG,IAAMA,EAAO,GAAG,GAAKD,EAAO,GAAG,GAG9D,CACA/zC,uBAAuB4zC,EAAOC,GAC5B,IAAIE,EAAS7F,EAAKK,YAAYqF,GAC1BI,EAAS9F,EAAKK,YAAYsF,GAC9B,OAAKvC,EAAUC,mBAAmBwC,EAAQC,GAEnCrG,EAAK6D,iBAAiBF,EAAUG,MAAMsC,GAASzC,EAAUG,MAAMuC,IAD7D,IAAIhI,CAEf,GAEE2G,EAAS,MACX3yC,gBAAgBqwC,EAAKwC,GAAU,GAC7B,IAAIC,EAAO5E,EAAKK,YAAY8B,GACxB1rB,EAAI,EACJjH,EAAMiH,EAAI2sB,EAAUK,KAAKmB,GAAM/0B,WAAWvgB,MAAQ,EACtD,GAAIq1C,EAAS,CACX,IAAIp1B,EAAM6zB,EAAUK,KAAKmB,GAAMh1B,WAAWtgB,MAAQ,EAClDmnB,EAAIhH,KAAKusB,KAAKxsB,EAAMA,EAAMD,EAAMA,EAClC,MACEkH,EAAIjH,EAEN,OAAO,IAAIsuB,EAAMsF,EAAUkB,OAAOM,GAAO,IAAI7I,EAAGtlB,EAAGA,GACrD,CACA3kB,oBAAoBqwC,EAAKwC,GAAU,GACjC,OAAIA,EACKoB,EAASC,aAAa7D,GAEtB4D,EAASE,SAAS9D,EAE7B,CACArwC,kBAAkB+sC,EAAIqH,GACpB,OAAO,IAAIpI,EAAM,IAAI/B,EAAG8C,GAAK,IAAI9C,EAAGmK,EAAQA,GAC9C,CACAp0C,mBAAmBqwC,EAAKtD,EAAI0B,EAAY,GACtC,IAAIqE,EAAO5E,EAAKK,YAAY8B,GACxBzxC,EAAIk0C,EAAK,GAAGpE,UAAU3B,GAC1B,OAAOnuC,EAAE4jB,IAAI5jB,GAAK6vC,EAAYqE,EAAK,GAAGpsB,EAAIosB,EAAK,GAAGpsB,CACpD,CACA1mB,sBAAsBq0C,EAAQzE,GAC5B,IAAIkD,EAAO5E,EAAKK,YAAY8F,GACxBxE,EAAO3B,EAAKK,YAAYqB,GACxBhxC,EAAIixC,EAAK,GAAGnB,UAAUmB,EAAK,IAC3ByE,EAAIxB,EAAK,GAAGpE,UAAUmB,EAAK,IAC3Bt7B,EAAI3V,EAAE4jB,IAAI5jB,GAGV6P,EAFI6lC,EAAE9xB,IAAI5jB,GAEF2V,EAERggC,EAAO9lC,EAAIA,GAHP6lC,EAAE9xB,IAAI8xB,GAAKxB,EAAK,GAAGpsB,EAAIosB,EAAK,GAAGpsB,GAE3BnS,EAEZ,GAAIggC,EAAO,EACT,OAAO,IAAIvI,EACN,CACL,IAAIwI,EAAW72B,KAAKusB,KAAKqK,GACrBE,GAAMhmC,EAAI+lC,EACVhH,EAAKqC,EAAK,GAAGnB,UAAU9vC,EAAE2tC,UAAUkI,IACvC,GAAa,IAATF,EACF,OAAO,IAAIvI,EAAMwB,GACnB,IAAIkH,GAAMjmC,EAAI+lC,EACV/G,EAAKoC,EAAK,GAAGnB,UAAU9vC,EAAE2tC,UAAUmI,IACvC,OAAO,IAAI1I,EAAMwB,EAAIC,EACvB,CACF,CACAztC,uBAAuBq0C,EAAQxmC,GAC7B,IAAIilC,EAAO5E,EAAKK,YAAY8F,GACxB/F,EAAQJ,EAAKK,YAAY1gC,GACzB8I,EAAKg8B,EAAOlD,eAAeqD,EAAMxE,GACjC7f,EAAI,IAAIud,EACZ,GAAIr1B,EAAGpY,OAAS,EACd,IAAK,IAAIC,EAAI,EAAGwrC,EAAMrzB,EAAGpY,OAAQC,EAAIwrC,EAAKxrC,IACpC8yC,EAAU3B,YAAYrB,EAAO33B,EAAGnY,KAClCiwB,EAAExsB,KAAK0U,EAAGnY,IAGhB,OAAOiwB,CACT,CACAzuB,yBAAyB20C,EAASC,GAChC,IAAI9B,EAAO5E,EAAKK,YAAYoG,GACxBE,EAAU3G,EAAKK,YAAYqG,GAC3BxZ,EAAKyZ,EAAQ,GAAGnG,UAAUoE,EAAK,IAC/BgC,EAAM1Z,EAAGwT,cACTmG,EAAKp3B,KAAKusB,KAAK4K,GACfE,EAAKlC,EAAK,GAAGpsB,EACbuuB,EAAKJ,EAAQ,GAAGnuB,EAChBwuB,EAAMF,EAAKA,EACXG,EAAMF,EAAKA,EACf,GAAIF,EAAKC,EAAKC,EACZ,OAAO,IAAIjJ,EACN,GAAI+I,EAAKp3B,KAAKyP,IAAI4nB,EAAKC,GAC5B,OAAO,IAAIjJ,EAAM8G,EAAK,GAAGsC,SACpB,CACL,IAAI7gC,GAAK2gC,EAAMC,EAAML,IAAQ,EAAIC,GAC7B1kC,EAAIsN,KAAKusB,KAAKgL,EAAM3gC,EAAIA,GACxB9F,EAAI2sB,EAAGmR,UAAUh4B,EAAIwgC,GAAIlxC,IAAIivC,EAAK,IACtC,OAAO,IAAI9G,EACT,IAAI/B,EAAGx7B,EAAEiY,EAAIrW,EAAI+qB,EAAGvU,EAAIkuB,EAAItmC,EAAEoY,EAAIxW,EAAI+qB,EAAG1U,EAAIquB,GAC7C,IAAI9K,EAAGx7B,EAAEiY,EAAIrW,EAAI+qB,EAAGvU,EAAIkuB,EAAItmC,EAAEoY,EAAIxW,EAAI+qB,EAAG1U,EAAIquB,GAEjD,CACF,CACA/0C,uBAAuBq0C,EAAQ7tB,GAC7B,IAAIssB,EAAO5E,EAAKK,YAAY8F,GACxBnD,EAAQhD,EAAKK,YAAY/nB,GACzBirB,EAAQH,EAAUG,MAAMP,GACxBziB,EAAI,GACR,IAAK,IAAIjwB,EAAI,EAAGwrC,EAAMyH,EAAMlzC,OAAQC,EAAIwrC,EAAKxrC,IAAK,CAChD,IAAImY,EAAKg8B,EAAOvC,gBAAgB0C,EAAMrB,EAAMjzC,IACxCmY,EAAGpY,OAAS,GACdkwB,EAAExsB,KAAK0U,EACX,CACA,OAAOu3B,EAAKkF,QAAQ3kB,EACtB,CACAzuB,cAAcq0C,EAAQ3B,GAAS,GAC7B,IAAII,EAAO5E,EAAKK,YAAY8F,GACxB1vB,EAAImuB,EAAK,GAAG,GAChB,GAAIJ,EAAQ,CACV,IAAID,EAAO90B,KAAKusB,KAAKvlB,EAAIA,GAAK,EAC9B,OAAO,IAAIqnB,EAAM8G,EAAK,GAAGpE,UAAU+D,GAAOK,EAAK,GAAG5G,KAAKuG,GACzD,CACE,OAAO,IAAIzG,EAAM8G,EAAK,GAAGpE,UAAU/pB,GAAImuB,EAAK,GAAG5G,KAAKvnB,GAExD,CACA3kB,kBAAkBq0C,EAAQ3B,GAAS,GACjC,IAAII,EAAO5E,EAAKK,YAAY8F,GAC5B,GAAI3B,EAAQ,CACV,IAAInH,GAAO5tB,KAAKoW,GAAK,EACjBshB,EAAgB,EAAV13B,KAAKoW,GAAS,EACpBtF,EAAI,IAAIud,EACZ,IAAK,IAAIxtC,EAAI,EAAGA,EAAI,EAAGA,IACrBiwB,EAAExsB,KAAK6wC,EAAK,GAAGsC,QAAQhH,QAAQ7C,EAAKuH,EAAK,GAAG,IAAI,IAChDvH,GAAO8J,EAET,OAAO5mB,CACT,CACE,OAAOwlB,EAASnC,WAAWgB,EAAK,GAAIA,EAAK,GAAG,GAEhD,GAEEmB,EAAW,MACbj0C,gBAAgBwmB,GACd,IAAI0qB,EAAQhD,EAAKK,YAAY/nB,GACzBQ,EAAMkqB,EAAM,GAAGhF,KAAKgF,EAAM,IAAI7G,OAAO,GACzCrjB,EAAIH,EAAIqqB,EAAM,GAAG,GACjB,IAAItwB,EAAOswB,EAAM,GAAGkE,QAEpB,OADAx0B,EAAK8F,EAAIwqB,EAAM,GAAG,GACX,IAAIlF,EAAMhlB,EAAKkqB,EAAM,GAAGkE,QAASx0B,EAC1C,CACA5gB,kBAAkBq0C,GAChB,OAAO1B,EAAO2C,WAAWjB,GAAQ,EACnC,CACAr0C,kBAAkB+sC,EAAI4E,GACpB,OAAOsC,EAASsB,WAAW5C,EAAOb,WAAW/E,EAAI4E,GACnD,CACA3xC,cAAcw1C,GACZ,IAAI1C,EAAO5E,EAAKK,YAAYiH,GAC5B,OAAI1C,EAAKv0C,OAAS,EACTyvC,EAAa,IAAIhC,EAAS,GAC5ByJ,EAAQC,UAAU5C,GAAM,EACjC,CACA9yC,oBAAoBw1C,EAAKx3C,GACvB,IAAI80C,EAAO5E,EAAKK,YAAYiH,GAC5B,OAAI1C,EAAKv0C,OAAS,EACTyvC,EAAa,IAAIhC,EAAS,GACrB,IAAVhuC,EACKguC,EAAMqF,YAAY,CAACyB,EAAK,GAAIA,EAAK,KACrB,IAAV90C,EACFguC,EAAMqF,YAAY,CAACyB,EAAK,GAAIA,EAAK,KAEjC9G,EAAMqF,YAAY,CAACyB,EAAK,GAAIA,EAAK,IAE5C,CACA9yC,gBAAgBw1C,EAAKx3C,GACnB,IAAI80C,EAAO5E,EAAKK,YAAYiH,GACxBG,EAAM1B,EAAS2B,aAAa9C,EAAM90C,GACtC,OAAI23C,EAAIp3C,OAAS,EACR,IAAIytC,EAAM8G,EAAK90C,GAAQ2vC,EAAKsB,oBAAoB0G,EAAK7C,EAAK90C,KAE1D,IAAIguC,CAEf,CACAhsC,mBAAmBw1C,GACjB,IAAI1C,EAAO5E,EAAKK,YAAYiH,GAC5B,GAAI1C,EAAKv0C,OAAS,EAChB,OAAOyvC,OAAa,EAAQ,GAC9B,IAAIz5B,EAAI0/B,EAAS4B,SAAS/C,EAAM,GAC5B79B,EAAIg/B,EAAS4B,SAAS/C,EAAM,GAChC,OAAOnF,EAAK8B,eAAel7B,EAAGU,EAChC,CACAjV,gBAAgBw1C,GACd,IAAI1C,EAAO5E,EAAKK,YAAYiH,GAC5B,GAAI1C,EAAKv0C,OAAS,EAChB,OAAOyvC,OAAa,EAAQ,GAC9B,IAAIz5B,EAAIkhC,EAAQK,SAAShD,EAAM,GAAGjvC,IAAIivC,EAAK,IACvC79B,EAAIwgC,EAAQK,SAAShD,EAAM,GAAGjvC,IAAIivC,EAAK,IAC3C,OAAOnF,EAAK8B,eAAe,IAAIzD,EAAM8G,EAAK,GAAIv+B,GAAI,IAAIy3B,EAAM8G,EAAK,GAAI79B,GACvE,CACAjV,gBAAgBw1C,EAAKhD,GACnB,IAAIM,EAAO5E,EAAKK,YAAYiH,GACxB16B,EAAI03B,GAAkByB,EAAS8B,SAASjD,GAGxCnuB,EAAI,EAFG8wB,EAAQO,KAAKlD,GACZ2C,EAAQQ,UAAUnD,GAAM,GACXoD,MACzB,OAAOvD,EAAOb,WAAWh3B,EAAG6J,EAC9B,CACA3kB,oBAAoBw1C,GAClB,IAAI1C,EAAO5E,EAAKK,YAAYiH,GACxBW,EAAKlC,EAASmC,OAAOtD,GACrBv+B,EAAI,CAAC4hC,EAAG,GAAIzG,EAAKwC,cAAcY,EAAK,GAAGpE,UAAUyH,EAAG,KAAK3I,GAAGtB,KAAKiK,EAAG,KACpElhC,EAAI,CAACkhC,EAAG,GAAIzG,EAAKwC,cAAcY,EAAK,GAAGpE,UAAUyH,EAAG,KAAK3I,GAAGtB,KAAKiK,EAAG,KACxE,OAAOxI,EAAK8B,eAAel7B,EAAGU,EAChC,CACAjV,oBAAoBw1C,EAAKhD,GACvB,IAAIM,EAAO5E,EAAKK,YAAYiH,GACxB16B,EAAI03B,GAAkByB,EAASoC,aAAavD,GAC5CnuB,EAAImuB,EAAK,GAAGpE,UAAU5zB,GAAGqvB,YAC7B,OAAOwI,EAAOb,WAAWh3B,EAAG6J,EAC9B,GAEE8wB,EAAU,MACZz1C,gBAAgBqwC,GACd,OAAOX,EAAK4G,SAASjG,EACvB,CACArwC,iBAAiBwyC,EAAQF,EAAatiC,GACpC,OAAOshC,EAAU0B,QAAQ1B,EAAUQ,WAAWU,EAAQF,EAAatiC,GACrE,CACAhQ,kBAAkBwyC,EAAQ4B,EAAQ3C,GAChC,IAAIhjB,EAAI,IAAIud,EACZ,IAAK,IAAIxtC,EAAI,EAAGA,EAAIizC,EAAOjzC,IAAK,CAC9B,IAAI+sC,EAAgB,EAAV5tB,KAAKoW,GAASv1B,EAAIizC,EAC5BhjB,EAAExsB,KAAK,IAAIgoC,EAAGtsB,KAAK8tB,IAAIF,GAAO6I,EAAQz2B,KAAK+tB,IAAIH,GAAO6I,GAAQvwC,IAAI2uC,GACpE,CACA,OAAO/jB,CACT,CACAzuB,cAAcqwC,EAAKryC,GACjB,IAAI80C,EAAO5E,EAAKK,YAAY8B,GAC5B,GAAIryC,EAAQ,GAAKA,GAAS80C,EAAKv0C,OAC7B,MAAM,IAAI+B,MAAM,oCAClB,OAAO,IAAI0rC,EAAM8G,EAAK90C,GAAQA,IAAU80C,EAAKv0C,OAAS,EAAIu0C,EAAK,GAAKA,EAAK90C,EAAQ,GACnF,CACAgC,aAAa+vC,EAAMwG,GAAY,GAC7B,IAAIzD,EAAO5E,EAAKK,YAAYwB,GAC5B,GAAI+C,EAAKv0C,OAAS,EAChB,OAAOyvC,EAAa,IAAIhC,EAAS,GACnC,IAAI9c,EAAKgf,EAAKjyC,MAAM62C,EAAM,EAAG,GAG7B,OAFIyD,GACFrnB,EAAGjtB,KAAK,IAAI+pC,EAAM8G,EAAKA,EAAKv0C,OAAS,GAAIu0C,EAAK,KACzC5jB,EAAGthB,KAAK6gB,GAAMA,GACvB,CACAzuB,iBAAiB+vC,EAAMwG,GAAY,EAAOjrC,EAAI,IAG5C,OAFYmqC,EAAQhS,MAAMsM,EAAMwG,GACf3oC,KAAKwM,GAAMs1B,EAAKgC,YAAYt3B,EAAE,GAAIA,EAAE,GAAI9O,IAE3D,CACAtL,qBAAqB+vC,EAAM/xC,EAAOu4C,GAAY,GAC5C,IAAIzD,EAAO5E,EAAKK,YAAYwB,GAC5B,GAAI+C,EAAKv0C,OAAS,EAChB,OAAOyvC,EAAa,IAAIhC,EAAS,GACnC,GAAIhuC,EAAQ,GAAKA,GAAS80C,EAAKv0C,OAC7B,MApiBiB,EAACG,EAAKuvC,EAAQ,KAAOC,EAAKvlC,KAAK,SAASslC,6BAAkCvvC,GAoiBpF83C,CAAiB,IAAIxK,EAAShuC,GACvC,IAAIy4C,EAAK,GACL71B,EAAO5iB,EAAQ,EACfu4C,GAAa31B,EAAO,IACtBA,EAAOkyB,EAAKv0C,OAAS,GACnBqiB,GAAQ,GACV61B,EAAGx0C,KAAK,IAAI+pC,EAAM8G,EAAK90C,GAAQ80C,EAAKlyB,KACtC,IAAIC,EAAQ7iB,EAAQ,EAKpB,OAJIu4C,GAAa11B,EAAQiyB,EAAKv0C,OAAS,IACrCsiB,EAAQ,GACNA,GAASiyB,EAAKv0C,OAAS,GACzBk4C,EAAGx0C,KAAK,IAAI+pC,EAAM8G,EAAK90C,GAAQ80C,EAAKjyB,KAC/B41B,CACT,CACAz2C,gBAAgB+vC,EAAM/xC,GACpB,IAAIyzC,EAAQgE,EAAQiB,cAAc3G,EAAM/xC,GAAO,GAC/C,GAAIyzC,EAAMlzC,QAAU,EAAG,CACrB,IAAIgW,EAAIk9B,EAAM,GAAG,GAAG/C,UAAU+C,EAAM,GAAG,IAAIvd,OACvCjf,EAAIw8B,EAAM,GAAG,GAAG/C,UAAU+C,EAAM,GAAG,IAAIvd,OAC3C,OAAO3f,EAAE1Q,IAAIoR,GAAGo1B,OAAO,EACzB,CAGF,CACArqC,iBAAiB+vC,EAAMwG,GAAY,GACjC,IAAI9S,EAAQgS,EAAQhS,MAAMsM,EAAMwG,GAC5BI,EAAM,EACNloC,EAAIw7B,EAAGG,KAAK3G,EAAMllC,OAAQ,GAC9B,IAAK,IAAIC,EAAI,EAAGwrC,EAAMvG,EAAMllC,OAAQC,EAAIwrC,EAAKxrC,IAAK,CAChD,IAAI+iB,EAAIosB,EAAKxD,UAAU1G,EAAMjlC,IAC7Bm4C,GAAOp1B,EACP9S,EAAEjQ,GAAK+iB,CACT,CACA,MAAO,CACL20B,MAAOS,EACPC,SAAUnoC,EAEd,CACAzO,YAAYqwC,GACV,IAAIyC,EAAO5E,EAAKK,YAAY8B,GAC5B,GAAIyC,EAAKv0C,OAAS,EAChB,OAAOyvC,EAAa,IAAIhC,EAAS,GACnC,IAAI6K,EAAM,CAACtiC,EAAGU,IAAMV,EAAE,GAAKU,EAAE,GAAKV,EAAE,GAAKU,EAAE,GACvC+gC,EAAO,EACX,IAAK,IAAIx3C,EAAI,EAAGwrC,EAAM8I,EAAKv0C,OAAQC,EAAIwrC,EAAKxrC,IACtCA,EAAIs0C,EAAKv0C,OAAS,EACpBy3C,GAAQa,EAAI/D,EAAKt0C,GAAIs0C,EAAKt0C,EAAI,IAE9Bw3C,GAAQa,EAAI/D,EAAKt0C,GAAIs0C,EAAK,IAG9B,OAAOn1B,KAAKyP,IAAI4oB,EAAO,EACzB,CACAh2C,kBAAkBqwC,EAAKyG,GAAS,GAC9B,IAAIhE,EAAO5E,EAAKK,YAAY8B,GAC5B,GAAIyC,EAAKv0C,OAAS,EAChB,OAAOyvC,EAAa,IAAIhC,EAAS,GAC9B8K,IACHhE,EAAOA,EAAKn2B,QACZm2B,EAAKiE,MAAK,CAACxiC,EAAGU,IAAMV,EAAE,GAAKU,EAAE,MAE/B,IAAI2L,EAAO,CAACrM,EAAGU,EAAG6F,KACR7F,EAAE,GAAKV,EAAE,KAAOuG,EAAE,GAAKvG,EAAE,KAAOuG,EAAE,GAAKvG,EAAE,KAAOU,EAAE,GAAKV,EAAE,IAAM,EAErEyiC,EAAK,GACLC,EAAMnE,EAAKv0C,OAAS,EACpByoB,EAAMiwB,EAAM,EAChBD,EAAGC,GAAOnE,EAAK,GACfkE,EAAGhwB,GAAO8rB,EAAK,GACXlyB,EAAKkyB,EAAK,GAAIA,EAAK,GAAIA,EAAK,KAC9BkE,EAAGC,EAAM,GAAKnE,EAAK,GACnBkE,EAAGC,EAAM,GAAKnE,EAAK,KAEnBkE,EAAGC,EAAM,GAAKnE,EAAK,GACnBkE,EAAGC,EAAM,GAAKnE,EAAK,IAErB,IAAK,IAAIt0C,EAAI,EAAGwrC,EAAM8I,EAAKv0C,OAAQC,EAAIwrC,EAAKxrC,IAAK,CAC/C,IAAIuuC,EAAK+F,EAAKt0C,GACd,IAAIoiB,EAAKo2B,EAAGC,GAAMD,EAAGC,EAAM,GAAIlK,KAAOnsB,EAAKo2B,EAAGhwB,EAAM,GAAIgwB,EAAGhwB,GAAM+lB,GAAjE,CAGA,MAAQnsB,EAAKo2B,EAAGC,GAAMD,EAAGC,EAAM,GAAIlK,IACjCkK,GAAO,EAIT,IAFAA,GAAO,EACPD,EAAGC,GAAOlK,GACFnsB,EAAKo2B,EAAGhwB,EAAM,GAAIgwB,EAAGhwB,GAAM+lB,IACjC/lB,GAAO,EAETA,GAAO,EACPgwB,EAAGhwB,GAAO+lB,CAXC,CAYb,CACA,IAAImK,EAAO,IAAIlL,EACf,IAAK,IAAI37B,EAAI,EAAGA,EAAI2W,EAAMiwB,EAAK5mC,IAC7B6mC,EAAKj1C,KAAK+0C,EAAGC,EAAM5mC,IAErB,OAAO6mC,CACT,CACAl3C,eAAe+vC,EAAMoH,EAAc,GACjC,IAAIrE,EAAO5E,EAAKK,YAAYwB,GACxBthB,EAAI,GACR,IAAK,IAAIjwB,EAAI,EAAGwrC,EAAM8I,EAAKv0C,OAAQC,EAAIwrC,EAAKxrC,IACtCA,GAAK24C,GACP1oB,EAAExsB,KAAK,IAAI+pC,EAAM8G,EAAKqE,GAAcrE,EAAKt0C,KAE7C,OAAOiwB,CACT,CACAzuB,iBAAiB+vC,EAAMhD,GACrB,IAAIqK,EAAQh4B,OAAOorB,UACf6M,GAAQ,EACR74C,EAAI,EACR,IAAK,IAAIiQ,KAAKshC,EAAM,CAClB,IAAInxC,EAAI6P,EAAEigC,UAAU3B,GAAI6B,cACpBhwC,EAAIw4C,IACNA,EAAQx4C,EACRy4C,EAAQ74C,GAEVA,GACF,CACA,OAAO64C,CACT,CACAr3C,mBAAmB+vC,EAAMuH,GACvB,IAAIpH,EAAQhC,EAAKK,YAAYwB,GACzBvtB,EAAM80B,EAAS90B,IAAI0tB,EAAM,IACzBtxC,EAAI,IAAIqrC,EAAGznB,EAAKA,GACpB,IAAK,IAAI+0B,EAAI,EAAGvN,EAAMkG,EAAM3xC,OAAQg5C,EAAIvN,EAAKuN,IAC3C/0B,EAAM80B,EAAS90B,IAAI0tB,EAAMqH,IACzB34C,EAAI,IAAIqrC,EAAGtsB,KAAKD,IAAI8E,EAAK5jB,EAAE,IAAK+e,KAAKF,IAAI+E,EAAK5jB,EAAE,KAElD,OAAOA,CACT,CACAoB,oBAAoBw3C,EAAOC,EAAOH,GAChC,IAAIhI,EAAKmG,EAAQiC,YAAYF,EAAOF,GAChC/H,EAAKkG,EAAQiC,YAAYD,EAAOH,GACpC,OAAOhI,EAAG,GAAKC,EAAG,GAAKA,EAAG,GAAKD,EAAG,GAAKA,EAAG,GAAKC,EAAG,EACpD,CACAvvC,yBAAyB+vC,EAAMhD,GAC7B,IAAImD,EAAQhC,EAAKK,YAAYwB,GACzBj1B,GAAI,EACR,IAAK,IAAItc,EAAI,EAAGwrC,EAAMkG,EAAM3xC,OAAQC,EAAIwrC,EAAKxrC,IAAK,CAChD,IAAIm5C,EAAKlC,EAAQmC,OAAO1H,EAAO1xC,GAC3Bm5C,EAAG,GAAG,GAAK5K,EAAG,IAAM4K,EAAG,GAAG,GAAK5K,EAAG,IAAMA,EAAG,IAAM4K,EAAG,GAAG,GAAKA,EAAG,GAAG,KAAO5K,EAAG,GAAK4K,EAAG,GAAG,KAAOA,EAAG,GAAG,GAAKA,EAAG,GAAG,IAAMA,EAAG,GAAG,KAC7H78B,GAAKA,EAET,CACA,OAAOA,CACT,CACA9a,0BAA0B+vC,EAAMsE,GAC9B,IAAInE,EAAQhC,EAAKK,YAAYwB,GACzB8E,EAAU3G,EAAKK,YAAY8F,GAC3B5rC,EAAO,CACTovC,OAAO,EACPC,KAAM,EACNC,OAAQ,KACRC,KAAM,KACNC,OAAQ,MAENn9B,EAAI+5B,EAAQ,GACZlwB,EAAIkwB,EAAQ,GAAG,GACfqD,EAAU94B,OAAO+4B,iBACrB,IAAK,IAAI35C,EAAI,EAAGwrC,EAAMkG,EAAM3xC,OAAQC,EAAIwrC,EAAKxrC,IAAK,CAChD,IAAIw5C,EAAOvC,EAAQmC,OAAO1H,EAAO1xC,GAC7B45C,EAAO,IAAInO,EAAG+N,EAAK,GAAGnxB,EAAImxB,EAAK,GAAGnxB,EAAGmxB,EAAK,GAAGtxB,EAAIsxB,EAAK,GAAGtxB,GAAGwN,OAC5DujB,EAAQ,IAAIzL,EAAMlxB,EAAEoxB,KAAKkM,EAAK7L,UAAU5nB,IAAK7J,EAAE4zB,UAAU0J,EAAK7L,UAAU5nB,KACxEmzB,EAAOrC,EAAQ4C,aAAanI,EAAOuH,EAAOW,GAC9C,GAAIN,EAAO,EACT,OAAO,KACF,GAAIn6B,KAAKyP,IAAI0qB,GAAQI,EAAS,EACvB5G,EAAU3B,YAAYqI,EAAMrK,EAAKsB,oBAAoB+I,EAAMl9B,KAAO63B,EAAOvC,gBAAgBiE,EAAQ2D,GAAMz5C,OAAS,KAE1HkK,EAAKuvC,KAAOA,EACZvvC,EAAKsvC,OAASK,EACdF,EAAUv6B,KAAKyP,IAAI0qB,GACnBrvC,EAAKovC,MAAQr5C,EAEjB,CACF,CACA,OAAKiK,EAAKuvC,MAEAl9B,EAAE4zB,UAAU+G,EAAQa,SAASpG,IAAQ1tB,IAAI/Z,EAAKsvC,QAC9C,GACRtvC,EAAKsvC,OAAO1M,UAAS,GACvB5iC,EAAKqvC,KAAOI,EACZzvC,EAAKwvC,OAASn9B,EACPrS,GANE,IAOX,CACAzI,2BAA2Bw3C,EAAOC,GAChC,IAAIa,EAASpK,EAAKK,YAAYiJ,GAC1Be,EAASrK,EAAKK,YAAYkJ,GAC1BhvC,EAAO,CACTovC,OAAO,EACPC,KAAM,EACNC,OAAQ,IAAI9N,EACZ+N,KAAM,IAAIhM,EACViM,OAAQ,IAAIhO,GAEViO,EAAU94B,OAAO+4B,iBACrB,IAAK,IAAI35C,EAAI,EAAGg6C,EAAOF,EAAO/5C,OAASg6C,EAAOh6C,OAAQC,EAAIg6C,EAAMh6C,IAAK,CACnE,IAAIw5C,EAAOx5C,EAAI85C,EAAO/5C,OAASk3C,EAAQmC,OAAOU,EAAQ95C,GAAKi3C,EAAQmC,OAAOW,EAAQ/5C,EAAI85C,EAAO/5C,QACzF65C,EAAO,IAAInO,EAAG+N,EAAK,GAAGnxB,EAAImxB,EAAK,GAAGnxB,EAAGmxB,EAAK,GAAGtxB,EAAIsxB,EAAK,GAAGtxB,GAAGwN,OAC5D4jB,EAAOrC,EAAQ4C,aAAaC,EAAQC,EAAQH,GAChD,GAAIN,EAAO,EACT,OAAO,KACEn6B,KAAKyP,IAAI0qB,GAAQI,IAC1BzvC,EAAKuvC,KAAOA,EACZvvC,EAAKsvC,OAASK,EACdF,EAAUv6B,KAAKyP,IAAI0qB,GACnBrvC,EAAKovC,MAAQr5C,EAAI85C,EAAO/5C,OAAS,EAAI,EAEzC,CACAkK,EAAKqvC,KAAOI,EACZ,IAAIO,EAAoB,IAAfhwC,EAAKovC,MAAcU,EAASD,EACjCI,EAAoB,IAAfjwC,EAAKovC,MAAcS,EAASC,EACjCI,EAAKlD,EAAQa,SAASmC,GACtBG,EAAKnD,EAAQa,SAASoC,GAChBC,EAAGjK,UAAUkK,GAAIp2B,IAAI/Z,EAAKsvC,QAC1B,GACRtvC,EAAKsvC,OAAO1M,UAAS,GACvB,IAAIwN,EAAWz5B,OAAO+4B,iBACtB,IAAK,IAAI35C,EAAI,EAAGwrC,EAAMyO,EAAGl6C,OAAQC,EAAIwrC,EAAKxrC,IAAK,CAC7C,IAAII,EAAI6J,EAAKsvC,OAAOv1B,IAAIi2B,EAAGj6C,GAAGkwC,UAAUkK,IACpCh6C,EAAIi6C,IACNA,EAAWj6C,EACX6J,EAAKwvC,OAASQ,EAAGj6C,GAErB,CACA,OAAOiK,CACT,CACAzI,0BAA0Bw3C,EAAOC,GAC/B,IAAIa,EAASpK,EAAKK,YAAYiJ,GAC1Be,EAASrK,EAAKK,YAAYkJ,GAC1BtoB,EAAKsmB,EAAQhS,MAAM6U,GACnB7pB,EAAI,GACR,IAAK,IAAIjwB,EAAI,EAAGwrC,EAAM7a,EAAG5wB,OAAQC,EAAIwrC,EAAKxrC,IAAK,CAC7C,IAAIs6C,EAAMnL,EAAKoL,mBAAmB5pB,EAAG3wB,GAAI+5C,GAAQ,GAC7CO,GACFrqB,EAAExsB,KAAK62C,EACX,CACA,OAAO5K,EAAKkF,QAAQ3kB,GAAG,EACzB,CACAzuB,eAAeg5C,GACb,IAAIC,EAAQ,GACZ,IAAK,IAAIxqB,KAAKuqB,EACZC,EAAMh3C,KAAKytC,EAAK0B,YAAY3iB,IAE9B,IAAI0kB,EAASjF,EAAKkF,QAAQ6F,GAAO,GAEjC,OADAA,EAAM7S,QAAQsJ,EAAK0B,YAAY+B,IACxB8F,CACT,GAEEC,EAAQ,MACVl5C,gBAAgBm5C,GACd,IAAIC,EAAK,IAAIpN,EACb,IAAK,IAAIxtC,EAAI,EAAGA,GAAK26C,EAAO36C,IAAK,CAC/B,IAAI8M,EAAI9M,EAAI26C,EACZC,EAAGn3C,KAAK,IAAIgoC,EAAG3+B,EAAIA,EAAIA,EAAGA,EAAIA,EAAGA,EAAG,GACtC,CACA,OAAO8tC,CACT,CACAp5C,qBAAqBqwC,EAAKryC,EAAQ,EAAGq7C,GAAY,GAC/C,IAAIvG,EAAO5E,EAAKK,YAAY8B,GAC5B,GAAIryC,EAAQ80C,EAAKv0C,OAAS,EACxB,OAAO,IAAIytC,EACb,IAAIsN,EAAU96C,GAAMA,EAAIs0C,EAAKv0C,OAAS,EAAIC,EAAIs0C,EAAKv0C,OAAS,EACxDw0C,EAAKD,EAAK90C,GAEd,OADAA,EAAQq7C,EAAYr7C,EAAQA,EAAQ,EAC7B,IAAIguC,EACT+G,EACAD,EAAKwG,EAAOt7C,MACZ80C,EAAKwG,EAAOt7C,MACZ80C,EAAKwG,EAAOt7C,MAEhB,CACAgC,eAAeu5C,EAAO55C,GACpB,IAAI+mB,EAAI6yB,EAAMhzC,QAAO,CAACgO,EAAGuG,EAAGtc,IAAM+V,EAAIuG,EAAE4L,EAAI/mB,EAAOnB,IAAI,GACnDqoB,EAAI0yB,EAAMhzC,QAAO,CAACgO,EAAGuG,EAAGtc,IAAM+V,EAAIuG,EAAE+L,EAAIlnB,EAAOnB,IAAI,GACvD,GAAI+6C,EAAM,GAAGh7C,OAAS,EAAG,CACvB,IAAIijC,EAAI+X,EAAMhzC,QAAO,CAACgO,EAAGuG,EAAGtc,IAAM+V,EAAIuG,EAAE0mB,EAAI7hC,EAAOnB,IAAI,GACvD,OAAO,IAAIyrC,EAAGvjB,EAAGG,EAAG2a,EACtB,CACA,OAAO,IAAIyI,EAAGvjB,EAAGG,EACnB,CACA7mB,kBAAkBqwC,EAAK8I,EAAQ,IAC7B,IAAIrG,EAAO5E,EAAKK,YAAY8B,GAC5B,GAAIyC,EAAKv0C,OAAS,EAChB,OAAO,IAAIytC,EACb,IAAIr1B,EAAK,IAAIq1B,EACToN,EAAKF,EAAMM,SAASL,GACpBr+B,EAAIo+B,EAAMO,cAAc3G,EAAM,GAAG,GACrC,IAAK,IAAIt0C,EAAI,EAAGA,GAAK26C,EAAO36C,IAC1BmY,EAAG1U,KAAKi3C,EAAMQ,eAAeN,EAAG56C,GAAIsc,IAEtC,IAAIu4B,EAAI,EACR,KAAOA,EAAIP,EAAKv0C,OAAS,GAAG,CAC1B,IAAIo7C,EAAKT,EAAMO,cAAc3G,EAAMO,GACnC,GAAIsG,EAAGp7C,OAAS,EAAG,CACjB,IAAK,IAAIC,EAAI,EAAGA,GAAK26C,EAAO36C,IAC1BmY,EAAG1U,KAAKi3C,EAAMQ,eAAeN,EAAG56C,GAAIm7C,IAEtCtG,GACF,CACF,CACA,OAAO18B,CACT,CACA3W,sBAAsBie,EAAMs7B,GAC1B,IAAIh4B,EAAI,IAAIyqB,EACV,IAAI/B,GAAG,GAAM,GAAG,GAAM,GACtB,IAAIA,EAAG,KAAK,IAAM,EAAG,GACrB,IAAIA,GAAG,IAAM,EAAG,GAAK,GACrB,IAAIA,EAAG,IAAK,GAAM,EAAG,IAEvB,OAAOiP,EAAMU,QAAQL,EAAO7O,EAAIW,SAAS,CAACptB,GAAOsD,GAAG,GAAM,GAC5D,CACAvhB,gBAAgBqwC,EAAK8I,EAAQ,GAAIU,EAAU,IACzC,IAAI/G,EAAO5E,EAAKK,YAAY8B,GAC5B,GAAIyC,EAAKv0C,OAAS,EAChB,OAAO,IAAIytC,EACb,IAAIr1B,EAAK,IAAIq1B,EACToN,EAAKF,EAAMM,SAASL,GACpBr+B,EAAIo+B,EAAMO,cAAc3G,EAAM,GAAG,GACrC,IAAK,IAAIt0C,EAAI,EAAGA,GAAK26C,EAAO36C,IAC1BmY,EAAG1U,KAAKi3C,EAAMY,aAAaV,EAAG56C,GAAIsc,EAAG++B,IAEvC,IAAIxG,EAAI,EACR,KAAOA,EAAIP,EAAKv0C,OAAS,GAAG,CAC1B,IAAIo7C,EAAKT,EAAMO,cAAc3G,EAAMO,GACnC,GAAIsG,EAAGp7C,OAAS,EAAG,CACjB,IAAK,IAAIC,EAAI,EAAGA,GAAK26C,EAAO36C,IAC1BmY,EAAG1U,KAAKi3C,EAAMY,aAAaV,EAAG56C,GAAIm7C,EAAIE,IAExCxG,GACF,CACF,CACA,OAAO18B,CACT,CACA3W,oBAAoBie,EAAMs7B,EAAOM,EAAU,IACzC,IAAIt4B,EAAI,IAAIyqB,EACV,IAAI/B,GAAG,EAAI,GAAG,EAAI,GAClB,IAAIA,GAAG,EAAI,EAAG,EAAG,GACjB,IAAIA,EAAG,GAAG,EAAI,EAAG,GACjB,IAAIA,EAAG,GAAG,EAAI,EAAG,IAEf55B,EAAIq6B,EAAIW,SAAS,CAACptB,GAAOsD,GAAG,GAAM,GAAG8pB,SAASwO,GAC9C92C,EAAK,EAAIkb,EAAK,GAAK,EAAIA,EAAK,GAAK,EACjC87B,GAAK,EAAK97B,EAAK,GAAK,EAAIA,EAAK,GAC7B8uB,EAAKmM,EAAMU,QAAQL,EAAOlpC,GAK9B,OAJA08B,EAAGrmB,GAAK3jB,EAAKw2C,EAAM,GAAG7yB,EAAIqzB,EAAKR,EAAM,GAAG7yB,EACxCqmB,EAAGlmB,GAAK9jB,EAAKw2C,EAAM,GAAG1yB,EAAIkzB,EAAKR,EAAM,GAAG1yB,EACpCkmB,EAAGxuC,OAAS,IACdwuC,EAAGvL,GAAKz+B,EAAKw2C,EAAM,GAAG/X,EAAIuY,EAAKR,EAAM,GAAG/X,GACnCuL,CACT,CACA/sC,cAAcqwC,EAAK8I,EAAQ,IACzB,IAAIrG,EAAO5E,EAAKK,YAAY8B,GAC5B,GAAIyC,EAAKv0C,OAAS,EAChB,OAAO,IAAIytC,EACb,IAAIr1B,EAAK,IAAIq1B,EACToN,EAAKF,EAAMM,SAASL,GACpB9F,EAAI,EACR,KAAOA,EAAIP,EAAKv0C,OAAS,GAAG,CAC1B,IAAIuc,EAAIo+B,EAAMO,cAAc3G,EAAMO,GAClC,GAAIv4B,EAAEvc,OAAS,EAAG,CAChB,IAAK,IAAIC,EAAI,EAAGA,GAAK26C,EAAO36C,IAC1BmY,EAAG1U,KAAKi3C,EAAMc,WAAWZ,EAAG56C,GAAIsc,IAElCu4B,GAAK,CACP,CACF,CACA,OAAO18B,CACT,CACA3W,kBAAkBie,EAAMs7B,GACtB,IAAIh4B,EAAI,IAAIyqB,EACV,IAAI/B,GAAG,EAAI,GAAG,EAAI,GAClB,IAAIA,EAAG,GAAG,EAAI,EAAG,GACjB,IAAIA,GAAG,EAAI,EAAG,EAAG,GACjB,IAAIA,EAAG,EAAG,EAAG,EAAG,IAElB,OAAOiP,EAAMU,QAAQL,EAAO7O,EAAIW,SAAS,CAACptB,GAAOsD,GAAG,GAAM,GAC5D,CACAvhB,eAAeqwC,EAAK8I,EAAQ,GAAIU,EAAU,GACxC,IAAI/G,EAAO5E,EAAKK,YAAY8B,GAC5B,GAAIyC,EAAKv0C,OAAS,EAChB,OAAO,IAAIytC,EACb,IAAIr1B,EAAK,IAAIq1B,EACToN,EAAKF,EAAMM,SAASL,GACpB9F,EAAI,EACR,KAAOA,EAAIP,EAAKv0C,OAAS,GAAG,CAC1B,IAAIuc,EAAIo+B,EAAMO,cAAc3G,EAAMO,GAClC,GAAIv4B,EAAEvc,OAAS,EAAG,CAChB,GAAgB,IAAZs7C,EACF,IAAK,IAAIr7C,EAAI,EAAGA,GAAK26C,EAAO36C,IAC1BmY,EAAG1U,KAAKi3C,EAAMe,mBAAmBb,EAAG56C,GAAIsc,EAAG++B,SAG7C,IAAK,IAAIr7C,EAAI,EAAGA,GAAK26C,EAAO36C,IAC1BmY,EAAG1U,KAAKi3C,EAAMgB,YAAYd,EAAG56C,GAAIsc,IAGrCu4B,GACF,CACF,CACA,OAAO18B,CACT,CACA3W,mBAAmBie,EAAMs7B,GACvB,IAAIh4B,EAAI,IAAIyqB,EACV,IAAI/B,GAAG,mBAAsB,IAAK,GAAM,oBACxC,IAAIA,EAAG,IAAK,EAAI,EAAG,mBACnB,IAAIA,GAAG,GAAM,GAAK,GAAK,oBACvB,IAAIA,EAAG,mBAAqB,EAAG,EAAG,IAEpC,OAAOiP,EAAMU,QAAQL,EAAO7O,EAAIW,SAAS,CAACptB,GAAOsD,GAAG,GAAM,GAC5D,CACAvhB,0BAA0Bie,EAAMs7B,EAAOM,EAAU,GAC/C,IAAIt4B,EAAI,IAAIyqB,EACV,IAAI/B,GAAG,mBAAsB,IAAK,GAAM,oBACxC,IAAIA,GAAG,IAAM,EAAG,GAAG,mBACnB,IAAIA,EAAG,KAAK,IAAM,GAAK,oBACvB,IAAIA,EAAG,mBAAqB,EAAG,EAAG,IAEhC55B,EAAIq6B,EAAIW,SAAS,CAACptB,GAAOsD,GAAG,GAAM,GAAG8pB,SAASwO,GAC9C92C,EAAK,EAAIkb,EAAK,GAAK,EAAIA,EAAK,GAAK,EACjC87B,GAAK,EAAK97B,EAAK,GAAK,EAAIA,EAAK,GAC7B8uB,EAAKmM,EAAMU,QAAQL,EAAOlpC,GAK9B,OAJA08B,EAAGrmB,GAAK3jB,EAAKw2C,EAAM,GAAG7yB,EAAIqzB,EAAKR,EAAM,GAAG7yB,EACxCqmB,EAAGlmB,GAAK9jB,EAAKw2C,EAAM,GAAG1yB,EAAIkzB,EAAKR,EAAM,GAAG1yB,EACpCkmB,EAAGxuC,OAAS,IACdwuC,EAAGvL,GAAKz+B,EAAKw2C,EAAM,GAAG/X,EAAIuY,EAAKR,EAAM,GAAG/X,GACnCuL,CACT,GAwEF,IAAI2G,EAAM,MACR1zC,cAAcuU,EAAGU,EAAGw5B,EAAY,MAC9B,OAAO9wB,KAAKyP,IAAI7Y,EAAIU,GAAKw5B,CAC3B,CACAzuC,YAAYuU,EAAGU,EAAG3J,GAChB,OAAQ,EAAIA,GAAKiJ,EAAIjJ,EAAI2J,CAC3B,CACAjV,aAAakrC,EAAKxtB,EAAKD,GACrB,OAAOE,KAAKF,IAAIC,EAAKC,KAAKD,IAAID,EAAKytB,GACrC,CACAlrC,kBAAkBkrC,EAAKxtB,EAAKD,GAC1B,IAAIusB,EAAMrsB,KAAKyP,IAAI3P,EAAMC,GACrBnJ,EAAI22B,EAAMlB,EAKd,OAJIz1B,EAAIkJ,EACNlJ,GAAKy1B,EACEz1B,EAAImJ,IACXnJ,GAAKy1B,GACAz1B,CACT,CACAvU,cAAcyO,EAAG8F,EAAGU,GAClB,OAAOxG,GAAKkP,KAAKD,IAAInJ,EAAGU,IAAMxG,GAAKkP,KAAKF,IAAIlJ,EAAGU,EACjD,CACAjV,mBAAmBuU,EAAGU,EAAI,GACxB,IAAI0P,EAAIpQ,EAAIU,EAAIV,EAAIU,EAAIA,EAAIV,EAC5B,OAAOA,EAAIm/B,EAAIyG,SAAWx1B,CAC5B,CACA3kB,gBAAgBuU,EAAGU,GACjB,IAAIxG,EAAI,IAAIw7B,EAAG11B,EAAEhW,QACb67C,EAAQnlC,EAAI80B,EAAIgH,SAAS97B,EAAGV,GAAKA,EACjC8lC,EAAQplC,EAAIV,EAAI,IAAI01B,EAAG11B,EAAEhW,QAAQ+7C,KAAK,GAC1C,IAAK,IAAI97C,EAAI,EAAGwrC,EAAMv7B,EAAElQ,OAAQC,EAAIwrC,EAAKxrC,IACvCiQ,EAAEjQ,GAAKk1C,EAAIyG,SAAWC,EAAM57C,GAAK67C,EAAM77C,GAEzC,OAAOiQ,CACT,CACAzO,sBAAsBu3C,EAAGhjC,EAAGU,GAC1B,IAAIyI,EAAMC,KAAKD,IAAInJ,EAAGU,GAEtB,OAAQsiC,EAAI75B,IADFC,KAAKF,IAAIlJ,EAAGU,GACIyI,EAC5B,CACA1d,WAAWqwC,GACT,IAAIyC,EAAO5E,EAAKK,YAAY8B,GACxBv1B,EAAI,IAAImvB,EAAG6I,EAAK,IACpB,IAAK,IAAIt0C,EAAI,EAAGwrC,EAAM8I,EAAKv0C,OAAQC,EAAIwrC,EAAKxrC,IAC1CurC,EAAIlmC,IAAIiX,EAAGg4B,EAAKt0C,IAElB,OAAOsc,CACT,CACA9a,eAAeqwC,GACb,IAAIyC,EAAO5E,EAAKK,YAAY8B,GAC5B,OAAOqD,EAAI6G,IAAIzH,GAAMzI,OAAOyI,EAAKv0C,OACnC,CACAyB,aAAasL,EAAGkvC,EAASC,EAAQC,WAC/B,OAAOF,EAAOlvC,EAAI,GAAM,EAAQ,EAAJA,EAAY,EAAJA,EACtC,CACAtL,kBAAkBu3C,EAAGoD,EAAOC,EAAOC,EAASC,GAC1C,GAAIH,GAASC,EACX,MAAM,IAAIt6C,MAAM,2DAClB,IAAIod,EAAMC,KAAKD,IAAIm9B,EAASC,GACxBr9B,EAAME,KAAKF,IAAIo9B,EAASC,GAC5B,OAAOpH,EAAIqH,eAAexD,EAAGoD,EAAOC,IAAUn9B,EAAMC,GAAOA,CAC7D,CACA1d,YAAYg7C,GACV7+C,KAAK8+C,UA9GT,SAAyBD,GACvB,IAIIx8C,EAAG08C,EAzBH3D,EAqBA/wC,EAAI,GACJsU,EAAI,EACJrM,EAAIjI,EACJ4T,EAAI,IAAIjS,MAAM3B,GACR6sC,EAAI,EACV8H,GA1BA5D,EAAI,WACG,SAASrvB,GAClB,GAAIA,EAAM,CACRA,EAAOA,EAAK1rB,WACZ,IAAK,IAAIgC,EAAI,EAAGA,EAAI0pB,EAAK3pB,OAAQC,IAAK,CAEpC,IAAI6R,EAAI,oBADRknC,GAAKrvB,EAAKkzB,WAAW58C,IAGrB6R,GADAknC,EAAIlnC,IAAM,EAGVknC,GADAlnC,GAAKknC,KACK,EAEVA,GAAS,YADTlnC,GAAKknC,EAEP,CACA,OAAmB,wBAAXA,IAAM,EAChB,CACEA,EAAI,UACR,GAUA,IAAK/4C,EAAI,EAAGA,EAAIgI,EAAGhI,IACjB4b,EAAE5b,GAAK28C,EAAKx9B,KAAKw8B,SAAS39C,YA4B5B,OA3BA,WAEE,IADA2+C,IACK38C,EAAI,EAAGA,EAAIgI,EAAGhI,IACjB4b,EAAE5b,GAAK28C,EAAK,KACdrgC,EAAI,EACJrM,EAAIjI,CACN,CAmBA60C,GAZA,SAAoBC,GAGlB,IAFAA,EAPF,SAAqBA,GAInB,OAFAA,GADAA,EAAQA,EAAMxyB,QAAQ,kBAAmB,KAC3BA,QAAQ,gBAAiB,KACzBA,QAAQ,MAAO,KAE/B,CAEUyyB,CAAYD,GACpBH,EAAKG,GACA98C,EAAI,EAAGA,EAAI88C,EAAM/8C,OAAQC,IAE5B,IADA60C,EAAIiI,EAAMF,WAAW58C,GAChB08C,EAAI,EAAGA,EAAI10C,EAAG00C,IACjB9gC,EAAE8gC,IAAMC,EAAK9H,EAAE72C,YACX4d,EAAE8gC,GAAK,IACT9gC,EAAE8gC,IAAM,EAGhB,CAEAM,CAAWR,GACJ,CACLb,WACQ1rC,GAAKjI,IACTiI,EAAI,GACN,IAAInD,EAAI,QAAU8O,EAAE3L,GAAS,uBAAJqM,EACzB,OAAOV,EAAE3L,GAAKnD,GAAKwP,EAAQ,EAAJxP,EACzB,EAEJ,CAkEqBmwC,CAAgBT,EACnC,CACAh7C,gBACE,OAAO7D,KAAK8+C,UAAY9+C,KAAK8+C,UAAUd,SAAWx8B,KAAKw8B,QACzD,GAEEzK,EAAO,MACT1vC,kBAAkB4zB,GAChB,OAAO8f,EAAIgI,WAAW9nB,EAAO,EAAG,IAClC,CACA5zB,mBAAmB27C,GACjB,OAAOjI,EAAIgI,WAAWC,EAAQ,EAAGC,EAAMC,OACzC,CACA77C,gBAAgB4zB,GACd,OAAOA,EAAQgoB,EAAME,UACvB,CACA97C,gBAAgB27C,GACd,OAAOA,EAASC,EAAMG,UACxB,CACA/7C,mBAAmBqwC,GACjB,IAAI2L,EAAOC,EACX,IAAK,IAAIxtC,KAAK4hC,EACC,MAAT2L,GACFA,EAAQvtC,EAAE2mC,QACV6G,EAAQxtC,EAAE2mC,UAEV4G,EAAQA,EAAM7J,KAAK1jC,GACnBwtC,EAAQA,EAAM7J,KAAK3jC,IAGvB,OAAO,IAAIu9B,EAAMgQ,EAAOC,EAC1B,CACAj8C,gBAAgBqwC,GACd,OAAOqD,EAAIwI,QAAQ7L,EACrB,CACArwC,cAAcqwC,EAAK8L,EAAY,EAAGC,EAAY,MAC5C,IAAI5B,EAAsB,MAAb4B,EAAoB,WAAa,MAC1C59C,EAAI,EACR,IAAK,IAAIiQ,KAAK4hC,EACY,iBAAb8L,EACLA,IAAc39C,GAChBiQ,EAAE+rC,GAAQnK,EAAI8L,IAEhB1tC,EAAE+rC,GAAQ2B,GAEZ39C,GAEJ,CACAwB,mBAAmBuU,EAAGU,EAAG3J,EAAI,IAC3B,IAAI0+B,EAAMrsB,KAAKD,IAAInJ,EAAEhW,OAAQ0W,EAAE1W,QAC3BK,EAAIqrC,EAAGG,KAAKJ,GAChB,IAAK,IAAIxrC,EAAI,EAAGA,EAAIwrC,EAAKxrC,IACvBI,EAAEJ,GAAK+V,EAAE/V,IAAM,EAAI8M,GAAK2J,EAAEzW,GAAK8M,EAEjC,OAAO1M,CACT,CACAoB,qBAAqB+sC,EAAIqL,EAAOwD,EAAMS,IACpC,IAAIx1B,EAAIuxB,EAAK,GACT1xB,EAAI0xB,EAAK,GACT3pC,EAAI,IAAIw7B,EAAG8C,GACXuC,EAAK,IAAIrF,EAAGx7B,GAChB6gC,EAAG5oB,IAAMjY,EAAEoY,GACXyoB,EAAGzoB,GAAKpY,EAAEiY,GACV,IAAI6oB,EAAK,IAAItF,EAAGx7B,GAGhB,OAFA8gC,EAAG7oB,GAAKjY,EAAEoY,GACV0oB,EAAG1oB,IAAMpY,EAAEiY,GACJ,IAAIslB,EAAMsD,EAAIC,EACvB,CACAvvC,uBAAuBwtC,EAAIC,GACzB,OAA8B,IAAvB,IAAIxD,EAAGuD,GAAIhrB,IAAIirB,EACxB,CACAztC,mBAAmB+sC,EAAIuP,EAAUC,GAC/B,IAAK,IAAI/9C,EAAI,EAAGwrC,EAAMrsB,KAAKD,IAAIqvB,EAAGxuC,OAAQ+9C,EAAS/9C,OAAQg+C,EAASh+C,QAASC,EAAIwrC,EAAKxrC,IACpF,IAAKk1C,EAAIhB,OAAO3F,EAAGvuC,GAAI89C,EAAS99C,GAAI+9C,EAAS/9C,IAC3C,OAAO,EAEX,OAAO,CACT,CACAwB,iBAAiBqwC,GACf,IAAIyC,EAAO5E,EAAKK,YAAY8B,GACxBxoB,EAAS6nB,EAAK0B,YAAY0B,GAC1BN,EAAS3qB,EAAO,GAAGhkB,IAAIgkB,EAAO,IAAIwiB,OAAO,GAsB7C,OAAOyI,EAAKiE,MArBH,CAACxiC,EAAGU,KACX,GAAIV,EAAEhW,OAAS,GAAK0W,EAAE1W,OAAS,EAC7B,MAAM,IAAI+B,MAAM,sCAClB,IAAIk8C,EAAKjoC,EAAEm6B,UAAU8D,GACjBiK,EAAKxnC,EAAEy5B,UAAU8D,GACrB,GAAIgK,EAAG,IAAM,GAAKC,EAAG,GAAK,EACxB,OAAO,EACT,GAAID,EAAG,GAAK,GAAKC,EAAG,IAAM,EACxB,OAAO,EACT,GAAa,GAATD,EAAG,IAAoB,GAATC,EAAG,GACnB,OAAID,EAAG,IAAM,GAAKC,EAAG,IAAM,EAClBD,EAAG,GAAKC,EAAG,GAAK,GAAI,EACtBA,EAAG,GAAKD,EAAG,GAAK,GAAI,EAE7B,IAAI3F,EAAM2F,EAAGE,SAASD,GACtB,OAAI5F,EAAM,EACD,EACLA,EAAM,GACD,EACF2F,EAAG,GAAKA,EAAG,GAAKA,EAAG,GAAKA,EAAG,GAAKC,EAAG,GAAKA,EAAG,GAAKA,EAAG,GAAKA,EAAG,GAAK,GAAI,CAAE,GAGjF,CACAz8C,aAAa2W,EAAIgmC,EAAOxO,GACtB,IAAIkC,EAAMnC,EAAKK,iBAAsB,IAAV53B,EAAG,IAAiC,iBAATA,EAAG,GAAiB,CAACA,GAAMA,GAC7EimC,EAAsB,iBAATD,EAAoB1S,EAAGG,KAAKiG,EAAI,GAAG9xC,OAAQo+C,GAASA,EAChExO,IACHA,EAASlE,EAAGG,KAAKiG,EAAI,GAAG9xC,OAAQ,IAClC,IAAK,IAAIC,EAAI,EAAGwrC,EAAMqG,EAAI9xC,OAAQC,EAAIwrC,EAAKxrC,IAAK,CAC9C,IAAIiQ,EAAI4hC,EAAI7xC,GACZ,IAAK,IAAI60C,EAAI,EAAGwJ,EAAOpuC,EAAElQ,OAAQ80C,EAAIwJ,EAAMxJ,IACzC5kC,EAAE4kC,GAAKlF,GAAUA,EAAOkF,GAAKlF,EAAOkF,IAAM5kC,EAAE4kC,GAAKlF,EAAOkF,IAAMuJ,EAAIvJ,GAAK5kC,EAAE4kC,GAAKuJ,EAAIvJ,EAEtF,CACA,OAAO3D,CACT,CACA1vC,gBAAgB2W,EAAIid,EAAOua,EAAQiK,GACjC,IAAI/H,EAAMnC,EAAKK,iBAAsB,IAAV53B,EAAG,IAAiC,iBAATA,EAAG,GAAiB,CAACA,GAAMA,GAC7E8zB,EAAK0D,EAASzD,EAAIc,iBAAmBd,EAAI4C,eACxCa,IACHA,EAASlE,EAAGG,KAAKiG,EAAI,GAAG9xC,OAAQ,IAClC,IAAIktC,EAAM9tB,KAAK8tB,IAAI7X,GACf8X,EAAM/tB,KAAK+tB,IAAI9X,GACnB,IAAK,IAAIp1B,EAAI,EAAGwrC,EAAMqG,EAAI9xC,OAAQC,EAAIwrC,EAAKxrC,IAAK,CAC9C,IAAIiQ,EAAI2pC,EAAO/H,EAAI7xC,GAAGs+C,MAAM1E,GAAQ/H,EAAI7xC,GAExC,GADAiQ,EAAEiiB,GAAGga,EAAIqS,YAAYtuC,EAAGg8B,EAAGgB,EAAKC,EAAKyC,KACjCiK,EACF,IAAK,IAAI/E,EAAI,EAAGA,EAAI+E,EAAK75C,OAAQ80C,IAC/BhD,EAAI7xC,GAAG45C,EAAK/E,IAAM5kC,EAAE4kC,EAG1B,CACA,OAAO3D,CACT,CACA1vC,eAAe2W,EAAIgmC,EAAOxO,EAAQiK,GAChC,IAAI/H,EAAMnC,EAAKK,iBAAsB,IAAV53B,EAAG,IAAiC,iBAATA,EAAG,GAAiB,CAACA,GAAMA,GAC7EyD,EAAoB,iBAATuiC,EAAoB,CAACA,EAAOA,GAASA,EAC/CxO,IACHA,EAASlE,EAAGG,KAAKiG,EAAI,GAAG9xC,OAAQ,IAClC,IAAIksC,EAAK0D,EAASzD,EAAIoB,gBAAkBpB,EAAI6C,cACxCyP,EAAOr/B,KAAKouB,IAAI3xB,EAAE,IAClB6iC,EAAOt/B,KAAKouB,IAAI3xB,EAAE,IACtB,IAAK,IAAI5b,EAAI,EAAGwrC,EAAMqG,EAAI9xC,OAAQC,EAAIwrC,EAAKxrC,IAAK,CAC9C,IAAIiQ,EAAI2pC,EAAO/H,EAAI7xC,GAAGs+C,MAAM1E,GAAQ/H,EAAI7xC,GAExC,GADAiQ,EAAEiiB,GAAGga,EAAIqS,YAAYtuC,EAAGg8B,EAAGuS,EAAMC,EAAM9O,KACnCiK,EACF,IAAK,IAAI/E,EAAI,EAAGA,EAAI+E,EAAK75C,OAAQ80C,IAC/BhD,EAAI7xC,GAAG45C,EAAK/E,IAAM5kC,EAAE4kC,EAG1B,CACA,OAAO3D,CACT,CACA1vC,iBAAiB2W,EAAI9I,EAAMuqC,GACzB,IAAI/H,EAAMnC,EAAKK,iBAAsB,IAAV53B,EAAG,IAAiC,iBAATA,EAAG,GAAiB,CAACA,GAAMA,GAC7E23B,EAAQJ,EAAKK,YAAY1gC,GACzBqvC,EAAMxS,EAAIyS,kBAAkB7O,EAAM,GAAIA,EAAM,IAChD,IAAK,IAAI9vC,EAAI,EAAGwrC,EAAMqG,EAAI9xC,OAAQC,EAAIwrC,EAAKxrC,IAAK,CAC9C,IAAIiQ,EAAI2pC,EAAO/H,EAAI7xC,GAAGs+C,MAAM1E,GAAQ/H,EAAI7xC,GAExC,GADAiQ,EAAEiiB,GAAGga,EAAIqS,YAAYtuC,EAAGyuC,IACpB9E,EACF,IAAK,IAAI/E,EAAI,EAAGA,EAAI+E,EAAK75C,OAAQ80C,IAC/BhD,EAAI7xC,GAAG45C,EAAK/E,IAAM5kC,EAAE4kC,EAG1B,CACA,OAAO3D,CACT,CACA1vC,kBACE,IAAIyrC,EAAM,IAAI2R,aAAa,KAC3B,IAAK,IAAI5+C,EAAI,EAAGA,EAAI,IAAKA,IACvBitC,EAAIjtC,GAAKmf,KAAK8tB,IAAIjtC,EAAImf,KAAKoW,GAAK,KAElC,MAAO,CAAEspB,MAAO5R,EAAKA,IADT3X,GAAQ2X,EAAI9tB,KAAK0P,MAAMqiB,EAAK4N,WAAW5N,EAAK6N,SAASzpB,MAEnE,CACA9zB,kBACE,IAAI0rC,EAAM,IAAI0R,aAAa,KAC3B,IAAK,IAAI5+C,EAAI,EAAGA,EAAI,IAAKA,IACvBktC,EAAIltC,GAAKmf,KAAK+tB,IAAIltC,EAAImf,KAAKoW,GAAK,KAElC,MAAO,CAAEspB,MAAO3R,EAAKA,IADT5X,GAAQ4X,EAAI/tB,KAAK0P,MAAMqiB,EAAK4N,WAAW5N,EAAK6N,SAASzpB,MAEnE,GAEE2mB,EAAU,MACZz6C,cAAcsL,EAAGwP,EAAI,GACnB,OAAOA,EAAIxP,CACb,CACAtL,mBAAmBsL,EAAGwP,EAAI,GACxB,OAAOA,EAAIxP,EAAIA,CACjB,CACAtL,oBAAoBsL,EAAGwP,EAAI,GACzB,OAAQA,EAAIxP,GAAKA,EAAI,EACvB,CACAtL,sBAAsBsL,EAAGwP,EAAI,GAC3B,IAAI0iC,EAAS,EAAJlyC,EACT,OAAOA,EAAI,GAAMwP,EAAI,EAAIxP,EAAIA,EAAI,GAAKwP,EAAI,IAAM0iC,EAAK,IAAMA,EAAK,GAAK,EACvE,CACAx9C,eAAesL,EAAGwP,EAAI,GACpB,OAAOA,EAAIxP,EAAIA,EAAIA,CACrB,CACAtL,gBAAgBsL,EAAGwP,EAAI,GACrB,IAAI0iC,EAAKlyC,EAAI,EACb,OAAOwP,GAAK0iC,EAAKA,EAAKA,EAAK,EAC7B,CACAx9C,kBAAkBsL,EAAGwP,EAAI,GACvB,IAAI0iC,EAAS,EAAJlyC,EACT,OAAOA,EAAI,GAAMwP,EAAI,EAAI0iC,EAAKA,EAAKA,EAAK1iC,EAAI,IAAM0iC,EAAK,IAAMA,EAAK,IAAMA,EAAK,GAAK,EACpF,CACAx9C,qBAAqBsL,EAAGwP,EAAI,EAAGrM,EAAI,KACjC,OAAOqM,EAAI6C,KAAK8C,IAAInV,EAAG,EAAImD,EAC7B,CACAzO,sBAAsBsL,EAAGwP,EAAI,EAAGrM,EAAI,KAClC,OAAOqM,EAAI6C,KAAK8C,IAAInV,EAAGmD,EACzB,CACAzO,cAAcsL,EAAGwP,EAAI,GACnB,OAAQA,EAAI6C,KAAK8tB,IAAIngC,EAAIswC,EAAM6B,SAAW3iC,CAC5C,CACA9a,eAAesL,EAAGwP,EAAI,GACpB,OAAOA,EAAI6C,KAAK+tB,IAAIpgC,EAAIswC,EAAM6B,QAChC,CACAz9C,iBAAiBsL,EAAGwP,EAAI,GACtB,OAAQA,EAAI,GAAK6C,KAAK8tB,IAAI9tB,KAAKoW,GAAKzoB,GAAK,EAC3C,CACAtL,oBAAoBsL,EAAGwP,EAAI,GACzB,IAAI45B,EAAKppC,EAAIA,EACToyC,EAAKhJ,EAAKA,EAEd,OAAO55B,GAAK,GADH4iC,EAAKhJ,GACO,EAAI,GAAKgJ,EAAK,EAAI,GAAKhJ,EAAK,EACnD,CACA10C,kBAAkBsL,EAAGwP,EAAI,GACvB,OAAQA,GAAK6C,KAAKusB,KAAK,EAAI5+B,EAAIA,GAAK,EACtC,CACAtL,mBAAmBsL,EAAGwP,EAAI,GACxB,IAAI0iC,EAAKlyC,EAAI,EACb,OAAOwP,EAAI6C,KAAKusB,KAAK,EAAIsT,EAAKA,EAChC,CACAx9C,qBAAqBsL,EAAGwP,EAAI,GAC1B,IAAI0iC,EAAS,EAAJlyC,EACT,OAAOA,EAAI,IAAOwP,EAAI,GAAK6C,KAAKusB,KAAK,EAAIsT,EAAKA,GAAM,GAAK1iC,EAAI,GAAK6C,KAAKusB,KAAK,GAAKsT,EAAK,IAAMA,EAAK,IAAM,EACzG,CACAx9C,iBAAiBsL,EAAGwP,EAAI,EAAGrM,EAAI,IAC7B,IAAI+uC,EAAKlyC,EAAI,EACT8O,EAAI3L,EAAImtC,EAAMC,OAAS,mBAC3B,OAAO/gC,IAAM6C,KAAK8C,IAAI,EAAG,GAAK+8B,GAAM7/B,KAAK+tB,KAAK8R,EAAKpjC,GAAKwhC,EAAMC,OAASptC,GACzE,CACAzO,kBAAkBsL,EAAGwP,EAAI,EAAGrM,EAAI,IAC9B,IAAI2L,EAAI3L,EAAImtC,EAAMC,OAAS,mBAC3B,OAAO/gC,GAAK6C,KAAK8C,IAAI,GAAG,GAAMnV,GAAKqS,KAAK+tB,KAAKpgC,EAAI8O,GAAKwhC,EAAMC,OAASptC,IAAMqM,CAC7E,CACA9a,oBAAoBsL,EAAGwP,EAAI,EAAGrM,EAAI,IAChC,IAAI+uC,EAAS,EAAJlyC,EACL8O,EAAI3L,EAAImtC,EAAMC,OAAS,mBAC3B,OAAIvwC,EAAI,IACNkyC,GAAM,EACC1iC,GAAa6C,KAAK8C,IAAI,EAAG,GAAK+8B,GAAM7/B,KAAK+tB,KAAK8R,EAAKpjC,GAAKwhC,EAAMC,OAASptC,IAAlE,MAEZ+uC,GAAM,EACC1iC,GAAY6C,KAAK8C,IAAI,GAAG,GAAM+8B,GAAM7/B,KAAK+tB,KAAK8R,EAAKpjC,GAAKwhC,EAAMC,OAASptC,GAAlE,IAAyEqM,EAEzF,CACA9a,gBAAgBsL,EAAGwP,EAAI,GACrB,OAAOA,EAAI2/B,EAAQkD,UAAU,EAAIryC,EAAGwP,EACtC,CACA9a,iBAAiBsL,EAAGwP,EAAI,GACtB,OAAIxP,EAAI,EAAI,KACHwP,GAAK,OAASxP,EAAIA,GAChBA,EAAI,EAAI,KAEVwP,GAAK,QADZxP,GAAK,IAAM,MACcA,EAAI,KACpBA,EAAI,IAAM,KAEZwP,GAAK,QADZxP,GAAK,KAAO,MACaA,EAAI,OAGtBwP,GAAK,QADZxP,GAAK,MAAQ,MACYA,EAAI,QAEjC,CACAtL,mBAAmBsL,EAAGwP,EAAI,GACxB,OAAOxP,EAAI,GAAMmvC,EAAQmD,SAAa,EAAJtyC,EAAOwP,GAAK,EAAI2/B,EAAQkD,UAAc,EAAJryC,EAAQ,EAAGwP,GAAK,EAAIA,EAAI,CAC9F,CACA9a,eAAesL,EAAGwP,EAAI,EAAGrM,EAAI,IAC3B,IAAI7P,EAAI6P,GAAKnD,EAAI,IACjB,OAAOwP,GAAK,EAAI6C,KAAKkgC,KAAKj/C,GAC5B,CACAoB,kBAAkBsL,EAAGwP,EAAI,EAAGrM,EAAI,IAE9BA,EAAI,GAAK,GADTA,EAAIkP,KAAKF,IAAIm+B,EAAMkC,QAASngC,KAAKD,IAAI,EAAIk+B,EAAMkC,QAASrvC,MAExD,IAAIsvC,EAAI,GAAK,EAAIpgC,KAAKkgC,KAAKvyC,EAAI,IAAOmD,GAAI,IACtCuvC,EAAI,GAAK,EAAIrgC,KAAKkgC,IAAIpvC,IAE1B,OAAOqM,GAAKijC,EAAIC,IADR,GAAK,EAAIrgC,KAAKkgC,KAAKpvC,IACDuvC,EAC5B,CACAh+C,YAAYsL,EAAGwP,EAAI,EAAGrM,EAAI,IACxB,OAAInD,EAAI,GACCwP,EAAI6C,KAAK8C,IAAI,EAAInV,EAAG,EAAImD,GAAK,EAE7BqM,GAAK,EAAI6C,KAAK8C,IAAI,GAAK,EAAInV,GAAI,EAAImD,GAAK,EAEnD,CACAzO,uBAAuBsL,EAAGwP,EAAI,EAAGrM,EAAI,CAAC,IAAM,MAC1C,IAAI8F,EAAgB,iBAAL9F,EAAgBA,EAAE,GAAKA,EAClCwG,EAAgB,iBAALxG,EAAgBA,EAAE,GAAK,GAClCwvC,EAAO,EAAI,EAAI1pC,EACN,IAAT0pC,IACFA,EAAOrC,EAAMkC,SAEf,IAAIl/C,GAAK+e,KAAKusB,KAAK31B,EAAIA,EAAI0pC,EAAO3yC,GAAKiJ,GAAK0pC,EAC5C,OAAOnjC,GAAoBlc,EAAIA,GAAlB,EAAI,EAAIqW,GAAe,EAAIA,EAAIrW,EAC9C,CACAoB,mBAAmBsL,EAAGwP,EAAI,EAAG0yB,EAAK,CAAC,GAAK,IAAMC,EAAK,CAAC,GAAK,KACvD,IAAIyQ,EAAQ,IAAIlS,EAAM,IAAI/B,EAAG,EAAG,GAAI,IAAIA,EAAGuD,GAAK,IAAIvD,EAAGwD,GAAK,IAAIxD,EAAG,EAAG,IACtE,OAAOnvB,EAAIo+B,EAAMc,WAAW,IAAI/P,EAAG3+B,EAAIA,EAAIA,EAAGA,EAAIA,EAAGA,EAAG,GAAI4tC,EAAMO,cAAcyE,IAAQr3B,CAC1F,CACA7mB,uBAAuBsL,EAAGwP,EAAI,EAAG0yB,EAAK,CAAC,GAAK,MAC1C,IAAIj5B,EAAIoJ,KAAKD,IAAI,EAAIk+B,EAAMkC,QAASngC,KAAKF,IAAIm+B,EAAMkC,QAAStQ,EAAG,KAC3Dv4B,EAAI0I,KAAKD,IAAI,EAAGC,KAAKF,IAAI,EAAG+vB,EAAG,KAC/BuQ,GAAK,EAAI9oC,IAAM,EAAIV,GAAKU,EAAIV,EAE5BsS,EAAIk3B,GAAKzyC,EAAIA,IADRyyC,GAAKxpC,EAAIA,GAAKU,GAAKV,EACFjJ,EAC1B,OAAOwP,EAAI6C,KAAKD,IAAI,EAAGC,KAAKF,IAAI,EAAGoJ,GACrC,CACA7mB,aAAasL,EAAGwP,EAAI,EAAGrM,EAAI,IACzB,OAAOnD,EAAImD,EAAIqM,EAAI,CACrB,CACA9a,YAAYyqC,EAAI0O,EAAO7tC,EAAGwP,KAAMpM,GAC9B,IAAI0L,EAAI,EAAI++B,EAEZ,OAAO1O,EADE9sB,KAAK0P,MAAM/hB,EAAI8O,GAAKA,EACfU,KAAMpM,EACtB,GA4EEktC,EAAQ,CACVS,GAAI,KACJ8B,GAAI,KACJC,GAAI,KACJC,IAAK,MACLC,WAAY,EACZC,SAAU,EACVC,UAAW,EACX39B,MAAO,EACP49B,aAAc,EACdC,OAAQ,EACRC,YAAa,EACb/9B,KAAM,EACNg+B,SAAU,EACV53B,IAAK,EACL63B,UAAW,EACXf,QAAS,KACTrgC,IAAK2B,OAAOorB,UACZ9sB,IAAK0B,OAAOmrB,UACZuU,GAAInhC,KAAKoW,GACT8nB,OAAQ,kBACR4B,QAAS,mBACTsB,WAAY,kBACZC,WAAY,oBACZjD,WAAY,kBACZD,WAAY,oBACZmD,QAAS,KACTC,OAAQ,OACRC,SAAU,mBAERC,EAAQ,MACVp/C,iBAAiBq/C,GAIf,OAHIA,IACFD,EAAME,WAAaD,GAEdD,EAAME,UACf,CACAt/C,eAAe0O,GACb,GAAIA,EAAKnQ,OAAS,EAChB,MAAO,GACT,IAAI0M,EAAM,GACN7C,EAAUD,MAAMC,QAAQsG,EAAK,KAAO6wC,YAAYC,OAAO9wC,EAAK,IAChE,GAAuB,iBAAZA,EAAK,GACdzD,EAAM9C,MAAMs3C,UAAU9iC,MAAM+iC,KAAKhxC,QAC5B,GAAuB,iBAAZA,EAAK,IAAoBtG,EAQhCA,IACT6C,EAAM,GAAG0R,MAAM+iC,KAAKhxC,EAAK,SATyB,CAClD,IAAI6F,EAAI,CAAC,IAAK,IAAK,IAAK,KACpB9F,EAAIC,EAAK,GACb,IAAK,IAAIlQ,EAAI,EAAGA,EAAI+V,EAAEhW,WAChBkQ,EAAElQ,QAAUC,GAAKiQ,EAAElQ,SAAYgW,EAAE/V,KAAMiQ,GADfjQ,IAG5ByM,EAAIhJ,KAAKwM,EAAE8F,EAAE/V,IAEjB,CAGA,OAAOyM,CACT,CACAjL,YAAYI,EAAU,QAASu/C,GAC7B,GAAyB,SAArBP,EAAMQ,YACR,MAAM,IAAIt/C,MAAMF,GAIlB,MAHgC,QAArBg/C,EAAMQ,aACfl3C,QAAQC,KAAKvI,GAERu/C,CACT,CACA3/C,iBAAiBo6C,EAAOC,EAAQ,GAE9B,OADA+E,EAAMz2C,KAAK,8DACJgV,KAAK0P,MAAMqmB,EAAIyG,SAAWC,GAASC,CAC5C,CACAr6C,aAAaqwC,EAAKsB,EAAMkO,EAAQC,GAAW,EAAOC,GAAY,GAC5D,IAAIC,EAAS,GACTC,EAAO,GACPC,EAAKL,GAAUlO,EACf3zC,EAAQ,EACZ,GAAIqyC,EAAI9xC,QAAU,GAAK2hD,GAAM,EAC3B,MAAO,GACT,KAAOliD,EAAQqyC,EAAI9xC,QAAQ,CACzB0hD,EAAO,GACP,IAAK,IAAI5M,EAAI,EAAGA,EAAI1B,EAAM0B,IACxB,GAAIyM,EACFG,EAAKh+C,KAAKouC,GAAKryC,EAAQq1C,GAAKhD,EAAI9xC,aAC3B,CACL,GAAIP,EAAQq1C,GAAKhD,EAAI9xC,OACnB,MACF0hD,EAAKh+C,KAAKouC,EAAIryC,EAAQq1C,GACxB,CAEFr1C,GAASkiD,IACJH,GAAaA,GAAaE,EAAK1hD,SAAWozC,IAC7CqO,EAAO/9C,KAAKg+C,EAChB,CACA,OAAOD,CACT,CACAhgD,eAAeqwC,EAAK8P,GAAiB,GACnC,IAAIC,EAAMD,EAAiB,IAAInU,EAAU,IAAI7jC,MAC7C,OAAOi4C,EAAIC,OAAOC,MAAMF,EAAK/P,EAC/B,CACArwC,eAAeuU,EAAGU,EAAG6L,GACnB,IAAIha,EAAS,GACb,IAAK,IAAItI,EAAI,EAAGwrC,EAAMz1B,EAAEhW,OAAQC,EAAIwrC,EAAKxrC,IACvC,IAAK,IAAI60C,EAAI,EAAGkN,EAAOtrC,EAAE1W,OAAQ80C,EAAIkN,EAAMlN,IACzCvsC,EAAO7E,KAAK6e,EAAGvM,EAAE/V,GAAIyW,EAAEo+B,KAG3B,OAAOvsC,CACT,CACA9G,WAAWwgD,GACT,IAAIhf,EAAI,GACR,IAAK,IAAIhjC,EAAI,EAAGwrC,EAAMwW,EAAO,GAAGjiD,OAAQC,EAAIwrC,EAAKxrC,IAAK,CACpD,IAAIiQ,EAAI,GACR,IAAK,IAAI4kC,EAAI,EAAGA,EAAImN,EAAOjiD,OAAQ80C,IACjC5kC,EAAExM,KAAKu+C,EAAOnN,GAAG70C,IAEnBgjC,EAAEv/B,KAAKwM,EACT,CACA,OAAO+yB,CACT,CACAxhC,eAAeyd,EAAKC,EAAM,EAAGmiC,EAAS,EAAGx1C,GACvC,IAAIyQ,EAAI4C,EACR,OAAO,WAOL,OANA5C,GAAK+kC,EACD/kC,GAAK2C,IACP3C,EAAI4C,GAAO5C,EAAI2C,IAEbpT,GACFA,EAASyQ,GACJA,CACT,CACF,CACA9a,gBAAgByqC,EAAI2P,EAAOC,EAAQ,EAAGp8B,EAAO,GAC3C,IAAIwiC,EAAO,GACX,IAAK,IAAIjiD,EAAI67C,EAAOrQ,EAAMoQ,EAAO57C,EAAIwrC,EAAKxrC,GAAKyf,EAC7CwiC,EAAKjiD,GAAKisC,EAAGjsC,GAEf,OAAOiiD,CACT,CACAzgD,YAAY0gD,EAAKr2C,GACf,IAAIs2C,EAAU,IAAIC,eAClBD,EAAQE,KAAK,MAAOH,GAAK,GACzBC,EAAQG,OAAS,WACXH,EAAQI,QAAU,KAAOJ,EAAQI,OAAS,IAC5C12C,EAASs2C,EAAQK,cAAc,GAE/B32C,EAAS,iBAAiBs2C,EAAQI,yBAAyBL,MAAQ,EAEvE,EACAC,EAAQM,QAAU,WAChB52C,EAAS,yBAAyB,EACpC,EACAs2C,EAAQO,MACV,CACAlhD,gBAAgBmhD,EAAOC,EAAW,mBAAoBC,EAAW,MAAOC,EAAU,GAChF,MAAMC,EAAqB,QAAbF,EAAqB,OAASA,EAC5CF,EAAMtkD,QAAQ2kD,QAAO,SAASC,GAC5B,MAAMC,EAAO51C,SAASzH,cAAc,KAC9Bq8C,EAAMiB,IAAIC,gBAAgBH,GAChCC,EAAKG,KAAOnB,EACZgB,EAAKI,SAAW,GAAGV,KAAYC,IAC/Bv1C,SAAS28B,KAAKhkC,YAAYi9C,GAC1BA,EAAKK,QACLj2C,SAAS28B,KAAK1/B,YAAY24C,GAC1BC,IAAIK,gBAAgBtB,EACtB,GAAG,SAASa,IAASD,EACvB,CACAthD,mBAAmBiiD,EAAY,IAC7B,IAAIvkD,EAAOwkD,KAAKC,MACZC,EAAM,GACV,OAAO,WACL,MAAMD,EAAMD,KAAKC,MAKjB,OAJAC,EAAIngD,KAAKkgD,EAAMzkD,GACX0kD,EAAI7jD,QAAU0jD,GAChBG,EAAIC,QACN3kD,EAAOykD,EACAxkC,KAAK0P,MAAM+0B,EAAI77C,QAAO,CAACgO,EAAGU,IAAMV,EAAIU,GAAG,GAAKmtC,EAAI7jD,OACzD,CACF,CACAyB,kBAAkBqwC,EAAKiS,EAAc,GACnC,QAAIn6C,MAAMC,QAAQioC,IAAQA,EAAI9xC,OAAS+jD,KACrClD,EAAMz2C,KAAK,YAAY25C,iCAChB,EAGX,CACAtiD,mBAAmBuiD,GACjB,OAAQp6C,MAAMC,QAAQm6C,GAAgBA,EAAV,IAAIA,EAClC,CACAviD,kBACE,MAAO,uBAAuBwiD,KAAKC,UAAUC,UAC/C,GAEExU,EAAOkR,EACXlR,EAAKoR,WAAa,OAGlB,IAAIrV,EAAK,cAAc0Y,aACrB9mD,eAAe6S,GACb,IAAIk0C,EAAU,IAAIl0C,KAChB/Q,SAAS+Q,EAAA,EAES,IAAhBA,EAAKnQ,QAAkC,iBAAXmQ,EAAK,GACnCk0C,EAAQl0C,EAAK,IAEbk0C,EAAQl0C,EAAKnQ,OAAS,EAAI2vC,EAAK2U,QAAQn0C,GAAQ,CAAC,EAAG,GAEvD,CACA1O,YAAY8iD,EAAYnW,EAAe,EAAGoW,GAAY,GACpD,IAAIt0C,EAAI,IAAIk0C,aAAaG,GAGzB,GAFInW,GACFl+B,EAAE6rC,KAAK3N,GACLoW,EACF,IAAK,IAAIvkD,EAAI,EAAGwrC,EAAMv7B,EAAElQ,OAAQC,EAAIwrC,EAAKxrC,IACvCiQ,EAAEjQ,GAAKiQ,EAAEjQ,GAAKk1C,EAAIyG,SAGtB,OAAO,IAAIlQ,EAAGx7B,EAChB,CACIF,SACF,OAAOpS,KAAK6mD,GACd,CACIz0C,OAAG6L,GACLje,KAAK6mD,IAAM5oC,CACb,CACIsM,QACF,OAAOvqB,KAAK,EACd,CACIuqB,MAAE6wB,GACJp7C,KAAK,GAAKo7C,CACZ,CACI1wB,QACF,OAAO1qB,KAAK,EACd,CACI0qB,MAAE0wB,GACJp7C,KAAK,GAAKo7C,CACZ,CACI/V,QACF,OAAOrlC,KAAK,EACd,CACIqlC,MAAE+V,GACJp7C,KAAK,GAAKo7C,CACZ,CACItV,QACF,OAAO9lC,KAAK,EACd,CACI8lC,MAAEsV,GACJp7C,KAAK,GAAKo7C,CACZ,CACAnC,QACE,OAAO,IAAInL,EAAG9tC,KAChB,CACAkJ,OAAOoJ,EAAGggC,EAAY,MACpB,IAAK,IAAIjwC,EAAI,EAAGwrC,EAAM7tC,KAAKoC,OAAQC,EAAIwrC,EAAKxrC,IAC1C,GAAImf,KAAKyP,IAAIjxB,KAAKqC,GAAKiQ,EAAEjQ,IAAMiwC,EAC7B,OAAO,EAEX,OAAO,CACT,CACA/d,MAAMhiB,GACJ,IAAID,EAAIy/B,EAAK2U,QAAQn0C,GACrB,IAAK,IAAIlQ,EAAI,EAAGwrC,EAAMrsB,KAAKD,IAAIvhB,KAAKoC,OAAQkQ,EAAElQ,QAASC,EAAIwrC,EAAKxrC,IAC9DrC,KAAKqC,GAAKiQ,EAAEjQ,GAEd,OAAOrC,IACT,CACA8mD,OAAOv0C,GACL,OAAOvS,KAAKi5C,QAAQ1kB,MAAMhiB,EAC5B,CACA0/B,QAAQuN,EAAQxR,EAAW+Y,GAAe,GACxC,IAAI3hC,EAAiB,MAAb4oB,EAAsBA,EAAYhuC,KAAKguC,YAC3CgZ,EAAS,CAACxlC,KAAK8tB,IAAIkQ,GAAUp6B,EAAG5D,KAAK+tB,IAAIiQ,GAAUp6B,GACvD,OAAO2hC,EAAe/mD,KAAK0H,IAAIs/C,GAAUhnD,KAAKu0B,GAAGyyB,EACnD,CACAriC,GAAG2pB,GACD,IAAI2Y,EAAOjnD,KACX,MAAO,IAAIwD,IACF8qC,EAAG2Y,KAASzjD,EAEvB,CACAukB,IAAIm/B,GACF,IAAIC,EAAO,GACX,IAAK,IAAI9kD,EAAI,EAAGwrC,EAAMqZ,EAAI9kD,OAAQC,EAAIwrC,EAAKxrC,IACzC8kD,EAAKrhD,KAAK9F,KAAK2kB,GAAGuiC,EAAI7kD,KAExB,OAAO8kD,CACT,CACAxG,MAAM1E,GACJ,IAAI3pC,EAAI,GACR,IAAK,IAAIjQ,EAAI,EAAGwrC,EAAMoO,EAAK75C,OAAQC,EAAIwrC,EAAKxrC,IAC1CiQ,EAAExM,KAAK9F,KAAKi8C,EAAK55C,KAAO,GAE1B,OAAO,IAAIyrC,EAAGx7B,EAChB,CACA80C,WAAW70C,GACT,OAAO,IAAIu7B,EAAG9tC,KAAKqnD,UAAUnD,OAAOnS,EAAK2U,QAAQn0C,IACnD,CACA7K,OAAO6K,GAEL,OADgB,IAAhBA,EAAKnQ,QAAkC,iBAAXmQ,EAAK,GAAiBq7B,EAAIlmC,IAAI1H,KAAMuS,EAAK,IAAMq7B,EAAIlmC,IAAI1H,KAAM+xC,EAAK2U,QAAQn0C,IAC/FvS,IACT,CACA+vC,QAAQx9B,GACN,OAAOvS,KAAKi5C,QAAQvxC,OAAO6K,EAC7B,CACAqiC,YAAYriC,GAEV,OADgB,IAAhBA,EAAKnQ,QAAkC,iBAAXmQ,EAAK,GAAiBq7B,EAAIgH,SAAS50C,KAAMuS,EAAK,IAAMq7B,EAAIgH,SAAS50C,KAAM+xC,EAAK2U,QAAQn0C,IACzGvS,IACT,CACAuyC,aAAahgC,GACX,OAAOvS,KAAKi5C,QAAQrE,YAAYriC,EAClC,CACA28B,YAAY38B,GAEV,OADgB,IAAhBA,EAAKnQ,QAAkC,iBAAXmQ,EAAK,GAAiBq7B,EAAIsB,SAASlvC,KAAMuS,EAAK,IAAMq7B,EAAIsB,SAASlvC,KAAM+xC,EAAK2U,QAAQn0C,IACzGvS,IACT,CACAowC,aAAa79B,GACX,OAAOvS,KAAKi5C,QAAQ/J,YAAY38B,EAClC,CACA27B,UAAU37B,GAER,OADgB,IAAhBA,EAAKnQ,QAAkC,iBAAXmQ,EAAK,GAAiBq7B,EAAIM,OAAOluC,KAAMuS,EAAK,IAAMq7B,EAAIM,OAAOluC,KAAM+xC,EAAK2U,QAAQn0C,IACrGvS,IACT,CACAsnD,WAAW/0C,GACT,OAAOvS,KAAKi5C,QAAQ/K,UAAU37B,EAChC,CACAkgC,cACE,OAAO7E,EAAIvnB,IAAIrmB,KAAMA,KACvB,CACAguC,YACE,OAAOJ,EAAII,UAAUhuC,KACvB,CACA+3B,KAAKiW,GAEH,OADAJ,EAAI7V,KAAK/3B,KAAMguC,GACRhuC,IACT,CACAunD,MAAMvZ,GACJ,OAAOhuC,KAAKi5C,QAAQlhB,KAAKiW,EAC3B,CACA3nB,OAAO9T,GACL,OAAOq7B,EAAIvnB,IAAIrmB,KAAM+xC,EAAK2U,QAAQn0C,GACpC,CACAguC,YAAYhuC,GACV,OAAOq7B,EAAI4Z,QAAQxnD,KAAM+xC,EAAK2U,QAAQn0C,GACxC,CACAigC,UAAUjgC,GACR,OAAOq7B,EAAI6Z,MAAMznD,KAAM+xC,EAAK2U,QAAQn0C,GACtC,CACAqgC,YAAYrgC,GACV,OAAOvS,KAAKowC,UAAUpwC,KAAKqmB,OAAO9T,GAAQvS,KAAKyyC,cACjD,CACAiV,iBAAiBn1C,GACf,OAAOvS,KAAKqmB,OAAO9T,GAAQvS,KAAKguC,WAClC,CACA/c,MAEE,OADA2c,EAAI3c,IAAIjxB,MACDA,IACT,CACA2nD,OACE,OAAO3nD,KAAKi5C,QAAQhoB,KACtB,CACAC,QAEE,OADA0c,EAAI1c,MAAMlxB,MACHA,IACT,CACA4nD,SACE,OAAO5nD,KAAKi5C,QAAQ/nB,OACtB,CACAid,OAEE,OADAP,EAAIO,KAAKnuC,MACFA,IACT,CACA6nD,QACE,OAAO7nD,KAAKi5C,QAAQ9K,MACtB,CACAnsB,QAEE,OADA4rB,EAAI5rB,MAAMhiB,MACHA,IACT,CACA8nD,SACE,OAAO9nD,KAAKi5C,QAAQj3B,OACtB,CACAJ,WACE,OAAOgsB,EAAIrsB,IAAIvhB,KACjB,CACA2hB,WACE,OAAOisB,EAAItsB,IAAIthB,KACjB,CACAg2C,QAAQzjC,GACN,IAAID,EAAIy/B,EAAK2U,QAAQn0C,GACjB6S,EAAIplB,KAAKi5C,QACb,IAAK,IAAI52C,EAAI,EAAGwrC,EAAMrsB,KAAKD,IAAIvhB,KAAKoC,OAAQkQ,EAAElQ,QAASC,EAAIwrC,EAAKxrC,IAC9D+iB,EAAE/iB,GAAKmf,KAAKD,IAAIvhB,KAAKqC,GAAIiQ,EAAEjQ,IAE7B,OAAO+iB,CACT,CACA6wB,QAAQ1jC,GACN,IAAID,EAAIy/B,EAAK2U,QAAQn0C,GACjB6S,EAAIplB,KAAKi5C,QACb,IAAK,IAAI52C,EAAI,EAAGwrC,EAAMrsB,KAAKD,IAAIvhB,KAAKoC,OAAQkQ,EAAElQ,QAASC,EAAIwrC,EAAKxrC,IAC9D+iB,EAAE/iB,GAAKmf,KAAKF,IAAIthB,KAAKqC,GAAIiQ,EAAEjQ,IAE7B,OAAO+iB,CACT,CACAqS,MAAMwkB,EAAOwD,EAAMS,IACjB,OAAO1+B,KAAKumC,MAAM/nD,KAAKi8C,EAAK,IAAKj8C,KAAKi8C,EAAK,IAC7C,CACA+L,aAAa11C,EAAG2pC,EAAOwD,EAAMS,IAC3B,OAAO3M,EAAK0U,YAAYjoD,KAAKy3B,MAAMwkB,IAAS1I,EAAK0U,YAAY31C,EAAEmlB,MAAMwkB,GACvE,CACAuE,MAAMA,EAAOxO,GAEX,OADAuB,EAAKiN,MAAMxgD,KAAMwgD,EAAOxO,GAAUlE,EAAGG,KAAKjuC,KAAKoC,OAAQ,IAChDpC,IACT,CACAmvC,SAAS1X,EAAOua,EAAQiK,GAEtB,OADA1I,EAAKpE,SAASnvC,KAAMy3B,EAAOua,GAAUlE,EAAGG,KAAKjuC,KAAKoC,OAAQ,GAAI65C,GACvDj8C,IACT,CACA0vC,QAAQ8Q,EAAOxO,EAAQiK,GAErB,OADA1I,EAAK7D,QAAQ1vC,KAAMwgD,EAAOxO,GAAUlE,EAAGG,KAAKjuC,KAAKoC,OAAQ,GAAI65C,GACtDj8C,IACT,CACAkoD,UAAUx2C,EAAMuqC,GAEd,OADA1I,EAAK2U,UAAUloD,KAAM0R,EAAMuqC,GACpBj8C,IACT,CACAK,WACE,MAAO,MAAML,KAAKM,KAAK,QACzB,CACA+mD,UACE,MAAO,GAAG7mC,MAAM+iC,KAAKvjD,KACvB,CACAmoD,UACE,OAAO,IAAItY,EAAM/B,EAAGG,KAAKjuC,KAAKoC,QAASpC,KAAKi5C,QAC9C,CACAmP,UACE,OAAO,IAAIC,EAAMva,EAAGG,KAAKjuC,KAAKoC,QAASpC,KAAKi5C,QAC9C,GAEEpJ,EAAQ,cAAc7jC,MACxBtM,eAAe6S,GACb/Q,SAAS+Q,EACX,CACIH,SACF,OAAOpS,KAAK6mD,GACd,CACIz0C,OAAG6L,GACLje,KAAK6mD,IAAM5oC,CACb,CACIozB,SACF,OAAOrxC,KAAK,EACd,CACIsxC,SACF,OAAOtxC,KAAK,EACd,CACIqyC,SACF,OAAOryC,KAAK,EACd,CACIsoD,SACF,OAAOtoD,KAAK,EACd,CACIuoD,SACF,OAAOvoD,KAAKA,KAAKoC,OAAS,EAC5B,CACIomD,SACF,OAAOxoD,KAAKA,KAAKoC,OAAS,EAC5B,CACIqmD,SACF,OAAOzoD,KAAKA,KAAKoC,OAAS,EAC5B,CACIsmD,SACF,OAAO1oD,KAAKA,KAAKoC,OAAS,EAC5B,CACA62C,QACE,IAAI1E,EAAQ,IAAI1E,EAChB,IAAK,IAAIxtC,EAAI,EAAGwrC,EAAM7tC,KAAKoC,OAAQC,EAAIwrC,EAAKxrC,IAC1CkyC,EAAMzuC,KAAK9F,KAAKqC,GAAG42C,SAErB,OAAO1E,CACT,CACA1wC,iBAAiB8kD,GACf,IAAIr2B,EAAI,IAAIud,EACZ,IAAK,IAAI+Y,KAAMD,EAAM,CACnB,IAAIr2C,EAAIs2C,aAAc9a,EAAK8a,EAAK,IAAI9a,EAAG8a,GACvCt2B,EAAExsB,KAAKwM,EACT,CACA,OAAOggB,CACT,CACAzuB,mBAAmB8kD,GACjB,OAAO9Y,EAAMt6B,KAAKozC,EACpB,CACA7oD,MAAM+oD,EAAWnF,EAAQC,GAAW,GAElC,OADS5R,EAAKjyC,MAAME,KAAM6oD,EAAWnF,EAAQC,EAE/C,CACAmF,OAAO5U,EAAKryC,EAAQ,GAElB,OADAguC,EAAMyT,UAAUztC,OAAOsuC,MAAMnkD,KAAM,CAAC6B,EAAO,KAAMqyC,IAC1Cl0C,IACT,CACA2H,OAAO9F,EAAQ,EAAGknD,EAAQ,GACxB,IAAIjX,EAAQjwC,EAAQ,EAAI,EAAS,EAARA,EAAa,EAAGknD,GAAS,CAAClnD,EAAOknD,GAC1D,OAAOlZ,EAAMyT,UAAUztC,OAAOsuC,MAAMnkD,KAAM8xC,EAC5C,CACA2I,SAASuO,EAAkB,EAAGtF,EAAS,EAAGC,GAAW,GACnD,OAAO3jD,KAAKF,MAAMkpD,EAAiBtF,EAAQC,EAC7C,CACArc,QACE,OAAOtnC,KAAKy6C,SAAS,EAAG,EAC1B,CACAN,WACE,OAAO5G,EAAK4G,SAASn6C,KACvB,CACAi1C,cACE,OAAO1B,EAAK0B,YAAYj1C,KAC1B,CACAipD,SAASjJ,EAAY,GACnBzM,EAAKvB,OAAOhyC,KAAMggD,EAAW,KAC/B,CACAkJ,WAAWlJ,EAAY,GACrBzM,EAAKvB,OAAOhyC,KAAMggD,EAAW,OAC/B,CACAr7B,GAAG2pB,GACD,IAAI2Y,EAAOjnD,KACX,MAAO,IAAIwD,IACF8qC,EAAG2Y,KAASzjD,EAEvB,CACAukB,IAAIm/B,GACF,IAAIC,EAAO,GACX,IAAK,IAAI9kD,EAAI,EAAGwrC,EAAMqZ,EAAI9kD,OAAQC,EAAIwrC,EAAKxrC,IACzC8kD,EAAKrhD,KAAK9F,KAAK2kB,GAAGuiC,EAAI7kD,KAExB,OAAO8kD,CACT,CACA5R,YAAYpmC,GACVA,EAAIooC,EAAI4R,MAAMh6C,EAAG,EAAG,GACpB,IAAIi6C,EAAQppD,KAAKoC,OAAS,EACtBinD,EAAK,GAAKrpD,KAAKoC,OAAS,GACxBknD,EAAM9nC,KAAK0P,MAAM/hB,EAAIk6C,GACzB,OAAO9V,EAAKgC,YAAYv1C,KAAKspD,GAAMtpD,KAAKwhB,KAAKD,IAAIvhB,KAAKoC,OAAS,EAAGknD,EAAM,KAAMn6C,EAAIm6C,EAAMD,GAAMD,EAChG,CACAG,UAAUh3C,GACR,OAAOvS,KAAK0H,OAAO6K,EACrB,CACAi3C,UAAUj3C,GACR,IAAI9P,EAAI,IAAIqrC,EAAGiE,EAAK2U,QAAQn0C,IAAOqiC,SAAS50C,KAAK,IAEjD,OADAA,KAAKupD,OAAO9mD,GACLzC,IACT,CACAwgD,MAAMA,EAAOxO,GACX,IAAK,IAAI3vC,EAAI,EAAGwrC,EAAM7tC,KAAKoC,OAAQC,EAAIwrC,EAAKxrC,IAC1CkxC,EAAKiN,MAAMxgD,KAAKqC,GAAIm+C,EAAOxO,GAAUhyC,KAAK,IAE5C,OAAOA,IACT,CACAmvC,SAAS1X,EAAOua,EAAQiK,GACtB,IAAK,IAAI55C,EAAI,EAAGwrC,EAAM7tC,KAAKoC,OAAQC,EAAIwrC,EAAKxrC,IAC1CkxC,EAAKpE,SAASnvC,KAAKqC,GAAIo1B,EAAOua,GAAUhyC,KAAK,GAAIi8C,GAEnD,OAAOj8C,IACT,CACA0vC,QAAQ8Q,EAAOxO,EAAQiK,GACrB,IAAK,IAAI55C,EAAI,EAAGwrC,EAAM7tC,KAAKoC,OAAQC,EAAIwrC,EAAKxrC,IAC1CkxC,EAAK7D,QAAQ1vC,KAAKqC,GAAIm+C,EAAOxO,GAAUhyC,KAAK,GAAIi8C,GAElD,OAAOj8C,IACT,CACAkoD,UAAUx2C,EAAMuqC,GACd,IAAK,IAAI55C,EAAI,EAAGwrC,EAAM7tC,KAAKoC,OAAQC,EAAIwrC,EAAKxrC,IAC1CkxC,EAAK2U,UAAUloD,KAAKqC,GAAIqP,EAAMuqC,GAEhC,OAAOj8C,IACT,CACAypD,gBAAgBC,EAAKC,GAAO,GAC1B,OAAO3pD,KAAK46C,MAAK,CAACxiC,EAAGU,IAAM6wC,EAAO7wC,EAAE4wC,GAAOtxC,EAAEsxC,GAAOtxC,EAAEsxC,GAAO5wC,EAAE4wC,IACjE,CACAE,UAAUC,KAASt3C,GACjB,IAAKvS,KAAK,GAAG6pD,GAEX,OADA9X,EAAKvlC,KAAK,GAAGq9C,6BACN7pD,KAET,IAAK,IAAIqC,EAAI,EAAGwrC,EAAM7tC,KAAKoC,OAAQC,EAAIwrC,EAAKxrC,IAC1CrC,KAAKqC,GAAKrC,KAAKqC,GAAGwnD,MAASt3C,GAE7B,OAAOvS,IACT,CACA0H,OAAO6K,GACL,OAAOvS,KAAK4pD,UAAU,SAAUr3C,EAClC,CACAqiC,YAAYriC,GACV,OAAOvS,KAAK4pD,UAAU,cAAer3C,EACvC,CACA28B,YAAY38B,GACV,OAAOvS,KAAK4pD,UAAU,cAAer3C,EACvC,CACA27B,UAAU37B,GACR,OAAOvS,KAAK4pD,UAAU,YAAar3C,EACrC,CACAu3C,WAAWx3B,GACT,OAAOic,EAAI7mC,IAAI1H,KAAMsyB,EACvB,CACAy3B,gBAAgBz3B,EAAG0d,GAAa,EAAOC,GAAc,GACnD,OAAO1B,EAAIW,SAASlvC,KAAMsyB,EAAG0d,EAAYC,EAC3C,CACAS,SAAS7uC,EAAO2uC,GAAe,GAC7B,OAAOjC,EAAImC,SAAS1wC,KAAM6B,EAAO2uC,EACnC,CACAwZ,KAAKxZ,EAAuBC,GAAa,GACvC,OAAOlC,EAAIoC,IAAI3wC,KAAMwwC,EAAcC,EACrC,CACA2X,UACE,OAAOC,EAAM4B,UAAUjqD,KACzB,CACAK,WACE,MAAO,UAAYL,KAAKoK,QAAO,CAACkI,EAAGqM,IAAMrM,EAAIqM,EAAEte,WAAa,KAAK,IAAM,IACzE,GAEEgoD,EAAQ,cAAcxY,EACxBnwC,eAAe6S,GACb/Q,SAAS+Q,GACTvS,KAAKm3C,QAAU,IAAIrJ,EACnB9tC,KAAKkqD,MAAQ,IAAIpc,EACjB9tC,KAAKmqD,SAAW,IAAIrc,EACpB9tC,KAAKoqD,aAAe,IAAItc,EACxB9tC,KAAKqqD,SAAU,EACfrqD,KAAKsqD,MACP,CACAzmD,wBAAwBwmB,GACtB,IAAIvR,EAAI,IAAIuvC,EAAM,IAAIva,EAAGzjB,EAAK5F,MAAQ,EAAG4F,EAAKQ,KAAO,GAAI,IAAIijB,EAAGzjB,EAAK3F,OAAS,EAAG2F,EAAKk4B,QAAU,IAGhG,OAFIl4B,EAAKsB,OAAStB,EAAKxW,SACrBiF,EAAE08B,KAAO,IAAI1H,EAAGzjB,EAAKsB,MAAOtB,EAAKxW,SAC5BiF,CACT,CACAjV,iBAAiByuB,GACf,IAAIi4B,EAAKxY,EAAKK,YAAY9f,GAC1B,GAAIi4B,EAAGnoD,OAAS,EACd,MAAM,IAAI+B,MAAM,8DAClB,OAAO,IAAIkkD,EAAMkC,EAAG,GAAIA,EAAGA,EAAGnoD,OAAS,GACzC,CACAkoD,OAKE,GAJItqD,KAAKqxC,KACPrxC,KAAKkqD,MAAQlqD,KAAKqxC,GAAG4H,QACrBj5C,KAAKqqD,SAAU,GAEbrqD,KAAKqxC,IAAMrxC,KAAKsxC,GAAI,CACtB,IAAIl5B,EAAIpY,KAAKqxC,GACTv4B,EAAI9Y,KAAKsxC,GACbtxC,KAAKk2C,QAAU99B,EAAE49B,KAAKl9B,GACtB9Y,KAAKoqD,aAAehyC,EAAE69B,KAAKn9B,GAC3B9Y,KAAKwqD,cACLxqD,KAAKqqD,SAAU,CACjB,CACF,CACApR,QACE,OAAO,IAAIoP,EAAMroD,KAAKmqD,SAASlR,QAASj5C,KAAKoqD,aAAanR,QAC5D,CACAuR,cACExqD,KAAKkqD,MAAQlqD,KAAKoqD,aAAa7X,UAAUvyC,KAAKmqD,UAAUl5B,MACxDjxB,KAAKyqD,eACP,CACAA,gBACEzqD,KAAKm3C,QAAUn3C,KAAKkqD,MAAM9Z,UAAU,IAAK1oC,IAAI1H,KAAKmqD,SACpD,CACAO,oBACE1qD,KAAKoqD,aAAepqD,KAAKmqD,SAASpa,KAAK/vC,KAAKkqD,OAC5ClqD,KAAKyqD,eACP,CACAE,uBACE3qD,KAAKmqD,SAAWnqD,KAAKoqD,aAAa7X,UAAUvyC,KAAKkqD,OACjDlqD,KAAKyqD,eACP,CACAG,uBACE,IAAItU,EAAOt2C,KAAKkqD,MAAM9Z,UAAU,IAChCpwC,KAAKmqD,SAAWnqD,KAAKm3C,QAAQ5E,UAAU+D,GACvCt2C,KAAKoqD,aAAepqD,KAAKm3C,QAAQpH,KAAKuG,EACxC,CACId,WACF,OAAO,IAAI1H,EAAG9tC,KAAKkqD,MACrB,CACI1U,SAAKljC,GACPtS,KAAKkqD,MAAQ,IAAIpc,EAAGx7B,GACpBtS,KAAK0qD,mBACP,CACIrU,aACF,OAAO,IAAIvI,EAAG9tC,KAAKm3C,QACrB,CACId,WAAO/jC,GACTtS,KAAKm3C,QAAU,IAAIrJ,EAAGx7B,GACtBtS,KAAK4qD,sBACP,CACI1U,cACF,OAAO,IAAIpI,EAAG9tC,KAAKmqD,SACrB,CACIjU,YAAQ5jC,GACVtS,KAAKmqD,SAAW,IAAIrc,EAAGx7B,GACvBtS,KAAK,GAAKA,KAAKmqD,SACfnqD,KAAKwqD,aACP,CACIK,kBACF,OAAO,IAAI/c,EAAG9tC,KAAKoqD,aACrB,CACIS,gBAAYv4C,GACdtS,KAAKoqD,aAAe,IAAItc,EAAGx7B,GAC3BtS,KAAK,GAAKA,KAAKoqD,aACfpqD,KAAKwqD,aACP,CACI7+B,YACF,OAAO3rB,KAAKkqD,MAAM9nD,OAAS,EAAIpC,KAAKkqD,MAAM3/B,EAAI,CAChD,CACIoB,UAAMma,GACR9lC,KAAKkqD,MAAM3/B,EAAIub,EACf9lC,KAAK0qD,mBACP,CACI72C,aACF,OAAO7T,KAAKkqD,MAAM9nD,OAAS,EAAIpC,KAAKkqD,MAAMx/B,EAAI,CAChD,CACI7W,WAAOK,GACTlU,KAAKkqD,MAAMx/B,EAAIxW,EACflU,KAAK0qD,mBACP,CACII,YACF,OAAO9qD,KAAKkqD,MAAM9nD,OAAS,EAAIpC,KAAKkqD,MAAM7kB,EAAI,CAChD,CACIylB,UAAMroD,GACRzC,KAAKkqD,MAAM7kB,EAAI5iC,EACfzC,KAAK0qD,mBACP,CACIngC,QACF,OAAOvqB,KAAKk2C,QAAQ3rB,CACtB,CACIG,QACF,OAAO1qB,KAAKk2C,QAAQxrB,CACtB,CACI2a,QACF,OAAOrlC,KAAKk2C,QAAQ7Q,CACtB,CACI0lB,aACF,OAAO/qD,KAAKqqD,OACd,CACAW,SAIE,OAHAhrD,KAAKmqD,SAAWnqD,KAAK,GACrBA,KAAKoqD,aAAepqD,KAAK,GACzBA,KAAKwqD,cACExqD,IACT,GAIEirD,EACS,YADTA,EAEM,SAFNA,EAGO,UAIPC,EAAmB,CACrBC,GAAI,KACJC,KAAM,OACNC,KAAM,OACNC,KAAM,OACNC,OAAQ,SACRC,KAAM,OACNC,OAAQ,SACRC,KAAM,OACNC,IAAK,MACLC,MAAO,QACPC,MAAO,QACPjG,MAAO,QACPkG,QAAS,UACTC,MAAO,QACPC,YAAa,cACbC,IAAK,OAEHC,EAAM,MACRxsD,YAAY60C,EAAO4X,EAAOC,EAAS,CAAC,EAAGh6C,GACrCpS,KAAKqsD,OAAyB,IAAIpvC,IAClCjd,KAAKssD,OAASzc,EAAM0c,UAAUhY,GAC9Bv0C,KAAKwsD,OAASL,EACdnsD,KAAK6mD,SAAa,IAAPz0C,EAAgB,MAAM85C,EAAIO,WAAer6C,EACpDpS,KAAK0sD,QAAUN,EACfpsD,KAAK2sD,SAAW,CAAC,CACnB,CACA9oD,qBAAqB0wC,EAAO6X,EAAQh6C,GAClC,OAAO,IAAIpS,KAAKu0C,EAAO0W,EAAmBmB,EAAQh6C,EACpD,CACAvO,kBAAkB0wC,EAAO6X,EAAQh6C,GAC/B,OAAO,IAAIpS,KAAKu0C,EAAO0W,EAAgBmB,EAAQh6C,EACjD,CACAvO,mBAAmB0wC,EAAO6X,EAAQh6C,GAChC,OAAO,IAAIpS,KAAKu0C,EAAO0W,EAAiBmB,EAAQh6C,EAClD,CACAvO,cAAc+oD,EAAIR,EAAQh6C,GACxB,OAAO,IAAIpS,KAAK4sD,EAAGrY,MAAOqY,EAAGT,MAAOC,GAAUQ,EAAGF,QAASt6C,EAC5D,CACIA,SACF,OAAOpS,KAAK6mD,GACd,CACIz0C,OAAG3P,GACLzC,KAAK6mD,IAAMpkD,CACb,CACI8xC,YACF,OAAOv0C,KAAKssD,MACd,CACI/X,UAAM9xC,GACRzC,KAAKssD,OAAS7pD,CAChB,CACI0pD,YACF,OAAOnsD,KAAKwsD,MACd,CACIL,UAAM1pD,GACRzC,KAAKwsD,OAAS/pD,CAChB,CACAoqD,MAAMrqD,EAAKnB,GACT,OAAKmB,OAES,IAAVnB,GACFrB,KAAK0sD,QAAQlqD,GAAOnB,EACbrB,MAEFA,KAAK0sD,QAAQlqD,GALX,IAMX,CACA6C,GAAGvB,EAAMwqC,GAGP,OAFKtuC,KAAK2sD,SAAS7oD,KACjB9D,KAAK2sD,SAAS7oD,GAAQ,IACjBooD,EAAIY,YAAY9sD,KAAK2sD,SAAS7oD,GAAOwqC,EAC9C,CACAvoC,IAAIjC,EAAM43C,GACR,QAAK17C,KAAK2sD,SAAS7oD,UAEL,IAAV43C,UACK17C,KAAK2sD,SAAS7oD,IACd,GAEAooD,EAAIa,eAAe/sD,KAAK2sD,SAAS7oD,GAAO43C,GAEnD,CACAsR,OAAOlpD,EAAMwO,EAAG26C,GACd,QAA4B,IAAxBjtD,KAAK2sD,SAAS7oD,GAAkB,CAClC,GAAI9D,KAAKktD,QAAQ56C,IAAMtG,MAAMuJ,KAAKvV,KAAKqsD,OAAOhrC,UAAUrL,QAAQlS,IAAS,EAEvE,OADAooD,EAAIiB,SAASntD,KAAK2sD,SAAS7oD,GAAO9D,KAAMsS,EAAGxO,EAAMmpD,IAC1C,EACF,GAAIjtD,KAAK2sD,SAAS,IAEvB,OADAT,EAAIiB,SAASntD,KAAK2sD,SAAS,IAAQ3sD,KAAMsS,EAAGxO,EAAMmpD,IAC3C,CAEX,CACA,OAAO,CACT,CACAG,KAAKtpD,GACH,IAAIupD,EAAS7rC,KAAKF,IAAI,KAAMtV,MAAMuJ,KAAKvV,KAAKqsD,OAAOliD,SAAW,EAE9D,OADAnK,KAAKqsD,OAAOtrD,IAAIssD,EAAQvpD,GACjBupD,CACT,CACAC,OAAO9qD,QACO,IAARA,EACFxC,KAAKqsD,OAAOp2C,OAAOzT,GAEnBxC,KAAKqsD,OAAOkB,OAEhB,CACA1pD,aAAa2pD,EAAK1pD,EAAMwO,EAAG26C,GACzB,IAAK,IAAI5qD,EAAI,EAAGwrC,EAAM2f,EAAIprD,OAAQC,EAAIwrC,EAAKxrC,IACzCmrD,EAAInrD,GAAG2qD,OAAOlpD,EAAMwO,EAAG26C,EAE3B,CACAQ,OAAOnf,GACLA,EAAGtuC,KAAKssD,OAAQtsD,KAAK0sD,QACvB,CACArsD,WACE,MAAO,MAAML,KAAKu0C,MAAMl0C,UAC1B,CACA6sD,QAAQ56C,GACN,IAAIg8B,EAAK,KACT,GAAItuC,KAAKwsD,SAAWvB,EAClB3c,EAAK6G,EAAU3B,iBACV,GAAIxzC,KAAKwsD,SAAWvB,EACzB3c,EAAKkI,EAAOhD,gBACP,IAAIxzC,KAAKwsD,SAAWvB,EAGzB,OAAO,EAFP3c,EAAKgL,EAAQoU,iBAED,CAEd,OAAOpf,EAAGtuC,KAAKssD,OAAQh6C,EACzB,CACAzO,gBAAgBqjD,EAAK/lD,EAAQyvC,EAAI9sC,EAAMmpD,GACrC,GAAI/F,EACF,IAAK,IAAI7kD,EAAI,EAAGwrC,EAAMqZ,EAAI9kD,OAAQC,EAAIwrC,EAAKxrC,IACrC6kD,EAAI7kD,IACN6kD,EAAI7kD,GAAGlB,EAAQyvC,EAAI9sC,EAAMmpD,EAGjC,CACAppD,mBAAmBqjD,EAAK5Y,GACtB,OAAIA,GACF4Y,EAAIphD,KAAKwoC,GACF4Y,EAAI9kD,OAAS,IAEb,CAEX,CACAyB,sBAAsBqjD,EAAKrlD,GACzB,GAAIA,GAAS,GAAKA,EAAQqlD,EAAI9kD,OAAQ,CACpC,IAAIkiD,EAAO4C,EAAI9kD,OAEf,OADA8kD,EAAIrxC,OAAOhU,EAAO,GACXyiD,EAAO4C,EAAI9kD,MACpB,CACE,OAAO,CAEX,GAEEurD,EAAKzB,EACTyB,EAAGlB,SAAW,EACd,IA+HImB,EAAQ,MACVluD,cACEM,KAAKoS,GAAK,QACVpS,KAAK6tD,MAAQ,IAAIxF,EACjBroD,KAAK8tD,MAAQ,CAAEz0B,KAAM,EAAG00B,KAAM,EAAGC,KAAK,EAAIzsC,IAAK,GAC/CvhB,KAAKiuD,QAAU,CAAC,EAChBjuD,KAAKkuD,YAAc,EACnBluD,KAAKmuD,SAAU,EACfnuD,KAAKouD,QAAS,EACdpuD,KAAKquD,cAAW,EAChBruD,KAAKsuD,SAAW,IAAIxgB,EACpB9tC,KAAKuuD,UAAW,EAChBvuD,KAAKwuD,UAAW,CAClB,CACAl4C,QAAQwC,GAEN,OADA9Y,KAAKquD,SAAWv1C,EACT9Y,IACT,CACAyuD,aAAap6B,EAAK,GAChBr0B,KAAK8tD,MAAMvsC,IAAM8S,CACnB,CACA3sB,IAAI4K,GACF,IAAIo8C,EAAqB,mBAALp8C,EAAkB,CAAEq8C,QAASr8C,GAAMA,EACnD4kC,EAAIl3C,KAAKkuD,cACTU,EAAM5uD,KAAKoS,GAAK8kC,EAOpB,OANAl3C,KAAKiuD,QAAQW,GAAOF,EACpBA,EAAOG,UAAYD,EACfF,EAAOI,QAAU9uD,KAAK6tD,MAAM9C,QAC9B2D,EAAOI,OAAO9uD,KAAK6tD,YACC,IAAlB7tD,KAAKquD,WACPruD,KAAKquD,UAAW,GACXruD,IACT,CACA2H,OAAO+mD,GAEL,cADO1uD,KAAKiuD,QAAQS,EAAOG,WACpB7uD,IACT,CACA+uD,YAEE,OADA/uD,KAAKiuD,QAAU,CAAC,EACTjuD,IACT,CACAgvD,KAAKC,EAAO,GACV,GAAa,IAATA,IAA+B,IAAjBjvD,KAAKmuD,QAAvB,CAIA,GADAnuD,KAAKmuD,QAAUe,sBAAsBlvD,KAAKgvD,KAAKvpD,KAAKzF,OAChDA,KAAKouD,OACP,OAAOpuD,KAET,GADAA,KAAK8tD,MAAMC,KAAOkB,EAAOjvD,KAAK8tD,MAAMz0B,KAChCr5B,KAAK8tD,MAAMC,KAAO/tD,KAAK8tD,MAAMvsC,IAC/B,OAAOvhB,KACTA,KAAK8tD,MAAMz0B,KAAO41B,EAClB,IACEjvD,KAAKmvD,UAAUF,EACjB,CAAE,MAAOG,GAIP,MAHAC,qBAAqBrvD,KAAKmuD,SAC1BnuD,KAAKmuD,SAAU,EACfnuD,KAAKwuD,UAAW,EACVY,CACR,CACA,OAAOpvD,IAjBL,CAkBJ,CACAsvD,SACEtvD,KAAK8tD,MAAME,KAAM,EACjBhuD,KAAKgvD,MACP,CACAG,UAAUF,GAIR,GAHAjvD,KAAKwuD,UAAW,EACZxuD,KAAKquD,UACPruD,KAAKutD,QACHvtD,KAAKuuD,SACP,IAAK,IAAIrX,KAAKl3C,KAAKiuD,QACbjuD,KAAKiuD,QAAQ/W,GAAGyX,SAClB3uD,KAAKiuD,QAAQ/W,GAAGyX,QAAQM,EAAMjvD,KAAK8tD,MAAMC,KAAM/tD,MAGjDA,KAAK8tD,MAAME,KAAO,GAAKiB,EAAOjvD,KAAK8tD,MAAME,MAC3CqB,qBAAqBrvD,KAAKmuD,SAC1BnuD,KAAKmuD,SAAU,EACfnuD,KAAKwuD,UAAW,EAEpB,CACAe,MAAMC,GAAS,GAEb,OADAxvD,KAAKouD,QAASoB,IAAUxvD,KAAKouD,OACtBpuD,IACT,CACAyvD,SAEE,OADAzvD,KAAKouD,QAAS,EACPpuD,IACT,CACA0vD,KAAKvgD,EAAI,GAEP,OADAnP,KAAK8tD,MAAME,IAAM7+C,EACVnP,IACT,CACA2vD,SAASC,EAAW,GAGlB,OAFA5vD,KAAKgvD,OACLhvD,KAAK0vD,KAAKE,GACH5vD,IACT,CACAytD,OAAOvqD,GAGL,OAFIlD,KAAK6vD,aACP7vD,KAAK6vD,YAAY3sD,EAASlD,MACrBA,IACT,CACI8vD,oBAAgB3X,GAClBn4C,KAAK6vD,YAAc1X,CACrB,CACI2X,sBACF,OAAO9vD,KAAK6vD,WACd,CACIE,gBACF,OAAO/vD,KAAKwuD,QACd,CACIwB,iBACF,OAAOhwD,KAAK6tD,MAAM5U,OACpB,CACIgX,iBACF,OAAO,IAAI5H,EAAMva,EAAGG,KAAKjuC,KAAKw1C,KAAKpzC,OAAQ,GAAIpC,KAAKw1C,KAAKyD,QAC3D,CACIzD,WACF,OAAOx1C,KAAK6tD,MAAMrY,KAAKyD,OACzB,CACI5C,aACF,OAAOr2C,KAAKw1C,KAAKtH,OAAO,EAC1B,CACIviB,YACF,OAAO3rB,KAAK6tD,MAAMliC,KACpB,CACI9X,aACF,OAAO7T,KAAK6tD,MAAMh6C,MACpB,GAEEq8C,EAAkB,cAActC,EAClCluD,cACE8B,SAAS2uD,WACTnwD,KAAKowD,UAAW,EAChBpwD,KAAKqwD,UAAW,EAChBrwD,KAAKswD,WAAY,EACjBtwD,KAAKuwD,WAAY,EACjBvwD,KAAKwwD,cAAe,CACtB,CACIC,cACF,IAAIn+C,EAAItS,KAAKsuD,SAASrV,QAEtB,OADA3mC,EAAEF,GAAKpS,KAAKsuD,SAASl8C,GACdE,CACT,CACAo+C,WAAWzD,EAAK/+C,EAAU1E,EAAU,CAAC,EAAGmnD,IACvBA,GAA8B3wD,KAAK4wD,SAC3CjoD,iBAAiBskD,EAAK/+C,EAAU1E,EACzC,CACAqnD,aAAa5D,EAAK/+C,EAAU1E,EAAU,CAAC,EAAGmnD,IACzBA,GAA8B3wD,KAAK4wD,SAC3C5kC,oBAAoBihC,EAAK/+C,EAAU1E,EAC5C,CACAsnD,QAAQ7D,EAAK/+C,EAAU1E,EAAU,CAAC,GAC5BmG,UACFA,SAAShH,iBAAiBskD,EAAK/+C,EAAU1E,EAE7C,CACAunD,UAAU9D,EAAK/+C,EAAU1E,EAAU,CAAC,GAC9BmG,UACFA,SAASqc,oBAAoBihC,EAAK/+C,EAAU1E,EAEhD,CACAwnD,UAAUvrD,GAAO,EAAMkrD,GA2BrB,OA1BIlrD,GACFzF,KAAKixD,WAAajxD,KAAKixD,WAAWxrD,KAAKzF,MACvCA,KAAKkxD,SAAWlxD,KAAKkxD,SAASzrD,KAAKzF,MACnCA,KAAKmxD,WAAanxD,KAAKmxD,WAAW1rD,KAAKzF,MACvCA,KAAKoxD,UAAYpxD,KAAKoxD,UAAU3rD,KAAKzF,MACrCA,KAAKqxD,WAAarxD,KAAKqxD,WAAW5rD,KAAKzF,MACvCA,KAAKsxD,YAActxD,KAAKsxD,YAAY7rD,KAAKzF,MACzCA,KAAKuxD,aAAevxD,KAAKuxD,aAAa9rD,KAAKzF,MAC3CA,KAAK0wD,WAAW,YAAa1wD,KAAKixD,WAAY,CAAC,EAAGN,GAClD3wD,KAAK0wD,WAAW,UAAW1wD,KAAKkxD,SAAU,CAAC,EAAGP,GAC9C3wD,KAAK0wD,WAAW,YAAa1wD,KAAKmxD,WAAY,CAAC,EAAGR,GAClD3wD,KAAK0wD,WAAW,WAAY1wD,KAAKoxD,UAAW,CAAC,EAAGT,GAChD3wD,KAAK0wD,WAAW,YAAa1wD,KAAKqxD,WAAY,CAAC,EAAGV,GAClD3wD,KAAK0wD,WAAW,QAAS1wD,KAAKsxD,YAAa,CAAC,EAAGX,GAC/C3wD,KAAK0wD,WAAW,cAAe1wD,KAAKuxD,aAAc,CAAC,EAAGZ,GACtD3wD,KAAKswD,WAAY,IAEjBtwD,KAAK6wD,aAAa,YAAa7wD,KAAKixD,WAAY,CAAC,EAAGN,GACpD3wD,KAAK6wD,aAAa,UAAW7wD,KAAKkxD,SAAU,CAAC,EAAGP,GAChD3wD,KAAK6wD,aAAa,YAAa7wD,KAAKmxD,WAAY,CAAC,EAAGR,GACpD3wD,KAAK6wD,aAAa,WAAY7wD,KAAKoxD,UAAW,CAAC,EAAGT,GAClD3wD,KAAK6wD,aAAa,YAAa7wD,KAAKqxD,WAAY,CAAC,EAAGV,GACpD3wD,KAAK6wD,aAAa,QAAS7wD,KAAKsxD,YAAa,CAAC,EAAGX,GACjD3wD,KAAK6wD,aAAa,cAAe7wD,KAAKuxD,aAAc,CAAC,EAAGZ,GACxD3wD,KAAKswD,WAAY,GAEZtwD,IACT,CACAwxD,UAAU/rD,GAAO,EAAM8lB,GAAU,EAAOolC,GActC,OAbIlrD,GACFzF,KAAK0wD,WAAW,aAAc1wD,KAAKyxD,YAAYhsD,KAAKzF,MAAO,C,QAAEurB,GAAWolC,GACxE3wD,KAAK0wD,WAAW,WAAY1wD,KAAKkxD,SAASzrD,KAAKzF,MAAO,CAAC,EAAG2wD,GAC1D3wD,KAAK0wD,WAAW,YAAa1wD,KAAK0xD,WAAWjsD,KAAKzF,MAAO,C,QAAEurB,GAAWolC,GACtE3wD,KAAK0wD,WAAW,cAAe1wD,KAAKoxD,UAAU3rD,KAAKzF,MAAO,CAAC,EAAG2wD,GAC9D3wD,KAAKuwD,WAAY,IAEjBvwD,KAAK6wD,aAAa,aAAc7wD,KAAKyxD,YAAYhsD,KAAKzF,MAAO,C,QAAEurB,GAAWolC,GAC1E3wD,KAAK6wD,aAAa,WAAY7wD,KAAKkxD,SAASzrD,KAAKzF,MAAO,CAAC,EAAG2wD,GAC5D3wD,KAAK6wD,aAAa,YAAa7wD,KAAK0xD,WAAWjsD,KAAKzF,MAAO,C,QAAEurB,GAAWolC,GACxE3wD,KAAK6wD,aAAa,cAAe7wD,KAAKoxD,UAAU3rD,KAAKzF,MAAO,CAAC,EAAG2wD,GAChE3wD,KAAKuwD,WAAY,GAEZvwD,IACT,CACA2xD,aAAalsD,GAAO,GAYlB,OAXIA,GACFzF,KAAK4xD,aAAe5xD,KAAK6xD,SAASpsD,KAAKzF,MACvCA,KAAK8xD,WAAa9xD,KAAK+xD,OAAOtsD,KAAKzF,MACnCA,KAAK8wD,QAAQ,UAAW9wD,KAAK4xD,aAAc,CAAC,GAC5C5xD,KAAK8wD,QAAQ,QAAS9wD,KAAK8xD,WAAY,CAAC,GACxC9xD,KAAKwwD,cAAe,IAEpBxwD,KAAK+wD,UAAU,UAAW/wD,KAAK4xD,aAAc,CAAC,GAC9C5xD,KAAK+wD,UAAU,QAAS/wD,KAAK8xD,WAAY,CAAC,GAC1C9xD,KAAKwwD,cAAe,GAEfxwD,IACT,CACAgyD,gBAAgB/E,EAAKvR,EAAQ,WAC3B,IAAKuR,IAAQA,EAAIvR,GACf,MAAO,GACT,IAAIuB,EAAK,GACT,IAAK,IAAI56C,EAAI,EAAGA,EAAI4qD,EAAIvR,GAAOt5C,OAAQC,IAAK,CAC1C,IAAI8M,EAAI89C,EAAIvR,GAAO1wC,KAAK3I,GACxB46C,EAAGn3C,KAAK,IAAIgoC,EAAG3+B,EAAEqb,MAAQxqB,KAAK6tD,MAAM3X,QAAQ3rB,EAAGpb,EAAEwb,MAAQ3qB,KAAK6tD,MAAM3X,QAAQxrB,GAC9E,CACA,OAAOuyB,CACT,CACAgV,aAAanuD,EAAMmpD,GACjB,IAAKjtD,KAAK+vD,UACR,OACF,IAAIzrB,EAAK,EAAGC,EAAK,EACjB,GAAI0oB,aAAeiF,YACjB,IAAK,IAAIhb,KAAKl3C,KAAKiuD,QACjB,GAAIjuD,KAAKiuD,QAAQkE,eAAejb,GAAI,CAClC,IAAIn1C,EAAI/B,KAAKiuD,QAAQ/W,GACrB5S,EAAK2oB,EAAIziC,MAAQxqB,KAAKgwD,WAAWzlC,EACjCga,EAAK0oB,EAAItiC,MAAQ3qB,KAAKgwD,WAAWtlC,EAC7B3oB,EAAEqwD,QACJrwD,EAAEqwD,OAAOtuD,EAAMwgC,EAAIC,EAAI0oB,EAC3B,OAGF,IAAK,IAAI/V,KAAKl3C,KAAKiuD,QACjB,GAAIjuD,KAAKiuD,QAAQkE,eAAejb,GAAI,CAClC,IAAIn1C,EAAI/B,KAAKiuD,QAAQ/W,GACjBv4B,EAAIsuC,EAAIoF,gBAAkBpF,EAAIoF,eAAejwD,OAAS,EACtD6pB,EAAQghC,EAAIoF,eAAernD,KAAK,GACpCs5B,EAAK3lB,EAAIsN,EAAMzB,MAAQxqB,KAAKgwD,WAAWzlC,EAAI,EAC3Cga,EAAK5lB,EAAIsN,EAAMtB,MAAQ3qB,KAAKgwD,WAAWtlC,EAAI,EACvC3oB,EAAEqwD,QACJrwD,EAAEqwD,OAAOtuD,EAAMwgC,EAAIC,EAAI0oB,EAC3B,CAGAnpD,IACF9D,KAAKsuD,SAAS/5B,GAAG+P,EAAIC,GACrBvkC,KAAKsuD,SAASl8C,GAAKtO,EAEvB,CACAmtD,WAAWhE,GAGT,OAFAjtD,KAAKiyD,aAAa/G,EAAiBE,KAAM6B,GACzCjtD,KAAKowD,UAAW,GACT,CACT,CACAc,SAASjE,GAQP,OAPIjtD,KAAKqwD,SACPrwD,KAAKiyD,aAAa/G,EAAiBM,KAAMyB,GAEzCjtD,KAAKiyD,aAAa/G,EAAiBC,GAAI8B,GAEzCjtD,KAAKowD,UAAW,EAChBpwD,KAAKqwD,UAAW,GACT,CACT,CACAgB,WAAWpE,GAMT,OALAjtD,KAAKiyD,aAAa/G,EAAiBG,KAAM4B,GACrCjtD,KAAKowD,WACPpwD,KAAKqwD,UAAW,EAChBrwD,KAAKiyD,aAAa/G,EAAiBI,KAAM2B,KAEpC,CACT,CACAkE,WAAWlE,GAET,OADAjtD,KAAKiyD,aAAa/G,EAAiBQ,KAAMuB,IAClC,CACT,CACAmE,UAAUnE,GAKR,OAJAjtD,KAAKiyD,aAAa/G,EAAiBS,IAAKsB,GACpCjtD,KAAKqwD,UACPrwD,KAAKiyD,aAAa/G,EAAiBM,KAAMyB,GAC3CjtD,KAAKqwD,UAAW,GACT,CACT,CACAiB,YAAYrE,GAIV,OAHAjtD,KAAKiyD,aAAa/G,EAAiBtF,MAAOqH,GAC1CjtD,KAAKowD,UAAW,EAChBpwD,KAAKqwD,UAAW,GACT,CACT,CACAkB,aAAatE,GAEX,OADAjtD,KAAKiyD,aAAa/G,EAAiBc,YAAaiB,IACzC,CACT,CACAyE,WAAWzE,GAGT,OAFAjtD,KAAKqxD,WAAWpE,GAChBA,EAAIphC,kBACG,CACT,CACA4lC,YAAYxE,GAGV,OAFAjtD,KAAKixD,WAAWhE,GAChBA,EAAIphC,kBACG,CACT,CACAgmC,SAAS5E,GAEP,OADAjtD,KAAKsyD,gBAAgBpH,EAAiBY,QAASmB,IACxC,CACT,CACA8E,OAAO9E,GAEL,OADAjtD,KAAKsyD,gBAAgBpH,EAAiBa,MAAOkB,IACtC,CACT,CACAqF,gBAAgBxuD,EAAMmpD,GACpB,GAAKjtD,KAAK+vD,UAEV,IAAK,IAAI7Y,KAAKl3C,KAAKiuD,QACjB,GAAIjuD,KAAKiuD,QAAQkE,eAAejb,GAAI,CAClC,IAAIn1C,EAAI/B,KAAKiuD,QAAQ/W,GACjBn1C,EAAEqwD,QACJrwD,EAAEqwD,OAAOtuD,EAAMmpD,EAAIpjC,SAAW,EAAI,EAAGojC,EAAIrjC,OAAS,EAAI,EAAGqjC,EAC7D,CAEJ,GAIEsF,EAAO,MACT7yD,cACEM,KAAKwyD,QAAS,CAChB,CACIC,YACF,OAAOzyD,KAAKwyD,MACd,GAEEE,EAAa,cAAcH,EAC7B7yD,cACE8B,SAAS2uD,WACTnwD,KAAK2yD,SAAU,EACf3yD,KAAK4yD,UAAW,EAChB5yD,KAAK6yD,MAAQ,IAAIC,EAAK,GAAI,aAC5B,CACIC,aACF,OAAO/yD,KAAK2yD,OACd,CACII,WAAOj6C,GACT9Y,KAAK2yD,QAAU75C,CACjB,CACIk6C,cACF,OAAOhzD,KAAK4yD,QACd,CACII,YAAQl6C,GACV9Y,KAAK4yD,SAAW95C,CAClB,CACIm6C,kBACF,OAAOjzD,KAAK6yD,KACd,CACAK,UAAUC,EAAQhH,KAAUiH,GAC1B,IAAKD,EACH,OAAOnzD,KACT,IAAK,IAAIqC,EAAI,EAAGwrC,EAAMslB,EAAO/wD,OAAQC,EAAIwrC,EAAKxrC,IAC5CrC,KAAKmsD,GAAOgH,EAAO9wD,MAAO+wD,GAE5B,OAAOpzD,IACT,CACA0zB,MAAMtb,GACJ,OAAOpY,IACT,CACAm+C,KAAKx/B,GACH,OAAO3e,IACT,CACAqzD,SAAS10C,GAEP,OADA3e,KAAKszD,QAAO,GACLtzD,KAAKm+C,KAAKx/B,EACnB,CACA20C,OAAO30C,EAAGgN,EAAO4nC,EAAUC,GACzB,OAAOxzD,IACT,CACAyzD,WAAW90C,EAAGgN,EAAO4nC,EAAUC,GAE7B,OADAxzD,KAAKm+C,MAAK,GACHn+C,KAAKszD,OAAO30C,EAAGgN,EAAO4nC,EAAUC,EACzC,CACAtrB,OAAOgM,EAAK+D,EAAQkU,GAClB,GAAKjY,EAAL,CAEA,IAAK,IAAI7xC,EAAI,EAAGwrC,EAAMqG,EAAI9xC,OAAQC,EAAIwrC,EAAKxrC,IACzCrC,KAAK4rB,MAAMsoB,EAAI7xC,GAAI41C,EAAQkU,GAE7B,OAAOnsD,IAJL,CAKJ,CACA0zD,QAAQP,GACN,OAAOnzD,KAAKkzD,UAAUC,EAAQ,SAChC,CACAQ,QAAQR,GACN,OAAOnzD,KAAKkzD,UAAUC,EAAQ,SAChC,CACA7rB,MAAM6rB,GACJ,OAAOnzD,KAAKkzD,UAAUC,EAAQ,OAChC,CACAS,SAAST,GACP,OAAOnzD,KAAKkzD,UAAUC,EAAQ,UAChC,CACArc,MAAMqc,GACJ,OAAOnzD,KAAKkzD,UAAUC,EAAQ,OAChC,GAEEL,EAAO,MACTpzD,YAAY81C,EAAO,GAAIqe,EAAO,aAAcC,EAAS,GAAI1kD,EAAQ,GAAI2kD,EAAa,KAChF/zD,KAAKw1C,KAAOA,EACZx1C,KAAK6zD,KAAOA,EACZ7zD,KAAKoP,MAAQA,EACbpP,KAAK8zD,OAASA,EACd9zD,KAAK+zD,WAAaA,CACpB,CACI1yD,YACF,MAAO,GAAGrB,KAAKoP,SAASpP,KAAK8zD,UAAU9zD,KAAKw1C,UAAUx1C,KAAK+zD,cAAc/zD,KAAK6zD,MAChF,CACAxzD,WACE,OAAOL,KAAKqB,KACd,GAIE2yD,EAAa,MACfnwD,0BAA0ByqC,EAAI2lB,EAAU,CAAC,IAAK,IAAK,KAAMC,EAAe,CAAC,IAAM,GAAK,MAClF,IAAI9uC,EAAI6uC,EAAQxiD,IAAI68B,GAChB2X,EAAM,IAAInY,EAAGomB,GAAc7tC,IAAIjB,GACnC,OAAQ+uC,GAAQA,EAAI/xD,OAAS6jD,CAC/B,CACApiD,gBAAgByqC,EAAI6lB,EAAKxoC,EAAOyoC,EAAO,IACrC,IAAIC,EAAO7yC,KAAK0P,MAAMijC,EAAI/xD,OAASof,KAAKD,IAAI,EAAGoK,EAAQ2iB,EAAG6lB,KAC1D,OAAIE,EAAOF,EAAI/xD,QACbiyD,EAAO7yC,KAAKF,IAAI,EAAG+yC,EAAOD,EAAKhyD,QACxB,CAAC+xD,EAAI9uC,OAAO,EAAGgvC,GAAQD,EAAMC,IAE7B,CAACF,EAAKA,EAAI/xD,OAErB,CACAyB,qBAAqBmxC,EAAKoC,EAAQ,EAAGkd,GAAW,GAC9C,IAAIzG,EAAQxF,EAAM4B,UAAUjV,GACxB9gC,EAAIogD,EAAWzG,EAAMh6C,OAASg6C,EAAMliC,MACpCwsB,EAAIf,EAAQljC,EAChB,OAAO,SAASqgD,GACd,IAAIC,EAASnM,EAAM4B,UAAUsK,GACzBE,GAAMH,EAAWE,EAAO3gD,OAAS2gD,EAAO7oC,OAASzX,EACrD,OAAOikC,EAAIsc,CACb,CACF,CACA5wD,2BAA2ByuC,EAAW2N,EAAY,GAChD,OAAO,SAASyU,EAAa3lB,GAC3B,IAAItsC,EAAIiyD,EAAc3lB,EAAMuD,EAC5B,OAAI2N,EAAY,EACPz+B,KAAKD,IAAI9e,EAAGiyD,GACjBzU,EAAY,EACPz+B,KAAKF,IAAI7e,EAAGiyD,GACdjyD,CACT,CACF,GAIEkyD,EAAM,MACRj1D,YAAYk1D,GAAW,EAAO5P,EAAO6P,GACnC70D,KAAK80D,OAAS,EACd90D,KAAK+0D,SAAU,EACf/0D,KAAKg1D,UAAYJ,EACjB50D,KAAKi1D,OAASjQ,EACdhlD,KAAK80D,OAAS90D,KAAKi1D,OAASj1D,KAAKi1D,OAAOC,WAAa,EACrDl1D,KAAKm1D,KAAO,IAAIC,MACZP,IACF70D,KAAKm1D,KAAKN,YAAc,YAC5B,CACAhxD,YAAYwxD,EAAKT,GAAW,EAAO5P,EAAOyN,GACxC,MAAM6C,EAAM,IAAIX,EAAIC,EAAU5P,GAK9B,OAJAsQ,EAAIC,KAAKF,GAAKG,MAAMC,IACdhD,GACFA,EAAMgD,EAAA,IAEHH,CACT,CACAzxD,uBAAuBwxD,EAAKT,GAAW,EAAO5P,GAE5C,aADkB,IAAI2P,EAAIC,EAAU5P,GAAOuQ,KAAKF,EAElD,CACAxxD,yBAAyBwxD,EAAKrQ,EAAO0Q,EAAS,SAAUd,GAAW,GAEjE,aADkBD,EAAIgB,UAAUN,EAAKT,EAAU5P,IACpC4Q,QAAQF,EACrB,CACA7xD,aAAa2xC,EAAMwP,EAAOxE,GACxB,IAAI8U,EAAM,IAAIX,GAAI,EAAM3P,GACxB,MAAM/mC,EAAIuiC,GAAgBwE,EAAMkQ,WAEhC,OADAI,EAAIO,WAAWrgB,EAAK,GAAIA,EAAK,GAAIv3B,GAC1Bq3C,CACT,CACAC,KAAKF,GACH,OAAO,IAAIS,SAAQ,CAACC,EAASC,KACvBh2D,KAAKg1D,YAAcrlD,UACrBqmD,EAAO,0DAETh2D,KAAKm1D,KAAKE,IAAMA,EAChBr1D,KAAKm1D,KAAKxQ,OAAS,KACb3kD,KAAKg1D,YACFh1D,KAAKi2D,MACRj2D,KAAKi2D,IAAMtmD,SAASzH,cAAc,WACpClI,KAAKk2D,aAAal2D,KAAK80D,OAAQ90D,KAAKm1D,MACpCn1D,KAAKm2D,MAAQn2D,KAAKo2D,KAAKz3B,aAAa,EAAG,EAAG3+B,KAAKi2D,IAAItqC,MAAO3rB,KAAKi2D,IAAIpiD,SAErE7T,KAAK+0D,SAAU,EACfgB,EAAQ/1D,KAAI,EAEdA,KAAKm1D,KAAKrQ,QAAWmI,IACnB+I,EAAO/I,EAAA,CACT,GAEJ,CACAiJ,aAAaG,EAAaf,GACxB,MAAMgB,EAAKhB,EAAI3pC,MACT8oC,EAAKa,EAAIzhD,OACf7T,KAAK61D,WAAWS,EAAI7B,EAAI4B,GACpBf,GACFt1D,KAAKo2D,KAAKG,UAAUjB,EAAK,EAAG,EAAGgB,EAAI7B,EAAI,EAAG,EAAGz0D,KAAKi2D,IAAItqC,MAAO3rB,KAAKi2D,IAAIpiD,OAC1E,CACAgiD,WAAWlqC,EAAO9X,EAAQwiD,EAAc,GACtC,IAAKr2D,KAAKg1D,UAER,YADAzoD,QAAQiqD,MAAM,qEAGXx2D,KAAKi2D,MACRj2D,KAAKi2D,IAAMtmD,SAASzH,cAAc,WACpC,MAAMuuD,EAA6B,iBAAhBJ,EAA2B,CAACA,EAAaA,GAAeA,EAC3Er2D,KAAKi2D,IAAItqC,MAAQA,EAAQ8qC,EAAI,GAC7Bz2D,KAAKi2D,IAAIpiD,OAASA,EAAS4iD,EAAI,GAC/Bz2D,KAAKo2D,KAAOp2D,KAAKi2D,IAAIhmD,WAAW,MAChCjQ,KAAK+0D,SAAU,CACjB,CACA2B,OAAOlhB,GACL,MAAM1P,EAAI0P,EAAOA,EAAK,GAAKx1C,KAAKi2D,IAAItqC,MAC9BzX,EAAIshC,EAAOA,EAAK,GAAKx1C,KAAKi2D,IAAIpiD,OACpC,OAAO8iD,kBAAkB32D,KAAKi2D,IAAK,EAAG,EAAGnwB,EAAG5xB,EAC9C,CACA0hD,QAAQgB,EAAY,SAAUC,GAAU,GACtC,IAAK72D,KAAKi1D,OACR,KAAM,sDACR,OAAOj1D,KAAKi1D,OAAOz2B,IAAIs4B,cAAcD,EAAU72D,KAAKi2D,IAAMj2D,KAAKm1D,KAAMyB,EACvE,CACAG,OACsB,IAAhB/2D,KAAK80D,OACP90D,KAAK02D,SAASlB,MAAM18C,IAClB9Y,KAAKk2D,aAAa,EAAIl2D,KAAK80D,OAAQh8C,GACnC9Y,KAAKu1D,KAAKv1D,KAAKg3D,WAAQ,IAGzBh3D,KAAKm1D,KAAKE,IAAMr1D,KAAKg3D,UAEzB,CACAC,MAAM3kD,EAAG4kD,GAAU,GACjB,MAAMj5C,EAAsB,iBAAXi5C,EAAsBA,EAAUA,EAAUl3D,KAAK80D,OAAS,EACzE,OAAOH,EAAIwC,SAASn3D,KAAKm2D,MAAO,CAAC7jD,EAAE,GAAK2L,EAAG3L,EAAE,GAAK2L,GACpD,CACApa,gBAAgB66B,EAASpsB,GACvB,MAAM8kD,EAAK,IAAItpB,EAAG,EAAG,EAAG,EAAG,GAC3B,GAAIx7B,EAAE,IAAMosB,EAAQ/S,OAASrZ,EAAE,IAAMosB,EAAQ7qB,OAC3C,OAAOujD,EACT,MAAM/0D,EAAImf,KAAK0P,MAAM5e,EAAE,KAAuB,EAAhBosB,EAAQ/S,OAAgC,EAAnBnK,KAAK0P,MAAM5e,EAAE,IAC1D7P,EAAIi8B,EAAQ3S,KAClB,OAAI1pB,GAAKI,EAAEL,OAAS,EACXg1D,EACF,IAAItpB,EAAGrrC,EAAEJ,GAAII,EAAEJ,EAAI,GAAII,EAAEJ,EAAI,GAAII,EAAEJ,EAAI,GAChD,CACAysD,OAAOuI,EAAaC,GAAU,GAC5B,IAAIr5C,EAAIq5C,EAAUD,EAAc,CAACA,EAAY,GAAKr3D,KAAKm1D,KAAKoC,aAAcF,EAAY,GAAKr3D,KAAKm1D,KAAKqC,eAGrG,OAFAx3D,KAAKk2D,aAAaj4C,EAAGje,KAAKm1D,MAC1Bn1D,KAAKm2D,MAAQn2D,KAAKo2D,KAAKz3B,aAAa,EAAG,EAAG3+B,KAAKi2D,IAAItqC,MAAO3rB,KAAKi2D,IAAIpiD,QAC5D7T,IACT,CACAy3D,KAAKziB,GACH,IAAI1iC,EAAI0iC,EAAIkB,QAAQsK,MAAMxgD,KAAK80D,QAC3B72C,EAAI+2B,EAAIQ,KAAKgL,MAAMxgD,KAAK80D,QAC5B,OAAO90D,KAAKo2D,KAAKz3B,aAAarsB,EAAEiY,EAAGjY,EAAEoY,EAAGzM,EAAEsM,EAAGtM,EAAEyM,EACjD,CACA1kB,OAAOwmC,GAIL,OAHAxsC,KAAKo2D,KAAKpwD,OAASwmC,EACnBxsC,KAAKo2D,KAAKG,UAAUv2D,KAAKi2D,IAAK,EAAG,GACjCj2D,KAAKo2D,KAAKpwD,OAAS,OACZhG,IACT,CACA03D,UACM13D,KAAKi2D,KACPj2D,KAAKi2D,IAAItuD,SACP3H,KAAKm1D,MACPn1D,KAAKm1D,KAAKxtD,SACZ3H,KAAKm2D,MAAQ,IACf,CACAtyD,gBAAgByhD,EAAMsP,GAAW,EAAO5P,GACtC,IAAIT,EAAMiB,IAAIC,gBAAgBH,GAC9B,OAAO,IAAIqP,EAAIC,EAAU5P,GAAOuQ,KAAKhR,EACvC,CACA1gD,uBAAuBkoB,GACrB,OAAO,IAAI+pC,SAAQ,SAASC,EAASC,GAC9BrmD,UACHqmD,EAAO,0DAET,IAAI2B,EAAKhoD,SAASzH,cAAc,UAChCyvD,EAAGhsC,MAAQI,EAAKJ,MAChBgsC,EAAG9jD,OAASkY,EAAKlY,OACjB8jD,EAAG1nD,WAAW,MAAM6uB,aAAa/S,EAAM,EAAG,GAC1C4rC,EAAGtS,QAAQC,IACTyQ,EAAQzQ,GACRqS,EAAGhwD,QAAM,GAEb,GACF,CACAqvD,WACE,OAAOh3D,KAAKi2D,IAAI2B,WAClB,CACAvS,SACE,OAAO,IAAIyQ,SAASC,IAClB/1D,KAAKi2D,IAAI5Q,QAAQC,GAASyQ,EAAQzQ,IAAA,GAEtC,CACAuS,UAIE,OAHK73D,KAAKg1D,WACRzoD,QAAQiqD,MAAM,4DAETx2D,KAAKo2D,KAAO,IAAI0B,EAAW93D,KAAKo2D,WAAQ,CACjD,CACI2B,cACF,OAAO/3D,KAAKg1D,UAAYh1D,KAAKi2D,IAAMj2D,KAAKm1D,IAC1C,CACI6C,YACF,OAAOh4D,KAAKm1D,IACd,CACI8C,aACF,OAAOj4D,KAAKi2D,GACd,CACIlqC,WACF,OAAO/rB,KAAKm2D,KACd,CACI33B,UACF,OAAOx+B,KAAKo2D,IACd,CACI8B,aACF,OAAOl4D,KAAK+0D,OACd,CACIG,iBACF,OAAOl1D,KAAK80D,MACd,CACIqD,gBACF,OAAKn4D,KAAKm1D,KAAKxpC,OAAU3rB,KAAKm1D,KAAKthD,OAG1B,IAAIi6B,EAAG9tC,KAAKm1D,KAAKxpC,MAAO3rB,KAAKm1D,KAAKthD,QAFlC7T,KAAKo4D,WAAW9Q,QAAQtnD,KAAK80D,OAIxC,CACIsD,iBACF,OAAO,IAAItqB,EAAG9tC,KAAKi2D,IAAItqC,MAAO3rB,KAAKi2D,IAAIpiD,OACzC,CACIwkD,mBACF,MAAMp6C,EAAI,EAAIje,KAAK80D,OACnB,OAAO,IAAIvmB,GAAMO,QAAQ,CAAC7wB,EAAGA,GAC/B,GA8OE65C,EAAa,cAAcpF,EAC7BhzD,YAAYslD,GAUV,GATAxjD,QACAxB,KAAKs4D,OAAS,CACZC,UAAW,OACXC,YAAa,OACbC,UAAW,EACXC,SAAU,QACVC,QAAS,OACTC,YAAa,IAEV5T,EACH,OAAOhlD,KACT,MAAM64D,EAAUr6B,IACdx+B,KAAKo2D,KAAO53B,EACZx+B,KAAKo2D,KAAKmC,UAAYv4D,KAAKs4D,OAAOC,UAClCv4D,KAAKo2D,KAAKoC,YAAcx4D,KAAKs4D,OAAOE,YACpCx4D,KAAKo2D,KAAKsC,SAAW,QACrB14D,KAAKo2D,KAAK0C,KAAO94D,KAAK6yD,MAAMxxD,MAC5BrB,KAAKwyD,QAAS,CAAI,EAEhBxN,aAAiB+T,yBACnBF,EAAO7T,IAEPhlD,KAAKi1D,OAASjQ,EACdhlD,KAAKi1D,OAAOvtD,IAAI,CAAEw2C,MAAO,KACvB2a,EAAO74D,KAAKi1D,OAAOz2B,IAAG,IAG5B,CACIwmB,YACF,OAAOhlD,KAAKi1D,MACd,CACIz2B,UACF,OAAOx+B,KAAKo2D,IACd,CACA4C,aAAajzD,GAAM,EAAMwnD,GAAQ,GAI/B,OAHIA,GACFvtD,KAAKi1D,OAAOgE,eAA+B,iBAAT1L,EAAoBA,EAAQ,MAChEvtD,KAAKo2D,KAAOp2D,KAAKi1D,OAAOiE,cAAgBnzD,EAAM/F,KAAKi1D,OAAOkE,aAAen5D,KAAKi1D,OAAOz2B,IAC9Ex+B,IACT,CACAo5D,gBAAgB3tC,EAAS,CAAC,EAAG,IACvBzrB,KAAKi1D,OAAOiE,cACdl5D,KAAKi1D,OAAOz2B,IAAI+3B,UACdv2D,KAAKi1D,OAAOoE,gBACZ5tC,EAAO,GACPA,EAAO,GACPzrB,KAAKi1D,OAAOtpC,MACZ3rB,KAAKi1D,OAAOphD,OAGlB,CACA6f,MAAMtb,GAGJ,OAFApY,KAAKo2D,KAAKwC,YAAcxgD,EACxBpY,KAAKs4D,OAAOM,YAAcxgD,EACnBpY,IACT,CACAm+C,KAAKx/B,GAQH,MAPgB,kBAALA,EACT3e,KAAK+yD,OAASp0C,GAEd3e,KAAK+yD,QAAS,EACd/yD,KAAKs4D,OAAOC,UAAY55C,EACxB3e,KAAKo2D,KAAKmC,UAAY55C,GAEjB3e,IACT,CACAszD,OAAO30C,EAAGgN,EAAO4nC,EAAUC,GAoBzB,MAnBgB,kBAAL70C,EACT3e,KAAKgzD,QAAUr0C,GAEf3e,KAAKgzD,SAAU,EACfhzD,KAAKs4D,OAAOE,YAAc75C,EAC1B3e,KAAKo2D,KAAKoC,YAAc75C,EACpBgN,IACF3rB,KAAKo2D,KAAKqC,UAAY9sC,EACtB3rB,KAAKs4D,OAAOG,UAAY9sC,GAEtB4nC,IACFvzD,KAAKo2D,KAAKsC,SAAWnF,EACrBvzD,KAAKs4D,OAAOI,SAAWnF,GAErBC,IACFxzD,KAAKo2D,KAAKuC,QAAUnF,EACpBxzD,KAAKs4D,OAAOK,QAAUnF,IAGnBxzD,IACT,CACAs5D,gBAAgBvG,GAAS,EAAMC,GAAU,EAAMuG,EAAc,GAW3D,OAVIxG,IACoB,iBAAXA,GACT/yD,KAAKm+C,KAAK4U,GACZ/yD,KAAKo2D,KAAKjY,QAER6U,IACqB,iBAAZA,GACThzD,KAAKszD,OAAON,EAASuG,GACvBv5D,KAAKo2D,KAAK9C,UAELtzD,IACT,CACAw5D,SAASC,GACP,IAAIC,EAAO,GACPD,EAAMr3D,OAAS,GACjBq3D,EAAM3zD,KAAK,CAAC,IAAM,QAAS,CAAC,EAAG,SACjC,IAAK,IAAIzD,EAAI,EAAGwrC,EAAM4rB,EAAMr3D,OAAQC,EAAIwrC,EAAKxrC,IAAK,CAChD,IAAI8M,EAAwB,iBAAbsqD,EAAMp3D,GAAkBA,GAAK,GAAKo3D,EAAMr3D,OAAS,IAAMq3D,EAAMp3D,GAAG,GAC3EN,EAAwB,iBAAb03D,EAAMp3D,GAAkBo3D,EAAMp3D,GAAKo3D,EAAMp3D,GAAG,GAC3Dq3D,EAAK5zD,KAAK,CAACqJ,EAAGpN,GAChB,CACA,MAAO,CAAC43D,EAAOC,KACb,IAAIliC,EAAOkiC,EAAQ55D,KAAKo2D,KAAKyD,qBAAqBF,EAAM,GAAG,GAAIA,EAAM,GAAG,GAAIn4C,KAAKyP,IAAI0oC,EAAM,GAAG,IAAKC,EAAM,GAAG,GAAIA,EAAM,GAAG,GAAIp4C,KAAKyP,IAAI2oC,EAAM,GAAG,KAAO55D,KAAKo2D,KAAK0D,qBAAqBH,EAAM,GAAG,GAAIA,EAAM,GAAG,GAAIA,EAAM,GAAG,GAAIA,EAAM,GAAG,IACrO,IAAK,IAAIt3D,EAAI,EAAGwrC,EAAM6rB,EAAKt3D,OAAQC,EAAIwrC,EAAKxrC,IAC1Cq1B,EAAKqiC,aAAaL,EAAKr3D,GAAG,GAAIq3D,EAAKr3D,GAAG,IAExC,OAAOq1B,CAAA,CAEX,CACAsiC,UAAUhmC,EAAO,eAEf,OADAh0B,KAAKo2D,KAAK6D,yBAA2BjmC,EAC9Bh0B,IACT,CACAk6D,OAEE,OADAl6D,KAAKo2D,KAAK8D,OACHl6D,IACT,CACAm6D,KAAK1f,GAAW,EAAMhvB,EAAS,GAW7B,OAVKgvB,IAIc,IAAbA,IACFA,EAAW,CAAC,EAAG,IAEjBz6C,KAAKo2D,KAAKgE,YAAY,CAAC3f,EAAS,GAAIA,EAAS,KAC7Cz6C,KAAKo2D,KAAKiE,eAAiB5uC,IAP3BzrB,KAAKo2D,KAAKgE,YAAY,IACtBp6D,KAAKo2D,KAAKiE,eAAiB,GAQtBr6D,IACT,CACA84D,KAAKwB,EAAYxG,EAAQ1kD,EAAO2kD,EAAYwG,GAiB1C,MAhByB,iBAAdD,GACTt6D,KAAK6yD,MAAMrd,KAAO8kB,EACdC,IACFv6D,KAAK6yD,MAAMgB,KAAO0G,GAChBzG,IACF9zD,KAAK6yD,MAAMiB,OAASA,GAClB1kD,IACFpP,KAAK6yD,MAAMzjD,MAAQA,GACjB2kD,IACF/zD,KAAK6yD,MAAMkB,WAAaA,IAE1B/zD,KAAK6yD,MAAQyH,EAEft6D,KAAKo2D,KAAK0C,KAAO94D,KAAK6yD,MAAMxxD,MACxBrB,KAAKw6D,oBACPx6D,KAAKy6D,mBAAkB,GAClBz6D,IACT,CACAy6D,kBAAkBC,GAAW,GAE3B,OADA16D,KAAKw6D,mBAAqBE,EAAW1G,EAAW2G,oBAAoBh8C,GAAM3e,KAAKo2D,KAAKwE,YAAYj8C,GAAGgN,aAAS,EACrG3rB,IACT,CACA66D,aAAal8C,GACX,OAAQ3e,KAAKw6D,mBAA6Dx6D,KAAKw6D,mBAAmB77C,GAAhE3e,KAAKo2D,KAAKwE,YAAYj8C,EAAI,MAAMgN,KACpE,CACAmvC,cAAc3G,EAAKxoC,EAAOyoC,EAAO,IAC/B,OAAOJ,EAAW+G,SAAS/6D,KAAK66D,aAAap1D,KAAKzF,MAAOm0D,EAAKxoC,EAAOyoC,EACvE,CACA4G,WAAWhmB,EAAKoN,EAAU32B,EAAQ4qB,GAChC,IAAI4kB,EAAOlpB,EAAKK,YAAY4C,GAC5B,GAAKjD,EAAKmpB,WAAWD,GAArB,CAEK5kB,IACHA,EAASlB,EAAUkB,OAAO4kB,IAC5B,IAAI32B,EAAK22B,EAAK,GAAG,GACU,OAAvBj7D,KAAKo2D,KAAK+E,WAA6C,SAAvBn7D,KAAKo2D,KAAK+E,UAC5C72B,EAAK22B,EAAK,GAAG,GACmB,UAAvBj7D,KAAKo2D,KAAK+E,WAAgD,UAAvBn7D,KAAKo2D,KAAK+E,YACtD72B,EAAK+R,EAAO,IAEd,IAAI9R,EAAK8R,EAAO,GAMhB,MALgB,OAAZ+L,GAAiC,SAAZA,EACvB7d,EAAK02B,EAAK,GAAG,GACQ,OAAZ7Y,GAAiC,UAAZA,IAC9B7d,EAAK02B,EAAK,GAAG,IAERxvC,EAAS,IAAIqiB,EAAGxJ,EAAK7Y,EAAO,GAAI8Y,EAAK9Y,EAAO,IAAM,IAAIqiB,EAAGxJ,EAAIC,EAflE,CAgBJ,CACAiK,QACE,IAAK,IAAI0I,KAAKl3C,KAAKs4D,OACbt4D,KAAKs4D,OAAOnG,eAAejb,KAC7Bl3C,KAAKo2D,KAAKlf,GAAKl3C,KAAKs4D,OAAOphB,IAK/B,OAFAl3C,KAAK6yD,MAAQ,IAAIC,EACjB9yD,KAAKo2D,KAAK0C,KAAO94D,KAAK6yD,MAAMxxD,MACrBrB,IACT,CACAo7D,SACMp7D,KAAK2yD,SACP3yD,KAAKo2D,KAAKjY,OACRn+C,KAAK4yD,UACP5yD,KAAKo2D,KAAK9C,QACd,CACAzvD,aAAa26B,EAAKlsB,EAAG2lC,EAAS,EAAGkU,EAAQ,UACvC,GAAK75C,EAAL,CAEA,IAAKwlD,EAAW3L,GACd,MAAM,IAAIhoD,MAAM,GAAGgoD,4CACrB2L,EAAW3L,GAAO3tB,EAAKlsB,EAAG2lC,EAHxB,CAIJ,CACArsB,MAAMtZ,EAAG2lC,EAAS,EAAGkU,EAAQ,UAG3B,OAFA2L,EAAWlsC,MAAM5rB,KAAKo2D,KAAM9jD,EAAG2lC,EAAQkU,GACvCnsD,KAAKo7D,SACEp7D,IACT,CACA6D,cAAc26B,EAAKoS,EAAIqH,EAAS,IACzBrH,IAELpS,EAAI68B,YACJ78B,EAAI88B,IAAI1qB,EAAG,GAAIA,EAAG,GAAIqH,EAAQ,EAAGwH,EAAMC,QAAQ,GAC/ClhB,EAAI4b,YACN,CACAlC,OAAOhE,GACL,IAAI5hC,EAAIy/B,EAAKK,YAAY8B,GAGzB,OAFA4jB,EAAW5f,OAAOl4C,KAAKo2D,KAAM9jD,EAAE,GAAIA,EAAE,GAAG,IACxCtS,KAAKo7D,SACEp7D,IACT,CACA6D,eAAe26B,EAAKoS,EAAIqH,EAAQsjB,EAAW,EAAGC,EAAa,EAAGC,EAAWhc,EAAMC,OAAQ7hB,GAAK,GACrF+S,GAAOqH,IAEZzZ,EAAI68B,YACJ78B,EAAIk9B,QAAQ9qB,EAAG,GAAIA,EAAG,GAAIqH,EAAO,GAAIA,EAAO,GAAIsjB,EAAUC,EAAYC,EAAU59B,GAClF,CACA69B,QAAQ9qB,EAAIqH,EAAQsjB,EAAW,EAAGC,EAAa,EAAGC,EAAWhc,EAAMC,OAAQ7hB,GAAK,GAG9E,OAFAi6B,EAAW4D,QAAQ17D,KAAKo2D,KAAMxlB,EAAIqH,EAAQsjB,EAAUC,EAAYC,EAAU59B,GAC1E79B,KAAKo7D,SACEp7D,IACT,CACA6D,WAAW26B,EAAKoS,EAAIqH,EAAQujB,EAAYC,EAAU59B,GAC3C+S,IAELpS,EAAI68B,YACJ78B,EAAI88B,IAAI1qB,EAAG,GAAIA,EAAG,GAAIqH,EAAQujB,EAAYC,EAAU59B,GACtD,CACAy9B,IAAI1qB,EAAIqH,EAAQujB,EAAYC,EAAU59B,GAGpC,OAFAi6B,EAAWwD,IAAIt7D,KAAKo2D,KAAMxlB,EAAIqH,EAAQujB,EAAYC,EAAU59B,GAC5D79B,KAAKo7D,SACEp7D,IACT,CACA6D,cAAc26B,EAAKoS,EAAI+qB,GACrB,IAAK/qB,EACH,OACF,IAAIgrB,EAAKhrB,EAAG,GAAK+qB,EACbtoB,EAAKzC,EAAG,GAAK+qB,EACbE,EAAKjrB,EAAG,GAAK+qB,EACbG,EAAKlrB,EAAG,GAAK+qB,EACjBn9B,EAAI68B,YACJ78B,EAAIgrB,OAAOoS,EAAIvoB,GACf7U,EAAIu9B,OAAOH,EAAIE,GACft9B,EAAIu9B,OAAOF,EAAIC,GACft9B,EAAIu9B,OAAOF,EAAIxoB,GACf7U,EAAI4b,WACN,CACA4hB,OAAOprB,EAAI+qB,GAGT,OAFA7D,EAAWkE,OAAOh8D,KAAKo2D,KAAMxlB,EAAI+qB,GACjC37D,KAAKo7D,SACEp7D,IACT,CACA6D,YAAY26B,EAAK0V,GACf,IAAKnC,EAAKmpB,WAAWhnB,GACnB,OACF,IAAI7xC,EAAI,EACRm8B,EAAI68B,YACJ,IAAK,IAAIjV,KAAMlS,EACTkS,IACE/jD,IAAM,EACRm8B,EAAIu9B,OAAO3V,EAAG,GAAIA,EAAG,IAErB5nB,EAAIgrB,OAAOpD,EAAG,GAAIA,EAAG,IAI7B,CACA10C,KAAKwiC,GAGH,OAFA4jB,EAAWpmD,KAAK1R,KAAKo2D,KAAMliB,GAC3Bl0C,KAAKo7D,SACEp7D,IACT,CACA6D,eAAe26B,EAAK0V,GACbnC,EAAKmpB,WAAWhnB,KAErB4jB,EAAWpmD,KAAK8sB,EAAK0V,GACrB1V,EAAI4b,YACN,CACA6hB,QAAQ/nB,GAGN,OAFA4jB,EAAWmE,QAAQj8D,KAAKo2D,KAAMliB,GAC9Bl0C,KAAKo7D,SACEp7D,IACT,CACA6D,YAAY26B,EAAK0V,GACf,IAAI5hC,EAAIy/B,EAAKK,YAAY8B,GACpBnC,EAAKmpB,WAAW5oD,KAErBksB,EAAI68B,YACJ78B,EAAIgrB,OAAOl3C,EAAE,GAAG,GAAIA,EAAE,GAAG,IACzBksB,EAAIu9B,OAAOzpD,EAAE,GAAG,GAAIA,EAAE,GAAG,IACzBksB,EAAIu9B,OAAOzpD,EAAE,GAAG,GAAIA,EAAE,GAAG,IACzBksB,EAAIu9B,OAAOzpD,EAAE,GAAG,GAAIA,EAAE,GAAG,IACzBksB,EAAI4b,YACN,CACA/vB,KAAK6pB,GAGH,OAFA4jB,EAAWztC,KAAKrqB,KAAKo2D,KAAMliB,GAC3Bl0C,KAAKo7D,SACEp7D,IACT,CACA6D,aAAa26B,EAAK09B,EAAU5G,EAAK6G,GAC/B,IACIrtD,EADAK,EAAI4iC,EAAKK,YAAY8pB,GAEzB,GAAoB,iBAAT/sD,EAAE,GACXL,EAAMK,OAEN,GAAIgtD,EAAM,CACR,IAAI9xD,EAAI0nC,EAAKK,YAAY+pB,GACzBrtD,EAAM,CACJzE,EAAE,GAAG,GACLA,EAAE,GAAG,GACLA,EAAE,GAAG,GAAKA,EAAE,GAAG,GACfA,EAAE,GAAG,GAAKA,EAAE,GAAG,GACf8E,EAAE,GAAG,GACLA,EAAE,GAAG,GACLA,EAAE,GAAG,GAAKA,EAAE,GAAG,GACfA,EAAE,GAAG,GAAKA,EAAE,GAAG,GAEnB,MACEL,EAAM,CAACK,EAAE,GAAG,GAAIA,EAAE,GAAG,GAAIA,EAAE,GAAG,GAAKA,EAAE,GAAG,GAAIA,EAAE,GAAG,GAAKA,EAAE,GAAG,IAG3DmmD,aAAeX,EACbW,EAAI4C,QACN15B,EAAI+3B,UAAUjB,EAAI0C,SAAUlpD,GAG9B0vB,EAAI+3B,UAAUjB,KAAQxmD,EAE1B,CACAkpD,MAAMkE,EAAU5G,EAAK6G,GAQnB,OAPI7G,aAAeX,EACbW,EAAI4C,QACNJ,EAAWE,MAAMh4D,KAAKo2D,KAAM8F,EAAU5G,EAAI0C,MAAOmE,GAGnDrE,EAAWE,MAAMh4D,KAAKo2D,KAAM8F,EAAU5G,EAAK6G,GAEtCn8D,IACT,CACA6D,iBAAiB26B,EAAK09B,EAAU5G,GAC9B,IAAInmD,EAAI4iC,EAAKK,YAAY8pB,GACL,iBAAT/sD,EAAE,GACXqvB,EAAIM,aAAaw2B,EAAKnmD,EAAE,GAAIA,EAAE,IAE9BqvB,EAAIM,aAAaw2B,EAAKnmD,EAAE,GAAG,GAAIA,EAAE,GAAG,GAAIA,EAAE,GAAG,GAAIA,EAAE,GAAG,GAAIA,EAAE,GAAG,GAAIA,EAAE,GAAG,GAE5E,CACAitD,UAAUF,EAAU5G,GAElB,OADAwC,EAAWsE,UAAUp8D,KAAKo2D,KAAM8F,EAAU5G,GACnCt1D,IACT,CACA6D,YAAY26B,EAAKoS,EAAIyrB,EAAKC,GACnB1rB,GAELpS,EAAI+9B,SAASF,EAAKzrB,EAAG,GAAIA,EAAG,GAAI0rB,EAClC,CACA38D,KAAKixC,EAAIyrB,EAAKC,GAEZ,OADAxE,EAAWn4D,KAAKK,KAAKo2D,KAAMxlB,EAAIyrB,EAAKC,GAC7Bt8D,IACT,CACAw8D,QAAQxnB,EAAKqnB,EAAKI,EAAgB,SAAUrI,EAAO,GAAIsI,GAAmB,GACpEA,IACF18D,KAAKo2D,KAAKuG,aAAeF,GAC3B,IAAIjnB,EAAOL,EAAUK,KAAKR,GACtB7lC,EAAInP,KAAK86D,cAAcuB,EAAK7mB,EAAK,GAAI4e,GAEzC,OADAp0D,KAAKL,KAAKK,KAAKg7D,WAAWhmB,EAAKynB,GAAgBttD,EAAE,IAC1CnP,IACT,CACA48D,aAAa5nB,EAAKqnB,EAAKtI,EAAa,IAAK0I,EAAgB,MAAOhF,GAAO,GACrE,IAAI3+C,EAAIi5B,EAAKK,YAAY4C,GACrBQ,EAAOL,EAAUK,KAAK18B,GAC1B9Y,KAAKo2D,KAAKuG,aAAe,MACzB,IAAIE,EAAQ78D,KAAK6yD,MAAMrd,KAAOue,EAC1B+I,EAAW,CAACC,EAAK38C,EAAS,GAAIyd,EAAK,KACrC,IAAKk/B,EACH,OAAO38C,EACT,GAAIq3C,GAAQ55B,EAAKg/B,EAAQrnB,EAAK,GAAa,EAARqnB,EACjC,OAAOz8C,EACT,GAAIyd,EAAK,IACP,MAAM,IAAI15B,MAAM,iCAClB,IAAIgL,EAAInP,KAAK86D,cAAciC,EAAKvnB,EAAK,GAAI,IACrCwnB,EAAQ7tD,EAAE,GAAG6G,QAAQ,MACzB,GAAIgnD,GAAS,EAEX,OADA58C,EAAOta,KAAKqJ,EAAE,GAAGkW,OAAO,EAAG23C,IACpBF,EAASC,EAAI13C,OAAO23C,EAAQ,GAAI58C,EAAQyd,EAAK,GAEtD,IAAIwjB,EAAKlyC,EAAE,GAAG8tD,YAAY,KAAO,GAC7B5b,GAAM,GAAKlyC,EAAE,KAAO4tD,EAAI36D,UAC1Bi/C,OAAK,GACP,IAAI3vC,EAAOvC,EAAE,GAAGkW,OAAO,EAAGg8B,GAE1B,OADAjhC,EAAOta,KAAK4L,GACLvC,EAAE,IAAM,GAAKA,EAAE,KAAO4tD,EAAI36D,OAASge,EAAS08C,EAASC,EAAI13C,OAAOg8B,GAAMlyC,EAAE,IAAKiR,EAAQyd,EAAK,EAAE,EAEjGyJ,EAAQw1B,EAAST,GACjBa,EAAQ51B,EAAMllC,OAASy6D,EACvBM,EAAOrkD,EACX,GAAqB,UAAjB2jD,GAA8C,UAAjBA,EAA2B,CAC1D,IAAIW,GAAQ5nB,EAAK,GAAK0nB,GAAS,EAC3BzF,IACF2F,EAAO57C,KAAKF,IAAI,EAAG87C,IACrBD,EAAO,IAAIttB,EAAM/2B,EAAE,GAAGi3B,KAAK,EAAGqtB,GAAOtkD,EAAE,GAAGy5B,UAAU,EAAG6qB,GACzD,MACED,EAD0B,UAAjBV,EACF,IAAI5sB,EAAM/2B,EAAE,GAAGi3B,KAAK,EAAGyF,EAAK,GAAK0nB,GAAQpkD,EAAE,IAE3C,IAAI+2B,EAAM/2B,EAAE,GAAIA,EAAE,GAAGi3B,KAAKyF,EAAK,GAAI0nB,IAE5C,IAAI7mB,EAASlB,EAAUkB,OAAO8mB,GAC9B,IAAK,IAAI96D,EAAI,EAAGwrC,EAAMvG,EAAMllC,OAAQC,EAAIwrC,EAAKxrC,IAC3CrC,KAAKL,KAAKK,KAAKg7D,WAAWmC,EAAM,MAAO,CAAC,EAAG96D,EAAIw6D,GAAQxmB,GAAS/O,EAAMjlC,IAExE,OAAOrC,IACT,CACAq9D,UAAUC,EAAY,OAAQC,EAAW,cAOvC,MANgB,UAAZA,IACFA,EAAW,UACG,YAAZA,IACFA,EAAW,cACbv9D,KAAKo2D,KAAK+E,UAAYmC,EACtBt9D,KAAKo2D,KAAKuG,aAAeY,EAClBv9D,IACT,CACAw9D,IAAInB,GACF,IAAIv2B,EAAI9lC,KAAKo2D,KAAKwE,YAAYyB,GAAK1wC,MAAQ,GAG3C,OAFA3rB,KAAKszD,QAAO,GAAOnV,KAAK,kBAAkB9zB,KAAK,CAAC,CAAC,EAAG,GAAI,CAACyb,EAAG,MAC5D9lC,KAAKm+C,KAAK,QAAQx+C,KAAK,CAAC,GAAI,IAAK08D,GAC1Br8D,IACT,GAkhBEy9D,EAAS,cAAc3vB,EACzBpuC,eAAe6S,GACb/Q,SAAS+Q,GACTvS,KAAK09D,MAAQ,MACb19D,KAAK29D,SAAU,CACjB,CACA95D,eAAe0O,GACb,IAAID,EAAI,CAAC,EAAG,EAAG,EAAG,GACdqM,EAAIozB,EAAK2U,QAAQn0C,GACrB,IAAK,IAAIlQ,EAAI,EAAGwrC,EAAMv7B,EAAElQ,OAAQC,EAAIwrC,EAAKxrC,IACnCA,EAAIsc,EAAEvc,SACRkQ,EAAEjQ,GAAKsc,EAAEtc,IAEb,OAAO,IAAIo7D,EAAOnrD,EACpB,CACAzO,eAAem2B,GAGb,GAFc,KAAVA,EAAI,KACNA,EAAMA,EAAI3U,OAAO,IACf2U,EAAI53B,QAAU,EAAG,CACnB,IAAIksC,EAAMjsC,GAAM23B,EAAI33B,IAAM,IAC1B23B,EAAM,GAAGsU,EAAG,KAAKA,EAAG,KAAKA,EAAG,KAAKA,EAAG,KAAKA,EAAG,KAAKA,EAAG,IACtD,CACA,IAAI5a,EAAQ,EACO,IAAfsG,EAAI53B,SACNsxB,EAAQsG,EAAI3U,OAAO,IAAM,EACzB2U,EAAMA,EAAI4jC,UAAU,EAAG,IAEzB,IAAIC,EAAS39D,SAAS85B,EAAK,IAC3B,OAAO,IAAIyjC,EAAOI,GAAU,GAAIA,GAAU,EAAI,IAAc,IAATA,EAAcnqC,EACnE,CACA7vB,cAAc0O,GACZ,OAAOkrD,EAAOloD,QAAQhD,GAAMurD,OAAO,MACrC,CACAj6D,cAAc0O,GACZ,OAAOkrD,EAAOloD,QAAQhD,GAAMurD,OAAO,MACrC,CACAj6D,cAAc0O,GACZ,OAAOkrD,EAAOloD,QAAQhD,GAAMurD,OAAO,MACrC,CACAj6D,cAAc0O,GACZ,OAAOkrD,EAAOloD,QAAQhD,GAAMurD,OAAO,MACrC,CACAj6D,cAAc0O,GACZ,OAAOkrD,EAAOloD,QAAQhD,GAAMurD,OAAO,MACrC,CACAj6D,cAAc0O,GACZ,OAAOkrD,EAAOloD,QAAQhD,GAAMurD,OAAO,MACrC,CACAj6D,cAAc0O,GACZ,OAAOkrD,EAAOloD,QAAQhD,GAAMurD,OAAO,MACrC,CACAj6D,iBAAiBmwB,GACf,OAAOypC,EAAOM,OAAO/pC,GAAM0c,SAAS,GAAGiQ,MAAM,CAAC,EAAG,EAAG,GACtD,CACI3mB,UACF,OAAOh6B,KAAKK,SAAS,MACvB,CACIyzB,UACF,OAAO9zB,KAAKK,SAAS,MACvB,CACI29D,WACF,OAAOh+D,KAAKK,SAAS,OACvB,CACA44C,QACE,IAAIt6B,EAAI,IAAI8+C,EAAOz9D,MAEnB,OADA2e,EAAEm/C,OAAO99D,KAAK09D,OACP/+C,CACT,CACAm/C,OAAO9pC,EAAMiqC,GAAU,GACrB,GAAIA,EAAS,CACX,IAAIC,EAAQl+D,KAAK09D,MAAMS,cAAgB,KAAOnqC,EAAKmqC,cACnD,IAAIV,EAAOS,GAGT,MAAM,IAAI/5D,MAAM,6BAA+B+5D,GAF/Cl+D,KAAKu0B,GAAGkpC,EAAOS,GAAOl+D,KAAMA,KAAK29D,QAAS39D,KAAK29D,SAInD,CAEA,OADA39D,KAAK09D,MAAQ1pC,EACNh0B,IACT,CACIg0B,WACF,OAAOh0B,KAAK09D,KACd,CACIl1C,QACF,OAAOxoB,KAAK,EACd,CACIwoB,MAAE4yB,GACJp7C,KAAK,GAAKo7C,CACZ,CACI9oB,QACF,OAAOtyB,KAAK,EACd,CACIsyB,MAAE8oB,GACJp7C,KAAK,GAAKo7C,CACZ,CACItiC,QACF,OAAO9Y,KAAK,EACd,CACI8Y,MAAEsiC,GACJp7C,KAAK,GAAKo7C,CACZ,CACIlnC,QACF,MAAqB,OAAdlU,KAAK09D,MAAiB19D,KAAK,GAAKA,KAAK,EAC9C,CACIkU,MAAEknC,GAEJp7C,KADsB,OAAdA,KAAK09D,MAAiB,EAAI,GACxBtiB,CACZ,CACIn9B,QACF,OAAOje,KAAK,EACd,CACIie,MAAEm9B,GACJp7C,KAAK,GAAKo7C,CACZ,CACIxoB,QACF,MAAqB,OAAd5yB,KAAK09D,MAAiB19D,KAAK,GAAKA,KAAK,EAC9C,CACI4yB,MAAEwoB,GAEJp7C,KADsB,OAAdA,KAAK09D,MAAiB,EAAI,GACxBtiB,CACZ,CACIhjC,QACF,OAAOpY,KAAK,EACd,CACIoY,MAAEgjC,GACJp7C,KAAK,GAAKo7C,CACZ,CACIz8B,QACF,OAAO3e,KAAK,EACd,CACI2e,MAAEy8B,GACJp7C,KAAK,GAAKo7C,CACZ,CACIgjB,QACF,OAAOp+D,KAAK,EACd,CACIo+D,MAAEhjB,GACJp7C,KAAK,GAAKo7C,CACZ,CACIr5C,QACF,OAAO/B,KAAK,EACd,CACI+B,MAAEq5C,GACJp7C,KAAK,GAAKo7C,CACZ,CACI1nB,UAAM0nB,GACJp7C,KAAKoC,OAAS,IAChBpC,KAAK,GAAKo7C,EACd,CACI1nB,YACF,OAAO1zB,KAAKoC,OAAS,EAAIpC,KAAK,GAAK,CACrC,CACIq+D,iBACF,OAAOr+D,KAAK29D,OACd,CACIU,eAAWvlD,GACb9Y,KAAK29D,QAAU7kD,CACjB,CACAwlD,UAAUC,GAAS,GACjB,GAAIv+D,KAAK29D,SAAWY,EAClB,OAAOv+D,KACT,IAAI+9D,EAASN,EAAOM,OAAO/9D,KAAK09D,OAChC,IAAK,IAAIr7D,EAAI,EAAGA,EAAI,EAAGA,IACrBrC,KAAKqC,GAAMk8D,EAAqEhnB,EAAIinB,WAAWx+D,KAAKqC,GAAI07D,EAAO17D,GAAG,GAAI07D,EAAO17D,GAAG,GAAI,EAAG,GAAnHk1C,EAAIinB,WAAWx+D,KAAKqC,GAAI,EAAG,EAAG07D,EAAO17D,GAAG,GAAI07D,EAAO17D,GAAG,IAG5E,OADArC,KAAK29D,QAAUY,EACRv+D,IACT,CACAy+D,WAAWF,GAAS,GAClB,OAAOv+D,KAAKi5C,QAAQqlB,UAAUC,EAChC,CACAl+D,SAAS+6B,EAAS,QAChB,GAAc,OAAVA,EAAiB,CACnB,IAAIsjC,EAAQtjB,IACV,IAAIn9B,EAAIuD,KAAK0P,MAAMkqB,GAAG/6C,SAAS,IAC/B,OAAO4d,EAAE7b,OAAS,EAAI,IAAM6b,EAAIA,CAAC,EAEnC,MAAO,IAAIygD,EAAK1+D,KAAK,MAAM0+D,EAAK1+D,KAAK,MAAM0+D,EAAK1+D,KAAK,KACvD,CAAO,MAAc,QAAVo7B,EACF,QAAQ5Z,KAAK0P,MAAMlxB,KAAK,OAAOwhB,KAAK0P,MAAMlxB,KAAK,OAAOwhB,KAAK0P,MAAMlxB,KAAK,OAAOA,KAAK0zB,SACtE,OAAV0H,EACF,OAAO5Z,KAAK0P,MAAMlxB,KAAK,OAAOwhB,KAAK0P,MAAMlxB,KAAK,OAAOwhB,KAAK0P,MAAMlxB,KAAK,OAErE,GAAGA,KAAK09D,SAAS19D,KAAK,MAAMA,KAAK,MAAMA,KAAK,MAAMA,KAAK0zB,QAElE,CACA7vB,gBAAgBiwB,EAAK6qC,GAAkB,EAAOC,GAAmB,GAC/D,IAAKp2C,EAAG8J,EAAGxZ,GAAM6lD,EAAqC7qC,EAAnBA,EAAI2qC,aACnCn9C,EAAME,KAAKF,IAAIkH,EAAG8J,EAAGxZ,GACrByI,EAAMC,KAAKD,IAAIiH,EAAG8J,EAAGxZ,GACrB5E,GAAKoN,EAAMC,GAAO,EAClBtD,EAAI/J,EACJ0e,EAAI1e,EACR,GAAIoN,GAAOC,EACTrN,EAAI,EACJ+J,EAAI,MACC,CACL,IAAIxb,EAAI6e,EAAMC,EACdtD,EAAI2U,EAAI,GAAMnwB,GAAK,EAAI6e,EAAMC,GAAO9e,GAAK6e,EAAMC,GAC/CrN,EAAI,EACAoN,IAAQkH,EACVtU,GAAKoe,EAAIxZ,GAAKrW,GAAK6vB,EAAIxZ,EAAI,EAAI,GACtBwI,IAAQgR,EACjBpe,GAAK4E,EAAI0P,GAAK/lB,EAAI,EACT6e,IAAQxI,IACjB5E,GAAKsU,EAAI8J,GAAK7vB,EAAI,EAEtB,CACA,OAAOg7D,EAAO7pC,IAAIgrC,EAAmB1qD,EAAI,GAAS,GAAJA,EAAQ+J,EAAG2U,EAAGkB,EAAIJ,MAClE,CACA7vB,gBAAgB+vB,EAAK+qC,GAAkB,EAAOC,GAAmB,GAC/D,IAAK1qD,EAAG+J,EAAG2U,GAAKgB,EAGhB,GAFK+qC,IACHzqD,GAAQ,KACD,GAAL+J,EACF,OAAOw/C,EAAO3pC,IAAQ,IAAJlB,EAAa,IAAJA,EAAa,IAAJA,EAASgB,EAAIF,OACnD,IAAImrC,EAAIjsC,GAAK,GAAMA,GAAK,EAAI3U,GAAK2U,EAAI3U,EAAI2U,EAAI3U,EACzC3L,EAAI,EAAIsgB,EAAIisC,EACZZ,EAAW9uD,GAEL,GADRA,EAAIA,EAAI,EAAIA,EAAI,EAAIA,EAAI,EAAIA,EAAI,EAAIA,GACxB,EACHmD,GAAKusD,EAAIvsD,GAAKnD,EAAI,EACZ,EAAJA,EAAQ,EACV0vD,EACM,EAAJ1vD,EAAQ,EACVmD,GAAKusD,EAAIvsD,IAAM,EAAI,EAAInD,GAAK,EAE5BmD,EAGP6O,EAAKy9C,EAAmB,EAAI,IAChC,OAAOnB,EAAO3pC,IACZ3S,EAAK88C,EAAQ/pD,EAAI,EAAI,GACrBiN,EAAK88C,EAAQ/pD,GACbiN,EAAK88C,EAAQ/pD,EAAI,EAAI,GACrB0f,EAAIF,MAER,CACA7vB,gBAAgBiwB,EAAK6qC,GAAkB,EAAOC,GAAmB,GAC/D,IAAKp2C,EAAG8J,EAAGxZ,GAAM6lD,EAAqC7qC,EAAnBA,EAAI2qC,aACnCn9C,EAAME,KAAKF,IAAIkH,EAAG8J,EAAGxZ,GACrByI,EAAMC,KAAKD,IAAIiH,EAAG8J,EAAGxZ,GACrBrW,EAAI6e,EAAMC,EACVrN,EAAI,EACJ+J,EAAY,IAARqD,EAAY,EAAI7e,EAAI6e,EACxBvf,EAAIuf,EAUR,OATIA,GAAOC,IACLD,IAAQkH,EACVtU,GAAKoe,EAAIxZ,GAAKrW,GAAK6vB,EAAIxZ,EAAI,EAAI,GACtBwI,IAAQgR,EACjBpe,GAAK4E,EAAI0P,GAAK/lB,EAAI,EACT6e,IAAQxI,IACjB5E,GAAKsU,EAAI8J,GAAK7vB,EAAI,IAGfg7D,EAAOqB,IAAIF,EAAmB1qD,EAAI,GAAS,GAAJA,EAAQ+J,EAAGlc,EAAG+xB,EAAIJ,MAClE,CACA7vB,gBAAgBi7D,EAAKH,GAAkB,EAAOC,GAAmB,GAC/D,IAAK1qD,EAAG+J,EAAGlc,GAAK+8D,EACXH,IACHzqD,GAAQ,KACV,IAAI7R,EAAImf,KAAK0P,MAAU,EAAJhd,GACfikC,EAAQ,EAAJjkC,EAAQ7R,EACZiQ,EAAIvQ,GAAK,EAAIkc,GACb4gD,EAAI98D,GAAK,EAAIo2C,EAAIl6B,GACjB9O,EAAIpN,GAAK,GAAK,EAAIo2C,GAAKl6B,GASvBU,EARO,CACT,CAAC5c,EAAGoN,EAAGmD,GACP,CAACusD,EAAG98D,EAAGuQ,GACP,CAACA,EAAGvQ,EAAGoN,GACP,CAACmD,EAAGusD,EAAG98D,GACP,CAACoN,EAAGmD,EAAGvQ,GACP,CAACA,EAAGuQ,EAAGusD,IAEIx8D,EAAI,GACb8e,EAAKy9C,EAAmB,EAAI,IAChC,OAAOnB,EAAO3pC,IACZ3S,EAAKxC,EAAE,GACPwC,EAAKxC,EAAE,GACPwC,EAAKxC,EAAE,GACPmgD,EAAIprC,MAER,CACA7vB,gBAAgBiwB,EAAK6qC,GAAkB,EAAOC,GAAmB,GAC/D,IAAIjgD,EAAIggD,EAAkB7qC,EAAI2qC,YAAW,GAAS3qC,EAClD,OAAO2pC,EAAOsB,SAAStB,EAAOuB,SAASrgD,IAAI,EAAOigD,EACpD,CACA/6D,gBAAgBo7D,EAAKN,GAAkB,EAAOC,GAAmB,GAC/D,IAAIjgD,EAAIggD,EAAkBM,EAAIR,YAAW,GAASQ,EAClD,OAAOxB,EAAOyB,SAASzB,EAAO0B,SAASxgD,IAAI,EAAOigD,EACpD,CACA/6D,gBAAgBiwB,EAAK6qC,GAAkB,EAAOC,GAAmB,GAC/D,IAAIjgD,EAAIggD,EAAkB7qC,EAAI2qC,YAAW,GAAS3qC,EAClD,OAAO2pC,EAAO2B,SAAS3B,EAAO4B,SAAS1gD,IAAI,EAAOigD,EACpD,CACA/6D,gBAAgBy7D,EAAKX,GAAkB,EAAOC,GAAmB,GAC/D,IAAIjgD,EAAIggD,EAAkBW,EAAIb,YAAW,GAASa,EAClD,OAAO7B,EAAO8B,SAAS9B,EAAO+B,SAAS7gD,IAAI,EAAOigD,EACpD,CACA/6D,gBAAgBiwB,EAAK6qC,GAAkB,EAAOC,GAAmB,GAC/D,IAAIjgD,EAAIggD,EAAkB7qC,EAAI2qC,YAAW,GAAS3qC,EAClD,OAAO2pC,EAAOgC,SAAShC,EAAOuB,SAASrgD,IAAI,EAAOigD,EACpD,CACA/6D,gBAAgB67D,EAAKf,GAAkB,EAAOC,GAAmB,GAC/D,IAAIjgD,EAAIggD,EAAkBe,EAAIjB,YAAW,GAASiB,EAClD,OAAOjC,EAAOyB,SAASzB,EAAOkC,SAAShhD,IAAI,EAAOigD,EACpD,CACA/6D,gBAAgBiwB,EAAK6qC,GAAkB,EAAOC,GAAmB,GAC/D,IAAIjgD,EAAKggD,EAAqC7qC,EAAImlB,QAAvBnlB,EAAI2qC,aAC/B,IAAK,IAAIp8D,EAAI,EAAGA,EAAI,EAAGA,IACrBsc,EAAEtc,GAAKsc,EAAEtc,GAAK,OAAUmf,KAAK8C,KAAK3F,EAAEtc,GAAK,MAAS,MAAO,KAAOsc,EAAEtc,GAAK,MAClEu8D,IACHjgD,EAAEtc,GAAY,IAAPsc,EAAEtc,IAEb,IAAIw7B,EAAK4/B,EAAOvb,IACP,SAAPvjC,EAAE,GAAwB,SAAPA,EAAE,GAAwB,SAAPA,EAAE,GACjC,SAAPA,EAAE,GAAwB,SAAPA,EAAE,GAAwB,QAAPA,EAAE,GACjC,SAAPA,EAAE,GAAwB,QAAPA,EAAE,GAAuB,SAAPA,EAAE,GACvCmV,EAAIJ,OAEN,OAAOkrC,EAAmB/gC,EAAGygC,YAAczgC,CAC7C,CACAh6B,gBAAgBq+C,EAAKyc,GAAkB,EAAOC,GAAmB,GAC/D,IAAKr0C,EAAGG,EAAG2a,GAAMs5B,EAAqCzc,EAAnBA,EAAIuc,aACnC3qC,EAAM,CACJ,mBAAJvJ,GAA6B,mBAAJG,GAA8B,kBAAJ2a,GAC/C,kBAAJ9a,EAA8B,mBAAJG,EAA6B,oBAAJ2a,EAC/C,oBAAJ9a,GAA+B,kBAAJG,EAA8B,mBAAJ2a,GAEvD,IAAK,IAAIhjC,EAAI,EAAGA,EAAI,EAAGA,IACrByxB,EAAIzxB,GAAKyxB,EAAIzxB,GAAK,SAAW,MAAQmf,KAAK8C,IAAIwP,EAAIzxB,GAAI,EAAI,KAAO,KAAQ,MAAQyxB,EAAIzxB,GACrFyxB,EAAIzxB,GAAKmf,KAAKF,IAAI,EAAGE,KAAKD,IAAI,EAAGuS,EAAIzxB,KAChCu8D,IACH9qC,EAAIzxB,GAAKmf,KAAKQ,MAAe,IAAT8R,EAAIzxB,KAE5B,IAAIw7B,EAAK4/B,EAAO3pC,IAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIouB,EAAIxuB,OAChD,OAAOkrC,EAAmB/gC,EAAGygC,YAAczgC,CAC7C,CACAh6B,gBAAgBq+C,EAAKyc,GAAkB,EAAOC,GAAmB,GAC/D,IAAIjgD,EAAIggD,EAAkBzc,EAAIuc,YAAW,GAASvc,EAAIjJ,QAGtDt6B,EAAEuvB,OAAOuvB,EAAOmC,KAChB,IAAItxB,EAAM8M,GAAMA,EAHJ,aAGc55B,KAAK8C,IAAI82B,EAAG,EAAI,IAF9B,cAE0CA,EAAI,IAAM,IAC5DykB,EAAKvxB,EAAG3vB,EAAE,IACVkf,EAAK4/B,EAAOwB,IACd,IAAMY,EAAK,GACX,KAAOvxB,EAAG3vB,EAAE,IAAMkhD,GAClB,KAAOA,EAAKvxB,EAAG3vB,EAAE,KACjBujC,EAAIxuB,OAEN,OAAOkrC,EAAmB/gC,EAAGygC,YAAczgC,CAC7C,CACAh6B,gBAAgBo7D,EAAKN,GAAkB,EAAOC,GAAmB,GAC/D,IAAIjgD,EAAIggD,EAAkBM,EAAIR,YAAW,GAASQ,EAC9Cv0C,GAAK/L,EAAE,GAAK,IAAM,IAClB4L,EAAI5L,EAAE,GAAK,IAAM+L,EACjB2a,EAAI3a,EAAI/L,EAAE,GAAK,IACnB,MAAMmhD,EAAM,aACNC,EAAM,cACZ,IAAIt9D,EAAIg7D,EAAOmC,IACf,MAAMI,EAAMx+C,KAAK8C,IAAIiG,EAAG,GAClB01C,EAAMz+C,KAAK8C,IAAI+gB,EAAG,GACxB,IAAIxH,EAAK4/B,EAAOvb,IACdz/C,EAAE,IAAMu9D,EAAMF,EAAME,GAAO,IAAMz1C,EAAI,IAAMw1C,GAC3Ct9D,EAAE,IAAMkc,EAAE,GAAKohD,EAAMD,EAAMt+C,KAAK8C,KAAK3F,EAAE,GAAK,IAAM,IAAK,GAAKA,EAAE,GAAKohD,GACnEt9D,EAAE,IAAMw9D,EAAMH,EAAMG,GAAO,IAAM56B,EAAI,IAAM06B,GAC3Cd,EAAIvrC,OAEN,OAAOkrC,EAAmB/gC,EAAGygC,YAAczgC,CAC7C,CACAh6B,gBAAgBq+C,EAAKyc,GAAkB,EAAOC,GAAmB,GAC/D,IAAKr0C,EAAGG,EAAG2a,GAAKs5B,EAAkBzc,EAAIuc,YAAW,GAASvc,EACtDkc,EAAI,EAAI7zC,GAAKA,EAAI,GAAKG,EAAI,EAAI2a,GAC9BtjC,EAAI,EAAI2oB,GAAKH,EAAI,GAAKG,EAAI,EAAI2a,GAClC3a,GAAQ,IACRA,EAAIA,EAAI,QAAUlJ,KAAK8C,IAAIoG,EAAG,EAAI,GAAK,MAAQA,EAAI,GAAK,IACxD,IAAIw1C,EAAO,EAAIzC,EAAOmC,IAAI,IAAMnC,EAAOmC,IAAI,GAAK,GAAKnC,EAAOmC,IAAI,GAAK,EAAInC,EAAOmC,IAAI,IAChFO,EAAO,EAAI1C,EAAOmC,IAAI,IAAMnC,EAAOmC,IAAI,GAAK,GAAKnC,EAAOmC,IAAI,GAAK,EAAInC,EAAOmC,IAAI,IAChFQ,EAAI,IAAM11C,EAAI,GAClB,OAAO+yC,EAAOiC,IACZU,EACA,GAAKA,GAAKhC,EAAI8B,GACd,GAAKE,GAAKr+D,EAAIo+D,GACdje,EAAIxuB,MAER,CACA7vB,gBAAgB67D,EAAKf,GAAkB,EAAOC,GAAmB,GAC/D,IAAKhsC,EAAGwrC,EAAGr8D,GAAK48D,EAAkBe,EAAIjB,YAAW,GAASiB,EACtDh1C,GAAKkI,EAAI,IAAM,IACfytC,EAAQ31C,EAAIA,EAAIA,EACpBA,EAAI21C,EAAQ,QAAUA,GAAS31C,EAAI,GAAK,KAAO,MAG/C0zC,EAAIA,GAAK,GAAKxrC,GAFH,EAAI6qC,EAAOmC,IAAI,IAAMnC,EAAOmC,IAAI,GAAK,GAAKnC,EAAOmC,IAAI,GAAK,EAAInC,EAAOmC,IAAI,IAGpF79D,EAAIA,GAAK,GAAK6wB,GAFH,EAAI6qC,EAAOmC,IAAI,IAAMnC,EAAOmC,IAAI,GAAK,GAAKnC,EAAOmC,IAAI,GAAK,EAAInC,EAAOmC,IAAI,IAGpFl1C,GAAQ,IACR,IAAIH,EAAU,EAAIG,EAAI0zC,GAAd,IAAqBA,EAAI,GAAKr8D,EAAIq8D,EAAIr8D,GAC1CsjC,GAAK,EAAI3a,EAAI,GAAK3oB,EAAI2oB,EAAI3oB,EAAIwoB,IAAM,EAAIxoB,GAC5C,OAAO07D,EAAOvb,IAAI33B,EAAGG,EAAG2a,EAAGq6B,EAAIhsC,MACjC,CACA7vB,gBAAgBo7D,EAAKN,GAAkB,EAAOC,GAAmB,GAC/D,IAAIjgD,EAAIggD,EAAkBM,EAAIR,YAAW,GAASQ,EAC9C/qD,EAAIq/B,EAAK6N,SAAS7N,EAAK0U,YAAYzmC,KAAKumC,MAAMppC,EAAE,GAAIA,EAAE,MAC1D,OAAO8+C,EAAO6B,IACZ3gD,EAAE,GACF6C,KAAKusB,KAAKpvB,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IACjCzK,EACA+qD,EAAIvrC,MAER,CACA7vB,gBAAgBy7D,EAAKX,GAAkB,EAAOC,GAAmB,GAC/D,IAAIjgD,EAAIggD,EAAkBW,EAAIb,YAAW,GAASa,EAC9C3nC,EAAM4b,EAAK+sB,SAAS3hD,EAAE,IAC1B,OAAO8+C,EAAOwB,IACZtgD,EAAE,GACF6C,KAAK8tB,IAAI3X,GAAOhZ,EAAE,GAClB6C,KAAK+tB,IAAI5X,GAAOhZ,EAAE,GAClB2gD,EAAI5rC,MAER,GAEE6sC,EAAQ9C,EACZ8C,EAAMX,IAAM,IAAI9xB,EAAG,OAAQ,IAAK,QAAS,GACzCyyB,EAAMxC,OAAS,CACbjqC,IAAK,IAAI+b,EAAM,IAAI/B,EAAG,EAAG,KAAM,IAAIA,EAAG,EAAG,KAAM,IAAIA,EAAG,EAAG,MACzDla,IAAK,IAAIic,EAAM,IAAI/B,EAAG,EAAG,KAAM,IAAIA,EAAG,EAAG,GAAI,IAAIA,EAAG,EAAG,IACvDgxB,IAAK,IAAIjvB,EAAM,IAAI/B,EAAG,EAAG,KAAM,IAAIA,EAAG,EAAG,GAAI,IAAIA,EAAG,EAAG,IACvDmxB,IAAK,IAAIpvB,EAAM,IAAI/B,EAAG,EAAG,KAAM,IAAIA,GAAG,IAAM,KAAM,IAAIA,GAAG,IAAM,MAC/DwxB,IAAK,IAAIzvB,EAAM,IAAI/B,EAAG,EAAG,KAAM,IAAIA,EAAG,EAAG,KAAM,IAAIA,EAAG,EAAG,MACzD4xB,IAAK,IAAI7vB,EAAM,IAAI/B,EAAG,EAAG,KAAM,IAAIA,GAAG,IAAM,KAAM,IAAIA,GAAG,IAAM,MAC/DoU,IAAK,IAAIrS,EAAM,IAAI/B,EAAG,EAAG,KAAM,IAAIA,EAAG,EAAG,KAAM,IAAIA,EAAG,EAAG,OAI3D,IAAI0yB,EAAW,cAActQ,EAC3BxwD,YAAY4H,EAAM4G,GAChB1M,QACAxB,KAAKoS,GAAK,WACVpS,KAAKygE,aAAc,EACnBzgE,KAAK0gE,SAAW,UAChB1gE,KAAK2gE,KAAO,CAAC,EACb,IAAIC,EAAY,KAEhB5gE,KAAKoS,GAAK,MACN9K,aAAgBu5D,SAClBD,EAAYt5D,EACZtH,KAAKoS,GAAK,uBAEVwuD,EAAYjxD,SAAS88B,cAAcnlC,IACxB,EACXtH,KAAKoS,GAAK9K,EAAK+d,OAAO,IAEnBu7C,GAOH5gE,KAAK4wD,QAAUgQ,EACf5gE,KAAK8gE,WAAaF,EAAUj0D,gBAP5B3M,KAAK8gE,WAAaN,EAASt4D,cAAc,MAAO,iBAChDlI,KAAK4wD,QAAU4P,EAASt4D,cAAc,MAAO,eAC7ClI,KAAK8gE,WAAWx4D,YAAYtI,KAAK4wD,SACjCjhD,SAAS28B,KAAKhkC,YAAYtI,KAAK8gE,aAMjCC,WAAW/gE,KAAKwyD,OAAO/sD,KAAKzF,KAAMkO,GAAW,GAC/C,CACArK,qBAAqByD,EAAO,MAAO8K,EAAI4uD,GACrC,IAAIv+D,EAAIkN,SAASzH,cAAcZ,GAK/B,OAJI8K,GACF3P,EAAEw+D,aAAa,KAAM7uD,GACnB4uD,GAAYA,EAAS14D,aACvB04D,EAAS14D,YAAY7F,GAChBA,CACT,CACA+vD,OAAOtkD,GACL,IAAKlO,KAAK8gE,WACR,MAAM,IAAI38D,MAAM,oBAAoBnE,KAAKoS,cAC3CpS,KAAKuuD,UAAW,EAChBvuD,KAAKkhE,eAAe,MACpBlhE,KAAKutD,MAAMvtD,KAAK0gE,UAChB1gE,KAAK4wD,QAAQuQ,cAAc,IAAIC,MAAM,UACrC,IAAK,IAAIlqB,KAAKl3C,KAAKiuD,QACbjuD,KAAKiuD,QAAQkE,eAAejb,IAC1Bl3C,KAAKiuD,QAAQ/W,GAAGgH,OAClBl+C,KAAKiuD,QAAQ/W,GAAGgH,MAAMl+C,KAAK6tD,MAAM5U,QAASj5C,MAGhDA,KAAKsuD,SAAWtuD,KAAKq2C,OACrBr2C,KAAKsW,SAAQ,GACTpI,GACFA,EAASlO,KAAK6tD,MAAO7tD,KAAK4wD,QAC9B,CACAyQ,MAAMC,GAKJ,OAJIA,EAAIC,UACNvhE,KAAK0gE,SAAWY,EAAIC,SAEtBvhE,KAAKwhE,WAA2B,MAAdF,EAAIxS,QAAmBwS,EAAIxS,OACtC9uD,IACT,CACA63D,UACE,OAAO,IACT,CACI2J,eAAWC,GACbzhE,KAAKygE,YAAcgB,EACfA,EACFC,OAAO/4D,iBAAiB,SAAU3I,KAAKkhE,eAAez7D,KAAKzF,eAEpDA,KAAK2gE,KAAK,aACV3gE,KAAK2gE,KAAK,OACjBe,OAAO11C,oBAAoB,SAAUhsB,KAAKkhE,eAAez7D,KAAKzF,OAElE,CACIwhE,iBACF,OAAOxhE,KAAKygE,WACd,CACA3R,OAAOh2C,EAAGm0C,GACRjtD,KAAK6tD,MAAQ/0C,EACb9Y,KAAK2hE,OAAO,CAAEh2C,MAAO,GAAG7S,EAAE6S,UAAW9X,OAAQ,GAAGiF,EAAEjF,aAAc,GAChE,IAAK,IAAIqjC,KAAKl3C,KAAKiuD,QACjB,GAAIjuD,KAAKiuD,QAAQkE,eAAejb,GAAI,CAClC,IAAI5kC,EAAItS,KAAKiuD,QAAQ/W,GACjB5kC,EAAEw8C,QACJx8C,EAAEw8C,OAAO9uD,KAAK6tD,MAAOZ,EACzB,CAEF,OAAOjtD,IACT,CACAkhE,eAAejU,GACb,IAAIn0C,EAAIuvC,EAAMuZ,iBAAiB5hE,KAAK8gE,WAAWx2C,yBAC3CtqB,KAAKygE,YACPzgE,KAAK2hE,OAAO,CAAEh2C,MAAO,OAAQ9X,OAAQ,SAAU,GAE/C7T,KAAK2hE,OAAO,CAAEh2C,MAAO,GAAG7S,EAAE6S,UAAW9X,OAAQ,GAAGiF,EAAEjF,aAAc,GAElE7T,KAAK8uD,OAAOh2C,EAAGm0C,EACjB,CACIvsD,cACF,OAAOV,KAAK4wD,OACd,CACI9iD,aACF,OAAO9N,KAAK8gE,UACd,CACIrO,YACF,OAAOzyD,KAAKuuD,QACd,CACAhB,MAAMsU,GAIJ,OAHIA,IACF7hE,KAAKo8B,WAAaylC,GACpB7hE,KAAK4wD,QAAQlgD,UAAY,GAClB1Q,IACT,CACIo8B,eAAWylC,GACb7hE,KAAK0gE,SAAWmB,EAChB7hE,KAAK8gE,WAAW1xD,MAAMitB,gBAAkBr8B,KAAK0gE,QAC/C,CACItkC,iBACF,OAAOp8B,KAAK0gE,QACd,CACAtxD,MAAM5M,EAAKusC,EAAKic,GAAS,GAIvB,OAHAhrD,KAAK2gE,KAAKn+D,GAAOusC,EACbic,IACFhrD,KAAK4wD,QAAQxhD,MAAM5M,GAAOusC,GACrB/uC,IACT,CACA2hE,OAAOA,EAAQ3W,GAAS,GACtB,IAAK,IAAI9T,KAAKyqB,EACRA,EAAOxP,eAAejb,IACxBl3C,KAAKoP,MAAM8nC,EAAGyqB,EAAOzqB,GAAI8T,GAE7B,OAAOhrD,IACT,CACA6D,eAAeyD,EAAMykB,GACnB,IAAK,IAAImrB,KAAKnrB,EACRA,EAAKomC,eAAejb,IACtB5vC,EAAK25D,aAAa/pB,EAAGnrB,EAAKmrB,IAG9B,OAAO5vC,CACT,CACAzD,uBAAuBkoB,GACrB,IAAIooC,EAAM,GACV,IAAK,IAAIjd,KAAKnrB,EACRA,EAAKomC,eAAejb,IAClBnrB,EAAKmrB,KACPid,GAAO,GAAGjd,MAAMnrB,EAAKmrB,QAG3B,OAAOid,CACT,CACAlzD,UAIE,OAHAygE,OAAO11C,oBAAoB,SAAUhsB,KAAKkhE,eAAez7D,KAAKzF,OAC9DA,KAAK0vD,OACL1vD,KAAK+uD,YACE/uD,IACT,GAEE8hE,EAAY,cAActB,EAC5B3I,UACE,OAAO,IAAIkK,EAAS/hE,KACtB,CACA6D,mBAAmBiK,EAAQ3K,EAAMiP,EAAI4vD,GAAY,GAC/C,IAAKl0D,IAAWA,EAAOxF,YACrB,MAAM,IAAInE,MAAM,qCAClB,IAAImD,EAAOqI,SAAS88B,cAAc,IAAIr6B,KAQtC,OAPK9K,IACHA,EAAOqI,SAASzH,cAAc/E,GAC9BmE,EAAK25D,aAAa,KAAM7uD,GACpB4vD,GACF16D,EAAK25D,aAAa,QAAS7uD,EAAGwrD,UAAU,EAAGxrD,EAAG4D,QAAQ,OACxDlI,EAAOxF,YAAYhB,IAEdA,CACT,CACAK,OAAO+mD,GAKL,OAJW1uD,KAAK8gE,WAAWmB,iBAAiB,IAAMF,EAASG,QAAQxT,IAC9DtoD,SAAS+7D,IACZA,EAAGC,WAAWx1D,YAAYu1D,EAAA,IAErB3gE,MAAMmG,OAAO+mD,EACtB,CACAK,YAEE,OADA/uD,KAAK8gE,WAAWpwD,UAAY,GACrBlP,MAAMutD,WACf,GAEEsT,EAAY,cAAc3P,EAC5BhzD,YAAYslD,GACVxjD,QACAxB,KAAKs4D,OAAS,CACZvF,QAAU,EACVC,SAAW,EACX52B,WAAc,OACd,eAAgB,OAChBtH,MAAS,OACT,eAAgB,MAChB,gBAAiB,IACjB,eAAgB,QAChBwtC,QAAW,EACXC,SAAY,WACZ13C,IAAO,EACPpG,KAAQ,EACRkH,MAAS,EACT9X,OAAU,GAEZ7T,KAAKo2D,KAAO,CACV7hB,MAAO,KACPiuB,QAAS,MACTC,WAAY,EACZC,UAAW,OACXC,aAAc,GACdvzD,MAAO,CAAC,GAEVpP,KAAKwyD,QAAS,EACdxyD,KAAKi1D,OAASjQ,EACdhlD,KAAKi1D,OAAOvtD,IAAI,CAAEw2C,MAAO,KACvBl+C,KAAKo2D,KAAK7hB,MAAQv0C,KAAKi1D,OAAOv0D,QAC9BV,KAAKo2D,KAAKoM,QAAU,WAAaH,EAAUG,UAC3CxiE,KAAKo2D,KAAKhnD,MAAQ1M,OAAO4H,OAAO,CAAC,EAAGtK,KAAKs4D,QACzCt4D,KAAKwyD,QAAS,CAAI,GAEtB,CACIxN,YACF,OAAOhlD,KAAKi1D,MACd,CACA2N,QAAQ1rB,EAAGn1C,EAAGg2B,EAAO,IACnB,QAA2B,IAAvB/3B,KAAKo2D,KAAKhnD,MAAM8nC,GAClB,MAAM,IAAI/yC,MAAM,GAAG+yC,kCACrBl3C,KAAKo2D,KAAKhnD,MAAM8nC,GAAK,GAAGn1C,IAAIg2B,GAC9B,CACArE,MAAMtb,GAEJ,OADApY,KAAK4iE,QAAQ,UAAWxqD,GACjBpY,IACT,CACAm+C,KAAKx/B,GASH,MARgB,kBAALA,GACT3e,KAAK4iE,QAAQ,SAAUjkD,GAClBA,GACH3e,KAAK4iE,QAAQ,aAAc,iBAE7B5iE,KAAK4iE,QAAQ,UAAU,GACvB5iE,KAAK4iE,QAAQ,aAAcjkD,IAEtB3e,IACT,CACAszD,OAAO30C,EAAGgN,EAAO4nC,EAAUC,GAUzB,MATgB,kBAAL70C,GACT3e,KAAK4iE,QAAQ,UAAWjkD,GACnBA,GACH3e,KAAK4iE,QAAQ,eAAgB,KAE/B5iE,KAAK4iE,QAAQ,WAAW,GACxB5iE,KAAK4iE,QAAQ,eAAgBjkD,GAC7B3e,KAAK4iE,QAAQ,gBAAiBj3C,GAAS,GAAK,OAEvC3rB,IACT,CACAu8D,SAAS59C,GAEP,OADA3e,KAAK4iE,QAAQ,QAASjkD,GACf3e,IACT,CACA6iE,IAAIlkD,GAMF,OAJE3e,KAAKo2D,KAAKuM,aADI,kBAALhkD,EACgB,GAEAA,EAEpB3e,IACT,CACA84D,KAAKwB,EAAYxG,EAAQ1kD,EAAO2kD,EAAYwG,GAe1C,MAdyB,iBAAdD,GACTt6D,KAAK6yD,MAAMrd,KAAO8kB,EACdC,IACFv6D,KAAK6yD,MAAMgB,KAAO0G,GAChBzG,IACF9zD,KAAK6yD,MAAMiB,OAASA,GAClB1kD,IACFpP,KAAK6yD,MAAMzjD,MAAQA,GACjB2kD,IACF/zD,KAAK6yD,MAAMkB,WAAaA,IAE1B/zD,KAAK6yD,MAAQyH,EAEft6D,KAAKo2D,KAAKhnD,MAAM,KAAUpP,KAAK6yD,MAAMxxD,MAC9BrB,IACT,CACAwuC,QAIE,OAHAxuC,KAAKo2D,KAAKhnD,MAAQ1M,OAAO4H,OAAO,CAAC,EAAGtK,KAAKs4D,QACzCt4D,KAAK6yD,MAAQ,IAAIC,EAAK,GAAI,cAC1B9yD,KAAKo2D,KAAKhnD,MAAM,KAAUpP,KAAK6yD,MAAMxxD,MAC9BrB,IACT,CACA8iE,YAAYC,EAAUxuB,GAKpB,OAJAv0C,KAAKo2D,KAAK7hB,MAAQA,EAClBv0C,KAAKo2D,KAAKoM,QAAUO,EACpB/iE,KAAKo2D,KAAKqM,WAAa,EACvBziE,KAAKgjE,SACEhjE,KAAKo2D,IACd,CACA6M,MAAMj4D,GACJ,IAAKA,GAA0B,MAAlBA,EAAK6jD,UAChB,MAAM,IAAI1qD,MAAM,8CAClB,OAAOnE,KAAK8iE,YAAYT,EAAUH,QAAQl3D,GAAOhL,KAAKglD,MAAMtkD,QAC9D,CACAsiE,SAGE,OAFAhjE,KAAKo2D,KAAKqM,aACVziE,KAAKo2D,KAAKsM,UAAY,GAAG1iE,KAAKo2D,KAAKoM,WAAWxiE,KAAKo2D,KAAKqM,aACjDziE,KAAKo2D,KAAKsM,SACnB,CACA7+D,aAAa26B,GACX,OAAOA,EAAIkkC,WAAa,KAAKL,EAAUa,OACzC,CACAr/D,eAAemH,GACb,MAAO,QAAQA,EAAK6jD,WACtB,CACAhrD,aAAayD,EAAMq6D,GACjB,IAAI5d,EAAK,GACJ4d,EAAO,QACV5d,EAAGj+C,KAAK,oBACL67D,EAAO,SACV5d,EAAGj+C,KAAK,gBACV,IAAK,IAAIoxC,KAAKyqB,EACZ,GAAIA,EAAOxP,eAAejb,IAAW,UAALA,GAAsB,WAALA,EAAgB,CAC/D,IAAIn1C,EAAI4/D,EAAOzqB,GACf,GAAIn1C,EAAG,CACL,IAAK4/D,EAAO,QAAyC,IAA5BzqB,EAAElhC,QAAQ,cACjC,SACK,IAAK2rD,EAAO,SAA4C,IAA9BzqB,EAAElhC,QAAQ,gBACzC,SAEA+tC,EAAGj+C,KAAK,GAAGoxC,MAAMn1C,IAErB,CACF,CAEF,OAAO+/D,EAAUqB,QAAQ77D,EAAM,CAAE8H,MAAO20C,EAAGzjD,KAAK,MAClD,CACAuD,iBAAiB26B,EAAKoS,EAAI4E,GAKxB,OAJAhX,EAAIpvB,MAAM,KAAUwhC,EAAG,GAAK,KAC5BpS,EAAIpvB,MAAM,IAASwhC,EAAG,GAAK,KAC3BpS,EAAIpvB,MAAM,MAAWomC,EAAK,GAAK,KAC/BhX,EAAIpvB,MAAM,OAAYomC,EAAK,GAAK,KACzBhX,CACT,CACA36B,iBAAiB26B,EAAKoS,GAGpB,OAFApS,EAAIpvB,MAAM,KAAUwhC,EAAG,GAAK,KAC5BpS,EAAIpvB,MAAM,IAASwhC,EAAG,GAAK,KACpBpS,CACT,CACA36B,aAAa26B,EAAKoS,EAAIqH,EAAS,EAAGkU,EAAQ,UACxC,MAAc,WAAVA,EACKkW,EAAUnqB,OAAO1Z,EAAKoS,EAAIqH,GAE1BoqB,EAAUrG,OAAOx9B,EAAKoS,EAAIqH,EAErC,CACArsB,MAAMglB,EAAIqH,EAAS,EAAGkU,EAAQ,UAK5B,OAJAnsD,KAAKgjE,SACQ,UAAT7W,GACFnsD,KAAK4iE,QAAQ,gBAAiB,QAChCP,EAAUz2C,MAAM5rB,KAAKo2D,KAAMxlB,EAAIqH,EAAQkU,GAChCnsD,IACT,CACA6D,cAAc26B,EAAKoS,EAAIqH,EAAS,IAC9B,IAAI3wC,EAAOw6D,EAAUsB,YAAY5kC,EAAI+V,MAAO,MAAO8tB,EAAUgB,MAAM7kC,IAInE,OAHAsjC,EAAUqB,QAAQ77D,EAAM,CAAEg8D,MAAO,uBAAuB9kC,EAAImkC,iBAC5DN,EAAUkB,UAAU/kC,EAAK,IAAIsP,EAAG8C,GAAI2B,UAAU0F,GAAS,IAAInK,EAAY,EAATmK,EAAqB,EAATA,IAC1EoqB,EAAUjzD,MAAM9H,EAAMk3B,EAAIpvB,OACnB9H,CACT,CACA4wC,OAAOhE,GAIL,OAHAl0C,KAAKgjE,SACLhjE,KAAK4iE,QAAQ,gBAAiB,QAC9BP,EAAUnqB,OAAOl4C,KAAKo2D,KAAMliB,EAAI,GAAIA,EAAI,GAAG,IACpCl0C,IACT,CACA6D,cAAc26B,EAAKoS,EAAI+qB,GACrB,IAAIr0D,EAAOw6D,EAAUsB,YAAY5kC,EAAI+V,MAAO,MAAO8tB,EAAUgB,MAAM7kC,IAInE,OAHAsjC,EAAUqB,QAAQ77D,EAAM,CAAEg8D,MAAO,uBAAuB9kC,EAAImkC,iBAC5DN,EAAUkB,UAAU/kC,EAAK,IAAIsP,EAAG8C,GAAI2B,UAAUopB,GAAW,IAAI7tB,EAAc,EAAX6tB,EAAyB,EAAXA,IAC9E0G,EAAUjzD,MAAM9H,EAAMk3B,EAAIpvB,OACnB9H,CACT,CACA00D,OAAOprB,EAAI+qB,GAGT,OAFA37D,KAAKgjE,SACLX,EAAUrG,OAAOh8D,KAAKo2D,KAAMxlB,EAAI+qB,GACzB37D,IACT,CACA6D,YAAY26B,EAAK0V,GACf,IAAI5hC,EAAIy/B,EAAKK,YAAY8B,GACzB,IAAKnC,EAAKmpB,WAAW5oD,GACnB,OACF,IAAIhL,EAAOw6D,EAAUsB,YAAY5kC,EAAI+V,MAAO,MAAO8tB,EAAUgB,MAAM7kC,IAInE,OAHAsjC,EAAUqB,QAAQ77D,EAAM,CAAEg8D,MAAO,qBAAqB9kC,EAAImkC,iBAC1DN,EAAUkB,UAAU/kC,EAAKlsB,EAAE,GAAIA,EAAE,IACjC+vD,EAAUjzD,MAAM9H,EAAMk3B,EAAIpvB,OACnB9H,CACT,CACA+iB,KAAK6pB,GAIH,OAHAl0C,KAAKgjE,SACLhjE,KAAK4iE,QAAQ,gBAAiB,KAC9BP,EAAUh4C,KAAKrqB,KAAKo2D,KAAMliB,GACnBl0C,IACT,CACA6D,YAAY26B,EAAKoS,EAAIyrB,GACnB,IAAI/0D,EAAOw6D,EAAUsB,YAAY5kC,EAAI+V,MAAO,MAAO8tB,EAAUgB,MAAM7kC,IAKnE,OAJAsjC,EAAUqB,QAAQ77D,EAAM,CAAEg8D,MAAO,qBAAqB9kC,EAAImkC,iBAC1Dr7D,EAAKQ,YAAcu0D,EACnBgG,EAAUmB,UAAUhlC,EAAKoS,GACzByxB,EAAUjzD,MAAM9H,EAAMk3B,EAAIpvB,OACnB9H,CACT,CACA3H,KAAKixC,EAAIyrB,GAGP,OAFAr8D,KAAKgjE,SACLX,EAAU1iE,KAAKK,KAAKo2D,KAAMxlB,EAAIyrB,GACvBr8D,IACT,CACAw9D,IAAInB,GAEF,OADAr8D,KAAKm+C,KAAK,QAAQmV,OAAO,OAAQ,IAAK3zD,KAAK,CAAC,GAAI,IAAK08D,GAC9Cr8D,IACT,CACAs7D,IAAI1qB,EAAIqH,EAAQujB,EAAYC,EAAU59B,GAEpC,OADAkU,EAAKvlC,KAAK,sCACHxM,IACT,CACA0R,KAAKwiC,GAEH,OADAnC,EAAKvlC,KAAK,uCACHxM,IACT,CACAi8D,QAAQ/nB,GAEN,OADAnC,EAAKvlC,KAAK,0CACHxM,IACT,GAEE+hE,EAAWM,EACfN,EAASS,QAAU,EACnBT,EAASmB,MAAQ,EAGjB,IAAIO,EAAW,cAAcjD,EAC3B9gE,YAAY4H,EAAM4G,GAGhB,GAFA1M,MAAM8F,EAAM4G,GACZlO,KAAK0gE,SAAW,OAC2B,OAAvC1gE,KAAK4wD,QAAQ8S,SAAS39C,cAAwB,CAChD,IAAI9H,EAAIwlD,EAASE,WAAW3jE,KAAK4wD,QAAS,MAAO,GAAG5wD,KAAKoS,UACzDpS,KAAK8gE,WAAa9gE,KAAK4wD,QACvB5wD,KAAK4wD,QAAU3yC,CACjB,CACF,CACA45C,UACE,OAAO,IAAI+L,EAAQ5jE,KACrB,CACIU,cACF,OAAOV,KAAK4wD,OACd,CACA9B,OAAOh2C,EAAGm0C,GASR,OARAzrD,MAAMstD,OAAOh2C,EAAGm0C,GAChBwW,EAASN,QAAQnjE,KAAKU,QAAS,CAC7BmjE,QAAW,OAAO7jE,KAAK6tD,MAAMliC,SAAS3rB,KAAK6tD,MAAMh6C,SACjD8X,MAAS,GAAG3rB,KAAK6tD,MAAMliC,QACvB9X,OAAU,GAAG7T,KAAK6tD,MAAMh6C,SACxBiwD,MAAS,6BACTC,QAAW,QAEN/jE,IACT,CACA6D,kBAAkBiK,EAAQ3K,EAAMiP,GAC9B,IAAKtE,IAAWA,EAAOxF,YACrB,MAAM,IAAInE,MAAM,qCAClB,IAAImD,EAAOqI,SAAS88B,cAAc,IAAIr6B,KAMtC,OALK9K,IACHA,EAAOqI,SAASc,gBAAgB,6BAA8BtN,GAC9DmE,EAAK25D,aAAa,KAAM7uD,GACxBtE,EAAOxF,YAAYhB,IAEdA,CACT,CACAK,OAAO+mD,GAKL,OAJW1uD,KAAK8gE,WAAWmB,iBAAiB,IAAM2B,EAAQ1B,QAAQxT,IAC7DtoD,SAAS+7D,IACZA,EAAGC,WAAWx1D,YAAYu1D,EAAA,IAErB3gE,MAAMmG,OAAO+mD,EACtB,CACAK,YAEE,OADA/uD,KAAK8gE,WAAWpwD,UAAY,GACrBlP,MAAMutD,WACf,GAEEiV,EAAW,cAActR,EAC3BhzD,YAAYslD,GACVxjD,QACAxB,KAAKs4D,OAAS,CACZvF,QAAU,EACVC,SAAW,EACX7U,KAAQ,OACRmV,OAAU,OACV,eAAgB,EAChB,kBAAmB,QACnB,iBAAkB,SAClBgP,QAAW,GAEbtiE,KAAKo2D,KAAO,CACV7hB,MAAO,KACPiuB,QAAS,MACTC,WAAY,EACZC,UAAW,OACXC,aAAc,GACdvzD,MAAO,CAAC,GAEVpP,KAAKwyD,QAAS,EACdxyD,KAAKi1D,OAASjQ,EACdhlD,KAAKi1D,OAAOvtD,IAAI,CAAEw2C,MAAO,KACvBl+C,KAAKo2D,KAAK7hB,MAAQv0C,KAAKi1D,OAAOv0D,QAC9BV,KAAKo2D,KAAKoM,QAAU,WAAawB,EAASxB,UAC1CxiE,KAAKo2D,KAAKhnD,MAAQ1M,OAAO4H,OAAO,CAAC,EAAGtK,KAAKs4D,QACzCt4D,KAAKwyD,QAAS,CAAI,GAEtB,CACIxN,YACF,OAAOhlD,KAAKi1D,MACd,CACA2N,QAAQ1rB,EAAGn1C,GACT,QAA2B,IAAvB/B,KAAKo2D,KAAKhnD,MAAM8nC,GAClB,MAAM,IAAI/yC,MAAM,GAAG+yC,kCACrBl3C,KAAKo2D,KAAKhnD,MAAM8nC,GAAKn1C,CACvB,CACA2xB,MAAMtb,GAEJ,OADApY,KAAK4iE,QAAQ,UAAWxqD,GACjBpY,IACT,CACAm+C,KAAKx/B,GAOH,MANgB,kBAALA,EACT3e,KAAK4iE,QAAQ,SAAUjkD,IAEvB3e,KAAK4iE,QAAQ,UAAU,GACvB5iE,KAAK4iE,QAAQ,OAAQjkD,IAEhB3e,IACT,CACAszD,OAAO30C,EAAGgN,EAAO4nC,EAAUC,GAazB,MAZgB,kBAAL70C,EACT3e,KAAK4iE,QAAQ,UAAWjkD,IAExB3e,KAAK4iE,QAAQ,WAAW,GACxB5iE,KAAK4iE,QAAQ,SAAUjkD,GACnBgN,GACF3rB,KAAK4iE,QAAQ,eAAgBj3C,GAC3B4nC,GACFvzD,KAAK4iE,QAAQ,kBAAmBrP,GAC9BC,GACFxzD,KAAK4iE,QAAQ,iBAAkBpP,IAE5BxzD,IACT,CACA6iE,IAAIlkD,GAMF,OAJE3e,KAAKo2D,KAAKuM,aADI,kBAALhkD,EACgB,GAEAA,EAEpB3e,IACT,CACA84D,KAAKwB,EAAYxG,EAAQ1kD,EAAO2kD,EAAYwG,GAe1C,MAdyB,iBAAdD,GACTt6D,KAAK6yD,MAAMrd,KAAO8kB,EACdC,IACFv6D,KAAK6yD,MAAMgB,KAAO0G,GAChBzG,IACF9zD,KAAK6yD,MAAMiB,OAASA,GAClB1kD,IACFpP,KAAK6yD,MAAMzjD,MAAQA,GACjB2kD,IACF/zD,KAAK6yD,MAAMkB,WAAaA,IAE1B/zD,KAAK6yD,MAAQyH,EAEft6D,KAAKo2D,KAAKhnD,MAAM,KAAUpP,KAAK6yD,MAAMxxD,MAC9BrB,IACT,CACAwuC,QAIE,OAHAxuC,KAAKo2D,KAAKhnD,MAAQ1M,OAAO4H,OAAO,CAAC,EAAGtK,KAAKs4D,QACzCt4D,KAAK6yD,MAAQ,IAAIC,EAAK,GAAI,cAC1B9yD,KAAKo2D,KAAKhnD,MAAM,KAAUpP,KAAK6yD,MAAMxxD,MAC9BrB,IACT,CACA8iE,YAAYC,EAAUxuB,GAKpB,OAJAv0C,KAAKo2D,KAAK7hB,MAAQA,EAClBv0C,KAAKo2D,KAAKoM,QAAUO,EACpB/iE,KAAKo2D,KAAKqM,WAAa,EACvBziE,KAAKgjE,SACEhjE,KAAKo2D,IACd,CACA6M,MAAMj4D,GACJ,IAAKA,GAA0B,MAAlBA,EAAK6jD,UAChB,MAAM,IAAI1qD,MAAM,8CAClB,OAAOnE,KAAK8iE,YAAYkB,EAAS9B,QAAQl3D,GAAOhL,KAAKglD,MAAMtkD,QAC7D,CACAsiE,SAGE,OAFAhjE,KAAKo2D,KAAKqM,aACVziE,KAAKo2D,KAAKsM,UAAY,GAAG1iE,KAAKo2D,KAAKoM,WAAWxiE,KAAKo2D,KAAKqM,aACjDziE,KAAKo2D,KAAKsM,SACnB,CACA7+D,aAAa26B,GACX,OAAOA,EAAIkkC,WAAa,KAAKsB,EAASd,OACxC,CACAr/D,eAAemH,GACb,MAAO,QAAQA,EAAK6jD,WACtB,CACAhrD,aAAayD,EAAMq6D,GACjB,IAAI5d,EAAK,GACJ4d,EAAO,QACV5d,EAAGj+C,KAAK,cACL67D,EAAO,SACV5d,EAAGj+C,KAAK,gBACV,IAAK,IAAIoxC,KAAKyqB,EACZ,GAAIA,EAAOxP,eAAejb,IAAW,UAALA,GAAsB,WAALA,EAAgB,CAC/D,IAAIn1C,EAAI4/D,EAAOzqB,GACf,GAAIn1C,EAAG,CACL,IAAK4/D,EAAO,QAAmC,IAAtBzqB,EAAElhC,QAAQ,QACjC,SACK,IAAK2rD,EAAO,SAAsC,IAAxBzqB,EAAElhC,QAAQ,UACzC,SAEA+tC,EAAGj+C,KAAK,GAAGoxC,MAAMn1C,IAErB,CACF,CAEF,OAAOy+D,EAAS2C,QAAQ77D,EAAM,CAAE8H,MAAO20C,EAAGzjD,KAAK,MACjD,CACAuD,aAAa26B,EAAKoS,EAAIqH,EAAS,EAAGkU,EAAQ,UACxC,MAAc,WAAVA,EACK6X,EAAS9rB,OAAO1Z,EAAKoS,EAAIqH,GAEzB+rB,EAAShI,OAAOx9B,EAAKoS,EAAIqH,EAEpC,CACArsB,MAAMglB,EAAIqH,EAAS,EAAGkU,EAAQ,UAG5B,OAFAnsD,KAAKgjE,SACLgB,EAASp4C,MAAM5rB,KAAKo2D,KAAMxlB,EAAIqH,EAAQkU,GAC/BnsD,IACT,CACA6D,cAAc26B,EAAKoS,EAAIqH,EAAS,IAC9B,IAAI3wC,EAAOm8D,EAASE,WAAWnlC,EAAI+V,MAAO,SAAUyvB,EAASX,MAAM7kC,IAQnE,OAPAgiC,EAAS2C,QAAQ77D,EAAM,CACrB28D,GAAIrzB,EAAG,GACPivB,GAAIjvB,EAAG,GACPpoB,EAAGyvB,EACHqrB,MAAS,0BAA0B9kC,EAAImkC,iBAEzCqB,EAAS50D,MAAM9H,EAAMk3B,EAAIpvB,OAClB9H,CACT,CACA4wC,OAAOhE,GACLl0C,KAAKgjE,SACL,IAAI1wD,EAAIy/B,EAAKK,YAAY8B,GAEzB,OADA8vB,EAAS9rB,OAAOl4C,KAAKo2D,KAAM9jD,EAAE,GAAIA,EAAE,GAAG,IAC/BtS,IACT,CACA6D,WAAW26B,EAAKoS,EAAIqH,EAAQujB,EAAYC,EAAU59B,GAChD,IAAIv2B,EAAOm8D,EAASE,WAAWnlC,EAAI+V,MAAO,OAAQyvB,EAASX,MAAM7kC,IACjE,MAAM0f,EAAQ,IAAIpQ,EAAG8C,GAAIqB,QAAQupB,EAAYvjB,GAAQ,GAC/C+V,EAAM,IAAIlgB,EAAG8C,GAAIqB,QAAQwpB,EAAUxjB,GAAQ,GAEjD,IAAIisB,EADS3wB,EAAK4N,WAAWsa,GAAYloB,EAAK4N,WAAWqa,GACnC/b,EAAMkD,GACxB9kB,IACFqmC,GAAYA,GACd,MAAMC,EAAQtmC,EAAK,IAAM,IACnBp7B,EAAI,KAAKy7C,EAAM,MAAMA,EAAM,QAAQjG,KAAUA,OAAYisB,EAAW,IAAM,OAAOC,KAASnW,EAAI,MAAMA,EAAI,KAM9G,OALAwS,EAAS2C,QAAQ77D,EAAM,C,EACrB7E,EACA6gE,MAAS,uBAAuB9kC,EAAImkC,iBAEtCqB,EAAS50D,MAAM9H,EAAMk3B,EAAIpvB,OAClB9H,CACT,CACAg0D,IAAI1qB,EAAIqH,EAAQujB,EAAYC,EAAU59B,GAGpC,OAFA79B,KAAKgjE,SACLgB,EAAS1I,IAAIt7D,KAAKo2D,KAAMxlB,EAAIqH,EAAQujB,EAAYC,EAAU59B,GACnD79B,IACT,CACA6D,cAAc26B,EAAKoS,EAAI+qB,GACrB,IAAIr0D,EAAOm8D,EAASE,WAAWnlC,EAAI+V,MAAO,OAAQyvB,EAASX,MAAM7kC,IASjE,OARAgiC,EAAS2C,QAAQ77D,EAAM,CACrBijB,EAAGqmB,EAAG,GAAK+qB,EACXjxC,EAAGkmB,EAAG,GAAK+qB,EACXhwC,MAAkB,EAAXgwC,EACP9nD,OAAmB,EAAX8nD,EACR2H,MAAS,0BAA0B9kC,EAAImkC,iBAEzCqB,EAAS50D,MAAM9H,EAAMk3B,EAAIpvB,OAClB9H,CACT,CACA00D,OAAOprB,EAAI+qB,GAGT,OAFA37D,KAAKgjE,SACLgB,EAAShI,OAAOh8D,KAAKo2D,KAAMxlB,EAAI+qB,GACxB37D,IACT,CACA6D,YAAY26B,EAAK0V,GACf,IAAIhM,EAAS87B,EAASI,aAAalwB,GACnC,GAAIhM,EAAO6gB,MAAQ,EACjB,OACF,GAAI7gB,EAAO6gB,MAAQ,EACjB,OAAOib,EAASjwB,MAAMvV,EAAK0J,EAAOz8B,QAAQ,GAC5C,IAAInE,EAAOm8D,EAASE,WAAWnlC,EAAI+V,MAAO,OAAQyvB,EAASX,MAAM7kC,IAC7DlsB,EAAIy/B,EAAKK,YAAY8B,GASzB,OARAssB,EAAS2C,QAAQ77D,EAAM,CACrBs0D,GAAItpD,EAAE,GAAG,GACT+gC,GAAI/gC,EAAE,GAAG,GACTupD,GAAIvpD,EAAE,GAAG,GACTwpD,GAAIxpD,EAAE,GAAG,GACTgxD,MAAS,wBAAwB9kC,EAAImkC,iBAEvCqB,EAAS50D,MAAM9H,EAAMk3B,EAAIpvB,OAClB9H,CACT,CACAoK,KAAKwiC,GAGH,OAFAl0C,KAAKgjE,SACLgB,EAAStyD,KAAK1R,KAAKo2D,KAAMliB,GAClBl0C,IACT,CACA6D,aAAa26B,EAAK0J,EAAQkS,GAAY,GACpC,IAAI9yC,EAAOm8D,EAASE,WAAWnlC,EAAI+V,MAAO6F,EAAY,UAAY,WAAY4pB,EAASX,MAAM7kC,IAM7F,OALAgiC,EAAS2C,QAAQ77D,EAAM,C,OACrB4gC,EACAo7B,MAAS,2BAA2B9kC,EAAImkC,iBAE1CqB,EAAS50D,MAAM9H,EAAMk3B,EAAIpvB,OAClB9H,CACT,CACAzD,oBAAoBqwC,GAClB,IAAIhM,EAAS,GACT6gB,EAAQ,EACZ,IAAK,IAAIz2C,KAAK4hC,EACZhM,GAAU,GAAG51B,EAAE,MAAMA,EAAE,MACvBy2C,IAEF,MAAO,CAAEt9C,OAAQy8B,E,MAAQ6gB,EAC3B,CACAllD,eAAe26B,EAAK0V,GAClB,IAAIhM,EAAS87B,EAASI,aAAalwB,GACnC,OAAO8vB,EAASjwB,MAAMvV,EAAK0J,EAAOz8B,QAAQ,EAC5C,CACAwwD,QAAQ/nB,GAGN,OAFAl0C,KAAKgjE,SACLgB,EAAS/H,QAAQj8D,KAAKo2D,KAAMliB,GACrBl0C,IACT,CACA6D,YAAY26B,EAAK0V,GACf,IAAKnC,EAAKmpB,WAAWhnB,GACnB,OACF,IAAI5sC,EAAOm8D,EAASE,WAAWnlC,EAAI+V,MAAO,OAAQyvB,EAASX,MAAM7kC,IAC7DqvB,EAAQhe,EAAM0c,UAAUrY,GAAKe,cAC7BO,EAAOL,EAAUK,KAAKqY,GAS1B,OARA2S,EAAS2C,QAAQ77D,EAAM,CACrBijB,EAAGsjC,EAAM,GAAG,GACZnjC,EAAGmjC,EAAM,GAAG,GACZliC,MAAO6pB,EAAK,GACZ3hC,OAAQ2hC,EAAK,GACb8tB,MAAS,wBAAwB9kC,EAAImkC,iBAEvCqB,EAAS50D,MAAM9H,EAAMk3B,EAAIpvB,OAClB9H,CACT,CACA+iB,KAAK6pB,GAGH,OAFAl0C,KAAKgjE,SACLgB,EAAS35C,KAAKrqB,KAAKo2D,KAAMliB,GAClBl0C,IACT,CACA6D,YAAY26B,EAAKoS,EAAIyrB,GACnB,IAAI/0D,EAAOm8D,EAASE,WAAWnlC,EAAI+V,MAAO,OAAQyvB,EAASX,MAAM7kC,IAWjE,OAVAgiC,EAAS2C,QAAQ77D,EAAM,CACrB,iBAAkB,OAClBijB,EAAGqmB,EAAG,GACNlmB,EAAGkmB,EAAG,GACN/hB,GAAI,EACJkW,GAAI,EACJu+B,MAAS,wBAAwB9kC,EAAImkC,iBAEvCr7D,EAAKQ,YAAcu0D,EACnB2H,EAAS50D,MAAM9H,EAAMk3B,EAAIpvB,OAClB9H,CACT,CACA3H,KAAKixC,EAAIyrB,GAGP,OAFAr8D,KAAKgjE,SACLgB,EAASrkE,KAAKK,KAAKo2D,KAAMxlB,EAAIyrB,GACtBr8D,IACT,CACAw9D,IAAInB,GAEF,OADAr8D,KAAKm+C,KAAK,QAAQmV,OAAO,OAAQ,IAAK3zD,KAAK,CAAC,GAAI,IAAK08D,GAC9Cr8D,IACT,GAEE4jE,EAAUI,EACdJ,EAAQpB,QAAU,EAClBoB,EAAQV,MAAQ;;AC90LT,MAAMmB,EAGX3kE,YAAmB6iE,EAAqBtqB,G,cAArBsqB,E,YAAqBtqB,EACtCj4C,KAAK80B,MAAQyrC,EAAM+D,SAAS/D,EAAMzB,IAAoB,IAAhBt9C,KAAKw8B,SAAgB,EAAG,GAChE,CAEAumB,WACE,OAAO/tB,EAAOb,WAAW31C,KAAKuiE,SAAUviE,KAAKi4C,OAC/C,CAEAusB,SAAS5zB,EAAY0B,GACnB,OAAOkE,EAAOhD,YAAYxzC,KAAKukE,WAAY3zB,EAAI0B,EACjD,CAEAmyB,gBACE,IAAIC,EAAQ1kE,KAAKuiE,SAAShwB,UAAUoyB,GAAMtuB,QACtCuuB,EAAWF,EAAM12B,YACjB62B,EAAgBrjD,KAAKumC,MAAM2c,EAAMh6C,EAAGg6C,EAAMn6C,IAAgB,EAAV/I,KAAKoW,IACrDktC,EAActjD,KAAKujD,KAAK/kE,KAAKi4C,OAAS2sB,IAAuB,EAAVpjD,KAAKoW,IAC5D,OAAO,IAAIotC,EAAYH,EAAeC,EAAaF,EACrD,EAGK,MAAMI,EACXtlE,YACS6iE,EACAtqB,EACA2sB,G,cAFArC,E,YACAtqB,E,cACA2sB,CACN,CAEH1mB,QACE,OAAOl+C,KAAKuiE,SAAWviE,KAAKi4C,MAC9B,CAEA+V,MACE,OAAOhuD,KAAKuiE,SAAWviE,KAAKi4C,MAC9B,ECnCK,IACIgtB,EADAC,EAAsB,KAEtBC,EAAuB,QAE3B,SAASC,EAAaC,GAC3BF,EAAYE,CACd,CACO,SAASC,IACd,GAAIJ,EAAS,CACD,IAAIp3B,EAAGo3B,EAAQziC,KAAK,GAAG8iC,UAAWL,EAAQziC,KAAK,GAAG8iC,WACpDv3B,YAAc,IACpBo3B,EAAa,UAEjB,CAEA,OAAQD,GACN,IAAK,SAST,WACE,IAAIT,EAAQC,GAAMlU,QAAQle,UAAUoyB,GAAMtuB,QAC1C4uB,EAAazjD,KAAKumC,MAAM2c,EAAMh6C,EAAGg6C,EAAMn6C,EACzC,CAXMi7C,GACA,MACF,IAAK,WAWT,WACE,GAAIN,EAAS,CACX,IAAIO,EAAM,IAAI33B,EAAGo3B,EAAQziC,KAAK,GAAG8iC,UAAWL,EAAQziC,KAAK,GAAG8iC,WACxDE,EAAIz3B,YAAc,KACpBi3B,EAAazjD,KAAKumC,MAAM0d,EAAI/6C,EAAG+6C,EAAIl7C,GAEvC,CACF,CAjBMm7C,GAGN,CAgBAhE,OAAO/4D,iBAAiB,oBAAqBia,IACtCsiD,IACHA,EAAU5e,UAAUqf,cAAc/iD,EAAEgjD,QAAQ/jE,QAE9C0K,QAAQixD,IACN,0DACA56C,EAAEgjD,QAAQ/jE,MACV+gB,EAAEgjD,QAAQxzD,GACVwQ,EAAEgjD,QAAQC,QAAQzjE,OAClBwgB,EAAEgjD,QAAQnjC,KAAKrgC,OAAM,IAIzBs/D,OAAO/4D,iBAAiB,uBAAwBia,IAC1CsiD,IAAWA,EAAQrjE,MAAU+gB,EAAEgjD,QAAQ/jE,OAG3C0K,QAAQixD,IACN,yCACA56C,EAAEgjD,QAAQ/jE,MACV+gB,EAAEgjD,QAAQxzD,GAAE,IC9DhB,IAAI0zD,EAAMtkD,KAAK+tB,IACXw2B,EAAMvkD,KAAKyP,IACX+0C,EAAQxkD,KAAK0P,MAIb+0C,GAHMzkD,KAAK8C,IACL9C,KAAKD,IACLC,KAAKF,IACNE,KAAKoW,IAUd,SAASsuC,EAAS9tD,GAChB,OALF,SAAeA,EAAWmJ,EAAaD,GACrC,OAAOE,KAAKD,IAAID,EAAKE,KAAKF,IAAIC,EAAKnJ,GACrC,CAGS+tD,CAAM/tD,EAAG,EAAG,EACrB,CAEO,SAASguD,GAAOv/D,EAAe1F,GACpC,IAAIopB,GAAK1jB,EAAQ1F,EAAOohE,WAA6B,EAAhBphE,EAAO82C,QAAc,GACtDouB,EAAOH,EAAS,EAAIH,EAAIC,EAAMz7C,KAClC,OAAmC,GAA3Bu7C,GAAKv7C,EAAI,KAAQ07C,EAAK,GAAW,IAAOI,CAClD,CAEO,SAASC,GAAQz/D,EAAe2kC,GACrC,OAAOA,EAAQ/5B,KAAKtQ,GACXilE,GAAOv/D,EAAO1F,IAEzB,CAEO,SAASolE,GAAW1/D,EAAe2kC,GACxC,OAAO86B,GAAQz/D,EAAO2kC,GAASphC,QAAO,CAACivB,EAAMmtC,IAAQntC,EAAOmtC,GAAK,EACnE,CA6BO,SAASC,GAAU5/D,EAAe2kC,GACvC,IACIk7B,EAVC,SACL7/D,EACA2kC,EACAm7B,GAEA,OAfK,SACL9/D,EACA2kC,EACAm7B,GAEA,OAAOn7B,EAAQ/5B,KAAI,CAACtQ,EAAQkB,IAdvB,SACLwE,EACA1F,EACA2yD,GAGA,OADY3yD,EAAOohE,SAAW17D,GACfitD,CACjB,CAQW8S,CAAO//D,EAAO1F,EAAQwlE,EAAQtkE,KAEzC,CAOSwkE,CAAQhgE,EAAO2kC,EAASm7B,GAASv8D,QAAO,CAACivB,EAAMmtC,IAAQntC,EAAOmtC,GAAK,EAC5E,CAIWM,CAAWjgE,EAAO2kC,EADlB86B,GAAQz/D,EAAO2kC,IAExB,OAAO3kC,EAAQ6/D,CACjB,CClEO,MAAMK,GAGXrnE,YAAmBsnE,G,eAAAA,EACjBhnE,KAAKinE,UAAY,MACnB,CAEAnyC,MAAMnW,GAEJ,OADA3e,KAAKinE,UAAYtoD,EACV3e,IACT,CAEAknE,OACE,IAAIC,EAAuB,EAAX3lD,KAAMoW,GAAUwvC,GAAOC,WACvC,IAAK,IAAIhlE,EAAI,EAAGA,GAAK+kE,GAAOC,WAAYhlE,IAAK,CAC3C,IAAIilE,GAAcjlE,EAAI,GAAK8kE,EAAY3lD,KAAKoW,GACxC2vC,EAAWllE,EAAI8kE,EAAY3lD,KAAKoW,GAChC4vC,EAAiBF,GAAwB,EAAV9lD,KAAKoW,IACpC6vC,EAAeF,GAAsB,EAAV/lD,KAAKoW,IAChC8vC,EAAc1nE,KAAKgnE,UAAUQ,GAC7BG,EAAY3nE,KAAKgnE,UAAUS,GAC3BG,EACFrwB,EAAIinB,WACFkJ,GACCN,GAAOS,OACRT,GAAOS,OACPT,GAAOU,UAAYV,GAAOW,QAC1BX,GAAOU,UAAYV,GAAOW,SACxBC,GACFC,EACF1wB,EAAIinB,WACFmJ,GACCP,GAAOS,OACRT,GAAOS,OACPT,GAAOU,UAAYV,GAAOW,QAC1BX,GAAOU,UAAYV,GAAOW,SACxBC,GACFE,EAAU,IAAIp6B,EAChBtsB,KAAK8tB,IAAIg4B,GAAcM,EACvBpmD,KAAK+tB,IAAI+3B,GAAcM,GAErBO,EAAQ,IAAIr6B,EACdtsB,KAAK8tB,IAAIi4B,GAAYU,EACrBzmD,KAAK+tB,IAAIg4B,GAAYU,GAEvBG,GACG3U,WAAWzzD,KAAKinE,WAChBv1D,KAAK,IAAIm+B,EAAMq4B,EAASC,GAAO5e,OAAOob,GAAMtuB,QACjD,CACF,ECtCK,IAAI+wB,GAAS,CAClBS,OAAQ,EACRC,UAAW,GACXC,QAAS,GACTV,WAAY,IACZgB,oBAAoB,EACpBC,iBAAiB,GAGnB,MAAMC,GAAO,IAAI,EAAA56B,EAAAd,MACjB,IAAI27B,GAAcD,GAAKxwD,UAAU,CAAE5S,MAAO,UAC1CqjE,GAAY7wD,SAASyvD,GAAQ,YAAa,CAAE7lD,IAAK,EAAKD,IAAK,IAC3DknD,GAAY7wD,SAASyvD,GAAQ,UAAW,CAAE7lD,IAAK,EAAKD,IAAK,IACzDknD,GAAY7wD,SAASyvD,GAAQ,aAAc,CAAE7lD,IAAK,EAAGD,IAAK,IAAMQ,KAAM,KACtE,IAAI2mD,GAAaF,GAAKxwD,UAAU,CAAE5S,MAAO,cACzCsjE,GAAW9wD,SAASyvD,GAAQ,sBAC5BqB,GAAW9wD,SAASyvD,GAAQ,mBAErB,MAAMzC,GAAQ,ILq6GF,cAAczU,EAC/BxwD,YAAY4H,EAAM4G,GAChB1M,QACAxB,KAAK0oE,YAAc,EACnB1oE,KAAKygE,aAAc,EACnBzgE,KAAK0gE,SAAW,UAChB1gE,KAAK2oE,YAAa,EAClB3oE,KAAK4oE,gBAAiB,EACtB,IAAIhI,EAAY,KAGhB,GADA5gE,KAAKoS,GAAK,KACN9K,aAAgBu5D,QAClBD,EAAYt5D,EACZtH,KAAKoS,GAAK,yBACL,CACL,IAAIA,EAAK9K,EACT8K,EAAiB,MAAZ9K,EAAK,IAA0B,MAAZA,EAAK,GAAaA,EAAO,IAAMA,EACvDs5D,EAAYjxD,SAAS88B,cAAcr6B,IACxB,EACXpS,KAAKoS,GAAKA,EAAGiT,OAAO,EACtB,CACKu7C,EAM0C,UAApCA,EAAU8C,SAAS39C,eAC5B/lB,KAAK8gE,WAAaF,EAClB5gE,KAAK4wD,QAAU5wD,KAAK6oE,eAAe,SAAU7oE,KAAKoS,GAAK,WACvDpS,KAAK8gE,WAAWx4D,YAAYtI,KAAK4wD,SACjC5wD,KAAK4oE,gBAAiB,IAEtB5oE,KAAK4wD,QAAUgQ,EACf5gE,KAAK8gE,WAAaF,EAAUj0D,cAC5B3M,KAAKygE,aAAc,IAbnBzgE,KAAK8gE,WAAa9gE,KAAK6oE,eAAe,MAAO7oE,KAAKoS,GAAK,cACvDpS,KAAK4wD,QAAU5wD,KAAK6oE,eAAe,SAAU7oE,KAAKoS,IAClDpS,KAAK8gE,WAAWx4D,YAAYtI,KAAK4wD,SACjCjhD,SAAS28B,KAAKhkC,YAAYtI,KAAK8gE,aAYjCC,WAAW/gE,KAAKwyD,OAAO/sD,KAAKzF,KAAMkO,GAAW,KAC7ClO,KAAKo2D,KAAOp2D,KAAK4wD,QAAQ3gD,WAAW,KACtC,CACA44D,eAAevhE,EAAO,MAAO8K,GAC3B,IAAI3P,EAAIkN,SAASzH,cAAcZ,GAE/B,OADA7E,EAAEw+D,aAAa,KAAM7uD,GACd3P,CACT,CACA+vD,OAAOtkD,GACL,IAAKlO,KAAK8gE,WACR,MAAM,IAAI38D,MAAM,oBAAoBnE,KAAKoS,cAC3CpS,KAAKuuD,UAAW,EAChBvuD,KAAKkhE,eAAe,MACpBlhE,KAAKutD,MAAMvtD,KAAK0gE,UAChB1gE,KAAK4wD,QAAQuQ,cAAc,IAAIC,MAAM,UACrC,IAAK,IAAIlqB,KAAKl3C,KAAKiuD,QACbjuD,KAAKiuD,QAAQkE,eAAejb,IAC1Bl3C,KAAKiuD,QAAQ/W,GAAGgH,OAClBl+C,KAAKiuD,QAAQ/W,GAAGgH,MAAMl+C,KAAK6tD,MAAM5U,QAASj5C,MAGhDA,KAAKsuD,SAAWtuD,KAAKq2C,OACrBr2C,KAAK4oE,gBAAiB,EAClB16D,GACFA,EAASlO,KAAK6tD,MAAO7tD,KAAK4wD,QAC9B,CACAyQ,MAAMC,GAGJ,GAFAthE,KAAK0gE,SAAWY,EAAIC,QAAUD,EAAIC,QAAU,cAC5CvhE,KAAKwhE,WAA2B,MAAdF,EAAIxS,QAAmBwS,EAAIxS,QAC1B,IAAfwS,EAAIwH,OAAkB,CACxB,IAAIC,EAAKrH,QAASA,OAAOsH,kBAAwB,EAC7CC,EAAKjpE,KAAKo2D,KAAK8S,8BAAgClpE,KAAKo2D,KAAK+S,2BAA6BnpE,KAAKo2D,KAAKgT,0BAA4BppE,KAAKo2D,KAAKiT,yBAA2BrpE,KAAKo2D,KAAKkT,wBAA0B,EACzMtpE,KAAK0oE,YAAclnD,KAAKF,IAAI,EAAGynD,EAAKE,EACtC,CAWA,OAVI3H,EAAIiI,WACNvpE,KAAK2oE,YAAa,EAClB3oE,KAAKwpE,WAAaxpE,KAAK6oE,eAAe,SAAU7oE,KAAKoS,GAAK,cAC1DpS,KAAKypE,QAAUzpE,KAAKwpE,WAAWv5D,WAAW,OAE1CjQ,KAAK2oE,YAAa,EAEhBrH,EAAIoI,eACN1pE,KAAK0oE,YAAcpH,EAAIoI,cAElB1pE,IACT,CACIwhE,eAAWC,GACRC,SAEL1hE,KAAKygE,YAAcgB,EACfA,EACFC,OAAO/4D,iBAAiB,SAAU3I,KAAKkhE,eAAez7D,KAAKzF,OAE3D0hE,OAAO11C,oBAAoB,SAAUhsB,KAAKkhE,eAAez7D,KAAKzF,OAElE,CACIwhE,iBACF,OAAOxhE,KAAKygE,WACd,CACA3R,OAAOh2C,EAAGm0C,GACRjtD,KAAK6tD,MAAQ/0C,EACb9Y,KAAK4wD,QAAQjlC,MAAQnK,KAAK2sB,KAAKnuC,KAAK6tD,MAAMrY,KAAKjrB,GAAKvqB,KAAK0oE,YACzD1oE,KAAK4wD,QAAQ/8C,OAAS2N,KAAK2sB,KAAKnuC,KAAK6tD,MAAMrY,KAAK9qB,GAAK1qB,KAAK0oE,YAC1D1oE,KAAK4wD,QAAQxhD,MAAMuc,MAAQnK,KAAK2sB,KAAKnuC,KAAK6tD,MAAMrY,KAAKjrB,GAAK,KAC1DvqB,KAAK4wD,QAAQxhD,MAAMyE,OAAS2N,KAAK2sB,KAAKnuC,KAAK6tD,MAAMrY,KAAK9qB,GAAK,KACvD1qB,KAAK2oE,aACP3oE,KAAKwpE,WAAW79C,MAAQnK,KAAK2sB,KAAKnuC,KAAK6tD,MAAMrY,KAAKjrB,GAAKvqB,KAAK0oE,YAC5D1oE,KAAKwpE,WAAW31D,OAAS2N,KAAK2sB,KAAKnuC,KAAK6tD,MAAMrY,KAAK9qB,GAAK1qB,KAAK0oE,aAEvC,GAApB1oE,KAAK0oE,cACP1oE,KAAKo2D,KAAK5V,MAAMxgD,KAAK0oE,YAAa1oE,KAAK0oE,aACnC1oE,KAAK2oE,YACP3oE,KAAKypE,QAAQjpB,MAAMxgD,KAAK0oE,YAAa1oE,KAAK0oE,cAG9C,IAAK,IAAIxxB,KAAKl3C,KAAKiuD,QACjB,GAAIjuD,KAAKiuD,QAAQkE,eAAejb,GAAI,CAClC,IAAI5kC,EAAItS,KAAKiuD,QAAQ/W,GACjB5kC,EAAEw8C,QACJx8C,EAAEw8C,OAAO9uD,KAAK6tD,MAAOZ,EACzB,CAKF,OAHAjtD,KAAKytD,OAAOztD,KAAKo2D,MACbnJ,IAAQjtD,KAAK+vD,WACf/vD,KAAK2vD,SAAS,GACT3vD,IACT,CACAkhE,eAAejU,GACb,IAAKyU,OACH,OACF,IAAI5oD,EAAI9Y,KAAKygE,aAAezgE,KAAK4oE,eAAiB5oE,KAAK8gE,WAAWx2C,wBAA0BtqB,KAAK4wD,QAAQtmC,wBACzG,GAAIxR,EAAG,CACL,IAAIk8B,EAAMqT,EAAMuZ,iBAAiB9oD,GACjCk8B,EAAIqB,OAASrB,EAAIqB,OAAO3uC,IAAIg6D,OAAOiI,YAAajI,OAAOkI,aACvD5pE,KAAK8uD,OAAO9Z,EAAKiY,EACnB,CACF,CACI7wB,eAAWylC,GACb7hE,KAAK0gE,SAAWmB,CAClB,CACIzlC,iBACF,OAAOp8B,KAAK0gE,QACd,CACIxL,iBACF,OAAOl1D,KAAK0oE,WACd,CACIxP,mBACF,OAAOl5D,KAAK2oE,UACd,CACIxP,mBACF,OAAOn5D,KAAKypE,OACd,CACIpQ,sBACF,OAAOr5D,KAAKwpE,UACd,CACA3R,UACE,OAAO,IAAIC,EAAW93D,KACxB,CACIU,cACF,OAAOV,KAAK4wD,OACd,CACI9iD,aACF,OAAO9N,KAAK8gE,UACd,CACIrO,YACF,OAAOzyD,KAAKuuD,QACd,CACI/vB,UACF,OAAOx+B,KAAKo2D,IACd,CACA7I,MAAMsU,GACAA,IACF7hE,KAAK0gE,SAAWmB,GAClB,MAAMgI,EAAY7pE,KAAKo2D,KAAKmC,UACtBj0B,EAAK9iB,KAAK2sB,KAAKnuC,KAAKk1D,YAW1B,OAVKl1D,KAAK0gE,UAA8B,gBAAlB1gE,KAAK0gE,WAGa,IAAlC1gE,KAAK0gE,SAAS1qD,QAAQ,SAA0C,IAAzBhW,KAAK0gE,SAASt+D,QAA+C,IAA/BpC,KAAK0gE,SAAS1qD,QAAQ,OAC7FhW,KAAKo2D,KAAK0T,WAAWxlC,GAAKA,EAAItkC,KAAK4wD,QAAQjlC,MAAQ2Y,EAAItkC,KAAK4wD,QAAQ/8C,OAASywB,GAE/EtkC,KAAKo2D,KAAKmC,UAAYv4D,KAAK0gE,SAC3B1gE,KAAKo2D,KAAK2T,UAAUzlC,GAAKA,EAAItkC,KAAK4wD,QAAQjlC,MAAQ2Y,EAAItkC,KAAK4wD,QAAQ/8C,OAASywB,IAN5EtkC,KAAKo2D,KAAK0T,WAAWxlC,GAAKA,EAAItkC,KAAK4wD,QAAQjlC,MAAQ2Y,EAAItkC,KAAK4wD,QAAQ/8C,OAASywB,GAQ/EtkC,KAAKo2D,KAAKmC,UAAYsR,EACf7pE,IACT,CACAi5D,eAAe4I,GACb,GAAI7hE,KAAK2oE,WAAY,CACnB,MAAMrkC,EAAK9iB,KAAK2sB,KAAKnuC,KAAKk1D,YACtB2M,GACF7hE,KAAKypE,QAAQlR,UAAYsJ,EACzB7hE,KAAKypE,QAAQM,UAAUzlC,GAAKA,EAAItkC,KAAK4wD,QAAQjlC,MAAQ2Y,EAAItkC,KAAK4wD,QAAQ/8C,OAASywB,IAE/EtkC,KAAKypE,QAAQK,WAAWxlC,GAAKA,EAAItkC,KAAKwpE,WAAW79C,MAAQ2Y,EAAItkC,KAAKwpE,WAAW31D,OAASywB,EAE1F,CACA,OAAOtkC,IACT,CACAmvD,UAAUF,GACJjvD,KAAKuuD,WACPvuD,KAAKo2D,KAAK4T,OACNhqE,KAAK2oE,YACP3oE,KAAKypE,QAAQO,OACfxoE,MAAM2tD,UAAUF,GAChBjvD,KAAKo2D,KAAK6T,UACNjqE,KAAK2oE,YACP3oE,KAAKypE,QAAQQ,UACfjqE,KAAKytD,OAAOztD,KAAKo2D,MAErB,CACAn1D,UACE,GAAKygE,OAKL,OAHAA,OAAO11C,oBAAoB,SAAUhsB,KAAKkhE,eAAez7D,KAAKzF,OAC9DA,KAAK0vD,OACL1vD,KAAK+uD,YACE/uD,IACT,CACAkqE,SAASC,EAAoBjlB,EAAW,OAAQklB,EAAU,MACxD,IAAIC,EAASrqE,KAAK4wD,QAAQ0Z,gBAC1B,MAAMJ,EAAW,IAAIK,cAAcF,EAAQ,CAAEG,SAAU,SAAStlB,IAAYulB,cAAeL,IAa3F,OAZAF,EAASQ,gBAAkB,SAASjoE,GAClC,IAAI8hD,EAAMiB,IAAIC,gBAAgB,IAAIklB,KAAK,CAACloE,EAAEspB,MAAO,CAAEjoB,KAAM,SAASohD,OAClE,GAAkC,mBAAvBilB,EACTA,EAAmB5lB,QACd,GAAI4lB,EAAoB,CAC7B,IAAI/xD,EAAIzI,SAASzH,cAAc,KAC/BkQ,EAAEstC,KAAOnB,EACTnsC,EAAEutC,SAAW,gBAAgBT,IAC7B9sC,EAAEwtC,QACFxtC,EAAEzQ,QACJ,CACF,EACOuiE,CACT,GK7oHmC,SACrCvF,GAAMtD,MAAM,CAAEE,QAAS,OAAQzS,QAAQ,IAChC,MAAMsZ,GAAOzD,GAAM9M,UACnB,IAAI+S,GACA5C,GAEA6C,GAA0B,GACjCC,GAAqC,KAEzCnG,GAAMj9D,IAAI,CACRinD,QAAS,KACPic,GAAejG,GAAMtuB,OAAOrI,YAC5Bg6B,GAAgBxmD,KAAKD,IAAIojD,GAAMtuB,OAAO9rB,EAAGo6C,GAAMtuB,OAAO3rB,GAEtD,IAAK,MAAMvpB,KAAU0pE,GAAS,CAC5B,IAAI3yB,EAAS/2C,EAAOojE,WAEpB,GADA6D,GAAK/U,SAASlyD,EAAO2zB,MAAMkF,KAAKke,OAAOA,GACnCkvB,GAAOkB,iBAAmB9xB,EAAOhD,YAAY0E,EAAQysB,GAAMlU,SAAU,CACvE,IAAIsa,EAAc5pE,EAAOsjE,gBACzB2D,GACG3U,WAAWtyD,EAAO2zB,MAAMkF,KACxBmgC,OACAzoD,KACC8/B,EAAKw5B,UACHrG,GAAMtuB,OACN00B,EAAY7sB,SAAqB,EAAV18B,KAAKoW,IAC5BgzC,KAGNxC,GACG3U,WAAWtyD,EAAO2zB,MAAMkF,KACxBmgC,OACAzoD,KACC8/B,EAAKw5B,UACHrG,GAAMtuB,OACN00B,EAAY/c,OAAmB,EAAVxsC,KAAKoW,IAC1BgzC,IAGR,CACF,CACAxC,GAAK55B,QAEDs8B,KACF1C,GACG3U,WAAWqX,GAAch2C,MAAMkF,KAC/BpO,MAAMk/C,GAAcvI,SAAUuI,GAAc7yB,OAAQ,UACvDmwB,GACG3U,WAAWqX,GAAch2C,MAAMkF,KAC/BmgC,OACAzoD,KAAK,IAAIm+B,EAAMi7B,GAAcvI,SAAUoC,GAAMlU,UAChD2X,GAAK55B,SAGP45B,GAAK3U,WAAW,QAAQ0G,MAAK,GAC7B,IAAK,IAAI/hD,EAAI,EAAGA,EAAc,EAAVoJ,KAAKoW,GAAQxf,GAAe,IAAVoJ,KAAKoW,GACzCwwC,GAAK12D,KACH,IAAIm+B,EAAM,IAAI/B,EAAM,IAAIA,EAAG,EAAG88B,KAC3BphB,OAAOmb,GAAMtuB,QACblH,SAAS/2B,IAGhBgwD,GAAKx8C,MAAM+4C,GAAMtuB,OAAQ2xB,GAAgBZ,GAAOU,UAAW,UAC3DM,GAAK55B,QAEL,IAAIy8B,EAAeJ,GAAQp5D,KAAKy5D,GAC9BA,EAAazG,kBAGfa,IAEA,IAEI6F,EADkB1E,GADDxB,GAAwB,EAAVzjD,KAAKoW,IACQqzC,IACD,EAAVzpD,KAAKoW,IACtCwvC,GAAOiB,oBACTD,GACG3U,WAAW,QACX0G,OACAzoD,KAAK8/B,EAAKw5B,UAAUrG,GAAMtuB,OAAQ4uB,EAAY2F,KAEnDxC,GACG3U,WAAW,QACX0G,MAAK,GACLzoD,KAAK8/B,EAAKw5B,UAAUrG,GAAMtuB,OAAQ80B,EAAaP,KAClDxC,GAAK55B,QAUL,IAAK,IAAInsC,EAAI,EAAGA,EAAIwoE,GAAQzoE,OAAQC,IAClC,IAAI0kE,IAAalgE,GAAUu/D,GAAOv/D,EAAOokE,EAAa5oE,MACnDyyB,MAAM+1C,GAAQxoE,GAAGyyB,MAAMkF,KACvBktC,OAEL,IAAIH,IAAalgE,GAAU0/D,GAAW1/D,EAAOokE,KAAe/D,MAAI,EAElE9U,OAAOtuD,EAAMwgC,EAAIC,EAAI0oB,GAGnB,GAFAmY,EAAa,SAED,SAARthE,IAAoBgnE,GACtB,IAAK,IAAIzoE,EAAIwoE,GAAQzoE,OAAS,EAAGC,GAAK,EAAGA,IAAK,CAC/BwoE,GAAQxoE,GACVmiE,SAAS,IAAI12B,EAAGxJ,EAAIC,KAC7BsmC,GAAQh1D,OAAOxT,EAAG,EAEtB,CAEU,QAARyB,GAAmBgnE,KACrBA,GAAgB,IAAIzG,EAAa,IAAIv2B,EAAGxJ,EAAIC,GAAK,IAEvC,QAARzgC,GAAkBgnE,KAEpBA,GAAc7yB,OAASz2B,KAAKF,IAC1B,EACA,IAAIwsB,EAAGxJ,EAAIC,GAAIqQ,SAASk2B,GAAcvI,UAAUv0B,YAAc,KAGtD,QAARlqC,GAAkBgnE,KAChBA,GAAc7yB,OAAS,GACzB4yB,GAAQ/kE,KAAKglE,IAEfA,GAAgB,KAEpB,IAGFnG,GAAM3T,YAAYhC","sources":["node_modules/.pnpm/tweakpane@3.1.6/node_modules/tweakpane/dist/tweakpane.js","node_modules/.pnpm/pts@0.11.3/node_modules/pts/dist/index.mjs","src/target.ts","src/input.ts","src/weighted_transformer.ts","src/circle_graph.ts","src/index.ts"],"sourcesContent":["/*! Tweakpane 3.1.6 (c) 2016 cocopon, licensed under the MIT license. */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.Tweakpane = {}));\n})(this, (function (exports) { 'use strict';\n\n    /***\n     * A simple semantic versioning perser.\n     */\n    class Semver {\n        /**\n         * @hidden\n         */\n        constructor(text) {\n            const [core, prerelease] = text.split('-');\n            const coreComps = core.split('.');\n            this.major = parseInt(coreComps[0], 10);\n            this.minor = parseInt(coreComps[1], 10);\n            this.patch = parseInt(coreComps[2], 10);\n            this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n        }\n        toString() {\n            const core = [this.major, this.minor, this.patch].join('.');\n            return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\n        }\n    }\n\n    class BladeApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get hidden() {\n            return this.controller_.viewProps.get('hidden');\n        }\n        set hidden(hidden) {\n            this.controller_.viewProps.set('hidden', hidden);\n        }\n        dispose() {\n            this.controller_.viewProps.set('disposed', true);\n        }\n    }\n\n    class TpEvent {\n        constructor(target) {\n            this.target = target;\n        }\n    }\n    class TpChangeEvent extends TpEvent {\n        constructor(target, value, presetKey, last) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n            this.last = last !== null && last !== void 0 ? last : true;\n        }\n    }\n    class TpUpdateEvent extends TpEvent {\n        constructor(target, value, presetKey) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n        }\n    }\n    class TpFoldEvent extends TpEvent {\n        constructor(target, expanded) {\n            super(target);\n            this.expanded = expanded;\n        }\n    }\n    class TpTabSelectEvent extends TpEvent {\n        constructor(target, index) {\n            super(target);\n            this.index = index;\n        }\n    }\n\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n    function deepEqualsArray(a1, a2) {\n        if (a1.length !== a2.length) {\n            return false;\n        }\n        for (let i = 0; i < a1.length; i++) {\n            if (a1[i] !== a2[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    function isPropertyWritable(obj, key) {\n        let target = obj;\n        do {\n            const d = Object.getOwnPropertyDescriptor(target, key);\n            if (d && (d.set !== undefined || d.writable === true)) {\n                return true;\n            }\n            target = Object.getPrototypeOf(target);\n        } while (target !== null);\n        return false;\n    }\n\n    const CREATE_MESSAGE_MAP = {\n        alreadydisposed: () => 'View has been already disposed',\n        invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n        nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n        nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n        notbindable: () => `Value is not bindable`,\n        propertynotfound: (context) => `Property '${context.name}' not found`,\n        shouldneverhappen: () => 'This error should never happen',\n    };\n    class TpError {\n        static alreadyDisposed() {\n            return new TpError({ type: 'alreadydisposed' });\n        }\n        static notBindable() {\n            return new TpError({\n                type: 'notbindable',\n            });\n        }\n        static propertyNotFound(name) {\n            return new TpError({\n                type: 'propertynotfound',\n                context: {\n                    name: name,\n                },\n            });\n        }\n        static shouldNeverHappen() {\n            return new TpError({ type: 'shouldneverhappen' });\n        }\n        constructor(config) {\n            var _a;\n            this.message =\n                (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n    }\n\n    class BindingTarget {\n        constructor(obj, key, opt_id) {\n            this.obj_ = obj;\n            this.key_ = key;\n            this.presetKey_ = opt_id !== null && opt_id !== void 0 ? opt_id : key;\n        }\n        static isBindable(obj) {\n            if (obj === null) {\n                return false;\n            }\n            if (typeof obj !== 'object') {\n                return false;\n            }\n            return true;\n        }\n        get key() {\n            return this.key_;\n        }\n        get presetKey() {\n            return this.presetKey_;\n        }\n        read() {\n            return this.obj_[this.key_];\n        }\n        write(value) {\n            this.obj_[this.key_] = value;\n        }\n        writeProperty(name, value) {\n            const valueObj = this.read();\n            if (!BindingTarget.isBindable(valueObj)) {\n                throw TpError.notBindable();\n            }\n            if (!(name in valueObj)) {\n                throw TpError.propertyNotFound(name);\n            }\n            valueObj[name] = value;\n        }\n    }\n\n    class ButtonApi extends BladeApi {\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.valueController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.valueController.props.set('title', title);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            const emitter = this.controller_.valueController.emitter;\n            emitter.on(eventName, () => {\n                bh(new TpEvent(this));\n            });\n            return this;\n        }\n    }\n\n    class Emitter {\n        constructor() {\n            this.observers_ = {};\n        }\n        on(eventName, handler) {\n            let observers = this.observers_[eventName];\n            if (!observers) {\n                observers = this.observers_[eventName] = [];\n            }\n            observers.push({\n                handler: handler,\n            });\n            return this;\n        }\n        off(eventName, handler) {\n            const observers = this.observers_[eventName];\n            if (observers) {\n                this.observers_[eventName] = observers.filter((observer) => {\n                    return observer.handler !== handler;\n                });\n            }\n            return this;\n        }\n        emit(eventName, event) {\n            const observers = this.observers_[eventName];\n            if (!observers) {\n                return;\n            }\n            observers.forEach((observer) => {\n                observer.handler(event);\n            });\n        }\n    }\n\n    const PREFIX = 'tp';\n    function ClassName(viewName) {\n        const fn = (opt_elementName, opt_modifier) => {\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? `_${opt_elementName}` : '',\n                opt_modifier ? `-${opt_modifier}` : '',\n            ].join('');\n        };\n        return fn;\n    }\n\n    function compose(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    function extractValue(ev) {\n        return ev.rawValue;\n    }\n    function bindValue(value, applyValue) {\n        value.emitter.on('change', compose(extractValue, applyValue));\n        applyValue(value.rawValue);\n    }\n    function bindValueMap(valueMap, key, applyValue) {\n        bindValue(valueMap.value(key), applyValue);\n    }\n\n    function applyClass(elem, className, active) {\n        if (active) {\n            elem.classList.add(className);\n        }\n        else {\n            elem.classList.remove(className);\n        }\n    }\n    function valueToClassName(elem, className) {\n        return (value) => {\n            applyClass(elem, className, value);\n        };\n    }\n    function bindValueToTextContent(value, elem) {\n        bindValue(value, (text) => {\n            elem.textContent = text !== null && text !== void 0 ? text : '';\n        });\n    }\n\n    const className$q = ClassName('btn');\n    class ButtonView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$q());\n            config.viewProps.bindClassModifiers(this.element);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$q('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$q('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n        }\n    }\n\n    class ButtonController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new ButtonView(doc, {\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class BoundValue {\n        constructor(initialValue, config) {\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        get constraint() {\n            return this.constraint_;\n        }\n        get rawValue() {\n            return this.rawValue_;\n        }\n        set rawValue(rawValue) {\n            this.setRawValue(rawValue, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(rawValue, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const constrainedValue = this.constraint_\n                ? this.constraint_.constrain(rawValue)\n                : rawValue;\n            const prevValue = this.rawValue_;\n            const changed = !this.equals_(prevValue, constrainedValue);\n            if (!changed && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.rawValue_ = constrainedValue;\n            this.emitter.emit('change', {\n                options: opts,\n                previousRawValue: prevValue,\n                rawValue: constrainedValue,\n                sender: this,\n            });\n        }\n    }\n\n    class PrimitiveValue {\n        constructor(initialValue) {\n            this.emitter = new Emitter();\n            this.value_ = initialValue;\n        }\n        get rawValue() {\n            return this.value_;\n        }\n        set rawValue(value) {\n            this.setRawValue(value, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(value, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const prevValue = this.value_;\n            if (prevValue === value && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.value_ = value;\n            this.emitter.emit('change', {\n                options: opts,\n                previousRawValue: prevValue,\n                rawValue: this.value_,\n                sender: this,\n            });\n        }\n    }\n\n    function createValue(initialValue, config) {\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\n        if (!constraint && !equals) {\n            return new PrimitiveValue(initialValue);\n        }\n        return new BoundValue(initialValue, config);\n    }\n\n    class ValueMap {\n        constructor(valueMap) {\n            this.emitter = new Emitter();\n            this.valMap_ = valueMap;\n            for (const key in this.valMap_) {\n                const v = this.valMap_[key];\n                v.emitter.on('change', () => {\n                    this.emitter.emit('change', {\n                        key: key,\n                        sender: this,\n                    });\n                });\n            }\n        }\n        static createCore(initialValue) {\n            const keys = Object.keys(initialValue);\n            return keys.reduce((o, key) => {\n                return Object.assign(o, {\n                    [key]: createValue(initialValue[key]),\n                });\n            }, {});\n        }\n        static fromObject(initialValue) {\n            const core = this.createCore(initialValue);\n            return new ValueMap(core);\n        }\n        get(key) {\n            return this.valMap_[key].rawValue;\n        }\n        set(key, value) {\n            this.valMap_[key].rawValue = value;\n        }\n        value(key) {\n            return this.valMap_[key];\n        }\n    }\n\n    function parseObject(value, keyToParserMap) {\n        const keys = Object.keys(keyToParserMap);\n        const result = keys.reduce((tmp, key) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const parser = keyToParserMap[key];\n            const result = parser(value[key]);\n            return result.succeeded\n                ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n        }, {});\n        return forceCast(result);\n    }\n    function parseArray(value, parseItem) {\n        return value.reduce((tmp, item) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const result = parseItem(item);\n            if (!result.succeeded || result.value === undefined) {\n                return undefined;\n            }\n            return [...tmp, result.value];\n        }, []);\n    }\n    function isObject(value) {\n        if (value === null) {\n            return false;\n        }\n        return typeof value === 'object';\n    }\n    function createParamsParserBuilder(parse) {\n        return (optional) => (v) => {\n            if (!optional && v === undefined) {\n                return {\n                    succeeded: false,\n                    value: undefined,\n                };\n            }\n            if (optional && v === undefined) {\n                return {\n                    succeeded: true,\n                    value: undefined,\n                };\n            }\n            const result = parse(v);\n            return result !== undefined\n                ? {\n                    succeeded: true,\n                    value: result,\n                }\n                : {\n                    succeeded: false,\n                    value: undefined,\n                };\n        };\n    }\n    function createParamsParserBuilders(optional) {\n        return {\n            custom: (parse) => createParamsParserBuilder(parse)(optional),\n            boolean: createParamsParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n            number: createParamsParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n            string: createParamsParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n            function: createParamsParserBuilder((v) =>\n            typeof v === 'function' ? v : undefined)(optional),\n            constant: (value) => createParamsParserBuilder((v) => (v === value ? value : undefined))(optional),\n            raw: createParamsParserBuilder((v) => v)(optional),\n            object: (keyToParserMap) => createParamsParserBuilder((v) => {\n                if (!isObject(v)) {\n                    return undefined;\n                }\n                return parseObject(v, keyToParserMap);\n            })(optional),\n            array: (itemParser) => createParamsParserBuilder((v) => {\n                if (!Array.isArray(v)) {\n                    return undefined;\n                }\n                return parseArray(v, itemParser);\n            })(optional),\n        };\n    }\n    const ParamsParsers = {\n        optional: createParamsParserBuilders(true),\n        required: createParamsParserBuilders(false),\n    };\n    function parseParams(value, keyToParserMap) {\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\n        return result.succeeded ? result.value : undefined;\n    }\n\n    function warnMissing(info) {\n        console.warn([\n            `Missing '${info.key}' of ${info.target} in ${info.place}.`,\n            'Please rebuild plugins with the latest core package.',\n        ].join(' '));\n    }\n\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) {\n            elem.parentElement.removeChild(elem);\n        }\n        return null;\n    }\n\n    class ReadonlyValue {\n        constructor(value) {\n            this.value_ = value;\n        }\n        static create(value) {\n            return [\n                new ReadonlyValue(value),\n                (rawValue, options) => {\n                    value.setRawValue(rawValue, options);\n                },\n            ];\n        }\n        get emitter() {\n            return this.value_.emitter;\n        }\n        get rawValue() {\n            return this.value_.rawValue;\n        }\n    }\n\n    const className$p = ClassName('');\n    function valueToModifier(elem, modifier) {\n        return valueToClassName(elem, className$p(undefined, modifier));\n    }\n    class ViewProps extends ValueMap {\n        constructor(valueMap) {\n            var _a;\n            super(valueMap);\n            this.onDisabledChange_ = this.onDisabledChange_.bind(this);\n            this.onParentChange_ = this.onParentChange_.bind(this);\n            this.onParentGlobalDisabledChange_ =\n                this.onParentGlobalDisabledChange_.bind(this);\n            [this.globalDisabled_, this.setGlobalDisabled_] = ReadonlyValue.create(createValue(this.getGlobalDisabled_()));\n            this.value('disabled').emitter.on('change', this.onDisabledChange_);\n            this.value('parent').emitter.on('change', this.onParentChange_);\n            (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n        }\n        static create(opt_initialValue) {\n            var _a, _b, _c;\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n            return new ViewProps(ValueMap.createCore({\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n                disposed: false,\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n                parent: (_c = initialValue.parent) !== null && _c !== void 0 ? _c : null,\n            }));\n        }\n        get globalDisabled() {\n            return this.globalDisabled_;\n        }\n        bindClassModifiers(elem) {\n            bindValue(this.globalDisabled_, valueToModifier(elem, 'disabled'));\n            bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n        }\n        bindDisabled(target) {\n            bindValue(this.globalDisabled_, (disabled) => {\n                target.disabled = disabled;\n            });\n        }\n        bindTabIndex(elem) {\n            bindValue(this.globalDisabled_, (disabled) => {\n                elem.tabIndex = disabled ? -1 : 0;\n            });\n        }\n        handleDispose(callback) {\n            this.value('disposed').emitter.on('change', (disposed) => {\n                if (disposed) {\n                    callback();\n                }\n            });\n        }\n        getGlobalDisabled_() {\n            const parent = this.get('parent');\n            const parentDisabled = parent ? parent.globalDisabled.rawValue : false;\n            return parentDisabled || this.get('disabled');\n        }\n        updateGlobalDisabled_() {\n            this.setGlobalDisabled_(this.getGlobalDisabled_());\n        }\n        onDisabledChange_() {\n            this.updateGlobalDisabled_();\n        }\n        onParentGlobalDisabledChange_() {\n            this.updateGlobalDisabled_();\n        }\n        onParentChange_(ev) {\n            var _a;\n            const prevParent = ev.previousRawValue;\n            prevParent === null || prevParent === void 0 ? void 0 : prevParent.globalDisabled.emitter.off('change', this.onParentGlobalDisabledChange_);\n            (_a = this.get('parent')) === null || _a === void 0 ? void 0 : _a.globalDisabled.emitter.on('change', this.onParentGlobalDisabledChange_);\n            this.updateGlobalDisabled_();\n        }\n    }\n\n    function getAllBladePositions() {\n        return ['veryfirst', 'first', 'last', 'verylast'];\n    }\n\n    const className$o = ClassName('');\n    const POS_TO_CLASS_NAME_MAP = {\n        veryfirst: 'vfst',\n        first: 'fst',\n        last: 'lst',\n        verylast: 'vlst',\n    };\n    class BladeController {\n        constructor(config) {\n            this.parent_ = null;\n            this.blade = config.blade;\n            this.view = config.view;\n            this.viewProps = config.viewProps;\n            const elem = this.view.element;\n            this.blade.value('positions').emitter.on('change', () => {\n                getAllBladePositions().forEach((pos) => {\n                    elem.classList.remove(className$o(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n                this.blade.get('positions').forEach((pos) => {\n                    elem.classList.add(className$o(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n            });\n            this.viewProps.handleDispose(() => {\n                disposeElement(elem);\n            });\n        }\n        get parent() {\n            return this.parent_;\n        }\n        set parent(parent) {\n            this.parent_ = parent;\n            if (!('parent' in this.viewProps.valMap_)) {\n                warnMissing({\n                    key: 'parent',\n                    target: ViewProps.name,\n                    place: 'BladeController.parent',\n                });\n                return;\n            }\n            this.viewProps.set('parent', this.parent_ ? this.parent_.viewProps : null);\n        }\n    }\n\n    const SVG_NS = 'http://www.w3.org/2000/svg';\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        const t = element.style.transition;\n        element.style.transition = 'none';\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function getGlobalObject() {\n        return globalThis;\n    }\n    function getWindowDocument() {\n        const globalObj = forceCast(getGlobalObject());\n        return globalObj.document;\n    }\n    function getCanvasContext(canvasElement) {\n        const win = canvasElement.ownerDocument.defaultView;\n        if (!win) {\n            return null;\n        }\n        const isBrowser = 'document' in win;\n        return isBrowser\n            ? canvasElement.getContext('2d', {\n                willReadFrequently: true,\n            })\n            : null;\n    }\n    const ICON_ID_TO_INNER_HTML_MAP = {\n        check: '<path d=\"M2 8l4 4l8 -8\"/>',\n        dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n        p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>',\n    };\n    function createSvgIconElement(document, iconId) {\n        const elem = document.createElementNS(SVG_NS, 'svg');\n        elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n        return elem;\n    }\n    function insertElementAt(parentElement, element, index) {\n        parentElement.insertBefore(element, parentElement.children[index]);\n    }\n    function removeElement(element) {\n        if (element.parentElement) {\n            element.parentElement.removeChild(element);\n        }\n    }\n    function removeChildElements(element) {\n        while (element.children.length > 0) {\n            element.removeChild(element.children[0]);\n        }\n    }\n    function removeChildNodes(element) {\n        while (element.childNodes.length > 0) {\n            element.removeChild(element.childNodes[0]);\n        }\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) {\n            return forceCast(ev.relatedTarget);\n        }\n        if ('explicitOriginalTarget' in ev) {\n            return ev.explicitOriginalTarget;\n        }\n        return null;\n    }\n\n    const className$n = ClassName('lbl');\n    function createLabelNode(doc, label) {\n        const frag = doc.createDocumentFragment();\n        const lineNodes = label.split('\\n').map((line) => {\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach((lineNode, index) => {\n            if (index > 0) {\n                frag.appendChild(doc.createElement('br'));\n            }\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    class LabelView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$n());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('div');\n            labelElem.classList.add(className$n('l'));\n            bindValueMap(config.props, 'label', (value) => {\n                if (isEmpty(value)) {\n                    this.element.classList.add(className$n(undefined, 'nol'));\n                }\n                else {\n                    this.element.classList.remove(className$n(undefined, 'nol'));\n                    removeChildNodes(labelElem);\n                    labelElem.appendChild(createLabelNode(doc, value));\n                }\n            });\n            this.element.appendChild(labelElem);\n            this.labelElement = labelElem;\n            const valueElem = doc.createElement('div');\n            valueElem.classList.add(className$n('v'));\n            this.element.appendChild(valueElem);\n            this.valueElement = valueElem;\n        }\n    }\n\n    class LabelController extends BladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    const ButtonBladePlugin = {\n        id: 'button',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('button'),\n                label: p.optional.string,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new ButtonController(args.document, {\n                    props: ValueMap.fromObject({\n                        title: args.params.title,\n                    }),\n                    viewProps: args.viewProps,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ButtonController)) {\n                return null;\n            }\n            return new ButtonApi(args.controller);\n        },\n    };\n\n    class ValueBladeController extends BladeController {\n        constructor(config) {\n            super(config);\n            this.value = config.value;\n        }\n    }\n\n    function createBlade() {\n        return new ValueMap({\n            positions: createValue([], {\n                equals: deepEqualsArray,\n            }),\n        });\n    }\n\n    class Foldable extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(expanded) {\n            const coreObj = {\n                completed: true,\n                expanded: expanded,\n                expandedHeight: null,\n                shouldFixHeight: false,\n                temporaryExpanded: null,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new Foldable(core);\n        }\n        get styleExpanded() {\n            var _a;\n            return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n        }\n        get styleHeight() {\n            if (!this.styleExpanded) {\n                return '0';\n            }\n            const exHeight = this.get('expandedHeight');\n            if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n                return `${exHeight}px`;\n            }\n            return 'auto';\n        }\n        bindExpandedClass(elem, expandedClassName) {\n            const onExpand = () => {\n                const expanded = this.styleExpanded;\n                if (expanded) {\n                    elem.classList.add(expandedClassName);\n                }\n                else {\n                    elem.classList.remove(expandedClassName);\n                }\n            };\n            bindValueMap(this, 'expanded', onExpand);\n            bindValueMap(this, 'temporaryExpanded', onExpand);\n        }\n        cleanUpTransition() {\n            this.set('shouldFixHeight', false);\n            this.set('expandedHeight', null);\n            this.set('completed', true);\n        }\n    }\n    function computeExpandedFolderHeight(folder, containerElement) {\n        let height = 0;\n        disableTransitionTemporarily(containerElement, () => {\n            folder.set('expandedHeight', null);\n            folder.set('temporaryExpanded', true);\n            forceReflow(containerElement);\n            height = containerElement.clientHeight;\n            folder.set('temporaryExpanded', null);\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n    function applyHeight(foldable, elem) {\n        elem.style.height = foldable.styleHeight;\n    }\n    function bindFoldable(foldable, elem) {\n        foldable.value('expanded').emitter.on('beforechange', () => {\n            foldable.set('completed', false);\n            if (isEmpty(foldable.get('expandedHeight'))) {\n                const h = computeExpandedFolderHeight(foldable, elem);\n                if (h > 0) {\n                    foldable.set('expandedHeight', h);\n                }\n            }\n            foldable.set('shouldFixHeight', true);\n            forceReflow(elem);\n        });\n        foldable.emitter.on('change', () => {\n            applyHeight(foldable, elem);\n        });\n        applyHeight(foldable, elem);\n        elem.addEventListener('transitionend', (ev) => {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            foldable.cleanUpTransition();\n        });\n    }\n\n    class RackLikeApi extends BladeApi {\n        constructor(controller, rackApi) {\n            super(controller);\n            this.rackApi_ = rackApi;\n        }\n    }\n\n    function addButtonAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'button' }));\n    }\n    function addFolderAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'folder' }));\n    }\n    function addSeparatorAsBlade(api, opt_params) {\n        const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'separator' }));\n    }\n    function addTabAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'tab' }));\n    }\n\n    class NestedOrderedSet {\n        constructor(extract) {\n            this.emitter = new Emitter();\n            this.items_ = [];\n            this.cache_ = new Set();\n            this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n            this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n            this.extract_ = extract;\n        }\n        get items() {\n            return this.items_;\n        }\n        allItems() {\n            return Array.from(this.cache_);\n        }\n        find(callback) {\n            for (const item of this.allItems()) {\n                if (callback(item)) {\n                    return item;\n                }\n            }\n            return null;\n        }\n        includes(item) {\n            return this.cache_.has(item);\n        }\n        add(item, opt_index) {\n            if (this.includes(item)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const index = opt_index !== undefined ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            this.cache_.add(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.on('add', this.onSubListAdd_);\n                subList.emitter.on('remove', this.onSubListRemove_);\n                subList.allItems().forEach((item) => {\n                    this.cache_.add(item);\n                });\n            }\n            this.emitter.emit('add', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) {\n                return;\n            }\n            this.items_.splice(index, 1);\n            this.cache_.delete(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.off('add', this.onSubListAdd_);\n                subList.emitter.off('remove', this.onSubListRemove_);\n            }\n            this.emitter.emit('remove', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        onSubListAdd_(ev) {\n            this.cache_.add(ev.item);\n            this.emitter.emit('add', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n        onSubListRemove_(ev) {\n            this.cache_.delete(ev.item);\n            this.emitter.emit('remove', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n    }\n\n    class InputBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingChange_ = this.onBindingChange_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('change', this.onBindingChange_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingChange_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('change', {\n                event: new TpChangeEvent(this, forceCast(value), this.controller_.binding.target.presetKey, ev.options.last),\n            });\n        }\n    }\n\n    class InputBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n        }\n    }\n\n    class MonitorBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingUpdate_ = this.onBindingUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('update', this.onBindingUpdate_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingUpdate_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(this, forceCast(value), this.controller_.binding.target.presetKey),\n            });\n        }\n    }\n\n    class MonitorBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n            this.viewProps.bindDisabled(this.binding.ticker);\n            this.viewProps.handleDispose(() => {\n                this.binding.dispose();\n            });\n        }\n    }\n\n    function findSubBladeApiSet(api) {\n        if (api instanceof RackApi) {\n            return api['apiSet_'];\n        }\n        if (api instanceof RackLikeApi) {\n            return api['rackApi_']['apiSet_'];\n        }\n        return null;\n    }\n    function getApiByController(apiSet, controller) {\n        const api = apiSet.find((api) => api.controller_ === controller);\n        if (!api) {\n            throw TpError.shouldNeverHappen();\n        }\n        return api;\n    }\n    function createBindingTarget(obj, key, opt_id) {\n        if (!BindingTarget.isBindable(obj)) {\n            throw TpError.notBindable();\n        }\n        return new BindingTarget(obj, key, opt_id);\n    }\n    class RackApi extends BladeApi {\n        constructor(controller, pool) {\n            super(controller);\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            this.onRackInputChange_ = this.onRackInputChange_.bind(this);\n            this.onRackMonitorUpdate_ = this.onRackMonitorUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.apiSet_ = new NestedOrderedSet(findSubBladeApiSet);\n            this.pool_ = pool;\n            const rack = this.controller_.rack;\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            rack.emitter.on('inputchange', this.onRackInputChange_);\n            rack.emitter.on('monitorupdate', this.onRackMonitorUpdate_);\n            rack.children.forEach((bc) => {\n                this.setUpApi_(bc);\n            });\n        }\n        get children() {\n            return this.controller_.rack.children.map((bc) => getApiByController(this.apiSet_, bc));\n        }\n        addInput(object, key, opt_params) {\n            const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createInput(doc, createBindingTarget(object, key, params.presetKey), params);\n            const api = new InputBindingApi(bc);\n            return this.add(api, params.index);\n        }\n        addMonitor(object, key, opt_params) {\n            const params = opt_params !== null && opt_params !== void 0 ? opt_params : {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createMonitor(doc, createBindingTarget(object, key), params);\n            const api = new MonitorBindingApi(bc);\n            return forceCast(this.add(api, params.index));\n        }\n        addFolder(params) {\n            return addFolderAsBlade(this, params);\n        }\n        addButton(params) {\n            return addButtonAsBlade(this, params);\n        }\n        addSeparator(opt_params) {\n            return addSeparatorAsBlade(this, opt_params);\n        }\n        addTab(params) {\n            return addTabAsBlade(this, params);\n        }\n        add(api, opt_index) {\n            this.controller_.rack.add(api.controller_, opt_index);\n            const gapi = this.apiSet_.find((a) => a.controller_ === api.controller_);\n            if (gapi) {\n                this.apiSet_.remove(gapi);\n            }\n            this.apiSet_.add(api);\n            return api;\n        }\n        remove(api) {\n            this.controller_.rack.remove(api.controller_);\n        }\n        addBlade(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createBlade(doc, params);\n            const api = this.pool_.createBladeApi(bc);\n            return this.add(api, params.index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpApi_(bc) {\n            const api = this.apiSet_.find((api) => api.controller_ === bc);\n            if (!api) {\n                this.apiSet_.add(this.pool_.createBladeApi(bc));\n            }\n        }\n        onRackAdd_(ev) {\n            this.setUpApi_(ev.bladeController);\n        }\n        onRackRemove_(ev) {\n            if (ev.isRoot) {\n                const api = getApiByController(this.apiSet_, ev.bladeController);\n                this.apiSet_.remove(api);\n            }\n        }\n        onRackInputChange_(ev) {\n            const bc = ev.bladeController;\n            if (bc instanceof InputBindingController) {\n                const api = getApiByController(this.apiSet_, bc);\n                const binding = bc.binding;\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, forceCast(binding.target.read()), binding.target.presetKey, ev.options.last),\n                });\n            }\n            else if (bc instanceof ValueBladeController) {\n                const api = getApiByController(this.apiSet_, bc);\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, bc.value.rawValue, undefined, ev.options.last),\n                });\n            }\n        }\n        onRackMonitorUpdate_(ev) {\n            if (!(ev.bladeController instanceof MonitorBindingController)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = getApiByController(this.apiSet_, ev.bladeController);\n            const binding = ev.bladeController.binding;\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(api, forceCast(binding.target.read()), binding.target.presetKey),\n            });\n        }\n    }\n\n    class FolderApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.emitter_ = new Emitter();\n            this.controller_.foldable\n                .value('expanded')\n                .emitter.on('change', (ev) => {\n                this.emitter_.emit('fold', {\n                    event: new TpFoldEvent(this, ev.sender.rawValue),\n                });\n            });\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n        }\n        get expanded() {\n            return this.controller_.foldable.get('expanded');\n        }\n        set expanded(expanded) {\n            this.controller_.foldable.set('expanded', expanded);\n        }\n        get title() {\n            return this.controller_.props.get('title');\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            return this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class RackLikeController extends BladeController {\n        constructor(config) {\n            super({\n                blade: config.blade,\n                view: config.view,\n                viewProps: config.rackController.viewProps,\n            });\n            this.rackController = config.rackController;\n        }\n    }\n\n    class PlainView {\n        constructor(doc, config) {\n            const className = ClassName(config.viewName);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n        }\n    }\n\n    function findInputBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof InputBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findMonitorBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof MonitorBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findValueBladeController(bcs, v) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof ValueBladeController && bc.value === v) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findSubRack(bc) {\n        if (bc instanceof RackController) {\n            return bc.rack;\n        }\n        if (bc instanceof RackLikeController) {\n            return bc.rackController.rack;\n        }\n        return null;\n    }\n    function findSubBladeControllerSet(bc) {\n        const rack = findSubRack(bc);\n        return rack ? rack['bcSet_'] : null;\n    }\n    class BladeRack {\n        constructor(config) {\n            var _a, _b;\n            this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n            this.onSetAdd_ = this.onSetAdd_.bind(this);\n            this.onSetRemove_ = this.onSetRemove_.bind(this);\n            this.onChildDispose_ = this.onChildDispose_.bind(this);\n            this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n            this.onChildInputChange_ = this.onChildInputChange_.bind(this);\n            this.onChildMonitorUpdate_ = this.onChildMonitorUpdate_.bind(this);\n            this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n            this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n            this.onDescendantLayout_ = this.onDescendantLayout_.bind(this);\n            this.onDescendantInputChange_ = this.onDescendantInputChange_.bind(this);\n            this.onDescendantMonitorUpdate_ =\n                this.onDescendantMonitorUpdate_.bind(this);\n            this.emitter = new Emitter();\n            this.blade_ = (_a = config.blade) !== null && _a !== void 0 ? _a : null;\n            (_b = this.blade_) === null || _b === void 0 ? void 0 : _b.value('positions').emitter.on('change', this.onBladePositionsChange_);\n            this.viewProps = config.viewProps;\n            this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n            this.bcSet_.emitter.on('add', this.onSetAdd_);\n            this.bcSet_.emitter.on('remove', this.onSetRemove_);\n        }\n        get children() {\n            return this.bcSet_.items;\n        }\n        add(bc, opt_index) {\n            var _a;\n            (_a = bc.parent) === null || _a === void 0 ? void 0 : _a.remove(bc);\n            if (isPropertyWritable(bc, 'parent')) {\n                bc.parent = this;\n            }\n            else {\n                bc['parent_'] = this;\n                warnMissing({\n                    key: 'parent',\n                    target: 'BladeController',\n                    place: 'BladeRack.add',\n                });\n            }\n            this.bcSet_.add(bc, opt_index);\n        }\n        remove(bc) {\n            if (isPropertyWritable(bc, 'parent')) {\n                bc.parent = null;\n            }\n            else {\n                bc['parent_'] = null;\n                warnMissing({\n                    key: 'parent',\n                    target: 'BladeController',\n                    place: 'BladeRack.remove',\n                });\n            }\n            this.bcSet_.remove(bc);\n        }\n        find(controllerClass) {\n            return forceCast(this.bcSet_.allItems().filter((bc) => {\n                return bc instanceof controllerClass;\n            }));\n        }\n        onSetAdd_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('add', {\n                bladeController: ev.item,\n                index: ev.index,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n            bc.blade\n                .value('positions')\n                .emitter.on('change', this.onChildPositionsChange_);\n            bc.viewProps.handleDispose(this.onChildDispose_);\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.on('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.on('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.on('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.on('layout', this.onDescendantLayout_);\n                    emitter.on('inputchange', this.onDescendantInputChange_);\n                    emitter.on('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        onSetRemove_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('remove', {\n                bladeController: ev.item,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.off('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.off('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.off('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.off('layout', this.onDescendantLayout_);\n                    emitter.off('inputchange', this.onDescendantInputChange_);\n                    emitter.off('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        updatePositions_() {\n            const visibleItems = this.bcSet_.items.filter((bc) => !bc.viewProps.get('hidden'));\n            const firstVisibleItem = visibleItems[0];\n            const lastVisibleItem = visibleItems[visibleItems.length - 1];\n            this.bcSet_.items.forEach((bc) => {\n                const ps = [];\n                if (bc === firstVisibleItem) {\n                    ps.push('first');\n                    if (!this.blade_ ||\n                        this.blade_.get('positions').includes('veryfirst')) {\n                        ps.push('veryfirst');\n                    }\n                }\n                if (bc === lastVisibleItem) {\n                    ps.push('last');\n                    if (!this.blade_ || this.blade_.get('positions').includes('verylast')) {\n                        ps.push('verylast');\n                    }\n                }\n                bc.blade.set('positions', ps);\n            });\n        }\n        onChildPositionsChange_() {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildViewPropsChange_(_ev) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildDispose_() {\n            const disposedUcs = this.bcSet_.items.filter((bc) => {\n                return bc.viewProps.get('disposed');\n            });\n            disposedUcs.forEach((bc) => {\n                this.bcSet_.remove(bc);\n            });\n        }\n        onChildInputChange_(ev) {\n            const bc = findInputBindingController(this.find(InputBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.alreadyDisposed();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onChildMonitorUpdate_(ev) {\n            const bc = findMonitorBindingController(this.find(MonitorBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.alreadyDisposed();\n            }\n            this.emitter.emit('monitorupdate', {\n                bladeController: bc,\n                sender: this,\n            });\n        }\n        onChildValueChange_(ev) {\n            const bc = findValueBladeController(this.find(ValueBladeController), ev.sender);\n            if (!bc) {\n                throw TpError.alreadyDisposed();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantLayout_(_) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onDescendantInputChange_(ev) {\n            this.emitter.emit('inputchange', {\n                bladeController: ev.bladeController,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantMonitorUpdate_(ev) {\n            this.emitter.emit('monitorupdate', {\n                bladeController: ev.bladeController,\n                sender: this,\n            });\n        }\n        onBladePositionsChange_() {\n            this.updatePositions_();\n        }\n    }\n\n    class RackController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new PlainView(doc, {\n                    viewName: 'brk',\n                    viewProps: config.viewProps,\n                }) }));\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            const rack = new BladeRack({\n                blade: config.root ? undefined : config.blade,\n                viewProps: config.viewProps,\n            });\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            this.rack = rack;\n            this.viewProps.handleDispose(() => {\n                for (let i = this.rack.children.length - 1; i >= 0; i--) {\n                    const bc = this.rack.children[i];\n                    bc.viewProps.set('disposed', true);\n                }\n            });\n        }\n        onRackAdd_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            insertElementAt(this.view.element, ev.bladeController.view.element, ev.index);\n        }\n        onRackRemove_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            removeElement(ev.bladeController.view.element);\n        }\n    }\n\n    const bladeContainerClassName = ClassName('cnt');\n\n    class FolderView {\n        constructor(doc, config) {\n            var _a;\n            this.className_ = ClassName((_a = config.viewName) !== null && _a !== void 0 ? _a : 'fld');\n            this.element = doc.createElement('div');\n            this.element.classList.add(this.className_(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            this.foldable_ = config.foldable;\n            this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n            bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(this.className_('b'));\n            bindValueMap(config.props, 'title', (title) => {\n                if (isEmpty(title)) {\n                    this.element.classList.add(this.className_(undefined, 'not'));\n                }\n                else {\n                    this.element.classList.remove(this.className_(undefined, 'not'));\n                }\n            });\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const indentElem = doc.createElement('div');\n            indentElem.classList.add(this.className_('i'));\n            this.element.appendChild(indentElem);\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(this.className_('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(this.className_('m'));\n            this.buttonElement.appendChild(markElem);\n            const containerElem = config.containerElement;\n            containerElem.classList.add(this.className_('c'));\n            this.element.appendChild(containerElem);\n            this.containerElement = containerElem;\n        }\n    }\n\n    class FolderController extends RackLikeController {\n        constructor(doc, config) {\n            var _a;\n            const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n            const rc = new RackController(doc, {\n                blade: config.blade,\n                root: config.root,\n                viewProps: config.viewProps,\n            });\n            super(Object.assign(Object.assign({}, config), { rackController: rc, view: new FolderView(doc, {\n                    containerElement: rc.view.element,\n                    foldable: foldable,\n                    props: config.props,\n                    viewName: config.root ? 'rot' : undefined,\n                    viewProps: config.viewProps,\n                }) }));\n            this.onTitleClick_ = this.onTitleClick_.bind(this);\n            this.props = config.props;\n            this.foldable = foldable;\n            bindFoldable(this.foldable, this.view.containerElement);\n            this.rackController.rack.emitter.on('add', () => {\n                this.foldable.cleanUpTransition();\n            });\n            this.rackController.rack.emitter.on('remove', () => {\n                this.foldable.cleanUpTransition();\n            });\n            this.view.buttonElement.addEventListener('click', this.onTitleClick_);\n        }\n        get document() {\n            return this.view.element.ownerDocument;\n        }\n        onTitleClick_() {\n            this.foldable.set('expanded', !this.foldable.get('expanded'));\n        }\n    }\n\n    const FolderBladePlugin = {\n        id: 'folder',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('folder'),\n                expanded: p.optional.boolean,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new FolderController(args.document, {\n                blade: args.blade,\n                expanded: args.params.expanded,\n                props: ValueMap.fromObject({\n                    title: args.params.title,\n                }),\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof FolderController)) {\n                return null;\n            }\n            return new FolderApi(args.controller, args.pool);\n        },\n    };\n\n    class LabeledValueController extends ValueBladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { value: config.valueController.value, view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    class SeparatorApi extends BladeApi {\n    }\n\n    const className$m = ClassName('spr');\n    class SeparatorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$m());\n            config.viewProps.bindClassModifiers(this.element);\n            const hrElem = doc.createElement('hr');\n            hrElem.classList.add(className$m('r'));\n            this.element.appendChild(hrElem);\n        }\n    }\n\n    class SeparatorController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new SeparatorView(doc, {\n                    viewProps: config.viewProps,\n                }) }));\n        }\n    }\n\n    const SeparatorBladePlugin = {\n        id: 'separator',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                view: p.required.constant('separator'),\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new SeparatorController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof SeparatorController)) {\n                return null;\n            }\n            return new SeparatorApi(args.controller);\n        },\n    };\n\n    const className$l = ClassName('tbi');\n    class TabItemView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$l());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValueMap(config.props, 'selected', (selected) => {\n                if (selected) {\n                    this.element.classList.add(className$l(undefined, 'sel'));\n                }\n                else {\n                    this.element.classList.remove(className$l(undefined, 'sel'));\n                }\n            });\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$l('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$l('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n        }\n    }\n\n    class TabItemController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new TabItemView(doc, {\n                props: config.props,\n                viewProps: config.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class TabPageController {\n        constructor(doc, config) {\n            this.onItemClick_ = this.onItemClick_.bind(this);\n            this.ic_ = new TabItemController(doc, {\n                props: config.itemProps,\n                viewProps: ViewProps.create(),\n            });\n            this.ic_.emitter.on('click', this.onItemClick_);\n            this.cc_ = new RackController(doc, {\n                blade: createBlade(),\n                viewProps: ViewProps.create(),\n            });\n            this.props = config.props;\n            bindValueMap(this.props, 'selected', (selected) => {\n                this.itemController.props.set('selected', selected);\n                this.contentController.viewProps.set('hidden', !selected);\n            });\n        }\n        get itemController() {\n            return this.ic_;\n        }\n        get contentController() {\n            return this.cc_;\n        }\n        onItemClick_() {\n            this.props.set('selected', true);\n        }\n    }\n\n    class TabPageApi {\n        constructor(controller, contentRackApi) {\n            this.controller_ = controller;\n            this.rackApi_ = contentRackApi;\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.itemController.props.set('title', title);\n        }\n        get selected() {\n            return this.controller_.props.get('selected');\n        }\n        set selected(selected) {\n            this.controller_.props.set('selected', selected);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n    }\n\n    class TabApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.onSelect_ = this.onSelect_.bind(this);\n            this.emitter_ = new Emitter();\n            this.pageApiMap_ = new Map();\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n            this.controller_.tab.selectedIndex.emitter.on('change', this.onSelect_);\n            this.controller_.pageSet.emitter.on('add', this.onPageAdd_);\n            this.controller_.pageSet.emitter.on('remove', this.onPageRemove_);\n            this.controller_.pageSet.items.forEach((pc) => {\n                this.setUpPageApi_(pc);\n            });\n        }\n        get pages() {\n            return this.controller_.pageSet.items.map((pc) => {\n                const api = this.pageApiMap_.get(pc);\n                if (!api) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return api;\n            });\n        }\n        addPage(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const pc = new TabPageController(doc, {\n                itemProps: ValueMap.fromObject({\n                    selected: false,\n                    title: params.title,\n                }),\n                props: ValueMap.fromObject({\n                    selected: false,\n                }),\n            });\n            this.controller_.add(pc, params.index);\n            const api = this.pageApiMap_.get(pc);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n        removePage(index) {\n            this.controller_.remove(index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpPageApi_(pc) {\n            const rackApi = this.rackApi_['apiSet_'].find((api) => api.controller_ === pc.contentController);\n            if (!rackApi) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = new TabPageApi(pc, rackApi);\n            this.pageApiMap_.set(pc, api);\n        }\n        onPageAdd_(ev) {\n            this.setUpPageApi_(ev.item);\n        }\n        onPageRemove_(ev) {\n            const api = this.pageApiMap_.get(ev.item);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.pageApiMap_.delete(ev.item);\n        }\n        onSelect_(ev) {\n            this.emitter_.emit('select', {\n                event: new TpTabSelectEvent(this, ev.rawValue),\n            });\n        }\n    }\n\n    const INDEX_NOT_SELECTED = -1;\n    class Tab {\n        constructor() {\n            this.onItemSelectedChange_ = this.onItemSelectedChange_.bind(this);\n            this.empty = createValue(true);\n            this.selectedIndex = createValue(INDEX_NOT_SELECTED);\n            this.items_ = [];\n        }\n        add(item, opt_index) {\n            const index = opt_index !== null && opt_index !== void 0 ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            item.emitter.on('change', this.onItemSelectedChange_);\n            this.keepSelection_();\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) {\n                return;\n            }\n            this.items_.splice(index, 1);\n            item.emitter.off('change', this.onItemSelectedChange_);\n            this.keepSelection_();\n        }\n        keepSelection_() {\n            if (this.items_.length === 0) {\n                this.selectedIndex.rawValue = INDEX_NOT_SELECTED;\n                this.empty.rawValue = true;\n                return;\n            }\n            const firstSelIndex = this.items_.findIndex((s) => s.rawValue);\n            if (firstSelIndex < 0) {\n                this.items_.forEach((s, i) => {\n                    s.rawValue = i === 0;\n                });\n                this.selectedIndex.rawValue = 0;\n            }\n            else {\n                this.items_.forEach((s, i) => {\n                    s.rawValue = i === firstSelIndex;\n                });\n                this.selectedIndex.rawValue = firstSelIndex;\n            }\n            this.empty.rawValue = false;\n        }\n        onItemSelectedChange_(ev) {\n            if (ev.rawValue) {\n                const index = this.items_.findIndex((s) => s === ev.sender);\n                this.items_.forEach((s, i) => {\n                    s.rawValue = i === index;\n                });\n                this.selectedIndex.rawValue = index;\n            }\n            else {\n                this.keepSelection_();\n            }\n        }\n    }\n\n    const className$k = ClassName('tab');\n    class TabView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$k(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.empty, valueToClassName(this.element, className$k(undefined, 'nop')));\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$k('t'));\n            this.element.appendChild(titleElem);\n            this.itemsElement = titleElem;\n            const indentElem = doc.createElement('div');\n            indentElem.classList.add(className$k('i'));\n            this.element.appendChild(indentElem);\n            const contentsElem = config.contentsElement;\n            contentsElem.classList.add(className$k('c'));\n            this.element.appendChild(contentsElem);\n            this.contentsElement = contentsElem;\n        }\n    }\n\n    class TabController extends RackLikeController {\n        constructor(doc, config) {\n            const cr = new RackController(doc, {\n                blade: config.blade,\n                viewProps: config.viewProps,\n            });\n            const tab = new Tab();\n            super({\n                blade: config.blade,\n                rackController: cr,\n                view: new TabView(doc, {\n                    contentsElement: cr.view.element,\n                    empty: tab.empty,\n                    viewProps: config.viewProps,\n                }),\n            });\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.pageSet_ = new NestedOrderedSet(() => null);\n            this.pageSet_.emitter.on('add', this.onPageAdd_);\n            this.pageSet_.emitter.on('remove', this.onPageRemove_);\n            this.tab = tab;\n        }\n        get pageSet() {\n            return this.pageSet_;\n        }\n        add(pc, opt_index) {\n            this.pageSet_.add(pc, opt_index);\n        }\n        remove(index) {\n            this.pageSet_.remove(this.pageSet_.items[index]);\n        }\n        onPageAdd_(ev) {\n            const pc = ev.item;\n            insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n            pc.itemController.viewProps.set('parent', this.viewProps);\n            this.rackController.rack.add(pc.contentController, ev.index);\n            this.tab.add(pc.props.value('selected'));\n        }\n        onPageRemove_(ev) {\n            const pc = ev.item;\n            removeElement(pc.itemController.view.element);\n            pc.itemController.viewProps.set('parent', null);\n            this.rackController.rack.remove(pc.contentController);\n            this.tab.remove(pc.props.value('selected'));\n        }\n    }\n\n    const TabBladePlugin = {\n        id: 'tab',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                pages: p.required.array(p.required.object({ title: p.required.string })),\n                view: p.required.constant('tab'),\n            });\n            if (!result || result.pages.length === 0) {\n                return null;\n            }\n            return { params: result };\n        },\n        controller(args) {\n            const c = new TabController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n            args.params.pages.forEach((p) => {\n                const pc = new TabPageController(args.document, {\n                    itemProps: ValueMap.fromObject({\n                        selected: false,\n                        title: p.title,\n                    }),\n                    props: ValueMap.fromObject({\n                        selected: false,\n                    }),\n                });\n                c.add(pc);\n            });\n            return c;\n        },\n        api(args) {\n            if (!(args.controller instanceof TabController)) {\n                return null;\n            }\n            return new TabApi(args.controller, args.pool);\n        },\n    };\n\n    function createBladeController(plugin, args) {\n        const ac = plugin.accept(args.params);\n        if (!ac) {\n            return null;\n        }\n        const disabled = ParamsParsers.optional.boolean(args.params['disabled']).value;\n        const hidden = ParamsParsers.optional.boolean(args.params['hidden']).value;\n        return plugin.controller({\n            blade: createBlade(),\n            document: args.document,\n            params: forceCast(Object.assign(Object.assign({}, ac.params), { disabled: disabled, hidden: hidden })),\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n    }\n\n    class ManualTicker {\n        constructor() {\n            this.disabled = false;\n            this.emitter = new Emitter();\n        }\n        dispose() { }\n        tick() {\n            if (this.disabled) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class IntervalTicker {\n        constructor(doc, interval) {\n            this.disabled_ = false;\n            this.timerId_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            this.interval_ = interval;\n            this.setTimer_();\n        }\n        get disabled() {\n            return this.disabled_;\n        }\n        set disabled(inactive) {\n            this.disabled_ = inactive;\n            if (this.disabled_) {\n                this.clearTimer_();\n            }\n            else {\n                this.setTimer_();\n            }\n        }\n        dispose() {\n            this.clearTimer_();\n        }\n        clearTimer_() {\n            if (this.timerId_ === null) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                win.clearInterval(this.timerId_);\n            }\n            this.timerId_ = null;\n        }\n        setTimer_() {\n            this.clearTimer_();\n            if (this.interval_ <= 0) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n            }\n        }\n        onTick_() {\n            if (this.disabled_) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class InputBinding {\n        constructor(config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.reader = config.reader;\n            this.writer = config.writer;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.target = config.target;\n            this.read();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue !== undefined) {\n                this.value.rawValue = this.reader(targetValue);\n            }\n        }\n        write_(rawValue) {\n            this.writer(this.target, rawValue);\n        }\n        onValueChange_(ev) {\n            this.write_(ev.rawValue);\n            this.emitter.emit('change', {\n                options: ev.options,\n                rawValue: ev.rawValue,\n                sender: this,\n            });\n        }\n    }\n\n    function fillBuffer(buffer, bufferSize) {\n        while (buffer.length < bufferSize) {\n            buffer.push(undefined);\n        }\n    }\n    function initializeBuffer(bufferSize) {\n        const buffer = [];\n        fillBuffer(buffer, bufferSize);\n        return createValue(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        const index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    function createPushedBuffer(buffer, newValue) {\n        const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n        if (newBuffer.length > buffer.length) {\n            newBuffer.splice(0, newBuffer.length - buffer.length);\n        }\n        else {\n            fillBuffer(newBuffer, buffer.length);\n        }\n        return newBuffer;\n    }\n\n    class MonitorBinding {\n        constructor(config) {\n            this.onTick_ = this.onTick_.bind(this);\n            this.reader_ = config.reader;\n            this.target = config.target;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.ticker = config.ticker;\n            this.ticker.emitter.on('tick', this.onTick_);\n            this.read();\n        }\n        dispose() {\n            this.ticker.dispose();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue === undefined) {\n                return;\n            }\n            const buffer = this.value.rawValue;\n            const newValue = this.reader_(targetValue);\n            this.value.rawValue = createPushedBuffer(buffer, newValue);\n            this.emitter.emit('update', {\n                rawValue: newValue,\n                sender: this,\n            });\n        }\n        onTick_(_) {\n            this.read();\n        }\n    }\n\n    class CompositeConstraint {\n        constructor(constraints) {\n            this.constraints = constraints;\n        }\n        constrain(value) {\n            return this.constraints.reduce((result, c) => {\n                return c.constrain(result);\n            }, value);\n        }\n    }\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) {\n            return c;\n        }\n        if (c instanceof CompositeConstraint) {\n            const result = c.constraints.reduce((tmpResult, sc) => {\n                if (tmpResult) {\n                    return tmpResult;\n                }\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n\n    class DefiniteRangeConstraint {\n        constructor(config) {\n            this.values = ValueMap.fromObject({\n                max: config.max,\n                min: config.min,\n            });\n        }\n        constrain(value) {\n            const max = this.values.get('max');\n            const min = this.values.get('min');\n            return Math.min(Math.max(value, min), max);\n        }\n    }\n\n    class ListConstraint {\n        constructor(options) {\n            this.values = ValueMap.fromObject({\n                options: options,\n            });\n        }\n        get options() {\n            return this.values.get('options');\n        }\n        constrain(value) {\n            const opts = this.values.get('options');\n            if (opts.length === 0) {\n                return value;\n            }\n            const matched = opts.filter((item) => {\n                return item.value === value;\n            }).length > 0;\n            return matched ? value : opts[0].value;\n        }\n    }\n\n    class RangeConstraint {\n        constructor(config) {\n            this.values = ValueMap.fromObject({\n                max: config.max,\n                min: config.min,\n            });\n        }\n        get maxValue() {\n            return this.values.get('max');\n        }\n        get minValue() {\n            return this.values.get('min');\n        }\n        constrain(value) {\n            const max = this.values.get('max');\n            const min = this.values.get('min');\n            let result = value;\n            if (!isEmpty(min)) {\n                result = Math.max(result, min);\n            }\n            if (!isEmpty(max)) {\n                result = Math.min(result, max);\n            }\n            return result;\n        }\n    }\n\n    class StepConstraint {\n        constructor(step, origin = 0) {\n            this.step = step;\n            this.origin = origin;\n        }\n        constrain(value) {\n            const o = this.origin % this.step;\n            const r = Math.round((value - o) / this.step);\n            return o + r * this.step;\n        }\n    }\n\n    const className$j = ClassName('lst');\n    class ListView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.props_ = config.props;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$j());\n            config.viewProps.bindClassModifiers(this.element);\n            const selectElem = doc.createElement('select');\n            selectElem.classList.add(className$j('s'));\n            bindValueMap(this.props_, 'options', (opts) => {\n                removeChildElements(selectElem);\n                opts.forEach((item, index) => {\n                    const optionElem = doc.createElement('option');\n                    optionElem.dataset.index = String(index);\n                    optionElem.textContent = item.text;\n                    optionElem.value = String(item.value);\n                    selectElem.appendChild(optionElem);\n                });\n            });\n            config.viewProps.bindDisabled(selectElem);\n            this.element.appendChild(selectElem);\n            this.selectElement = selectElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(className$j('m'));\n            markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            this.element.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value_ = config.value;\n            this.update_();\n        }\n        update_() {\n            this.selectElement.value = String(this.value_.rawValue);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ListController {\n        constructor(doc, config) {\n            this.onSelectChange_ = this.onSelectChange_.bind(this);\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ListView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.selectElement.addEventListener('change', this.onSelectChange_);\n        }\n        onSelectChange_(e) {\n            const selectElem = forceCast(e.currentTarget);\n            const optElem = selectElem.selectedOptions.item(0);\n            if (!optElem) {\n                return;\n            }\n            const itemIndex = Number(optElem.dataset.index);\n            this.value.rawValue = this.props.get('options')[itemIndex].value;\n        }\n    }\n\n    const className$i = ClassName('pop');\n    class PopupView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$i());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.shows, valueToClassName(this.element, className$i(undefined, 'v')));\n        }\n    }\n\n    class PopupController {\n        constructor(doc, config) {\n            this.shows = createValue(false);\n            this.viewProps = config.viewProps;\n            this.view = new PopupView(doc, {\n                shows: this.shows,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$h = ClassName('txt');\n    class TextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$h());\n            config.viewProps.bindClassModifiers(this.element);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$h('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value_ = config.value;\n            this.refresh();\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value_.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class TextController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new TextView(doc, {\n                props: config.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n    }\n\n    function boolToString(value) {\n        return String(value);\n    }\n    function boolFromUnknown(value) {\n        if (value === 'false') {\n            return false;\n        }\n        return !!value;\n    }\n    function BooleanFormatter(value) {\n        return boolToString(value);\n    }\n\n    class NumberLiteralNode {\n        constructor(text) {\n            this.text = text;\n        }\n        evaluate() {\n            return Number(this.text);\n        }\n        toString() {\n            return this.text;\n        }\n    }\n    const BINARY_OPERATION_MAP = {\n        '**': (v1, v2) => Math.pow(v1, v2),\n        '*': (v1, v2) => v1 * v2,\n        '/': (v1, v2) => v1 / v2,\n        '%': (v1, v2) => v1 % v2,\n        '+': (v1, v2) => v1 + v2,\n        '-': (v1, v2) => v1 - v2,\n        '<<': (v1, v2) => v1 << v2,\n        '>>': (v1, v2) => v1 >> v2,\n        '>>>': (v1, v2) => v1 >>> v2,\n        '&': (v1, v2) => v1 & v2,\n        '^': (v1, v2) => v1 ^ v2,\n        '|': (v1, v2) => v1 | v2,\n    };\n    class BinaryOperationNode {\n        constructor(operator, left, right) {\n            this.left = left;\n            this.operator = operator;\n            this.right = right;\n        }\n        evaluate() {\n            const op = BINARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected binary operator: '${this.operator}`);\n            }\n            return op(this.left.evaluate(), this.right.evaluate());\n        }\n        toString() {\n            return [\n                'b(',\n                this.left.toString(),\n                this.operator,\n                this.right.toString(),\n                ')',\n            ].join(' ');\n        }\n    }\n    const UNARY_OPERATION_MAP = {\n        '+': (v) => v,\n        '-': (v) => -v,\n        '~': (v) => ~v,\n    };\n    class UnaryOperationNode {\n        constructor(operator, expr) {\n            this.operator = operator;\n            this.expression = expr;\n        }\n        evaluate() {\n            const op = UNARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected unary operator: '${this.operator}`);\n            }\n            return op(this.expression.evaluate());\n        }\n        toString() {\n            return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n        }\n    }\n\n    function combineReader(parsers) {\n        return (text, cursor) => {\n            for (let i = 0; i < parsers.length; i++) {\n                const result = parsers[i](text, cursor);\n                if (result !== '') {\n                    return result;\n                }\n            }\n            return '';\n        };\n    }\n    function readWhitespace(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^\\s+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readNonZeroDigit(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        return ch.match(/^[1-9]$/) ? ch : '';\n    }\n    function readDecimalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readSignedInteger(text, cursor) {\n        const ds = readDecimalDigits(text, cursor);\n        if (ds !== '') {\n            return ds;\n        }\n        const sign = text.substr(cursor, 1);\n        cursor += 1;\n        if (sign !== '-' && sign !== '+') {\n            return '';\n        }\n        const sds = readDecimalDigits(text, cursor);\n        if (sds === '') {\n            return '';\n        }\n        return sign + sds;\n    }\n    function readExponentPart(text, cursor) {\n        const e = text.substr(cursor, 1);\n        cursor += 1;\n        if (e.toLowerCase() !== 'e') {\n            return '';\n        }\n        const si = readSignedInteger(text, cursor);\n        if (si === '') {\n            return '';\n        }\n        return e + si;\n    }\n    function readDecimalIntegerLiteral(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        if (ch === '0') {\n            return ch;\n        }\n        const nzd = readNonZeroDigit(text, cursor);\n        cursor += nzd.length;\n        if (nzd === '') {\n            return '';\n        }\n        return nzd + readDecimalDigits(text, cursor);\n    }\n    function readDecimalLiteral1(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        return dil + dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral2(text, cursor) {\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        if (dds === '') {\n            return '';\n        }\n        return dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral3(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        return dil + readExponentPart(text, cursor);\n    }\n    const readDecimalLiteral = combineReader([\n        readDecimalLiteral1,\n        readDecimalLiteral2,\n        readDecimalLiteral3,\n    ]);\n    function parseBinaryDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[01]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readBinaryIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0b') {\n            return '';\n        }\n        const bds = parseBinaryDigits(text, cursor);\n        if (bds === '') {\n            return '';\n        }\n        return prefix + bds;\n    }\n    function readOctalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-7]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readOctalIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0o') {\n            return '';\n        }\n        const ods = readOctalDigits(text, cursor);\n        if (ods === '') {\n            return '';\n        }\n        return prefix + ods;\n    }\n    function readHexDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readHexIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0x') {\n            return '';\n        }\n        const hds = readHexDigits(text, cursor);\n        if (hds === '') {\n            return '';\n        }\n        return prefix + hds;\n    }\n    const readNonDecimalIntegerLiteral = combineReader([\n        readBinaryIntegerLiteral,\n        readOctalIntegerLiteral,\n        readHexIntegerLiteral,\n    ]);\n    const readNumericLiteral = combineReader([\n        readNonDecimalIntegerLiteral,\n        readDecimalLiteral,\n    ]);\n\n    function parseLiteral(text, cursor) {\n        const num = readNumericLiteral(text, cursor);\n        cursor += num.length;\n        if (num === '') {\n            return null;\n        }\n        return {\n            evaluable: new NumberLiteralNode(num),\n            cursor: cursor,\n        };\n    }\n    function parseParenthesizedExpression(text, cursor) {\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '(') {\n            return null;\n        }\n        const expr = parseExpression(text, cursor);\n        if (!expr) {\n            return null;\n        }\n        cursor = expr.cursor;\n        cursor += readWhitespace(text, cursor).length;\n        const cl = text.substr(cursor, 1);\n        cursor += cl.length;\n        if (cl !== ')') {\n            return null;\n        }\n        return {\n            evaluable: expr.evaluable,\n            cursor: cursor,\n        };\n    }\n    function parsePrimaryExpression(text, cursor) {\n        var _a;\n        return ((_a = parseLiteral(text, cursor)) !== null && _a !== void 0 ? _a : parseParenthesizedExpression(text, cursor));\n    }\n    function parseUnaryExpression(text, cursor) {\n        const expr = parsePrimaryExpression(text, cursor);\n        if (expr) {\n            return expr;\n        }\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '+' && op !== '-' && op !== '~') {\n            return null;\n        }\n        const num = parseUnaryExpression(text, cursor);\n        if (!num) {\n            return null;\n        }\n        cursor = num.cursor;\n        return {\n            cursor: cursor,\n            evaluable: new UnaryOperationNode(op, num.evaluable),\n        };\n    }\n    function readBinaryOperator(ops, text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n        if (!op) {\n            return null;\n        }\n        cursor += op.length;\n        cursor += readWhitespace(text, cursor).length;\n        return {\n            cursor: cursor,\n            operator: op,\n        };\n    }\n    function createBinaryOperationExpressionParser(exprParser, ops) {\n        return (text, cursor) => {\n            const firstExpr = exprParser(text, cursor);\n            if (!firstExpr) {\n                return null;\n            }\n            cursor = firstExpr.cursor;\n            let expr = firstExpr.evaluable;\n            for (;;) {\n                const op = readBinaryOperator(ops, text, cursor);\n                if (!op) {\n                    break;\n                }\n                cursor = op.cursor;\n                const nextExpr = exprParser(text, cursor);\n                if (!nextExpr) {\n                    return null;\n                }\n                cursor = nextExpr.cursor;\n                expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n            }\n            return expr\n                ? {\n                    cursor: cursor,\n                    evaluable: expr,\n                }\n                : null;\n        };\n    }\n    const parseBinaryOperationExpression = [\n        ['**'],\n        ['*', '/', '%'],\n        ['+', '-'],\n        ['<<', '>>>', '>>'],\n        ['&'],\n        ['^'],\n        ['|'],\n    ].reduce((parser, ops) => {\n        return createBinaryOperationExpressionParser(parser, ops);\n    }, parseUnaryExpression);\n    function parseExpression(text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        return parseBinaryOperationExpression(text, cursor);\n    }\n    function parseEcmaNumberExpression(text) {\n        const expr = parseExpression(text, 0);\n        if (!expr) {\n            return null;\n        }\n        const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n        if (cursor !== text.length) {\n            return null;\n        }\n        return expr.evaluable;\n    }\n\n    function parseNumber(text) {\n        var _a;\n        const r = parseEcmaNumberExpression(text);\n        return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n    }\n    function numberFromUnknown(value) {\n        if (typeof value === 'number') {\n            return value;\n        }\n        if (typeof value === 'string') {\n            const pv = parseNumber(value);\n            if (!isEmpty(pv)) {\n                return pv;\n            }\n        }\n        return 0;\n    }\n    function numberToString(value) {\n        return String(value);\n    }\n    function createNumberFormatter(digits) {\n        return (value) => {\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n\n    const innerFormatter = createNumberFormatter(0);\n    function formatPercentage(value) {\n        return innerFormatter(value) + '%';\n    }\n\n    function stringFromUnknown(value) {\n        return String(value);\n    }\n    function formatString(value) {\n        return value;\n    }\n\n    function connectValues({ primary, secondary, forward, backward, }) {\n        let changing = false;\n        function preventFeedback(callback) {\n            if (changing) {\n                return;\n            }\n            changing = true;\n            callback();\n            changing = false;\n        }\n        primary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        secondary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                primary.setRawValue(backward(primary, secondary), ev.options);\n            });\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary, secondary), {\n                forceEmit: false,\n                last: true,\n            });\n        });\n    }\n\n    function getStepForKey(baseStep, keys) {\n        const step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) {\n            return +step;\n        }\n        else if (keys.downKey) {\n            return -step;\n        }\n        return 0;\n    }\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowDown',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowUp',\n        };\n    }\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowLeft',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowRight',\n        };\n    }\n    function isVerticalArrowKey(key) {\n        return key === 'ArrowUp' || key === 'ArrowDown';\n    }\n    function isArrowKey(key) {\n        return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n    }\n\n    function computeOffset$1(ev, elem) {\n        var _a, _b;\n        const win = elem.ownerDocument.defaultView;\n        const rect = elem.getBoundingClientRect();\n        return {\n            x: ev.pageX - (((_a = (win && win.scrollX)) !== null && _a !== void 0 ? _a : 0) + rect.left),\n            y: ev.pageY - (((_b = (win && win.scrollY)) !== null && _b !== void 0 ? _b : 0) + rect.top),\n        };\n    }\n    class PointerHandler {\n        constructor(element) {\n            this.lastTouch_ = null;\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.elem_ = element;\n            this.emitter = new Emitter();\n            element.addEventListener('touchstart', this.onTouchStart_, {\n                passive: false,\n            });\n            element.addEventListener('touchmove', this.onTouchMove_, {\n                passive: true,\n            });\n            element.addEventListener('touchend', this.onTouchEnd_);\n            element.addEventListener('mousedown', this.onMouseDown_);\n        }\n        computePosition_(offset) {\n            const rect = this.elem_.getBoundingClientRect();\n            return {\n                bounds: {\n                    width: rect.width,\n                    height: rect.height,\n                },\n                point: offset\n                    ? {\n                        x: offset.x,\n                        y: offset.y,\n                    }\n                    : null,\n            };\n        }\n        onMouseDown_(ev) {\n            var _a;\n            ev.preventDefault();\n            (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n            const doc = this.elem_.ownerDocument;\n            doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseMove_(ev) {\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseUp_(ev) {\n            const doc = this.elem_.ownerDocument;\n            doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onTouchStart_(ev) {\n            ev.preventDefault();\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchMove_(ev) {\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchEnd_(ev) {\n            var _a;\n            const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n    }\n\n    function mapRange(value, start1, end1, start2, end2) {\n        const p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        const text = String(value.toFixed(10));\n        const frac = text.split('.')[1];\n        return frac.replace(/0+$/, '').length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n    function loopRange(value, max) {\n        return ((value % max) + max) % max;\n    }\n\n    const className$g = ClassName('txt');\n    class NumberTextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$g(), className$g(undefined, 'num'));\n            if (config.arrayPosition) {\n                this.element.classList.add(className$g(undefined, config.arrayPosition));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$g('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n            this.dragging_ = config.dragging;\n            this.dragging_.emitter.on('change', this.onDraggingChange_);\n            this.element.classList.add(className$g());\n            this.inputElement.classList.add(className$g('i'));\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$g('k'));\n            this.element.appendChild(knobElem);\n            this.knobElement = knobElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'svg');\n            guideElem.classList.add(className$g('g'));\n            this.knobElement.appendChild(guideElem);\n            const bodyElem = doc.createElementNS(SVG_NS, 'path');\n            bodyElem.classList.add(className$g('gb'));\n            guideElem.appendChild(bodyElem);\n            this.guideBodyElem_ = bodyElem;\n            const headElem = doc.createElementNS(SVG_NS, 'path');\n            headElem.classList.add(className$g('gh'));\n            guideElem.appendChild(headElem);\n            this.guideHeadElem_ = headElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(ClassName('tt')());\n            this.knobElement.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.refresh();\n        }\n        onDraggingChange_(ev) {\n            if (ev.rawValue === null) {\n                this.element.classList.remove(className$g(undefined, 'drg'));\n                return;\n            }\n            this.element.classList.add(className$g(undefined, 'drg'));\n            const x = ev.rawValue / this.props_.get('draggingScale');\n            const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n            const adx = constrainRange(-aox, -4, +4);\n            this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n            this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n            const formatter = this.props_.get('formatter');\n            this.tooltipElem_.textContent = formatter(this.value.rawValue);\n            this.tooltipElem_.style.left = `${x}px`;\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class NumberTextController {\n        constructor(doc, config) {\n            var _a;\n            this.originRawValue_ = 0;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.sliderProps_ = (_a = config.sliderProps) !== null && _a !== void 0 ? _a : null;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.dragging_ = createValue(null);\n            this.view = new NumberTextView(doc, {\n                arrayPosition: config.arrayPosition,\n                dragging: this.dragging_,\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n            this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n            this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n            const ph = new PointerHandler(this.view.knobElement);\n            ph.emitter.on('down', this.onPointerDown_);\n            ph.emitter.on('move', this.onPointerMove_);\n            ph.emitter.on('up', this.onPointerUp_);\n        }\n        constrainValue_(value) {\n            var _a, _b;\n            const min = (_a = this.sliderProps_) === null || _a === void 0 ? void 0 : _a.get('minValue');\n            const max = (_b = this.sliderProps_) === null || _b === void 0 ? void 0 : _b.get('maxValue');\n            let v = value;\n            if (min !== undefined) {\n                v = Math.max(v, min);\n            }\n            if (max !== undefined) {\n                v = Math.min(v, max);\n            }\n            return v;\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = this.constrainValue_(parsedValue);\n            }\n            this.view.refresh();\n        }\n        onInputKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.constrainValue_(this.value.rawValue + step), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onInputKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPointerDown_() {\n            this.originRawValue_ = this.value.rawValue;\n            this.dragging_.rawValue = 0;\n        }\n        computeDraggingValue_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const dx = data.point.x - data.bounds.width / 2;\n            return this.constrainValue_(this.originRawValue_ + dx * this.props.get('draggingScale'));\n        }\n        onPointerMove_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: false,\n                last: false,\n            });\n            this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n        }\n        onPointerUp_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: true,\n                last: true,\n            });\n            this.dragging_.rawValue = null;\n        }\n    }\n\n    const className$f = ClassName('sld');\n    class SliderView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$f());\n            config.viewProps.bindClassModifiers(this.element);\n            const trackElem = doc.createElement('div');\n            trackElem.classList.add(className$f('t'));\n            config.viewProps.bindTabIndex(trackElem);\n            this.element.appendChild(trackElem);\n            this.trackElement = trackElem;\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$f('k'));\n            this.trackElement.appendChild(knobElem);\n            this.knobElement = knobElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('minValue'), this.props_.get('maxValue'), 0, 100), 0, 100);\n            this.knobElement.style.width = `${p}%`;\n        }\n        onChange_() {\n            this.update_();\n        }\n    }\n\n    class SliderController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.props = config.props;\n            this.view = new SliderView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.trackElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n            this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('minValue'), this.props.get('maxValue')), opts);\n        }\n        onPointerDownOrMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$e = ClassName('sldtxt');\n    class SliderTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$e());\n            const sliderElem = doc.createElement('div');\n            sliderElem.classList.add(className$e('s'));\n            this.sliderView_ = config.sliderView;\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$e('t'));\n            this.textView_ = config.textView;\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n    }\n\n    class SliderTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.sliderC_ = new SliderController(doc, {\n                baseStep: config.baseStep,\n                props: config.sliderProps,\n                value: config.value,\n                viewProps: this.viewProps,\n            });\n            this.textC_ = new NumberTextController(doc, {\n                baseStep: config.baseStep,\n                parser: config.parser,\n                props: config.textProps,\n                sliderProps: config.sliderProps,\n                value: config.value,\n                viewProps: config.viewProps,\n            });\n            this.view = new SliderTextView(doc, {\n                sliderView: this.sliderC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get sliderController() {\n            return this.sliderC_;\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n\n    function parseListOptions(value) {\n        const p = ParamsParsers;\n        if (Array.isArray(value)) {\n            return p.required.array(p.required.object({\n                text: p.required.string,\n                value: p.required.raw,\n            }))(value).value;\n        }\n        if (typeof value === 'object') {\n            return p.required.raw(value)\n                .value;\n        }\n        return undefined;\n    }\n    function parsePickerLayout(value) {\n        if (value === 'inline' || value === 'popup') {\n            return value;\n        }\n        return undefined;\n    }\n    function parsePointDimensionParams(value) {\n        const p = ParamsParsers;\n        return p.required.object({\n            max: p.optional.number,\n            min: p.optional.number,\n            step: p.optional.number,\n        })(value).value;\n    }\n    function normalizeListOptions(options) {\n        if (Array.isArray(options)) {\n            return options;\n        }\n        const items = [];\n        Object.keys(options).forEach((text) => {\n            items.push({ text: text, value: options[text] });\n        });\n        return items;\n    }\n    function createListConstraint(options) {\n        return !isEmpty(options)\n            ? new ListConstraint(normalizeListOptions(forceCast(options)))\n            : null;\n    }\n    function findStep(constraint) {\n        const c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) {\n            return null;\n        }\n        return c.step;\n    }\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) {\n            return getDecimalDigits(sc.step);\n        }\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    function getBaseStep(constraint) {\n        const step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n    function getSuitableDraggingScale(constraint, rawValue) {\n        var _a;\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        const base = Math.abs((_a = sc === null || sc === void 0 ? void 0 : sc.step) !== null && _a !== void 0 ? _a : rawValue);\n        return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n    }\n\n    const className$d = ClassName('ckb');\n    class CheckboxView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$d());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('label');\n            labelElem.classList.add(className$d('l'));\n            this.element.appendChild(labelElem);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$d('i'));\n            inputElem.type = 'checkbox';\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.viewProps.bindDisabled(this.inputElement);\n            const wrapperElem = doc.createElement('div');\n            wrapperElem.classList.add(className$d('w'));\n            labelElem.appendChild(wrapperElem);\n            const markElem = createSvgIconElement(doc, 'check');\n            wrapperElem.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            this.inputElement.checked = this.value.rawValue;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class CheckboxController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new CheckboxView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            this.value.rawValue = inputElem.checked;\n        }\n    }\n\n    function createConstraint$6(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const BooleanInputPlugin = {\n        id: 'input-bool',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n            constraint: (args) => createConstraint$6(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            const lc = c && findConstraint(c, ListConstraint);\n            if (lc) {\n                return new ListController(doc, {\n                    props: new ValueMap({\n                        options: lc.values.value('options'),\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new CheckboxController(doc, {\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const className$c = ClassName('col');\n    class ColorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$c());\n            config.foldable.bindExpandedClass(this.element, className$c(undefined, 'expanded'));\n            bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className$c(undefined, 'cpl')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$c('h'));\n            this.element.appendChild(headElem);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$c('s'));\n            headElem.appendChild(swatchElem);\n            this.swatchElement = swatchElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$c('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$c('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    function rgbToHslInt(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const c = cmax - cmin;\n        let h = 0;\n        let s = 0;\n        const l = (cmin + cmax) / 2;\n        if (c !== 0) {\n            s = c / (1 - Math.abs(cmax + cmin - 1));\n            if (rp === cmax) {\n                h = (gp - bp) / c;\n            }\n            else if (gp === cmax) {\n                h = 2 + (bp - rp) / c;\n            }\n            else {\n                h = 4 + (rp - gp) / c;\n            }\n            h = h / 6 + (h < 0 ? 1 : 0);\n        }\n        return [h * 360, s * 100, l * 100];\n    }\n    function hslToRgbInt(h, s, l) {\n        const hp = ((h % 360) + 360) % 360;\n        const sp = constrainRange(s / 100, 0, 1);\n        const lp = constrainRange(l / 100, 0, 1);\n        const c = (1 - Math.abs(2 * lp - 1)) * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = lp - c / 2;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function rgbToHsvInt(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const d = cmax - cmin;\n        let h;\n        if (d === 0) {\n            h = 0;\n        }\n        else if (cmax === rp) {\n            h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\n        }\n        else if (cmax === gp) {\n            h = 60 * ((bp - rp) / d + 2);\n        }\n        else {\n            h = 60 * ((rp - gp) / d + 4);\n        }\n        const s = cmax === 0 ? 0 : d / cmax;\n        const v = cmax;\n        return [h, s * 100, v * 100];\n    }\n    function hsvToRgbInt(h, s, v) {\n        const hp = loopRange(h, 360);\n        const sp = constrainRange(s / 100, 0, 1);\n        const vp = constrainRange(v / 100, 0, 1);\n        const c = vp * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = vp - c;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function hslToHsvInt(h, s, l) {\n        const sd = l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100);\n        return [\n            h,\n            sd !== 0 ? (s * (100 - Math.abs(2 * l - 100))) / sd : 0,\n            l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100),\n        ];\n    }\n    function hsvToHslInt(h, s, v) {\n        const sd = 100 - Math.abs((v * (200 - s)) / 100 - 100);\n        return [h, sd !== 0 ? (s * v) / sd : 0, (v * (200 - s)) / (2 * 100)];\n    }\n    function removeAlphaComponent(comps) {\n        return [comps[0], comps[1], comps[2]];\n    }\n    function appendAlphaComponent(comps, alpha) {\n        return [comps[0], comps[1], comps[2], alpha];\n    }\n    const MODE_CONVERTER_MAP = {\n        hsl: {\n            hsl: (h, s, l) => [h, s, l],\n            hsv: hslToHsvInt,\n            rgb: hslToRgbInt,\n        },\n        hsv: {\n            hsl: hsvToHslInt,\n            hsv: (h, s, v) => [h, s, v],\n            rgb: hsvToRgbInt,\n        },\n        rgb: {\n            hsl: rgbToHslInt,\n            hsv: rgbToHsvInt,\n            rgb: (r, g, b) => [r, g, b],\n        },\n    };\n    function getColorMaxComponents(mode, type) {\n        return [\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 360,\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n            type === 'float' ? 1 : mode === 'rgb' ? 255 : 100,\n        ];\n    }\n    function loopHueRange(hue, max) {\n        return hue === max ? max : loopRange(hue, max);\n    }\n    function constrainColorComponents(components, mode, type) {\n        var _a;\n        const ms = getColorMaxComponents(mode, type);\n        return [\n            mode === 'rgb'\n                ? constrainRange(components[0], 0, ms[0])\n                : loopHueRange(components[0], ms[0]),\n            constrainRange(components[1], 0, ms[1]),\n            constrainRange(components[2], 0, ms[2]),\n            constrainRange((_a = components[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n        ];\n    }\n    function convertColorType(comps, mode, from, to) {\n        const fms = getColorMaxComponents(mode, from);\n        const tms = getColorMaxComponents(mode, to);\n        return comps.map((c, index) => (c / fms[index]) * tms[index]);\n    }\n    function convertColor(components, from, to) {\n        const intComps = convertColorType(components, from.mode, from.type, 'int');\n        const result = MODE_CONVERTER_MAP[from.mode][to.mode](...intComps);\n        return convertColorType(result, to.mode, 'int', to.type);\n    }\n\n    function isRgbColorComponent(obj, key) {\n        if (typeof obj !== 'object' || isEmpty(obj)) {\n            return false;\n        }\n        return key in obj && typeof obj[key] === 'number';\n    }\n    class Color {\n        static black(type = 'int') {\n            return new Color([0, 0, 0], 'rgb', type);\n        }\n        static fromObject(obj, type = 'int') {\n            const comps = 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n            return new Color(comps, 'rgb', type);\n        }\n        static toRgbaObject(color, type = 'int') {\n            return color.toRgbaObject(type);\n        }\n        static isRgbColorObject(obj) {\n            return (isRgbColorComponent(obj, 'r') &&\n                isRgbColorComponent(obj, 'g') &&\n                isRgbColorComponent(obj, 'b'));\n        }\n        static isRgbaColorObject(obj) {\n            return this.isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n        }\n        static isColorObject(obj) {\n            return this.isRgbColorObject(obj);\n        }\n        static equals(v1, v2) {\n            if (v1.mode !== v2.mode) {\n                return false;\n            }\n            const comps1 = v1.comps_;\n            const comps2 = v2.comps_;\n            for (let i = 0; i < comps1.length; i++) {\n                if (comps1[i] !== comps2[i]) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        constructor(comps, mode, type = 'int') {\n            this.mode = mode;\n            this.type = type;\n            this.comps_ = constrainColorComponents(comps, mode, type);\n        }\n        getComponents(opt_mode, type = 'int') {\n            return appendAlphaComponent(convertColor(removeAlphaComponent(this.comps_), { mode: this.mode, type: this.type }, { mode: opt_mode !== null && opt_mode !== void 0 ? opt_mode : this.mode, type }), this.comps_[3]);\n        }\n        toRgbaObject(type = 'int') {\n            const rgbComps = this.getComponents('rgb', type);\n            return {\n                r: rgbComps[0],\n                g: rgbComps[1],\n                b: rgbComps[2],\n                a: rgbComps[3],\n            };\n        }\n    }\n\n    const className$b = ClassName('colp');\n    class ColorPickerView {\n        constructor(doc, config) {\n            this.alphaViews_ = null;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$b());\n            config.viewProps.bindClassModifiers(this.element);\n            const hsvElem = doc.createElement('div');\n            hsvElem.classList.add(className$b('hsv'));\n            const svElem = doc.createElement('div');\n            svElem.classList.add(className$b('sv'));\n            this.svPaletteView_ = config.svPaletteView;\n            svElem.appendChild(this.svPaletteView_.element);\n            hsvElem.appendChild(svElem);\n            const hElem = doc.createElement('div');\n            hElem.classList.add(className$b('h'));\n            this.hPaletteView_ = config.hPaletteView;\n            hElem.appendChild(this.hPaletteView_.element);\n            hsvElem.appendChild(hElem);\n            this.element.appendChild(hsvElem);\n            const rgbElem = doc.createElement('div');\n            rgbElem.classList.add(className$b('rgb'));\n            this.textView_ = config.textView;\n            rgbElem.appendChild(this.textView_.element);\n            this.element.appendChild(rgbElem);\n            if (config.alphaViews) {\n                this.alphaViews_ = {\n                    palette: config.alphaViews.palette,\n                    text: config.alphaViews.text,\n                };\n                const aElem = doc.createElement('div');\n                aElem.classList.add(className$b('a'));\n                const apElem = doc.createElement('div');\n                apElem.classList.add(className$b('ap'));\n                apElem.appendChild(this.alphaViews_.palette.element);\n                aElem.appendChild(apElem);\n                const atElem = doc.createElement('div');\n                atElem.classList.add(className$b('at'));\n                atElem.appendChild(this.alphaViews_.text.element);\n                aElem.appendChild(atElem);\n                this.element.appendChild(aElem);\n            }\n        }\n        get allFocusableElements() {\n            const elems = [\n                this.svPaletteView_.element,\n                this.hPaletteView_.element,\n                this.textView_.modeSelectElement,\n                ...this.textView_.textViews.map((v) => v.inputElement),\n            ];\n            if (this.alphaViews_) {\n                elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n            }\n            return elems;\n        }\n    }\n\n    function parseColorType(value) {\n        return value === 'int' ? 'int' : value === 'float' ? 'float' : undefined;\n    }\n    function parseColorInputParams(params) {\n        const p = ParamsParsers;\n        return parseParams(params, {\n            alpha: p.optional.boolean,\n            color: p.optional.object({\n                alpha: p.optional.boolean,\n                type: p.optional.custom(parseColorType),\n            }),\n            expanded: p.optional.boolean,\n            picker: p.optional.custom(parsePickerLayout),\n        });\n    }\n    function getBaseStepForColor(forAlpha) {\n        return forAlpha ? 0.1 : 1;\n    }\n    function extractColorType(params) {\n        var _a;\n        return (_a = params.color) === null || _a === void 0 ? void 0 : _a.type;\n    }\n\n    function equalsStringColorFormat(f1, f2) {\n        return (f1.alpha === f2.alpha &&\n            f1.mode === f2.mode &&\n            f1.notation === f2.notation &&\n            f1.type === f2.type);\n    }\n    function parseCssNumberOrPercentage(text, maxValue) {\n        const m = text.match(/^(.+)%$/);\n        if (!m) {\n            return Math.min(parseFloat(text), maxValue);\n        }\n        return Math.min(parseFloat(m[1]) * 0.01 * maxValue, maxValue);\n    }\n    const ANGLE_TO_DEG_MAP = {\n        deg: (angle) => angle,\n        grad: (angle) => (angle * 360) / 400,\n        rad: (angle) => (angle * 360) / (2 * Math.PI),\n        turn: (angle) => angle * 360,\n    };\n    function parseCssNumberOrAngle(text) {\n        const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n        if (!m) {\n            return parseFloat(text);\n        }\n        const angle = parseFloat(m[1]);\n        const unit = m[2];\n        return ANGLE_TO_DEG_MAP[unit](angle);\n    }\n    function parseFunctionalRgbColorComponents(text) {\n        const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseCssNumberOrPercentage(m[1], 255),\n            parseCssNumberOrPercentage(m[2], 255),\n            parseCssNumberOrPercentage(m[3], 255),\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n            return null;\n        }\n        return comps;\n    }\n    function createFunctionalRgbColorParser(type) {\n        return (text) => {\n            const comps = parseFunctionalRgbColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    function parseFunctionalRgbaColorComponents(text) {\n        const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseCssNumberOrPercentage(m[1], 255),\n            parseCssNumberOrPercentage(m[2], 255),\n            parseCssNumberOrPercentage(m[3], 255),\n            parseCssNumberOrPercentage(m[4], 1),\n        ];\n        if (isNaN(comps[0]) ||\n            isNaN(comps[1]) ||\n            isNaN(comps[2]) ||\n            isNaN(comps[3])) {\n            return null;\n        }\n        return comps;\n    }\n    function createFunctionalRgbaColorParser(type) {\n        return (text) => {\n            const comps = parseFunctionalRgbaColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    function parseHslColorComponents(text) {\n        const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseCssNumberOrAngle(m[1]),\n            parseCssNumberOrPercentage(m[2], 100),\n            parseCssNumberOrPercentage(m[3], 100),\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n            return null;\n        }\n        return comps;\n    }\n    function createHslColorParser(type) {\n        return (text) => {\n            const comps = parseHslColorComponents(text);\n            return comps ? new Color(comps, 'hsl', type) : null;\n        };\n    }\n    function parseHslaColorComponents(text) {\n        const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseCssNumberOrAngle(m[1]),\n            parseCssNumberOrPercentage(m[2], 100),\n            parseCssNumberOrPercentage(m[3], 100),\n            parseCssNumberOrPercentage(m[4], 1),\n        ];\n        if (isNaN(comps[0]) ||\n            isNaN(comps[1]) ||\n            isNaN(comps[2]) ||\n            isNaN(comps[3])) {\n            return null;\n        }\n        return comps;\n    }\n    function createHslaColorParser(type) {\n        return (text) => {\n            const comps = parseHslaColorComponents(text);\n            return comps ? new Color(comps, 'hsl', type) : null;\n        };\n    }\n    function parseHexRgbColorComponents(text) {\n        const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n        if (mRgb) {\n            return [\n                parseInt(mRgb[1] + mRgb[1], 16),\n                parseInt(mRgb[2] + mRgb[2], 16),\n                parseInt(mRgb[3] + mRgb[3], 16),\n            ];\n        }\n        const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n        if (mRrggbb) {\n            return [\n                parseInt(mRrggbb[1], 16),\n                parseInt(mRrggbb[2], 16),\n                parseInt(mRrggbb[3], 16),\n            ];\n        }\n        return null;\n    }\n    function parseHexRgbColor(text) {\n        const comps = parseHexRgbColorComponents(text);\n        return comps ? new Color(comps, 'rgb', 'int') : null;\n    }\n    function parseHexRgbaColorComponents(text) {\n        const mRgb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n        if (mRgb) {\n            return [\n                parseInt(mRgb[1] + mRgb[1], 16),\n                parseInt(mRgb[2] + mRgb[2], 16),\n                parseInt(mRgb[3] + mRgb[3], 16),\n                mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1),\n            ];\n        }\n        const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n        if (mRrggbb) {\n            return [\n                parseInt(mRrggbb[1], 16),\n                parseInt(mRrggbb[2], 16),\n                parseInt(mRrggbb[3], 16),\n                mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1),\n            ];\n        }\n        return null;\n    }\n    function parseHexRgbaColor(text) {\n        const comps = parseHexRgbaColorComponents(text);\n        return comps ? new Color(comps, 'rgb', 'int') : null;\n    }\n    function parseObjectRgbColorComponents(text) {\n        const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseFloat(m[1]),\n            parseFloat(m[2]),\n            parseFloat(m[3]),\n        ];\n        if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n            return null;\n        }\n        return comps;\n    }\n    function createObjectRgbColorParser(type) {\n        return (text) => {\n            const comps = parseObjectRgbColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    function parseObjectRgbaColorComponents(text) {\n        const m = text.match(/^\\{\\s*r\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*g\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*b\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*a\\s*:\\s*([0-9A-Fa-f.]+%?)\\s*\\}$/);\n        if (!m) {\n            return null;\n        }\n        const comps = [\n            parseFloat(m[1]),\n            parseFloat(m[2]),\n            parseFloat(m[3]),\n            parseFloat(m[4]),\n        ];\n        if (isNaN(comps[0]) ||\n            isNaN(comps[1]) ||\n            isNaN(comps[2]) ||\n            isNaN(comps[3])) {\n            return null;\n        }\n        return comps;\n    }\n    function createObjectRgbaColorParser(type) {\n        return (text) => {\n            const comps = parseObjectRgbaColorComponents(text);\n            return comps ? new Color(comps, 'rgb', type) : null;\n        };\n    }\n    const PARSER_AND_RESULT = [\n        {\n            parser: parseHexRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'hex',\n            },\n        },\n        {\n            parser: parseHexRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'hex',\n            },\n        },\n        {\n            parser: parseFunctionalRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'func',\n            },\n        },\n        {\n            parser: parseFunctionalRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'func',\n            },\n        },\n        {\n            parser: parseHslColorComponents,\n            result: {\n                alpha: false,\n                mode: 'hsl',\n                notation: 'func',\n            },\n        },\n        {\n            parser: parseHslaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'hsl',\n                notation: 'func',\n            },\n        },\n        {\n            parser: parseObjectRgbColorComponents,\n            result: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'object',\n            },\n        },\n        {\n            parser: parseObjectRgbaColorComponents,\n            result: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'object',\n            },\n        },\n    ];\n    function detectStringColor(text) {\n        return PARSER_AND_RESULT.reduce((prev, { parser, result: detection }) => {\n            if (prev) {\n                return prev;\n            }\n            return parser(text) ? detection : null;\n        }, null);\n    }\n    function detectStringColorFormat(text, type = 'int') {\n        const r = detectStringColor(text);\n        if (!r) {\n            return null;\n        }\n        if (r.notation === 'hex' && type !== 'float') {\n            return Object.assign(Object.assign({}, r), { type: 'int' });\n        }\n        if (r.notation === 'func') {\n            return Object.assign(Object.assign({}, r), { type: type });\n        }\n        return null;\n    }\n    const TYPE_TO_PARSERS = {\n        int: [\n            parseHexRgbColor,\n            parseHexRgbaColor,\n            createFunctionalRgbColorParser('int'),\n            createFunctionalRgbaColorParser('int'),\n            createHslColorParser('int'),\n            createHslaColorParser('int'),\n            createObjectRgbColorParser('int'),\n            createObjectRgbaColorParser('int'),\n        ],\n        float: [\n            createFunctionalRgbColorParser('float'),\n            createFunctionalRgbaColorParser('float'),\n            createHslColorParser('float'),\n            createHslaColorParser('float'),\n            createObjectRgbColorParser('float'),\n            createObjectRgbaColorParser('float'),\n        ],\n    };\n    function createColorStringBindingReader(type) {\n        const parsers = TYPE_TO_PARSERS[type];\n        return (value) => {\n            if (typeof value !== 'string') {\n                return Color.black(type);\n            }\n            const result = parsers.reduce((prev, parser) => {\n                if (prev) {\n                    return prev;\n                }\n                return parser(value);\n            }, null);\n            return result !== null && result !== void 0 ? result : Color.black(type);\n        };\n    }\n    function createColorStringParser(type) {\n        const parsers = TYPE_TO_PARSERS[type];\n        return (value) => {\n            return parsers.reduce((prev, parser) => {\n                if (prev) {\n                    return prev;\n                }\n                return parser(value);\n            }, null);\n        };\n    }\n    function zerofill(comp) {\n        const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n        return hex.length === 1 ? `0${hex}` : hex;\n    }\n    function colorToHexRgbString(value, prefix = '#') {\n        const hexes = removeAlphaComponent(value.getComponents('rgb'))\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToHexRgbaString(value, prefix = '#') {\n        const rgbaComps = value.getComponents('rgb');\n        const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToFunctionalRgbString(value, opt_type) {\n        const formatter = createNumberFormatter(opt_type === 'float' ? 2 : 0);\n        const comps = removeAlphaComponent(value.getComponents('rgb', opt_type)).map((comp) => formatter(comp));\n        return `rgb(${comps.join(', ')})`;\n    }\n    function createFunctionalRgbColorFormatter(type) {\n        return (value) => {\n            return colorToFunctionalRgbString(value, type);\n        };\n    }\n    function colorToFunctionalRgbaString(value, opt_type) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(opt_type === 'float' ? 2 : 0);\n        const comps = value.getComponents('rgb', opt_type).map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return formatter(comp);\n        });\n        return `rgba(${comps.join(', ')})`;\n    }\n    function createFunctionalRgbaColorFormatter(type) {\n        return (value) => {\n            return colorToFunctionalRgbaString(value, type);\n        };\n    }\n    function colorToFunctionalHslString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n        ];\n        const comps = removeAlphaComponent(value.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n        return `hsl(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslaString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n            createNumberFormatter(2),\n        ];\n        const comps = value\n            .getComponents('hsl')\n            .map((comp, index) => formatters[index](comp));\n        return `hsla(${comps.join(', ')})`;\n    }\n    function colorToObjectRgbString(value, type) {\n        const formatter = createNumberFormatter(type === 'float' ? 2 : 0);\n        const names = ['r', 'g', 'b'];\n        const comps = removeAlphaComponent(value.getComponents('rgb', type)).map((comp, index) => `${names[index]}: ${formatter(comp)}`);\n        return `{${comps.join(', ')}}`;\n    }\n    function createObjectRgbColorFormatter(type) {\n        return (value) => colorToObjectRgbString(value, type);\n    }\n    function colorToObjectRgbaString(value, type) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(type === 'float' ? 2 : 0);\n        const names = ['r', 'g', 'b', 'a'];\n        const comps = value.getComponents('rgb', type).map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return `${names[index]}: ${formatter(comp)}`;\n        });\n        return `{${comps.join(', ')}}`;\n    }\n    function createObjectRgbaColorFormatter(type) {\n        return (value) => colorToObjectRgbaString(value, type);\n    }\n    const FORMAT_AND_STRINGIFIERS = [\n        {\n            format: {\n                alpha: false,\n                mode: 'rgb',\n                notation: 'hex',\n                type: 'int',\n            },\n            stringifier: colorToHexRgbString,\n        },\n        {\n            format: {\n                alpha: true,\n                mode: 'rgb',\n                notation: 'hex',\n                type: 'int',\n            },\n            stringifier: colorToHexRgbaString,\n        },\n        {\n            format: {\n                alpha: false,\n                mode: 'hsl',\n                notation: 'func',\n                type: 'int',\n            },\n            stringifier: colorToFunctionalHslString,\n        },\n        {\n            format: {\n                alpha: true,\n                mode: 'hsl',\n                notation: 'func',\n                type: 'int',\n            },\n            stringifier: colorToFunctionalHslaString,\n        },\n        ...['int', 'float'].reduce((prev, type) => {\n            return [\n                ...prev,\n                {\n                    format: {\n                        alpha: false,\n                        mode: 'rgb',\n                        notation: 'func',\n                        type: type,\n                    },\n                    stringifier: createFunctionalRgbColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: true,\n                        mode: 'rgb',\n                        notation: 'func',\n                        type: type,\n                    },\n                    stringifier: createFunctionalRgbaColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: false,\n                        mode: 'rgb',\n                        notation: 'object',\n                        type: type,\n                    },\n                    stringifier: createObjectRgbColorFormatter(type),\n                },\n                {\n                    format: {\n                        alpha: true,\n                        mode: 'rgb',\n                        notation: 'object',\n                        type: type,\n                    },\n                    stringifier: createObjectRgbaColorFormatter(type),\n                },\n            ];\n        }, []),\n    ];\n    function findColorStringifier(format) {\n        return FORMAT_AND_STRINGIFIERS.reduce((prev, fas) => {\n            if (prev) {\n                return prev;\n            }\n            return equalsStringColorFormat(fas.format, format)\n                ? fas.stringifier\n                : null;\n        }, null);\n    }\n\n    const className$a = ClassName('apl');\n    class APaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$a());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const barElem = doc.createElement('div');\n            barElem.classList.add(className$a('b'));\n            this.element.appendChild(barElem);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$a('c'));\n            barElem.appendChild(colorElem);\n            this.colorElem_ = colorElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$a('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            const previewElem = doc.createElement('div');\n            previewElem.classList.add(className$a('p'));\n            this.markerElem_.appendChild(previewElem);\n            this.previewElem_ = previewElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const rgbaComps = c.getComponents('rgb');\n            const leftColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n            const rightColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n            const gradientComps = [\n                'to right',\n                colorToFunctionalRgbaString(leftColor),\n                colorToFunctionalRgbaString(rightColor),\n            ];\n            this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\n            this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n            const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class APaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new APaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const alpha = d.point.x / d.bounds.width;\n            const c = this.value.rawValue;\n            const [h, s, v] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, alpha], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, a + step], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$9 = ClassName('coltxt');\n    function createModeSelectElement(doc) {\n        const selectElem = doc.createElement('select');\n        const items = [\n            { text: 'RGB', value: 'rgb' },\n            { text: 'HSL', value: 'hsl' },\n            { text: 'HSV', value: 'hsv' },\n        ];\n        selectElem.appendChild(items.reduce((frag, item) => {\n            const optElem = doc.createElement('option');\n            optElem.textContent = item.text;\n            optElem.value = item.value;\n            frag.appendChild(optElem);\n            return frag;\n        }, doc.createDocumentFragment()));\n        return selectElem;\n    }\n    class ColorTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$9());\n            config.viewProps.bindClassModifiers(this.element);\n            const modeElem = doc.createElement('div');\n            modeElem.classList.add(className$9('m'));\n            this.modeElem_ = createModeSelectElement(doc);\n            this.modeElem_.classList.add(className$9('ms'));\n            modeElem.appendChild(this.modeSelectElement);\n            config.viewProps.bindDisabled(this.modeElem_);\n            const modeMarkerElem = doc.createElement('div');\n            modeMarkerElem.classList.add(className$9('mm'));\n            modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            modeElem.appendChild(modeMarkerElem);\n            this.element.appendChild(modeElem);\n            const textsElem = doc.createElement('div');\n            textsElem.classList.add(className$9('w'));\n            this.element.appendChild(textsElem);\n            this.textsElem_ = textsElem;\n            this.textViews_ = config.textViews;\n            this.applyTextViews_();\n            bindValue(config.colorMode, (mode) => {\n                this.modeElem_.value = mode;\n            });\n        }\n        get modeSelectElement() {\n            return this.modeElem_;\n        }\n        get textViews() {\n            return this.textViews_;\n        }\n        set textViews(textViews) {\n            this.textViews_ = textViews;\n            this.applyTextViews_();\n        }\n        applyTextViews_() {\n            removeChildElements(this.textsElem_);\n            const doc = this.element.ownerDocument;\n            this.textViews_.forEach((v) => {\n                const compElem = doc.createElement('div');\n                compElem.classList.add(className$9('c'));\n                compElem.appendChild(v.element);\n                this.textsElem_.appendChild(compElem);\n            });\n        }\n    }\n\n    function createFormatter$2(type) {\n        return createNumberFormatter(type === 'float' ? 2 : 0);\n    }\n    function createConstraint$5(mode, type, index) {\n        const max = getColorMaxComponents(mode, type)[index];\n        return new DefiniteRangeConstraint({\n            min: 0,\n            max: max,\n        });\n    }\n    function createComponentController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\n            baseStep: getBaseStepForColor(false),\n            parser: config.parser,\n            props: ValueMap.fromObject({\n                draggingScale: config.colorType === 'float' ? 0.01 : 1,\n                formatter: createFormatter$2(config.colorType),\n            }),\n            value: createValue(0, {\n                constraint: createConstraint$5(config.colorMode, config.colorType, index),\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class ColorTextController {\n        constructor(doc, config) {\n            this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n            this.colorType_ = config.colorType;\n            this.parser_ = config.parser;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.colorMode = createValue(this.value.rawValue.mode);\n            this.ccs_ = this.createComponentControllers_(doc);\n            this.view = new ColorTextView(doc, {\n                colorMode: this.colorMode,\n                textViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\n                viewProps: this.viewProps,\n            });\n            this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n        }\n        createComponentControllers_(doc) {\n            const cc = {\n                colorMode: this.colorMode.rawValue,\n                colorType: this.colorType_,\n                parser: this.parser_,\n                viewProps: this.viewProps,\n            };\n            const ccs = [\n                createComponentController(doc, cc, 0),\n                createComponentController(doc, cc, 1),\n                createComponentController(doc, cc, 2),\n            ];\n            ccs.forEach((cs, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: cs.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents(this.colorMode.rawValue, this.colorType_)[index];\n                    },\n                    backward: (p, s) => {\n                        const pickedMode = this.colorMode.rawValue;\n                        const comps = p.rawValue.getComponents(pickedMode, this.colorType_);\n                        comps[index] = s.rawValue;\n                        return new Color(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode, this.colorType_);\n                    },\n                });\n            });\n            return ccs;\n        }\n        onModeSelectChange_(ev) {\n            const selectElem = ev.currentTarget;\n            this.colorMode.rawValue = selectElem.value;\n            this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n            this.view.textViews = [\n                this.ccs_[0].view,\n                this.ccs_[1].view,\n                this.ccs_[2].view,\n            ];\n        }\n    }\n\n    const className$8 = ClassName('hpl');\n    class HPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$8());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$8('c'));\n            this.element.appendChild(colorElem);\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$8('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const [h] = c.getComponents('hsv');\n            this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new Color([h, 100, 100], 'hsv'));\n            const left = mapRange(h, 0, 360, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class HPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new HPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const hue = mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, 0, 360);\n            const c = this.value.rawValue;\n            const [, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([hue, s, v, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h + step, s, v, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$7 = ClassName('svp');\n    const CANVAS_RESOL = 64;\n    class SvPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$7());\n            config.viewProps.bindClassModifiers(this.element);\n            config.viewProps.bindTabIndex(this.element);\n            const canvasElem = doc.createElement('canvas');\n            canvasElem.height = CANVAS_RESOL;\n            canvasElem.width = CANVAS_RESOL;\n            canvasElem.classList.add(className$7('c'));\n            this.element.appendChild(canvasElem);\n            this.canvasElement = canvasElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$7('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const ctx = getCanvasContext(this.canvasElement);\n            if (!ctx) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const hsvComps = c.getComponents('hsv');\n            const width = this.canvasElement.width;\n            const height = this.canvasElement.height;\n            const imgData = ctx.getImageData(0, 0, width, height);\n            const data = imgData.data;\n            for (let iy = 0; iy < height; iy++) {\n                for (let ix = 0; ix < width; ix++) {\n                    const s = mapRange(ix, 0, width, 0, 100);\n                    const v = mapRange(iy, 0, height, 100, 0);\n                    const rgbComps = hsvToRgbInt(hsvComps[0], s, v);\n                    const i = (iy * width + ix) * 4;\n                    data[i] = rgbComps[0];\n                    data[i + 1] = rgbComps[1];\n                    data[i + 2] = rgbComps[2];\n                    data[i + 3] = 255;\n                }\n            }\n            ctx.putImageData(imgData, 0, 0);\n            const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n            const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n            this.markerElem_.style.top = `${top}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class SvPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SvPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n            const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n            const [h, , , a] = this.value.rawValue.getComponents('hsv');\n            this.value.setRawValue(new Color([h, saturation, value, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(new Color([h, s + ds, v + dv, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class ColorPickerController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.hPaletteC_ = new HPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.svPaletteC_ = new SvPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.alphaIcs_ = config.supportsAlpha\n                ? {\n                    palette: new APaletteController(doc, {\n                        value: this.value,\n                        viewProps: this.viewProps,\n                    }),\n                    text: new NumberTextController(doc, {\n                        parser: parseNumber,\n                        baseStep: 0.1,\n                        props: ValueMap.fromObject({\n                            draggingScale: 0.01,\n                            formatter: createNumberFormatter(2),\n                        }),\n                        value: createValue(0, {\n                            constraint: new DefiniteRangeConstraint({ min: 0, max: 1 }),\n                        }),\n                        viewProps: this.viewProps,\n                    }),\n                }\n                : null;\n            if (this.alphaIcs_) {\n                connectValues({\n                    primary: this.value,\n                    secondary: this.alphaIcs_.text.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents()[3];\n                    },\n                    backward: (p, s) => {\n                        const comps = p.rawValue.getComponents();\n                        comps[3] = s.rawValue;\n                        return new Color(comps, p.rawValue.mode);\n                    },\n                });\n            }\n            this.textC_ = new ColorTextController(doc, {\n                colorType: config.colorType,\n                parser: parseNumber,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorPickerView(doc, {\n                alphaViews: this.alphaIcs_\n                    ? {\n                        palette: this.alphaIcs_.palette.view,\n                        text: this.alphaIcs_.text.view,\n                    }\n                    : null,\n                hPaletteView: this.hPaletteC_.view,\n                supportsAlpha: config.supportsAlpha,\n                svPaletteView: this.svPaletteC_.view,\n                textView: this.textC_.view,\n                viewProps: this.viewProps,\n            });\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    const className$6 = ClassName('colsw');\n    class ColorSwatchView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$6());\n            config.viewProps.bindClassModifiers(this.element);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$6('sw'));\n            this.element.appendChild(swatchElem);\n            this.swatchElem_ = swatchElem;\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$6('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            this.update_();\n        }\n        update_() {\n            const value = this.value.rawValue;\n            this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ColorSwatchController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ColorSwatchView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    class ColorController {\n        constructor(doc, config) {\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.swatchC_ = new ColorSwatchController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            const buttonElem = this.swatchC_.view.buttonElement;\n            buttonElem.addEventListener('blur', this.onButtonBlur_);\n            buttonElem.addEventListener('click', this.onButtonClick_);\n            this.textC_ = new TextController(doc, {\n                parser: config.parser,\n                props: ValueMap.fromObject({\n                    formatter: config.formatter,\n                }),\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorView(doc, {\n                foldable: this.foldable_,\n                pickerLayout: config.pickerLayout,\n            });\n            this.view.swatchElement.appendChild(this.swatchC_.view.element);\n            this.view.textElement.appendChild(this.textC_.view.element);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const pickerC = new ColorPickerController(doc, {\n                colorType: config.colorType,\n                supportsAlpha: config.supportsAlpha,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            pickerC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = pickerC;\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(pickerC.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        get textController() {\n            return this.textC_;\n        }\n        onButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.swatchC_.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.swatchC_.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function colorFromObject(value, opt_type) {\n        if (Color.isColorObject(value)) {\n            return Color.fromObject(value, opt_type);\n        }\n        return Color.black(opt_type);\n    }\n    function colorToRgbNumber(value) {\n        return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp) => {\n            return (result << 8) | (Math.floor(comp) & 0xff);\n        }, 0);\n    }\n    function colorToRgbaNumber(value) {\n        return (value.getComponents('rgb').reduce((result, comp, index) => {\n            const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n            return (result << 8) | hex;\n        }, 0) >>> 0);\n    }\n    function numberToRgbColor(num) {\n        return new Color([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\n    }\n    function numberToRgbaColor(num) {\n        return new Color([\n            (num >> 24) & 0xff,\n            (num >> 16) & 0xff,\n            (num >> 8) & 0xff,\n            mapRange(num & 0xff, 0, 255, 0, 1),\n        ], 'rgb');\n    }\n    function colorFromRgbNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbColor(value);\n    }\n    function colorFromRgbaNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbaColor(value);\n    }\n\n    function createColorStringWriter(format) {\n        const stringify = findColorStringifier(format);\n        return stringify\n            ? (target, value) => {\n                writePrimitive(target, stringify(value));\n            }\n            : null;\n    }\n    function createColorNumberWriter(supportsAlpha) {\n        const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n        return (target, value) => {\n            writePrimitive(target, colorToNumber(value));\n        };\n    }\n    function writeRgbaColorObject(target, value, opt_type) {\n        const obj = value.toRgbaObject(opt_type);\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n        target.writeProperty('a', obj.a);\n    }\n    function writeRgbColorObject(target, value, opt_type) {\n        const obj = value.toRgbaObject(opt_type);\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n    }\n    function createColorObjectWriter(supportsAlpha, opt_type) {\n        return (target, inValue) => {\n            if (supportsAlpha) {\n                writeRgbaColorObject(target, inValue, opt_type);\n            }\n            else {\n                writeRgbColorObject(target, inValue, opt_type);\n            }\n        };\n    }\n\n    function shouldSupportAlpha$1(inputParams) {\n        var _a;\n        if ((inputParams === null || inputParams === void 0 ? void 0 : inputParams.alpha) || ((_a = inputParams === null || inputParams === void 0 ? void 0 : inputParams.color) === null || _a === void 0 ? void 0 : _a.alpha)) {\n            return true;\n        }\n        return false;\n    }\n    function createFormatter$1(supportsAlpha) {\n        return supportsAlpha\n            ? (v) => colorToHexRgbaString(v, '0x')\n            : (v) => colorToHexRgbString(v, '0x');\n    }\n    function isForColor(params) {\n        if ('color' in params) {\n            return true;\n        }\n        if ('view' in params && params.view === 'color') {\n            return true;\n        }\n        return false;\n    }\n    const NumberColorInputPlugin = {\n        id: 'input-color-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            if (!isForColor(params)) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => {\n                return shouldSupportAlpha$1(args.params)\n                    ? colorFromRgbaNumber\n                    : colorFromRgbNumber;\n            },\n            equals: Color.equals,\n            writer: (args) => {\n                return createColorNumberWriter(shouldSupportAlpha$1(args.params));\n            },\n        },\n        controller: (args) => {\n            const supportsAlpha = shouldSupportAlpha$1(args.params);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                colorType: 'int',\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createFormatter$1(supportsAlpha),\n                parser: createColorStringParser('int'),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function shouldSupportAlpha(initialValue) {\n        return Color.isRgbaColorObject(initialValue);\n    }\n    function createColorObjectReader(opt_type) {\n        return (value) => {\n            return colorFromObject(value, opt_type);\n        };\n    }\n    function createColorObjectFormatter(supportsAlpha, type) {\n        return (value) => {\n            if (supportsAlpha) {\n                return colorToObjectRgbaString(value, type);\n            }\n            return colorToObjectRgbString(value, type);\n        };\n    }\n    const ObjectColorInputPlugin = {\n        id: 'input-color-object',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Color.isColorObject(value)) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => createColorObjectReader(extractColorType(args.params)),\n            equals: Color.equals,\n            writer: (args) => createColorObjectWriter(shouldSupportAlpha(args.initialValue), extractColorType(args.params)),\n        },\n        controller: (args) => {\n            var _a;\n            const supportsAlpha = Color.isRgbaColorObject(args.initialValue);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            const type = (_a = extractColorType(args.params)) !== null && _a !== void 0 ? _a : 'int';\n            return new ColorController(args.document, {\n                colorType: type,\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createColorObjectFormatter(supportsAlpha, type),\n                parser: createColorStringParser(type),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const StringColorInputPlugin = {\n        id: 'input-color-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            if ('view' in params && params.view === 'text') {\n                return null;\n            }\n            const format = detectStringColorFormat(value, extractColorType(params));\n            if (!format) {\n                return null;\n            }\n            const stringifier = findColorStringifier(format);\n            if (!stringifier) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => { var _a; return createColorStringBindingReader((_a = extractColorType(args.params)) !== null && _a !== void 0 ? _a : 'int'); },\n            equals: Color.equals,\n            writer: (args) => {\n                const format = detectStringColorFormat(args.initialValue, extractColorType(args.params));\n                if (!format) {\n                    throw TpError.shouldNeverHappen();\n                }\n                const writer = createColorStringWriter(format);\n                if (!writer) {\n                    throw TpError.notBindable();\n                }\n                return writer;\n            },\n        },\n        controller: (args) => {\n            const format = detectStringColorFormat(args.initialValue, extractColorType(args.params));\n            if (!format) {\n                throw TpError.shouldNeverHappen();\n            }\n            const stringifier = findColorStringifier(format);\n            if (!stringifier) {\n                throw TpError.shouldNeverHappen();\n            }\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                colorType: format.type,\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: stringifier,\n                parser: createColorStringParser(format.type),\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: format.alpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class PointNdConstraint {\n        constructor(config) {\n            this.components = config.components;\n            this.asm_ = config.assembly;\n        }\n        constrain(value) {\n            const comps = this.asm_\n                .toComponents(value)\n                .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n            return this.asm_.fromComponents(comps);\n        }\n    }\n\n    const className$5 = ClassName('pndtxt');\n    class PointNdTextView {\n        constructor(doc, config) {\n            this.textViews = config.textViews;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$5());\n            this.textViews.forEach((v) => {\n                const axisElem = doc.createElement('div');\n                axisElem.classList.add(className$5('a'));\n                axisElem.appendChild(v.element);\n                this.element.appendChild(axisElem);\n            });\n        }\n    }\n\n    function createAxisController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n            baseStep: config.axes[index].baseStep,\n            parser: config.parser,\n            props: config.axes[index].textProps,\n            value: createValue(0, {\n                constraint: config.axes[index].constraint,\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class PointNdTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n            this.acs_.forEach((c, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: c.value,\n                    forward: (p) => {\n                        return config.assembly.toComponents(p.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const comps = config.assembly.toComponents(p.rawValue);\n                        comps[index] = s.rawValue;\n                        return config.assembly.fromComponents(comps);\n                    },\n                });\n            });\n            this.view = new PointNdTextView(doc, {\n                textViews: this.acs_.map((ac) => ac.view),\n            });\n        }\n    }\n\n    function createStepConstraint(params, initialValue) {\n        if ('step' in params && !isEmpty(params.step)) {\n            return new StepConstraint(params.step, initialValue);\n        }\n        return null;\n    }\n    function createRangeConstraint(params) {\n        if (!isEmpty(params.max) && !isEmpty(params.min)) {\n            return new DefiniteRangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            return new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        return null;\n    }\n    function findNumberRange(c) {\n        const drc = findConstraint(c, DefiniteRangeConstraint);\n        if (drc) {\n            return [drc.values.get('min'), drc.values.get('max')];\n        }\n        const rc = findConstraint(c, RangeConstraint);\n        if (rc) {\n            return [rc.minValue, rc.maxValue];\n        }\n        return [undefined, undefined];\n    }\n    function createConstraint$4(params,\n    initialValue) {\n        const constraints = [];\n        const sc = createStepConstraint(params, initialValue);\n        if (sc) {\n            constraints.push(sc);\n        }\n        const rc = createRangeConstraint(params);\n        if (rc) {\n            constraints.push(rc);\n        }\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const NumberInputPlugin = {\n        id: 'input-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                max: p.optional.number,\n                min: p.optional.number,\n                options: p.optional.custom(parseListOptions),\n                step: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => numberFromUnknown,\n            constraint: (args) => createConstraint$4(args.params, args.initialValue),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const value = args.value;\n            const c = args.constraint;\n            const lc = c && findConstraint(c, ListConstraint);\n            if (lc) {\n                return new ListController(args.document, {\n                    props: new ValueMap({\n                        options: lc.values.value('options'),\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            const formatter = (_a = ('format' in args.params ? args.params.format : undefined)) !== null && _a !== void 0 ? _a : createNumberFormatter(getSuitableDecimalDigits(c, value.rawValue));\n            const drc = c && findConstraint(c, DefiniteRangeConstraint);\n            if (drc) {\n                return new SliderTextController(args.document, {\n                    baseStep: getBaseStep(c),\n                    parser: parseNumber,\n                    sliderProps: new ValueMap({\n                        maxValue: drc.values.value('max'),\n                        minValue: drc.values.value('min'),\n                    }),\n                    textProps: ValueMap.fromObject({\n                        draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                        formatter: formatter,\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new NumberTextController(args.document, {\n                baseStep: getBaseStep(c),\n                parser: parseNumber,\n                props: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                    formatter: formatter,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point2d {\n        constructor(x = 0, y = 0) {\n            this.x = x;\n            this.y = y;\n        }\n        getComponents() {\n            return [this.x, this.y];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            if (typeof x !== 'number' || typeof y !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n            };\n        }\n    }\n    const Point2dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point2d(...comps),\n    };\n\n    const className$4 = ClassName('p2d');\n    class Point2dView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$4());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.expanded, valueToClassName(this.element, className$4(undefined, 'expanded')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$4('h'));\n            this.element.appendChild(headElem);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$4('b'));\n            buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n            config.viewProps.bindDisabled(buttonElem);\n            headElem.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$4('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$4('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    const className$3 = ClassName('p2dp');\n    class Point2dPickerView {\n        constructor(doc, config) {\n            this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.invertsY_ = config.invertsY;\n            this.maxValue_ = config.maxValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$3());\n            if (config.layout === 'popup') {\n                this.element.classList.add(className$3(undefined, 'p'));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const padElem = doc.createElement('div');\n            padElem.classList.add(className$3('p'));\n            config.viewProps.bindTabIndex(padElem);\n            this.element.appendChild(padElem);\n            this.padElement = padElem;\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$3('g'));\n            this.padElement.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const xAxisElem = doc.createElementNS(SVG_NS, 'line');\n            xAxisElem.classList.add(className$3('ax'));\n            xAxisElem.setAttributeNS(null, 'x1', '0');\n            xAxisElem.setAttributeNS(null, 'y1', '50%');\n            xAxisElem.setAttributeNS(null, 'x2', '100%');\n            xAxisElem.setAttributeNS(null, 'y2', '50%');\n            this.svgElem_.appendChild(xAxisElem);\n            const yAxisElem = doc.createElementNS(SVG_NS, 'line');\n            yAxisElem.classList.add(className$3('ax'));\n            yAxisElem.setAttributeNS(null, 'x1', '50%');\n            yAxisElem.setAttributeNS(null, 'y1', '0');\n            yAxisElem.setAttributeNS(null, 'x2', '50%');\n            yAxisElem.setAttributeNS(null, 'y2', '100%');\n            this.svgElem_.appendChild(yAxisElem);\n            const lineElem = doc.createElementNS(SVG_NS, 'line');\n            lineElem.classList.add(className$3('l'));\n            lineElem.setAttributeNS(null, 'x1', '50%');\n            lineElem.setAttributeNS(null, 'y1', '50%');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$3('m'));\n            this.padElement.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        get allFocusableElements() {\n            return [this.padElement];\n        }\n        update_() {\n            const [x, y] = this.value.rawValue.getComponents();\n            const max = this.maxValue_;\n            const px = mapRange(x, -max, +max, 0, 100);\n            const py = mapRange(y, -max, +max, 0, 100);\n            const ipy = this.invertsY_ ? 100 - py : py;\n            this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\n            this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\n            this.markerElem_.style.left = `${px}%`;\n            this.markerElem_.style.top = `${ipy}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n        onFoldableChange_() {\n            this.update_();\n        }\n    }\n\n    function computeOffset(ev, baseSteps, invertsY) {\n        return [\n            getStepForKey(baseSteps[0], getHorizontalStepKeys(ev)),\n            getStepForKey(baseSteps[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1),\n        ];\n    }\n    class Point2dPickerController {\n        constructor(doc, config) {\n            this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n            this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.baseSteps_ = config.baseSteps;\n            this.maxValue_ = config.maxValue;\n            this.invertsY_ = config.invertsY;\n            this.view = new Point2dPickerView(doc, {\n                invertsY: this.invertsY_,\n                layout: config.layout,\n                maxValue: this.maxValue_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.padElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n            this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const max = this.maxValue_;\n            const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n            const py = mapRange(this.invertsY_ ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n            this.value.setRawValue(new Point2d(px, py), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPadKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPadKeyUp_(ev) {\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class Point2dController {\n        constructor(doc, config) {\n            var _a, _b;\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n            this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const padC = new Point2dPickerController(doc, {\n                baseSteps: [config.axes[0].baseStep, config.axes[1].baseStep],\n                invertsY: config.invertsY,\n                layout: config.pickerLayout,\n                maxValue: config.maxValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            padC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = padC;\n            this.textC_ = new PointNdTextController(doc, {\n                assembly: Point2dAssembly,\n                axes: config.axes,\n                parser: config.parser,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new Point2dView(doc, {\n                expanded: this.foldable_.value('expanded'),\n                pickerLayout: config.pickerLayout,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.textC_.view.element);\n            (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\n            (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(this.pickerC_.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        onPadButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onPadButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    class Point3d {\n        constructor(x = 0, y = 0, z = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n            };\n        }\n    }\n    const Point3dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point3d(...comps),\n    };\n\n    function point3dFromUnknown(value) {\n        return Point3d.isObject(value)\n            ? new Point3d(value.x, value.y, value.z)\n            : new Point3d();\n    }\n    function writePoint3d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n    }\n\n    function createConstraint$3(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point3dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y),\n                createDimensionConstraint('z' in params ? params.z : undefined, initialValue.z),\n            ],\n        });\n    }\n    function createAxis$2(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point3dInputPlugin = {\n        id: 'input-point3d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point3d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point3dFromUnknown,\n            constraint: (args) => createConstraint$3(args.params, args.initialValue),\n            equals: Point3d.equals,\n            writer: (_args) => writePoint3d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point3dAssembly,\n                axes: [\n                    createAxis$2(value.rawValue.x, c.components[0]),\n                    createAxis$2(value.rawValue.y, c.components[1]),\n                    createAxis$2(value.rawValue.z, c.components[2]),\n                ],\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point4d {\n        constructor(x = 0, y = 0, z = 0, w = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n            this.w = w;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z, this.w];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            const w = obj.w;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number' ||\n                typeof w !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n                w: this.w,\n            };\n        }\n    }\n    const Point4dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point4d(...comps),\n    };\n\n    function point4dFromUnknown(value) {\n        return Point4d.isObject(value)\n            ? new Point4d(value.x, value.y, value.z, value.w)\n            : new Point4d();\n    }\n    function writePoint4d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n        target.writeProperty('w', value.w);\n    }\n\n    function createConstraint$2(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point4dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y),\n                createDimensionConstraint('z' in params ? params.z : undefined, initialValue.z),\n                createDimensionConstraint('w' in params ? params.w : undefined, initialValue.w),\n            ],\n        });\n    }\n    function createAxis$1(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point4dInputPlugin = {\n        id: 'input-point4d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point4d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n                w: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point4dFromUnknown,\n            constraint: (args) => createConstraint$2(args.params, args.initialValue),\n            equals: Point4d.equals,\n            writer: (_args) => writePoint4d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point4dAssembly,\n                axes: value.rawValue\n                    .getComponents()\n                    .map((comp, index) => createAxis$1(comp, c.components[index])),\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function createConstraint$1(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const StringInputPlugin = {\n        id: 'input-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n            constraint: (args) => createConstraint$1(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            const lc = c && findConstraint(c, ListConstraint);\n            if (lc) {\n                return new ListController(doc, {\n                    props: new ValueMap({\n                        options: lc.values.value('options'),\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new TextController(doc, {\n                parser: (v) => v,\n                props: ValueMap.fromObject({\n                    formatter: formatString,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3,\n        },\n    };\n\n    const className$2 = ClassName('mll');\n    class MultiLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$2());\n            config.viewProps.bindClassModifiers(this.element);\n            const textareaElem = doc.createElement('textarea');\n            textareaElem.classList.add(className$2('i'));\n            textareaElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            textareaElem.readOnly = true;\n            config.viewProps.bindDisabled(textareaElem);\n            this.element.appendChild(textareaElem);\n            this.textareaElem_ = textareaElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const elem = this.textareaElem_;\n            const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n            const lines = [];\n            this.value.rawValue.forEach((value) => {\n                if (value !== undefined) {\n                    lines.push(this.formatter_(value));\n                }\n            });\n            elem.textContent = lines.join('\\n');\n            if (shouldScroll) {\n                elem.scrollTop = elem.scrollHeight;\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class MultiLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new MultiLogView(doc, {\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$1 = ClassName('sgl');\n    class SingleLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$1());\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$1('i'));\n            inputElem.readOnly = true;\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const values = this.value.rawValue;\n            const lastValue = values[values.length - 1];\n            this.inputElement.value =\n                lastValue !== undefined ? this.formatter_(lastValue) : '';\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class SingleLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SingleLogView(doc, {\n                formatter: config.formatter,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const BooleanMonitorPlugin = {\n        id: 'monitor-bool',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            if (args.value.rawValue.length === 1) {\n                return new SingleLogController(args.document, {\n                    formatter: BooleanFormatter,\n                    value: args.value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new MultiLogController(args.document, {\n                formatter: BooleanFormatter,\n                lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const className = ClassName('grl');\n    class GraphLogView {\n        constructor(doc, config) {\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n            this.formatter_ = config.formatter;\n            this.props_ = config.props;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on('change', this.onCursorChange_);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className('g'));\n            svgElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(className('t'), ClassName('tt')());\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        get graphElement() {\n            return this.svgElem_;\n        }\n        update_() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const maxIndex = this.value.rawValue.length - 1;\n            const min = this.props_.get('minValue');\n            const max = this.props_.get('maxValue');\n            const points = [];\n            this.value.rawValue.forEach((v, index) => {\n                if (v === undefined) {\n                    return;\n                }\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                const y = mapRange(v, min, max, bounds.height, 0);\n                points.push([x, y].join(','));\n            });\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const tooltipElem = this.tooltipElem_;\n            const value = this.value.rawValue[this.cursor_.rawValue];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className('t', 'a'));\n                return;\n            }\n            const tx = mapRange(this.cursor_.rawValue, 0, maxIndex, 0, bounds.width);\n            const ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = `${tx}px`;\n            tooltipElem.style.top = `${ty}px`;\n            tooltipElem.textContent = `${this.formatter_(value)}`;\n            if (!tooltipElem.classList.contains(className('t', 'a'))) {\n                tooltipElem.classList.add(className('t', 'a'), className('t', 'in'));\n                forceReflow(tooltipElem);\n                tooltipElem.classList.remove(className('t', 'in'));\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n        onCursorChange_() {\n            this.update_();\n        }\n    }\n\n    class GraphLogController {\n        constructor(doc, config) {\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n            this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n            this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n            this.props_ = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.cursor_ = createValue(-1);\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                props: this.props_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            if (!supportsTouch(doc)) {\n                this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n                this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n            }\n            else {\n                const ph = new PointerHandler(this.view.element);\n                ph.emitter.on('down', this.onGraphPointerDown_);\n                ph.emitter.on('move', this.onGraphPointerMove_);\n                ph.emitter.on('up', this.onGraphPointerUp_);\n            }\n        }\n        onGraphMouseLeave_() {\n            this.cursor_.rawValue = -1;\n        }\n        onGraphMouseMove_(ev) {\n            const bounds = this.view.element.getBoundingClientRect();\n            this.cursor_.rawValue = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerDown_(ev) {\n            this.onGraphPointerMove_(ev);\n        }\n        onGraphPointerMove_(ev) {\n            if (!ev.data.point) {\n                this.cursor_.rawValue = -1;\n                return;\n            }\n            this.cursor_.rawValue = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerUp_() {\n            this.cursor_.rawValue = -1;\n        }\n    }\n\n    function createFormatter(params) {\n        return 'format' in params && !isEmpty(params.format)\n            ? params.format\n            : createNumberFormatter(2);\n    }\n    function createTextMonitor(args) {\n        var _a;\n        if (args.value.rawValue.length === 1) {\n            return new SingleLogController(args.document, {\n                formatter: createFormatter(args.params),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new MultiLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function createGraphMonitor(args) {\n        var _a, _b, _c;\n        return new GraphLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            props: ValueMap.fromObject({\n                maxValue: (_b = ('max' in args.params ? args.params.max : null)) !== null && _b !== void 0 ? _b : 100,\n                minValue: (_c = ('min' in args.params ? args.params.min : null)) !== null && _c !== void 0 ? _c : 0,\n            }),\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function shouldShowGraph(params) {\n        return 'view' in params && params.view === 'graph';\n    }\n    const NumberMonitorPlugin = {\n        id: 'monitor-number',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                lineCount: p.optional.number,\n                max: p.optional.number,\n                min: p.optional.number,\n                view: p.optional.string,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            defaultBufferSize: (params) => (shouldShowGraph(params) ? 64 : 1),\n            reader: (_args) => numberFromUnknown,\n        },\n        controller: (args) => {\n            if (shouldShowGraph(args.params)) {\n                return createGraphMonitor(args);\n            }\n            return createTextMonitor(args);\n        },\n    };\n\n    const StringMonitorPlugin = {\n        id: 'monitor-string',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n                multiline: p.optional.boolean,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            const value = args.value;\n            const multiline = value.rawValue.length > 1 ||\n                ('multiline' in args.params && args.params.multiline);\n            if (multiline) {\n                return new MultiLogController(args.document, {\n                    formatter: formatString,\n                    lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new SingleLogController(args.document, {\n                formatter: formatString,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function createInputBindingController(plugin, args) {\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const p = ParamsParsers;\n        const valueArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(valueArgs);\n        const constraint = plugin.binding.constraint\n            ? plugin.binding.constraint(valueArgs)\n            : undefined;\n        const value = createValue(reader(result.initialValue), {\n            constraint: constraint,\n            equals: plugin.binding.equals,\n        });\n        const binding = new InputBinding({\n            reader: reader,\n            target: args.target,\n            value: value,\n            writer: plugin.binding.writer(valueArgs),\n        });\n        const disabled = p.optional.boolean(args.params.disabled).value;\n        const hidden = p.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            constraint: constraint,\n            document: args.document,\n            initialValue: result.initialValue,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = p.optional.string(args.params.label).value;\n        return new InputBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label !== null && label !== void 0 ? label : args.target.key,\n            }),\n            valueController: controller,\n        });\n    }\n\n    function createTicker(document, interval) {\n        return interval === 0\n            ? new ManualTicker()\n            : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    function createMonitorBindingController(plugin, args) {\n        var _a, _b, _c;\n        const P = ParamsParsers;\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const bindingArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(bindingArgs);\n        const bufferSize = (_b = (_a = P.optional.number(args.params.bufferSize).value) !== null && _a !== void 0 ? _a : (plugin.binding.defaultBufferSize &&\n            plugin.binding.defaultBufferSize(result.params))) !== null && _b !== void 0 ? _b : 1;\n        const interval = P.optional.number(args.params.interval).value;\n        const binding = new MonitorBinding({\n            reader: reader,\n            target: args.target,\n            ticker: createTicker(args.document, interval),\n            value: initializeBuffer(bufferSize),\n        });\n        const disabled = P.optional.boolean(args.params.disabled).value;\n        const hidden = P.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            document: args.document,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = (_c = P.optional.string(args.params.label).value) !== null && _c !== void 0 ? _c : args.target.key;\n        return new MonitorBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class PluginPool {\n        constructor() {\n            this.pluginsMap_ = {\n                blades: [],\n                inputs: [],\n                monitors: [],\n            };\n        }\n        getAll() {\n            return [\n                ...this.pluginsMap_.blades,\n                ...this.pluginsMap_.inputs,\n                ...this.pluginsMap_.monitors,\n            ];\n        }\n        register(r) {\n            if (r.type === 'blade') {\n                this.pluginsMap_.blades.unshift(r);\n            }\n            else if (r.type === 'input') {\n                this.pluginsMap_.inputs.unshift(r);\n            }\n            else if (r.type === 'monitor') {\n                this.pluginsMap_.monitors.unshift(r);\n            }\n        }\n        createInput(document, target, params) {\n            const initialValue = target.read();\n            if (isEmpty(initialValue)) {\n                throw new TpError({\n                    context: {\n                        key: target.key,\n                    },\n                    type: 'nomatchingcontroller',\n                });\n            }\n            const bc = this.pluginsMap_.inputs.reduce((result, plugin) => result !== null && result !== void 0 ? result : createInputBindingController(plugin, {\n                document: document,\n                target: target,\n                params: params,\n            }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createMonitor(document, target, params) {\n            const bc = this.pluginsMap_.monitors.reduce((result, plugin) => result !== null && result !== void 0 ? result : createMonitorBindingController(plugin, {\n                document: document,\n                params: params,\n                target: target,\n            }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createBlade(document, params) {\n            const bc = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : createBladeController(plugin, {\n                document: document,\n                params: params,\n            }), null);\n            if (!bc) {\n                throw new TpError({\n                    type: 'nomatchingview',\n                    context: {\n                        params: params,\n                    },\n                });\n            }\n            return bc;\n        }\n        createBladeApi(bc) {\n            if (bc instanceof InputBindingController) {\n                return new InputBindingApi(bc);\n            }\n            if (bc instanceof MonitorBindingController) {\n                return new MonitorBindingApi(bc);\n            }\n            if (bc instanceof RackController) {\n                return new RackApi(bc, this);\n            }\n            const api = this.pluginsMap_.blades.reduce((result, plugin) => result !== null && result !== void 0 ? result : plugin.api({\n                controller: bc,\n                pool: this,\n            }), null);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n    }\n\n    function createDefaultPluginPool() {\n        const pool = new PluginPool();\n        [\n            Point2dInputPlugin,\n            Point3dInputPlugin,\n            Point4dInputPlugin,\n            StringInputPlugin,\n            NumberInputPlugin,\n            StringColorInputPlugin,\n            ObjectColorInputPlugin,\n            NumberColorInputPlugin,\n            BooleanInputPlugin,\n            BooleanMonitorPlugin,\n            StringMonitorPlugin,\n            NumberMonitorPlugin,\n            ButtonBladePlugin,\n            FolderBladePlugin,\n            SeparatorBladePlugin,\n            TabBladePlugin,\n        ].forEach((p) => {\n            pool.register(p);\n        });\n        return pool;\n    }\n\n    function point2dFromUnknown(value) {\n        return Point2d.isObject(value)\n            ? new Point2d(value.x, value.y)\n            : new Point2d();\n    }\n    function writePoint2d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n    }\n\n    function createDimensionConstraint(params, initialValue) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        const cs = createStepConstraint(params, initialValue);\n        if (cs) {\n            constraints.push(cs);\n        }\n        const rs = createRangeConstraint(params);\n        if (rs) {\n            constraints.push(rs);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint(params, initialValue) {\n        return new PointNdConstraint({\n            assembly: Point2dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined, initialValue.x),\n                createDimensionConstraint('y' in params ? params.y : undefined, initialValue.y),\n            ],\n        });\n    }\n    function getSuitableMaxDimensionValue(constraint, rawValue) {\n        const [min, max] = constraint ? findNumberRange(constraint) : [];\n        if (!isEmpty(min) || !isEmpty(max)) {\n            return Math.max(Math.abs(min !== null && min !== void 0 ? min : 0), Math.abs(max !== null && max !== void 0 ? max : 0));\n        }\n        const step = getBaseStep(constraint);\n        return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n    }\n    function getSuitableMaxValue(initialValue, constraint) {\n        const xc = constraint instanceof PointNdConstraint\n            ? constraint.components[0]\n            : undefined;\n        const yc = constraint instanceof PointNdConstraint\n            ? constraint.components[1]\n            : undefined;\n        const xr = getSuitableMaxDimensionValue(xc, initialValue.x);\n        const yr = getSuitableMaxDimensionValue(yc, initialValue.y);\n        return Math.max(xr, yr);\n    }\n    function createAxis(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    function shouldInvertY(params) {\n        if (!('y' in params)) {\n            return false;\n        }\n        const yParams = params.y;\n        if (!yParams) {\n            return false;\n        }\n        return 'inverted' in yParams ? !!yParams.inverted : false;\n    }\n    const Point2dInputPlugin = {\n        id: 'input-point2d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point2d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                expanded: p.optional.boolean,\n                picker: p.optional.custom(parsePickerLayout),\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.object({\n                    inverted: p.optional.boolean,\n                    max: p.optional.number,\n                    min: p.optional.number,\n                    step: p.optional.number,\n                }),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point2dFromUnknown,\n            constraint: (args) => createConstraint(args.params, args.initialValue),\n            equals: Point2d.equals,\n            writer: (_args) => writePoint2d,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new Point2dController(doc, {\n                axes: [\n                    createAxis(value.rawValue.x, c.components[0]),\n                    createAxis(value.rawValue.y, c.components[1]),\n                ],\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                invertsY: shouldInvertY(args.params),\n                maxValue: getSuitableMaxValue(value.rawValue, c),\n                parser: parseNumber,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class ListApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get options() {\n            return this.controller_.valueController.props.get('options');\n        }\n        set options(options) {\n            this.controller_.valueController.props.set('options', options);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class SliderApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get maxValue() {\n            return this.controller_.valueController.sliderController.props.get('maxValue');\n        }\n        set maxValue(maxValue) {\n            this.controller_.valueController.sliderController.props.set('maxValue', maxValue);\n        }\n        get minValue() {\n            return this.controller_.valueController.sliderController.props.get('minValue');\n        }\n        set minValue(minValue) {\n            this.controller_.valueController.sliderController.props.set('minValue', minValue);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class TextApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get formatter() {\n            return this.controller_.valueController.props.get('formatter');\n        }\n        set formatter(formatter) {\n            this.controller_.valueController.props.set('formatter', formatter);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    const ListBladePlugin = (function () {\n        return {\n            id: 'list',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    options: p.required.custom(parseListOptions),\n                    value: p.required.raw,\n                    view: p.required.constant('list'),\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                const lc = new ListConstraint(normalizeListOptions(args.params.options));\n                const value = createValue(args.params.value, {\n                    constraint: lc,\n                });\n                const ic = new ListController(args.document, {\n                    props: new ValueMap({\n                        options: lc.values.value('options'),\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof ListController)) {\n                    return null;\n                }\n                return new ListApi(args.controller);\n            },\n        };\n    })();\n\n    /**\n     * @hidden\n     */\n    function exportPresetJson(targets) {\n        return targets.reduce((result, target) => {\n            return Object.assign(result, {\n                [target.presetKey]: target.read(),\n            });\n        }, {});\n    }\n    /**\n     * @hidden\n     */\n    function importPresetJson(bindings, preset) {\n        bindings.forEach((binding) => {\n            const value = preset[binding.target.presetKey];\n            if (value !== undefined) {\n                binding.writer(binding.target, binding.reader(value));\n            }\n        });\n    }\n\n    class RootApi extends FolderApi {\n        /**\n         * @hidden\n         */\n        constructor(controller, pool) {\n            super(controller, pool);\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        /**\n         * Imports a preset of all inputs.\n         * @param preset The preset object to import.\n         */\n        importPreset(preset) {\n            const bindings = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding;\n            });\n            importPresetJson(bindings, preset);\n            this.refresh();\n        }\n        /**\n         * Exports a preset of all inputs.\n         * @return An exported preset object.\n         */\n        exportPreset() {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            return exportPresetJson(targets);\n        }\n        /**\n         * Refreshes all bindings of the pane.\n         */\n        refresh() {\n            // Force-read all input bindings\n            this.controller_.rackController.rack\n                .find(InputBindingController)\n                .forEach((ibc) => {\n                ibc.binding.read();\n            });\n            // Force-read all monitor bindings\n            this.controller_.rackController.rack\n                .find(MonitorBindingController)\n                .forEach((mbc) => {\n                mbc.binding.read();\n            });\n        }\n    }\n\n    class RootController extends FolderController {\n        constructor(doc, config) {\n            super(doc, {\n                expanded: config.expanded,\n                blade: config.blade,\n                props: config.props,\n                root: true,\n                viewProps: config.viewProps,\n            });\n        }\n    }\n\n    const SliderBladePlugin = {\n        id: 'slider',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                max: p.required.number,\n                min: p.required.number,\n                view: p.required.constant('slider'),\n                format: p.optional.function,\n                label: p.optional.string,\n                value: p.optional.number,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b;\n            const initialValue = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n            const drc = new DefiniteRangeConstraint({\n                max: args.params.max,\n                min: args.params.min,\n            });\n            const vc = new SliderTextController(args.document, {\n                baseStep: 1,\n                parser: parseNumber,\n                sliderProps: new ValueMap({\n                    maxValue: drc.values.value('max'),\n                    minValue: drc.values.value('min'),\n                }),\n                textProps: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(undefined, initialValue),\n                    formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString,\n                }),\n                value: createValue(initialValue, {\n                    constraint: drc,\n                }),\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: vc,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof SliderTextController)) {\n                return null;\n            }\n            return new SliderApi(args.controller);\n        },\n    };\n\n    const TextBladePlugin = (function () {\n        return {\n            id: 'text',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    parse: p.required.function,\n                    value: p.required.raw,\n                    view: p.required.constant('text'),\n                    format: p.optional.function,\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                var _a;\n                const ic = new TextController(args.document, {\n                    parser: args.params.parse,\n                    props: ValueMap.fromObject({\n                        formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : ((v) => String(v)),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof TextController)) {\n                    return null;\n                }\n                return new TextApi(args.controller);\n            },\n        };\n    })();\n\n    function createDefaultWrapperElement(doc) {\n        const elem = doc.createElement('div');\n        elem.classList.add(ClassName('dfw')());\n        if (doc.body) {\n            doc.body.appendChild(elem);\n        }\n        return elem;\n    }\n    function embedStyle(doc, id, css) {\n        if (doc.querySelector(`style[data-tp-style=${id}]`)) {\n            return;\n        }\n        const styleElem = doc.createElement('style');\n        styleElem.dataset.tpStyle = id;\n        styleElem.textContent = css;\n        doc.head.appendChild(styleElem);\n    }\n    /**\n     * The root pane of Tweakpane.\n     */\n    class Pane extends RootApi {\n        constructor(opt_config) {\n            var _a, _b;\n            const config = opt_config !== null && opt_config !== void 0 ? opt_config : {};\n            const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n            const pool = createDefaultPluginPool();\n            const rootController = new RootController(doc, {\n                expanded: config.expanded,\n                blade: createBlade(),\n                props: ValueMap.fromObject({\n                    title: config.title,\n                }),\n                viewProps: ViewProps.create(),\n            });\n            super(rootController, pool);\n            this.pool_ = pool;\n            this.containerElem_ = (_b = config.container) !== null && _b !== void 0 ? _b : createDefaultWrapperElement(doc);\n            this.containerElem_.appendChild(this.element);\n            this.doc_ = doc;\n            this.usesDefaultWrapper_ = !config.container;\n            this.setUpDefaultPlugins_();\n        }\n        get document() {\n            if (!this.doc_) {\n                throw TpError.alreadyDisposed();\n            }\n            return this.doc_;\n        }\n        dispose() {\n            const containerElem = this.containerElem_;\n            if (!containerElem) {\n                throw TpError.alreadyDisposed();\n            }\n            if (this.usesDefaultWrapper_) {\n                const parentElem = containerElem.parentElement;\n                if (parentElem) {\n                    parentElem.removeChild(containerElem);\n                }\n            }\n            this.containerElem_ = null;\n            this.doc_ = null;\n            super.dispose();\n        }\n        registerPlugin(bundle) {\n            const plugins = 'plugin' in bundle\n                ? [bundle.plugin]\n                : 'plugins' in bundle\n                    ? bundle.plugins\n                    : [];\n            plugins.forEach((p) => {\n                this.pool_.register(p);\n                this.embedPluginStyle_(p);\n            });\n        }\n        embedPluginStyle_(plugin) {\n            if (plugin.css) {\n                embedStyle(this.document, `plugin-${plugin.id}`, plugin.css);\n            }\n        }\n        setUpDefaultPlugins_() {\n            // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n            embedStyle(this.document, 'default', '.tp-tbiv_b,.tp-coltxtv_ms,.tp-ckbv_i,.tp-rotv_b,.tp-fldv_b,.tp-mllv_i,.tp-sglv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-mllv_i,.tp-sglv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-mllv_i::-webkit-scrollbar,.tp-sglv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-mllv_i::-webkit-scrollbar-corner,.tp-sglv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-mllv_i::-webkit-scrollbar-thumb,.tp-sglv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-v-p))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tabv_c .tp-brkv>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--elm-br)}.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(4px + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\"\";display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:\"\";height:2px;left:calc(-1*var(--cnt-h-p));position:absolute;right:calc(-1*var(--cnt-h-p));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:\"\";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--bld-us)*3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-h-p));right:calc(-1*var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:\"\";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:\"\";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:\"\";height:2px;left:0;position:absolute;right:0}.tp-tabv_c{padding-bottom:var(--cnt-v-p);padding-left:4px;padding-top:var(--cnt-v-p)}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--bld-us) + 4px);width:var(--bs-br)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:\"\";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:\"\";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\"\";height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:\"\";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}');\n            this.pool_.getAll().forEach((plugin) => {\n                this.embedPluginStyle_(plugin);\n            });\n            this.registerPlugin({\n                plugins: [\n                    SliderBladePlugin,\n                    ListBladePlugin,\n                    TabBladePlugin,\n                    TextBladePlugin,\n                ],\n            });\n        }\n    }\n\n    const VERSION = new Semver('3.1.6');\n\n    exports.BladeApi = BladeApi;\n    exports.ButtonApi = ButtonApi;\n    exports.FolderApi = FolderApi;\n    exports.InputBindingApi = InputBindingApi;\n    exports.ListApi = ListApi;\n    exports.MonitorBindingApi = MonitorBindingApi;\n    exports.Pane = Pane;\n    exports.SeparatorApi = SeparatorApi;\n    exports.SliderApi = SliderApi;\n    exports.TabApi = TabApi;\n    exports.TabPageApi = TabPageApi;\n    exports.TextApi = TextApi;\n    exports.TpChangeEvent = TpChangeEvent;\n    exports.VERSION = VERSION;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","// src/LinearAlgebra.ts\nvar Vec = class {\n  static add(a, b) {\n    if (typeof b == \"number\") {\n      for (let i = 0, len = a.length; i < len; i++)\n        a[i] += b;\n    } else {\n      for (let i = 0, len = a.length; i < len; i++)\n        a[i] += b[i] || 0;\n    }\n    return a;\n  }\n  static subtract(a, b) {\n    if (typeof b == \"number\") {\n      for (let i = 0, len = a.length; i < len; i++)\n        a[i] -= b;\n    } else {\n      for (let i = 0, len = a.length; i < len; i++)\n        a[i] -= b[i] || 0;\n    }\n    return a;\n  }\n  static multiply(a, b) {\n    if (typeof b == \"number\") {\n      for (let i = 0, len = a.length; i < len; i++)\n        a[i] *= b;\n    } else {\n      if (a.length != b.length) {\n        throw new Error(`Cannot do element-wise multiply since the array lengths don't match: ${a.toString()} multiply-with ${b.toString()}`);\n      }\n      for (let i = 0, len = a.length; i < len; i++)\n        a[i] *= b[i];\n    }\n    return a;\n  }\n  static divide(a, b) {\n    if (typeof b == \"number\") {\n      if (b === 0)\n        throw new Error(\"Cannot divide by zero\");\n      for (let i = 0, len = a.length; i < len; i++)\n        a[i] /= b;\n    } else {\n      if (a.length != b.length) {\n        throw new Error(`Cannot do element-wise divide since the array lengths don't match. ${a.toString()} divide-by ${b.toString()}`);\n      }\n      for (let i = 0, len = a.length; i < len; i++)\n        a[i] /= b[i];\n    }\n    return a;\n  }\n  static dot(a, b) {\n    if (a.length != b.length)\n      throw new Error(\"Array lengths don't match\");\n    let d = 0;\n    for (let i = 0, len = a.length; i < len; i++) {\n      d += a[i] * b[i];\n    }\n    return d;\n  }\n  static cross2D(a, b) {\n    return a[0] * b[1] - a[1] * b[0];\n  }\n  static cross(a, b) {\n    return new Pt(a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]);\n  }\n  static magnitude(a) {\n    return Math.sqrt(Vec.dot(a, a));\n  }\n  static unit(a, magnitude = void 0) {\n    let m = magnitude === void 0 ? Vec.magnitude(a) : magnitude;\n    if (m === 0)\n      return Pt.make(a.length);\n    return Vec.divide(a, m);\n  }\n  static abs(a) {\n    return Vec.map(a, Math.abs);\n  }\n  static floor(a) {\n    return Vec.map(a, Math.floor);\n  }\n  static ceil(a) {\n    return Vec.map(a, Math.ceil);\n  }\n  static round(a) {\n    return Vec.map(a, Math.round);\n  }\n  static max(a) {\n    let m = Number.MIN_VALUE;\n    let index = 0;\n    for (let i = 0, len = a.length; i < len; i++) {\n      m = Math.max(m, a[i]);\n      if (m === a[i])\n        index = i;\n    }\n    return { value: m, index };\n  }\n  static min(a) {\n    let m = Number.MAX_VALUE;\n    let index = 0;\n    for (let i = 0, len = a.length; i < len; i++) {\n      m = Math.min(m, a[i]);\n      if (m === a[i])\n        index = i;\n    }\n    return { value: m, index };\n  }\n  static sum(a) {\n    let s = 0;\n    for (let i = 0, len = a.length; i < len; i++)\n      s += a[i];\n    return s;\n  }\n  static map(a, fn) {\n    for (let i = 0, len = a.length; i < len; i++) {\n      a[i] = fn(a[i], i, a);\n    }\n    return a;\n  }\n};\nvar Mat = class {\n  constructor() {\n    this.reset();\n  }\n  get value() {\n    return this._33;\n  }\n  get domMatrix() {\n    return new DOMMatrix(Mat.toDOMMatrix(this._33));\n  }\n  reset() {\n    this._33 = Mat.scale2DMatrix(1, 1);\n  }\n  scale2D(val, at = [0, 0]) {\n    const m = Mat.scaleAt2DMatrix(val[0] || 1, val[1] || 1, at);\n    this._33 = Mat.multiply(this._33, m);\n    return this;\n  }\n  rotate2D(ang, at = [0, 0]) {\n    const m = Mat.rotateAt2DMatrix(Math.cos(ang), Math.sin(ang), at);\n    this._33 = Mat.multiply(this._33, m);\n    return this;\n  }\n  translate2D(val) {\n    const m = Mat.translate2DMatrix(val[0] || 0, val[1] || 0);\n    this._33 = Mat.multiply(this._33, m);\n    return this;\n  }\n  shear2D(val, at = [0, 0]) {\n    const m = Mat.shearAt2DMatrix(Math.tan(val[0] || 0), Math.tan(val[1] || 1), at);\n    this._33 = Mat.multiply(this._33, m);\n    return this;\n  }\n  static add(a, b) {\n    if (typeof b != \"number\") {\n      if (a[0].length != b[0].length)\n        throw new Error(\"Cannot add matrix if rows' and columns' size don't match.\");\n      if (a.length != b.length)\n        throw new Error(\"Cannot add matrix if rows' and columns' size don't match.\");\n    }\n    let g = new Group();\n    let isNum = typeof b == \"number\";\n    for (let i = 0, len = a.length; i < len; i++) {\n      g.push(a[i].$add(isNum ? b : b[i]));\n    }\n    return g;\n  }\n  static multiply(a, b, transposed = false, elementwise = false) {\n    let g = new Group();\n    if (typeof b != \"number\") {\n      if (elementwise) {\n        if (a.length != b.length)\n          throw new Error(\"Cannot multiply matrix element-wise because the matrices' sizes don't match.\");\n        for (let ai = 0, alen = a.length; ai < alen; ai++) {\n          g.push(a[ai].$multiply(b[ai]));\n        }\n      } else {\n        if (!transposed && a[0].length != b.length)\n          throw new Error(\"Cannot multiply matrix if rows in matrix-a don't match columns in matrix-b.\");\n        if (transposed && a[0].length != b[0].length)\n          throw new Error(\"Cannot multiply matrix if transposed and the columns in both matrices don't match.\");\n        if (!transposed)\n          b = Mat.transpose(b);\n        for (let ai = 0, alen = a.length; ai < alen; ai++) {\n          let p = Pt.make(b.length, 0);\n          for (let bi = 0, blen = b.length; bi < blen; bi++) {\n            p[bi] = Vec.dot(a[ai], b[bi]);\n          }\n          g.push(p);\n        }\n      }\n    } else {\n      for (let ai = 0, alen = a.length; ai < alen; ai++) {\n        g.push(a[ai].$multiply(b));\n      }\n    }\n    return g;\n  }\n  static zipSlice(g, index, defaultValue = false) {\n    let z = [];\n    for (let i = 0, len = g.length; i < len; i++) {\n      if (g[i].length - 1 < index && defaultValue === false)\n        throw `Index ${index} is out of bounds`;\n      z.push(g[i][index] || defaultValue);\n    }\n    return new Pt(z);\n  }\n  static zip(g, defaultValue = false, useLongest = false) {\n    let ps = new Group();\n    let len = useLongest ? g.reduce((a, b) => Math.max(a, b.length), 0) : g[0].length;\n    for (let i = 0; i < len; i++) {\n      ps.push(Mat.zipSlice(g, i, defaultValue));\n    }\n    return ps;\n  }\n  static transpose(g, defaultValue = false, useLongest = false) {\n    return Mat.zip(g, defaultValue, useLongest);\n  }\n  static toDOMMatrix(m) {\n    return [m[0][0], m[0][1], m[1][0], m[1][1], m[2][0], m[2][1]];\n  }\n  static transform2D(pt, m) {\n    let x = pt[0] * m[0][0] + pt[1] * m[1][0] + m[2][0];\n    let y = pt[0] * m[0][1] + pt[1] * m[1][1] + m[2][1];\n    return new Pt(x, y);\n  }\n  static scale2DMatrix(x, y) {\n    return new Group(\n      new Pt(x, 0, 0),\n      new Pt(0, y, 0),\n      new Pt(0, 0, 1)\n    );\n  }\n  static rotate2DMatrix(cosA, sinA) {\n    return new Group(\n      new Pt(cosA, sinA, 0),\n      new Pt(-sinA, cosA, 0),\n      new Pt(0, 0, 1)\n    );\n  }\n  static shear2DMatrix(tanX, tanY) {\n    return new Group(\n      new Pt(1, tanX, 0),\n      new Pt(tanY, 1, 0),\n      new Pt(0, 0, 1)\n    );\n  }\n  static translate2DMatrix(x, y) {\n    return new Group(\n      new Pt(1, 0, 0),\n      new Pt(0, 1, 0),\n      new Pt(x, y, 1)\n    );\n  }\n  static scaleAt2DMatrix(sx, sy, at) {\n    let m = Mat.scale2DMatrix(sx, sy);\n    m[2][0] = -at[0] * sx + at[0];\n    m[2][1] = -at[1] * sy + at[1];\n    return m;\n  }\n  static rotateAt2DMatrix(cosA, sinA, at) {\n    let m = Mat.rotate2DMatrix(cosA, sinA);\n    m[2][0] = at[0] * (1 - cosA) + at[1] * sinA;\n    m[2][1] = at[1] * (1 - cosA) - at[0] * sinA;\n    return m;\n  }\n  static shearAt2DMatrix(tanX, tanY, at) {\n    let m = Mat.shear2DMatrix(tanX, tanY);\n    m[2][0] = -at[1] * tanY;\n    m[2][1] = -at[0] * tanX;\n    return m;\n  }\n  static reflectAt2DMatrix(p1, p2) {\n    let intercept = Line.intercept(p1, p2);\n    if (intercept == void 0) {\n      return [\n        new Pt([-1, 0, 0]),\n        new Pt([0, 1, 0]),\n        new Pt([p1[0] + p2[0], 0, 1])\n      ];\n    } else {\n      let yi = intercept.yi;\n      let ang2 = Math.atan(intercept.slope) * 2;\n      let cosA = Math.cos(ang2);\n      let sinA = Math.sin(ang2);\n      return [\n        new Pt([cosA, sinA, 0]),\n        new Pt([sinA, -cosA, 0]),\n        new Pt([-yi * sinA, yi + yi * cosA, 1])\n      ];\n    }\n  }\n};\n\n// src/Op.ts\nvar _errorLength = (obj, param = \"expected\") => Util.warn(\"Group's length is less than \" + param, obj);\nvar _errorOutofBound = (obj, param = \"\") => Util.warn(`Index ${param} is out of bound in Group`, obj);\nvar Line = class {\n  static fromAngle(anchor, angle, magnitude) {\n    let g = new Group(new Pt(anchor), new Pt(anchor));\n    g[1].toAngle(angle, magnitude, true);\n    return g;\n  }\n  static slope(p1, p2) {\n    return p2[0] - p1[0] === 0 ? void 0 : (p2[1] - p1[1]) / (p2[0] - p1[0]);\n  }\n  static intercept(p1, p2) {\n    if (p2[0] - p1[0] === 0) {\n      return void 0;\n    } else {\n      let m = (p2[1] - p1[1]) / (p2[0] - p1[0]);\n      let c = p1[1] - m * p1[0];\n      return { slope: m, yi: c, xi: m === 0 ? void 0 : -c / m };\n    }\n  }\n  static sideOfPt2D(line, pt) {\n    let _line = Util.iterToArray(line);\n    return (_line[1][0] - _line[0][0]) * (pt[1] - _line[0][1]) - (pt[0] - _line[0][0]) * (_line[1][1] - _line[0][1]);\n  }\n  static collinear(p1, p2, p3, threshold = 0.01) {\n    let a = new Pt(0, 0, 0).to(p1).$subtract(p2);\n    let b = new Pt(0, 0, 0).to(p1).$subtract(p3);\n    return a.$cross(b).divide(1e3).equals(new Pt(0, 0, 0), threshold);\n  }\n  static magnitude(line) {\n    let _line = Util.iterToArray(line);\n    return _line.length >= 2 ? _line[1].$subtract(_line[0]).magnitude() : 0;\n  }\n  static magnitudeSq(line) {\n    let _line = Util.iterToArray(line);\n    return _line.length >= 2 ? _line[1].$subtract(_line[0]).magnitudeSq() : 0;\n  }\n  static perpendicularFromPt(line, pt, asProjection = false) {\n    let _line = Util.iterToArray(line);\n    if (_line[0].equals(_line[1]))\n      return void 0;\n    let a = _line[0].$subtract(_line[1]);\n    let b = _line[1].$subtract(pt);\n    let proj = b.$subtract(a.$project(b));\n    return asProjection ? proj : proj.$add(pt);\n  }\n  static distanceFromPt(line, pt) {\n    let _line = Util.iterToArray(line);\n    let projectionVector = Line.perpendicularFromPt(_line, pt, true);\n    if (projectionVector) {\n      return projectionVector.magnitude();\n    } else {\n      return _line[0].$subtract(pt).magnitude();\n    }\n  }\n  static intersectRay2D(la, lb) {\n    let _la = Util.iterToArray(la);\n    let _lb = Util.iterToArray(lb);\n    let a = Line.intercept(_la[0], _la[1]);\n    let b = Line.intercept(_lb[0], _lb[1]);\n    let pa = _la[0];\n    let pb = _lb[0];\n    if (a == void 0) {\n      if (b == void 0)\n        return void 0;\n      let y1 = -b.slope * (pb[0] - pa[0]) + pb[1];\n      return new Pt(pa[0], y1);\n    } else {\n      if (b == void 0) {\n        let y1 = -a.slope * (pa[0] - pb[0]) + pa[1];\n        return new Pt(pb[0], y1);\n      } else if (b.slope != a.slope) {\n        let px = (a.slope * pa[0] - b.slope * pb[0] + pb[1] - pa[1]) / (a.slope - b.slope);\n        let py = a.slope * (px - pa[0]) + pa[1];\n        return new Pt(px, py);\n      } else {\n        if (a.yi == b.yi) {\n          return new Pt(pa[0], pa[1]);\n        } else {\n          return void 0;\n        }\n      }\n    }\n  }\n  static intersectLine2D(la, lb) {\n    let _la = Util.iterToArray(la);\n    let _lb = Util.iterToArray(lb);\n    let pt = Line.intersectRay2D(_la, _lb);\n    return pt && Geom.withinBound(pt, _la[0], _la[1]) && Geom.withinBound(pt, _lb[0], _lb[1]) ? pt : void 0;\n  }\n  static intersectLineWithRay2D(line, ray) {\n    let _line = Util.iterToArray(line);\n    let _ray = Util.iterToArray(ray);\n    let pt = Line.intersectRay2D(_line, _ray);\n    return pt && Geom.withinBound(pt, _line[0], _line[1]) ? pt : void 0;\n  }\n  static intersectPolygon2D(lineOrRay, poly, sourceIsRay = false) {\n    let _lineOrRay = Util.iterToArray(lineOrRay);\n    let _poly = Util.iterToArray(poly);\n    let fn = sourceIsRay ? Line.intersectLineWithRay2D : Line.intersectLine2D;\n    let pts = new Group();\n    for (let i = 0, len = _poly.length; i < len; i++) {\n      let next = i === len - 1 ? 0 : i + 1;\n      let d = fn([_poly[i], _poly[next]], _lineOrRay);\n      if (d)\n        pts.push(d);\n    }\n    return pts.length > 0 ? pts : void 0;\n  }\n  static intersectLines2D(lines1, lines2, isRay = false) {\n    let group = new Group();\n    let fn = isRay ? Line.intersectLineWithRay2D : Line.intersectLine2D;\n    for (let l1 of lines1) {\n      for (let l2 of lines2) {\n        let _ip = fn(l1, l2);\n        if (_ip)\n          group.push(_ip);\n      }\n    }\n    return group;\n  }\n  static intersectGridWithRay2D(ray, gridPt) {\n    let _ray = Util.iterToArray(ray);\n    let t = Line.intercept(new Pt(_ray[0]).subtract(gridPt), new Pt(_ray[1]).subtract(gridPt));\n    let g = new Group();\n    if (t && t.xi)\n      g.push(new Pt(gridPt[0] + t.xi, gridPt[1]));\n    if (t && t.yi)\n      g.push(new Pt(gridPt[0], gridPt[1] + t.yi));\n    return g;\n  }\n  static intersectGridWithLine2D(line, gridPt) {\n    let _line = Util.iterToArray(line);\n    let g = Line.intersectGridWithRay2D(_line, gridPt);\n    let gg = new Group();\n    for (let i = 0, len = g.length; i < len; i++) {\n      if (Geom.withinBound(g[i], _line[0], _line[1]))\n        gg.push(g[i]);\n    }\n    return gg;\n  }\n  static intersectRect2D(line, rect) {\n    let _line = Util.iterToArray(line);\n    let _rect = Util.iterToArray(rect);\n    let box = Geom.boundingBox(Group.fromPtArray(_line));\n    if (!Rectangle.hasIntersectRect2D(box, _rect))\n      return new Group();\n    return Line.intersectLines2D([_line], Rectangle.sides(_rect));\n  }\n  static subpoints(line, num) {\n    let _line = Util.iterToArray(line);\n    let pts = new Group();\n    for (let i = 1; i <= num; i++) {\n      pts.push(Geom.interpolate(_line[0], _line[1], i / (num + 1)));\n    }\n    return pts;\n  }\n  static crop(line, size, index = 0, cropAsCircle = true) {\n    let _line = Util.iterToArray(line);\n    let tdx = index === 0 ? 1 : 0;\n    let ls = _line[tdx].$subtract(_line[index]);\n    if (ls[0] === 0 || size[0] === 0)\n      return _line[index];\n    if (cropAsCircle) {\n      let d = ls.unit().multiply(size[1]);\n      return _line[index].$add(d);\n    } else {\n      let rect = Rectangle.fromCenter(_line[index], size);\n      let sides = Rectangle.sides(rect);\n      let sideIdx = 0;\n      if (Math.abs(ls[1] / ls[0]) > Math.abs(size[1] / size[0])) {\n        sideIdx = ls[1] < 0 ? 0 : 2;\n      } else {\n        sideIdx = ls[0] < 0 ? 3 : 1;\n      }\n      return Line.intersectRay2D(sides[sideIdx], _line);\n    }\n  }\n  static marker(line, size, graphic = \"arrow\", atTail = true) {\n    let _line = Util.iterToArray(line);\n    let h = atTail ? 0 : 1;\n    let t = atTail ? 1 : 0;\n    let unit = _line[h].$subtract(_line[t]);\n    if (unit.magnitudeSq() === 0)\n      return new Group();\n    unit.unit();\n    let ps = Geom.perpendicular(unit).multiply(size[0]).add(_line[t]);\n    if (graphic == \"arrow\") {\n      ps.add(unit.$multiply(size[1]));\n      return new Group(_line[t], ps[0], ps[1]);\n    } else {\n      return new Group(ps[0], ps[1]);\n    }\n  }\n  static toRect(line) {\n    let _line = Util.iterToArray(line);\n    return new Group(_line[0].$min(_line[1]), _line[0].$max(_line[1]));\n  }\n};\nvar Rectangle = class {\n  static from(topLeft, widthOrSize, height) {\n    return Rectangle.fromTopLeft(topLeft, widthOrSize, height);\n  }\n  static fromTopLeft(topLeft, widthOrSize, height) {\n    let size = typeof widthOrSize == \"number\" ? [widthOrSize, height || widthOrSize] : widthOrSize;\n    return new Group(new Pt(topLeft), new Pt(topLeft).add(size));\n  }\n  static fromCenter(center, widthOrSize, height) {\n    let half = typeof widthOrSize == \"number\" ? [widthOrSize / 2, (height || widthOrSize) / 2] : new Pt(widthOrSize).divide(2);\n    return new Group(new Pt(center).subtract(half), new Pt(center).add(half));\n  }\n  static toCircle(pts, within = true) {\n    return Circle.fromRect(pts, within);\n  }\n  static toSquare(pts, enclose = false) {\n    let _pts = Util.iterToArray(pts);\n    let s = Rectangle.size(_pts);\n    let m = enclose ? s.maxValue().value : s.minValue().value;\n    return Rectangle.fromCenter(Rectangle.center(_pts), m, m);\n  }\n  static size(pts) {\n    let p = Util.iterToArray(pts);\n    return p[0].$max(p[1]).subtract(p[0].$min(p[1]));\n  }\n  static center(pts) {\n    let p = Util.iterToArray(pts);\n    let min = p[0].$min(p[1]);\n    let max = p[0].$max(p[1]);\n    return min.add(max.$subtract(min).divide(2));\n  }\n  static corners(rect) {\n    let _rect = Util.iterToArray(rect);\n    let p0 = _rect[0].$min(_rect[1]);\n    let p2 = _rect[0].$max(_rect[1]);\n    return new Group(p0, new Pt(p2.x, p0.y), p2, new Pt(p0.x, p2.y));\n  }\n  static sides(rect) {\n    let [p0, p1, p2, p3] = Rectangle.corners(rect);\n    return [\n      new Group(p0, p1),\n      new Group(p1, p2),\n      new Group(p2, p3),\n      new Group(p3, p0)\n    ];\n  }\n  static boundingBox(rects) {\n    let _rects = Util.iterToArray(rects);\n    let merged = Util.flatten(_rects, false);\n    let min = Pt.make(2, Number.MAX_VALUE);\n    let max = Pt.make(2, Number.MIN_VALUE);\n    for (let i = 0, len = merged.length; i < len; i++) {\n      let k = 0;\n      for (let m of merged[i]) {\n        min[k] = Math.min(min[k], m[k]);\n        max[k] = Math.max(max[k], m[k]);\n        if (++k >= 2)\n          break;\n      }\n    }\n    return new Group(min, max);\n  }\n  static polygon(rect) {\n    return Rectangle.corners(rect);\n  }\n  static quadrants(rect, center) {\n    let _rect = Util.iterToArray(rect);\n    let corners = Rectangle.corners(_rect);\n    let _center = center != void 0 ? new Pt(center) : Rectangle.center(_rect);\n    return corners.map((c) => new Group(c, _center).boundingBox());\n  }\n  static halves(rect, ratio = 0.5, asRows = false) {\n    let _rect = Util.iterToArray(rect);\n    let min = _rect[0].$min(_rect[1]);\n    let max = _rect[0].$max(_rect[1]);\n    let mid = asRows ? Num.lerp(min[1], max[1], ratio) : Num.lerp(min[0], max[0], ratio);\n    return asRows ? [new Group(min, new Pt(max[0], mid)), new Group(new Pt(min[0], mid), max)] : [new Group(min, new Pt(mid, max[1])), new Group(new Pt(mid, min[1]), max)];\n  }\n  static withinBound(rect, pt) {\n    let _rect = Util.iterToArray(rect);\n    return Geom.withinBound(pt, _rect[0], _rect[1]);\n  }\n  static hasIntersectRect2D(rect1, rect2, resetBoundingBox = false) {\n    let _rect1 = Util.iterToArray(rect1);\n    let _rect2 = Util.iterToArray(rect2);\n    if (resetBoundingBox) {\n      _rect1 = Geom.boundingBox(_rect1);\n      _rect2 = Geom.boundingBox(_rect2);\n    }\n    if (_rect1[0][0] > _rect2[1][0] || _rect2[0][0] > _rect1[1][0])\n      return false;\n    if (_rect1[0][1] > _rect2[1][1] || _rect2[0][1] > _rect1[1][1])\n      return false;\n    return true;\n  }\n  static intersectRect2D(rect1, rect2) {\n    let _rect1 = Util.iterToArray(rect1);\n    let _rect2 = Util.iterToArray(rect2);\n    if (!Rectangle.hasIntersectRect2D(_rect1, _rect2))\n      return new Group();\n    return Line.intersectLines2D(Rectangle.sides(_rect1), Rectangle.sides(_rect2));\n  }\n};\nvar Circle = class {\n  static fromRect(pts, enclose = false) {\n    let _pts = Util.iterToArray(pts);\n    let r = 0;\n    let min = r = Rectangle.size(_pts).minValue().value / 2;\n    if (enclose) {\n      let max = Rectangle.size(_pts).maxValue().value / 2;\n      r = Math.sqrt(min * min + max * max);\n    } else {\n      r = min;\n    }\n    return new Group(Rectangle.center(_pts), new Pt(r, r));\n  }\n  static fromTriangle(pts, enclose = false) {\n    if (enclose) {\n      return Triangle.circumcircle(pts);\n    } else {\n      return Triangle.incircle(pts);\n    }\n  }\n  static fromCenter(pt, radius) {\n    return new Group(new Pt(pt), new Pt(radius, radius));\n  }\n  static withinBound(pts, pt, threshold = 0) {\n    let _pts = Util.iterToArray(pts);\n    let d = _pts[0].$subtract(pt);\n    return d.dot(d) + threshold < _pts[1].x * _pts[1].x;\n  }\n  static intersectRay2D(circle, ray) {\n    let _pts = Util.iterToArray(circle);\n    let _ray = Util.iterToArray(ray);\n    let d = _ray[0].$subtract(_ray[1]);\n    let f = _pts[0].$subtract(_ray[0]);\n    let a = d.dot(d);\n    let b = f.dot(d);\n    let c = f.dot(f) - _pts[1].x * _pts[1].x;\n    let p = b / a;\n    let q = c / a;\n    let disc = p * p - q;\n    if (disc < 0) {\n      return new Group();\n    } else {\n      let discSqrt = Math.sqrt(disc);\n      let t1 = -p + discSqrt;\n      let p1 = _ray[0].$subtract(d.$multiply(t1));\n      if (disc === 0)\n        return new Group(p1);\n      let t2 = -p - discSqrt;\n      let p2 = _ray[0].$subtract(d.$multiply(t2));\n      return new Group(p1, p2);\n    }\n  }\n  static intersectLine2D(circle, line) {\n    let _pts = Util.iterToArray(circle);\n    let _line = Util.iterToArray(line);\n    let ps = Circle.intersectRay2D(_pts, _line);\n    let g = new Group();\n    if (ps.length > 0) {\n      for (let i = 0, len = ps.length; i < len; i++) {\n        if (Rectangle.withinBound(_line, ps[i]))\n          g.push(ps[i]);\n      }\n    }\n    return g;\n  }\n  static intersectCircle2D(circle1, circle2) {\n    let _pts = Util.iterToArray(circle1);\n    let _circle = Util.iterToArray(circle2);\n    let dv = _circle[0].$subtract(_pts[0]);\n    let dr2 = dv.magnitudeSq();\n    let dr = Math.sqrt(dr2);\n    let ar = _pts[1].x;\n    let br = _circle[1].x;\n    let ar2 = ar * ar;\n    let br2 = br * br;\n    if (dr > ar + br) {\n      return new Group();\n    } else if (dr < Math.abs(ar - br)) {\n      return new Group(_pts[0].clone());\n    } else {\n      let a = (ar2 - br2 + dr2) / (2 * dr);\n      let h = Math.sqrt(ar2 - a * a);\n      let p = dv.$multiply(a / dr).add(_pts[0]);\n      return new Group(\n        new Pt(p.x + h * dv.y / dr, p.y - h * dv.x / dr),\n        new Pt(p.x - h * dv.y / dr, p.y + h * dv.x / dr)\n      );\n    }\n  }\n  static intersectRect2D(circle, rect) {\n    let _pts = Util.iterToArray(circle);\n    let _rect = Util.iterToArray(rect);\n    let sides = Rectangle.sides(_rect);\n    let g = [];\n    for (let i = 0, len = sides.length; i < len; i++) {\n      let ps = Circle.intersectLine2D(_pts, sides[i]);\n      if (ps.length > 0)\n        g.push(ps);\n    }\n    return Util.flatten(g);\n  }\n  static toRect(circle, within = false) {\n    let _pts = Util.iterToArray(circle);\n    let r = _pts[1][0];\n    if (within) {\n      let half = Math.sqrt(r * r) / 2;\n      return new Group(_pts[0].$subtract(half), _pts[0].$add(half));\n    } else {\n      return new Group(_pts[0].$subtract(r), _pts[0].$add(r));\n    }\n  }\n  static toTriangle(circle, within = true) {\n    let _pts = Util.iterToArray(circle);\n    if (within) {\n      let ang = -Math.PI / 2;\n      let inc = Math.PI * 2 / 3;\n      let g = new Group();\n      for (let i = 0; i < 3; i++) {\n        g.push(_pts[0].clone().toAngle(ang, _pts[1][0], true));\n        ang += inc;\n      }\n      return g;\n    } else {\n      return Triangle.fromCenter(_pts[0], _pts[1][0]);\n    }\n  }\n};\nvar Triangle = class {\n  static fromRect(rect) {\n    let _rect = Util.iterToArray(rect);\n    let top = _rect[0].$add(_rect[1]).divide(2);\n    top.y = _rect[0][1];\n    let left = _rect[1].clone();\n    left.x = _rect[0][0];\n    return new Group(top, _rect[1].clone(), left);\n  }\n  static fromCircle(circle) {\n    return Circle.toTriangle(circle, true);\n  }\n  static fromCenter(pt, size) {\n    return Triangle.fromCircle(Circle.fromCenter(pt, size));\n  }\n  static medial(tri) {\n    let _pts = Util.iterToArray(tri);\n    if (_pts.length < 3)\n      return _errorLength(new Group(), 3);\n    return Polygon.midpoints(_pts, true);\n  }\n  static oppositeSide(tri, index) {\n    let _pts = Util.iterToArray(tri);\n    if (_pts.length < 3)\n      return _errorLength(new Group(), 3);\n    if (index === 0) {\n      return Group.fromPtArray([_pts[1], _pts[2]]);\n    } else if (index === 1) {\n      return Group.fromPtArray([_pts[0], _pts[2]]);\n    } else {\n      return Group.fromPtArray([_pts[0], _pts[1]]);\n    }\n  }\n  static altitude(tri, index) {\n    let _pts = Util.iterToArray(tri);\n    let opp = Triangle.oppositeSide(_pts, index);\n    if (opp.length > 1) {\n      return new Group(_pts[index], Line.perpendicularFromPt(opp, _pts[index]));\n    } else {\n      return new Group();\n    }\n  }\n  static orthocenter(tri) {\n    let _pts = Util.iterToArray(tri);\n    if (_pts.length < 3)\n      return _errorLength(void 0, 3);\n    let a = Triangle.altitude(_pts, 0);\n    let b = Triangle.altitude(_pts, 1);\n    return Line.intersectRay2D(a, b);\n  }\n  static incenter(tri) {\n    let _pts = Util.iterToArray(tri);\n    if (_pts.length < 3)\n      return _errorLength(void 0, 3);\n    let a = Polygon.bisector(_pts, 0).add(_pts[0]);\n    let b = Polygon.bisector(_pts, 1).add(_pts[1]);\n    return Line.intersectRay2D(new Group(_pts[0], a), new Group(_pts[1], b));\n  }\n  static incircle(tri, center) {\n    let _pts = Util.iterToArray(tri);\n    let c = center ? center : Triangle.incenter(_pts);\n    let area = Polygon.area(_pts);\n    let perim = Polygon.perimeter(_pts, true);\n    let r = 2 * area / perim.total;\n    return Circle.fromCenter(c, r);\n  }\n  static circumcenter(tri) {\n    let _pts = Util.iterToArray(tri);\n    let md = Triangle.medial(_pts);\n    let a = [md[0], Geom.perpendicular(_pts[0].$subtract(md[0])).p1.$add(md[0])];\n    let b = [md[1], Geom.perpendicular(_pts[1].$subtract(md[1])).p1.$add(md[1])];\n    return Line.intersectRay2D(a, b);\n  }\n  static circumcircle(tri, center) {\n    let _pts = Util.iterToArray(tri);\n    let c = center ? center : Triangle.circumcenter(_pts);\n    let r = _pts[0].$subtract(c).magnitude();\n    return Circle.fromCenter(c, r);\n  }\n};\nvar Polygon = class {\n  static centroid(pts) {\n    return Geom.centroid(pts);\n  }\n  static rectangle(center, widthOrSize, height) {\n    return Rectangle.corners(Rectangle.fromCenter(center, widthOrSize, height));\n  }\n  static fromCenter(center, radius, sides) {\n    let g = new Group();\n    for (let i = 0; i < sides; i++) {\n      let ang = Math.PI * 2 * i / sides;\n      g.push(new Pt(Math.cos(ang) * radius, Math.sin(ang) * radius).add(center));\n    }\n    return g;\n  }\n  static lineAt(pts, index) {\n    let _pts = Util.iterToArray(pts);\n    if (index < 0 || index >= _pts.length)\n      throw new Error(\"index out of the Polygon's range\");\n    return new Group(_pts[index], index === _pts.length - 1 ? _pts[0] : _pts[index + 1]);\n  }\n  static lines(poly, closePath = true) {\n    let _pts = Util.iterToArray(poly);\n    if (_pts.length < 2)\n      return _errorLength(new Group(), 2);\n    let sp = Util.split(_pts, 2, 1);\n    if (closePath)\n      sp.push(new Group(_pts[_pts.length - 1], _pts[0]));\n    return sp.map((g) => g);\n  }\n  static midpoints(poly, closePath = false, t = 0.5) {\n    let sides = Polygon.lines(poly, closePath);\n    let mids = sides.map((s) => Geom.interpolate(s[0], s[1], t));\n    return mids;\n  }\n  static adjacentSides(poly, index, closePath = false) {\n    let _pts = Util.iterToArray(poly);\n    if (_pts.length < 2)\n      return _errorLength(new Group(), 2);\n    if (index < 0 || index >= _pts.length)\n      return _errorOutofBound(new Group(), index);\n    let gs = [];\n    let left = index - 1;\n    if (closePath && left < 0)\n      left = _pts.length - 1;\n    if (left >= 0)\n      gs.push(new Group(_pts[index], _pts[left]));\n    let right = index + 1;\n    if (closePath && right > _pts.length - 1)\n      right = 0;\n    if (right <= _pts.length - 1)\n      gs.push(new Group(_pts[index], _pts[right]));\n    return gs;\n  }\n  static bisector(poly, index) {\n    let sides = Polygon.adjacentSides(poly, index, true);\n    if (sides.length >= 2) {\n      let a = sides[0][1].$subtract(sides[0][0]).unit();\n      let b = sides[1][1].$subtract(sides[1][0]).unit();\n      return a.add(b).divide(2);\n    } else {\n      return void 0;\n    }\n  }\n  static perimeter(poly, closePath = false) {\n    let lines = Polygon.lines(poly, closePath);\n    let mag = 0;\n    let p = Pt.make(lines.length, 0);\n    for (let i = 0, len = lines.length; i < len; i++) {\n      let m = Line.magnitude(lines[i]);\n      mag += m;\n      p[i] = m;\n    }\n    return {\n      total: mag,\n      segments: p\n    };\n  }\n  static area(pts) {\n    let _pts = Util.iterToArray(pts);\n    if (_pts.length < 3)\n      return _errorLength(new Group(), 3);\n    let det = (a, b) => a[0] * b[1] - a[1] * b[0];\n    let area = 0;\n    for (let i = 0, len = _pts.length; i < len; i++) {\n      if (i < _pts.length - 1) {\n        area += det(_pts[i], _pts[i + 1]);\n      } else {\n        area += det(_pts[i], _pts[0]);\n      }\n    }\n    return Math.abs(area / 2);\n  }\n  static convexHull(pts, sorted = false) {\n    let _pts = Util.iterToArray(pts);\n    if (_pts.length < 3)\n      return _errorLength(new Group(), 3);\n    if (!sorted) {\n      _pts = _pts.slice();\n      _pts.sort((a, b) => a[0] - b[0]);\n    }\n    let left = (a, b, c) => {\n      return (b[0] - a[0]) * (c[1] - a[1]) - (c[0] - a[0]) * (b[1] - a[1]) > 0;\n    };\n    let dq = [];\n    let bot = _pts.length - 2;\n    let top = bot + 3;\n    dq[bot] = _pts[2];\n    dq[top] = _pts[2];\n    if (left(_pts[0], _pts[1], _pts[2])) {\n      dq[bot + 1] = _pts[0];\n      dq[bot + 2] = _pts[1];\n    } else {\n      dq[bot + 1] = _pts[1];\n      dq[bot + 2] = _pts[0];\n    }\n    for (let i = 3, len = _pts.length; i < len; i++) {\n      let pt = _pts[i];\n      if (left(dq[bot], dq[bot + 1], pt) && left(dq[top - 1], dq[top], pt)) {\n        continue;\n      }\n      while (!left(dq[bot], dq[bot + 1], pt)) {\n        bot += 1;\n      }\n      bot -= 1;\n      dq[bot] = pt;\n      while (!left(dq[top - 1], dq[top], pt)) {\n        top -= 1;\n      }\n      top += 1;\n      dq[top] = pt;\n    }\n    let hull = new Group();\n    for (let h = 0; h < top - bot; h++) {\n      hull.push(dq[bot + h]);\n    }\n    return hull;\n  }\n  static network(poly, originIndex = 0) {\n    let _pts = Util.iterToArray(poly);\n    let g = [];\n    for (let i = 0, len = _pts.length; i < len; i++) {\n      if (i != originIndex)\n        g.push(new Group(_pts[originIndex], _pts[i]));\n    }\n    return g;\n  }\n  static nearestPt(poly, pt) {\n    let _near = Number.MAX_VALUE;\n    let _item = -1;\n    let i = 0;\n    for (let p of poly) {\n      let d = p.$subtract(pt).magnitudeSq();\n      if (d < _near) {\n        _near = d;\n        _item = i;\n      }\n      i++;\n    }\n    return _item;\n  }\n  static projectAxis(poly, unitAxis) {\n    let _poly = Util.iterToArray(poly);\n    let dot = unitAxis.dot(_poly[0]);\n    let d = new Pt(dot, dot);\n    for (let n = 1, len = _poly.length; n < len; n++) {\n      dot = unitAxis.dot(_poly[n]);\n      d = new Pt(Math.min(dot, d[0]), Math.max(dot, d[1]));\n    }\n    return d;\n  }\n  static _axisOverlap(poly1, poly2, unitAxis) {\n    let pa = Polygon.projectAxis(poly1, unitAxis);\n    let pb = Polygon.projectAxis(poly2, unitAxis);\n    return pa[0] < pb[0] ? pb[0] - pa[1] : pa[0] - pb[1];\n  }\n  static hasIntersectPoint(poly, pt) {\n    let _poly = Util.iterToArray(poly);\n    let c = false;\n    for (let i = 0, len = _poly.length; i < len; i++) {\n      let ln = Polygon.lineAt(_poly, i);\n      if (ln[0][1] > pt[1] != ln[1][1] > pt[1] && pt[0] < (ln[1][0] - ln[0][0]) * (pt[1] - ln[0][1]) / (ln[1][1] - ln[0][1]) + ln[0][0]) {\n        c = !c;\n      }\n    }\n    return c;\n  }\n  static hasIntersectCircle(poly, circle) {\n    let _poly = Util.iterToArray(poly);\n    let _circle = Util.iterToArray(circle);\n    let info = {\n      which: -1,\n      dist: 0,\n      normal: null,\n      edge: null,\n      vertex: null\n    };\n    let c = _circle[0];\n    let r = _circle[1][0];\n    let minDist = Number.MAX_SAFE_INTEGER;\n    for (let i = 0, len = _poly.length; i < len; i++) {\n      let edge = Polygon.lineAt(_poly, i);\n      let axis = new Pt(edge[0].y - edge[1].y, edge[1].x - edge[0].x).unit();\n      let poly2 = new Group(c.$add(axis.$multiply(r)), c.$subtract(axis.$multiply(r)));\n      let dist = Polygon._axisOverlap(_poly, poly2, axis);\n      if (dist > 0) {\n        return null;\n      } else if (Math.abs(dist) < minDist) {\n        let check = Rectangle.withinBound(edge, Line.perpendicularFromPt(edge, c)) || Circle.intersectLine2D(circle, edge).length > 0;\n        if (check) {\n          info.edge = edge;\n          info.normal = axis;\n          minDist = Math.abs(dist);\n          info.which = i;\n        }\n      }\n    }\n    if (!info.edge)\n      return null;\n    let dir = c.$subtract(Polygon.centroid(_poly)).dot(info.normal);\n    if (dir < 0)\n      info.normal.multiply(-1);\n    info.dist = minDist;\n    info.vertex = c;\n    return info;\n  }\n  static hasIntersectPolygon(poly1, poly2) {\n    let _poly1 = Util.iterToArray(poly1);\n    let _poly2 = Util.iterToArray(poly2);\n    let info = {\n      which: -1,\n      dist: 0,\n      normal: new Pt(),\n      edge: new Group(),\n      vertex: new Pt()\n    };\n    let minDist = Number.MAX_SAFE_INTEGER;\n    for (let i = 0, plen = _poly1.length + _poly2.length; i < plen; i++) {\n      let edge = i < _poly1.length ? Polygon.lineAt(_poly1, i) : Polygon.lineAt(_poly2, i - _poly1.length);\n      let axis = new Pt(edge[0].y - edge[1].y, edge[1].x - edge[0].x).unit();\n      let dist = Polygon._axisOverlap(_poly1, _poly2, axis);\n      if (dist > 0) {\n        return null;\n      } else if (Math.abs(dist) < minDist) {\n        info.edge = edge;\n        info.normal = axis;\n        minDist = Math.abs(dist);\n        info.which = i < _poly1.length ? 0 : 1;\n      }\n    }\n    info.dist = minDist;\n    let b1 = info.which === 0 ? _poly2 : _poly1;\n    let b2 = info.which === 0 ? _poly1 : _poly2;\n    let c1 = Polygon.centroid(b1);\n    let c2 = Polygon.centroid(b2);\n    let dir = c1.$subtract(c2).dot(info.normal);\n    if (dir < 0)\n      info.normal.multiply(-1);\n    let smallest = Number.MAX_SAFE_INTEGER;\n    for (let i = 0, len = b1.length; i < len; i++) {\n      let d = info.normal.dot(b1[i].$subtract(c2));\n      if (d < smallest) {\n        smallest = d;\n        info.vertex = b1[i];\n      }\n    }\n    return info;\n  }\n  static intersectPolygon2D(poly1, poly2) {\n    let _poly1 = Util.iterToArray(poly1);\n    let _poly2 = Util.iterToArray(poly2);\n    let lp = Polygon.lines(_poly1);\n    let g = [];\n    for (let i = 0, len = lp.length; i < len; i++) {\n      let ins = Line.intersectPolygon2D(lp[i], _poly2, false);\n      if (ins)\n        g.push(ins);\n    }\n    return Util.flatten(g, true);\n  }\n  static toRects(polys) {\n    let boxes = [];\n    for (let g of polys) {\n      boxes.push(Geom.boundingBox(g));\n    }\n    let merged = Util.flatten(boxes, false);\n    boxes.unshift(Geom.boundingBox(merged));\n    return boxes;\n  }\n};\nvar Curve = class {\n  static getSteps(steps) {\n    let ts = new Group();\n    for (let i = 0; i <= steps; i++) {\n      let t = i / steps;\n      ts.push(new Pt(t * t * t, t * t, t, 1));\n    }\n    return ts;\n  }\n  static controlPoints(pts, index = 0, copyStart = false) {\n    let _pts = Util.iterToArray(pts);\n    if (index > _pts.length - 1)\n      return new Group();\n    let _index = (i) => i < _pts.length - 1 ? i : _pts.length - 1;\n    let p0 = _pts[index];\n    index = copyStart ? index : index + 1;\n    return new Group(\n      p0,\n      _pts[_index(index++)],\n      _pts[_index(index++)],\n      _pts[_index(index++)]\n    );\n  }\n  static _calcPt(ctrls, params) {\n    let x = ctrls.reduce((a, c, i) => a + c.x * params[i], 0);\n    let y = ctrls.reduce((a, c, i) => a + c.y * params[i], 0);\n    if (ctrls[0].length > 2) {\n      let z = ctrls.reduce((a, c, i) => a + c.z * params[i], 0);\n      return new Pt(x, y, z);\n    }\n    return new Pt(x, y);\n  }\n  static catmullRom(pts, steps = 10) {\n    let _pts = Util.iterToArray(pts);\n    if (_pts.length < 2)\n      return new Group();\n    let ps = new Group();\n    let ts = Curve.getSteps(steps);\n    let c = Curve.controlPoints(_pts, 0, true);\n    for (let i = 0; i <= steps; i++) {\n      ps.push(Curve.catmullRomStep(ts[i], c));\n    }\n    let k = 0;\n    while (k < _pts.length - 2) {\n      let cp = Curve.controlPoints(_pts, k);\n      if (cp.length > 0) {\n        for (let i = 0; i <= steps; i++) {\n          ps.push(Curve.catmullRomStep(ts[i], cp));\n        }\n        k++;\n      }\n    }\n    return ps;\n  }\n  static catmullRomStep(step, ctrls) {\n    let m = new Group(\n      new Pt(-0.5, 1, -0.5, 0),\n      new Pt(1.5, -2.5, 0, 1),\n      new Pt(-1.5, 2, 0.5, 0),\n      new Pt(0.5, -0.5, 0, 0)\n    );\n    return Curve._calcPt(ctrls, Mat.multiply([step], m, true)[0]);\n  }\n  static cardinal(pts, steps = 10, tension = 0.5) {\n    let _pts = Util.iterToArray(pts);\n    if (_pts.length < 2)\n      return new Group();\n    let ps = new Group();\n    let ts = Curve.getSteps(steps);\n    let c = Curve.controlPoints(_pts, 0, true);\n    for (let i = 0; i <= steps; i++) {\n      ps.push(Curve.cardinalStep(ts[i], c, tension));\n    }\n    let k = 0;\n    while (k < _pts.length - 2) {\n      let cp = Curve.controlPoints(_pts, k);\n      if (cp.length > 0) {\n        for (let i = 0; i <= steps; i++) {\n          ps.push(Curve.cardinalStep(ts[i], cp, tension));\n        }\n        k++;\n      }\n    }\n    return ps;\n  }\n  static cardinalStep(step, ctrls, tension = 0.5) {\n    let m = new Group(\n      new Pt(-1, 2, -1, 0),\n      new Pt(-1, 1, 0, 0),\n      new Pt(1, -2, 1, 0),\n      new Pt(1, -1, 0, 0)\n    );\n    let h = Mat.multiply([step], m, true)[0].multiply(tension);\n    let h2 = 2 * step[0] - 3 * step[1] + 1;\n    let h3 = -2 * step[0] + 3 * step[1];\n    let pt = Curve._calcPt(ctrls, h);\n    pt.x += h2 * ctrls[1].x + h3 * ctrls[2].x;\n    pt.y += h2 * ctrls[1].y + h3 * ctrls[2].y;\n    if (pt.length > 2)\n      pt.z += h2 * ctrls[1].z + h3 * ctrls[2].z;\n    return pt;\n  }\n  static bezier(pts, steps = 10) {\n    let _pts = Util.iterToArray(pts);\n    if (_pts.length < 4)\n      return new Group();\n    let ps = new Group();\n    let ts = Curve.getSteps(steps);\n    let k = 0;\n    while (k < _pts.length - 3) {\n      let c = Curve.controlPoints(_pts, k);\n      if (c.length > 0) {\n        for (let i = 0; i <= steps; i++) {\n          ps.push(Curve.bezierStep(ts[i], c));\n        }\n        k += 3;\n      }\n    }\n    return ps;\n  }\n  static bezierStep(step, ctrls) {\n    let m = new Group(\n      new Pt(-1, 3, -3, 1),\n      new Pt(3, -6, 3, 0),\n      new Pt(-3, 3, 0, 0),\n      new Pt(1, 0, 0, 0)\n    );\n    return Curve._calcPt(ctrls, Mat.multiply([step], m, true)[0]);\n  }\n  static bspline(pts, steps = 10, tension = 1) {\n    let _pts = Util.iterToArray(pts);\n    if (_pts.length < 2)\n      return new Group();\n    let ps = new Group();\n    let ts = Curve.getSteps(steps);\n    let k = 0;\n    while (k < _pts.length - 3) {\n      let c = Curve.controlPoints(_pts, k);\n      if (c.length > 0) {\n        if (tension !== 1) {\n          for (let i = 0; i <= steps; i++) {\n            ps.push(Curve.bsplineTensionStep(ts[i], c, tension));\n          }\n        } else {\n          for (let i = 0; i <= steps; i++) {\n            ps.push(Curve.bsplineStep(ts[i], c));\n          }\n        }\n        k++;\n      }\n    }\n    return ps;\n  }\n  static bsplineStep(step, ctrls) {\n    let m = new Group(\n      new Pt(-0.16666666666666666, 0.5, -0.5, 0.16666666666666666),\n      new Pt(0.5, -1, 0, 0.6666666666666666),\n      new Pt(-0.5, 0.5, 0.5, 0.16666666666666666),\n      new Pt(0.16666666666666666, 0, 0, 0)\n    );\n    return Curve._calcPt(ctrls, Mat.multiply([step], m, true)[0]);\n  }\n  static bsplineTensionStep(step, ctrls, tension = 1) {\n    let m = new Group(\n      new Pt(-0.16666666666666666, 0.5, -0.5, 0.16666666666666666),\n      new Pt(-1.5, 2, 0, -0.3333333333333333),\n      new Pt(1.5, -2.5, 0.5, 0.16666666666666666),\n      new Pt(0.16666666666666666, 0, 0, 0)\n    );\n    let h = Mat.multiply([step], m, true)[0].multiply(tension);\n    let h2 = 2 * step[0] - 3 * step[1] + 1;\n    let h3 = -2 * step[0] + 3 * step[1];\n    let pt = Curve._calcPt(ctrls, h);\n    pt.x += h2 * ctrls[1].x + h3 * ctrls[2].x;\n    pt.y += h2 * ctrls[1].y + h3 * ctrls[2].y;\n    if (pt.length > 2)\n      pt.z += h2 * ctrls[1].z + h3 * ctrls[2].z;\n    return pt;\n  }\n};\n\n// src/uheprng.ts\nfunction Mash() {\n  var n = 4022871197;\n  var mash = function(data) {\n    if (data) {\n      data = data.toString();\n      for (var i = 0; i < data.length; i++) {\n        n += data.charCodeAt(i);\n        var h = 0.02519603282416938 * n;\n        n = h >>> 0;\n        h -= n;\n        h *= n;\n        n = h >>> 0;\n        h -= n;\n        n += h * 4294967296;\n      }\n      return (n >>> 0) * 23283064365386963e-26;\n    } else\n      n = 4022871197;\n  };\n  return mash;\n}\nfunction uheprng_default(seed) {\n  var o = 48;\n  var c = 1;\n  var p = o;\n  var s = new Array(o);\n  var i, j, k = 0;\n  var mash = Mash();\n  for (i = 0; i < o; i++)\n    s[i] = mash(Math.random().toString());\n  function initState() {\n    mash();\n    for (i = 0; i < o; i++)\n      s[i] = mash(\" \");\n    c = 1;\n    p = o;\n  }\n  function cleanString(inStr) {\n    inStr = inStr.replace(/(^\\s*)|(\\s*$)/gi, \"\");\n    inStr = inStr.replace(/[\\x00-\\x1F]/gi, \"\");\n    inStr = inStr.replace(/\\n /, \"\\n\");\n    return inStr;\n  }\n  function hashString(inStr) {\n    inStr = cleanString(inStr);\n    mash(inStr);\n    for (i = 0; i < inStr.length; i++) {\n      k = inStr.charCodeAt(i);\n      for (j = 0; j < o; j++) {\n        s[j] -= mash(k.toString());\n        if (s[j] < 0)\n          s[j] += 1;\n      }\n    }\n  }\n  initState();\n  hashString(seed);\n  return {\n    random() {\n      if (++p >= o)\n        p = 0;\n      var t = 1768863 * s[p] + c * 23283064365386963e-26;\n      return s[p] = t - (c = t | 0);\n    }\n  };\n}\n\n// src/Num.ts\nvar Num = class {\n  static equals(a, b, threshold = 1e-5) {\n    return Math.abs(a - b) < threshold;\n  }\n  static lerp(a, b, t) {\n    return (1 - t) * a + t * b;\n  }\n  static clamp(val, min, max) {\n    return Math.max(min, Math.min(max, val));\n  }\n  static boundValue(val, min, max) {\n    let len = Math.abs(max - min);\n    let a = val % len;\n    if (a > max)\n      a -= len;\n    else if (a < min)\n      a += len;\n    return a;\n  }\n  static within(p, a, b) {\n    return p >= Math.min(a, b) && p <= Math.max(a, b);\n  }\n  static randomRange(a, b = 0) {\n    let r = a > b ? a - b : b - a;\n    return a + Num.random() * r;\n  }\n  static randomPt(a, b) {\n    let p = new Pt(a.length);\n    let range = b ? Vec.subtract(b, a) : a;\n    let start = b ? a : new Pt(a.length).fill(0);\n    for (let i = 0, len = p.length; i < len; i++) {\n      p[i] = Num.random() * range[i] + start[i];\n    }\n    return p;\n  }\n  static normalizeValue(n, a, b) {\n    let min = Math.min(a, b);\n    let max = Math.max(a, b);\n    return (n - min) / (max - min);\n  }\n  static sum(pts) {\n    let _pts = Util.iterToArray(pts);\n    let c = new Pt(_pts[0]);\n    for (let i = 1, len = _pts.length; i < len; i++) {\n      Vec.add(c, _pts[i]);\n    }\n    return c;\n  }\n  static average(pts) {\n    let _pts = Util.iterToArray(pts);\n    return Num.sum(_pts).divide(_pts.length);\n  }\n  static cycle(t, method = Shaping.sineInOut) {\n    return method(t > 0.5 ? 2 - t * 2 : t * 2);\n  }\n  static mapToRange(n, currA, currB, targetA, targetB) {\n    if (currA == currB)\n      throw new Error(\"[currMin, currMax] must define a range that is not zero\");\n    let min = Math.min(targetA, targetB);\n    let max = Math.max(targetA, targetB);\n    return Num.normalizeValue(n, currA, currB) * (max - min) + min;\n  }\n  static seed(seed) {\n    this.generator = uheprng_default(seed);\n  }\n  static random() {\n    return this.generator ? this.generator.random() : Math.random();\n  }\n};\nvar Geom = class {\n  static boundAngle(angle) {\n    return Num.boundValue(angle, 0, 360);\n  }\n  static boundRadian(radian) {\n    return Num.boundValue(radian, 0, Const.two_pi);\n  }\n  static toRadian(angle) {\n    return angle * Const.deg_to_rad;\n  }\n  static toDegree(radian) {\n    return radian * Const.rad_to_deg;\n  }\n  static boundingBox(pts) {\n    let minPt, maxPt;\n    for (let p of pts) {\n      if (minPt == void 0) {\n        minPt = p.clone();\n        maxPt = p.clone();\n      } else {\n        minPt = minPt.$min(p);\n        maxPt = maxPt.$max(p);\n      }\n    }\n    return new Group(minPt, maxPt);\n  }\n  static centroid(pts) {\n    return Num.average(pts);\n  }\n  static anchor(pts, ptOrIndex = 0, direction = \"to\") {\n    let method = direction == \"to\" ? \"subtract\" : \"add\";\n    let i = 0;\n    for (let p of pts) {\n      if (typeof ptOrIndex == \"number\") {\n        if (ptOrIndex !== i)\n          p[method](pts[ptOrIndex]);\n      } else {\n        p[method](ptOrIndex);\n      }\n      i++;\n    }\n  }\n  static interpolate(a, b, t = 0.5) {\n    let len = Math.min(a.length, b.length);\n    let d = Pt.make(len);\n    for (let i = 0; i < len; i++) {\n      d[i] = a[i] * (1 - t) + b[i] * t;\n    }\n    return d;\n  }\n  static perpendicular(pt, axis = Const.xy) {\n    let y = axis[1];\n    let x = axis[0];\n    let p = new Pt(pt);\n    let pa = new Pt(p);\n    pa[x] = -p[y];\n    pa[y] = p[x];\n    let pb = new Pt(p);\n    pb[x] = p[y];\n    pb[y] = -p[x];\n    return new Group(pa, pb);\n  }\n  static isPerpendicular(p1, p2) {\n    return new Pt(p1).dot(p2) === 0;\n  }\n  static withinBound(pt, boundPt1, boundPt2) {\n    for (let i = 0, len = Math.min(pt.length, boundPt1.length, boundPt2.length); i < len; i++) {\n      if (!Num.within(pt[i], boundPt1[i], boundPt2[i]))\n        return false;\n    }\n    return true;\n  }\n  static sortEdges(pts) {\n    let _pts = Util.iterToArray(pts);\n    let bounds = Geom.boundingBox(_pts);\n    let center = bounds[1].add(bounds[0]).divide(2);\n    let fn = (a, b) => {\n      if (a.length < 2 || b.length < 2)\n        throw new Error(\"Pt dimension cannot be less than 2\");\n      let da = a.$subtract(center);\n      let db = b.$subtract(center);\n      if (da[0] >= 0 && db[0] < 0)\n        return 1;\n      if (da[0] < 0 && db[0] >= 0)\n        return -1;\n      if (da[0] == 0 && db[0] == 0) {\n        if (da[1] >= 0 || db[1] >= 0)\n          return da[1] > db[1] ? 1 : -1;\n        return db[1] > da[1] ? 1 : -1;\n      }\n      let det = da.$cross2D(db);\n      if (det < 0)\n        return 1;\n      if (det > 0)\n        return -1;\n      return da[0] * da[0] + da[1] * da[1] > db[0] * db[0] + db[1] * db[1] ? 1 : -1;\n    };\n    return _pts.sort(fn);\n  }\n  static scale(ps, scale, anchor) {\n    let pts = Util.iterToArray(ps[0] !== void 0 && typeof ps[0] == \"number\" ? [ps] : ps);\n    let scs = typeof scale == \"number\" ? Pt.make(pts[0].length, scale) : scale;\n    if (!anchor)\n      anchor = Pt.make(pts[0].length, 0);\n    for (let i = 0, len = pts.length; i < len; i++) {\n      let p = pts[i];\n      for (let k = 0, lenP = p.length; k < lenP; k++) {\n        p[k] = anchor && anchor[k] ? anchor[k] + (p[k] - anchor[k]) * scs[k] : p[k] * scs[k];\n      }\n    }\n    return Geom;\n  }\n  static rotate2D(ps, angle, anchor, axis) {\n    let pts = Util.iterToArray(ps[0] !== void 0 && typeof ps[0] == \"number\" ? [ps] : ps);\n    let fn = anchor ? Mat.rotateAt2DMatrix : Mat.rotate2DMatrix;\n    if (!anchor)\n      anchor = Pt.make(pts[0].length, 0);\n    let cos = Math.cos(angle);\n    let sin = Math.sin(angle);\n    for (let i = 0, len = pts.length; i < len; i++) {\n      let p = axis ? pts[i].$take(axis) : pts[i];\n      p.to(Mat.transform2D(p, fn(cos, sin, anchor)));\n      if (axis) {\n        for (let k = 0; k < axis.length; k++) {\n          pts[i][axis[k]] = p[k];\n        }\n      }\n    }\n    return Geom;\n  }\n  static shear2D(ps, scale, anchor, axis) {\n    let pts = Util.iterToArray(ps[0] !== void 0 && typeof ps[0] == \"number\" ? [ps] : ps);\n    let s = typeof scale == \"number\" ? [scale, scale] : scale;\n    if (!anchor)\n      anchor = Pt.make(pts[0].length, 0);\n    let fn = anchor ? Mat.shearAt2DMatrix : Mat.shear2DMatrix;\n    let tanx = Math.tan(s[0]);\n    let tany = Math.tan(s[1]);\n    for (let i = 0, len = pts.length; i < len; i++) {\n      let p = axis ? pts[i].$take(axis) : pts[i];\n      p.to(Mat.transform2D(p, fn(tanx, tany, anchor)));\n      if (axis) {\n        for (let k = 0; k < axis.length; k++) {\n          pts[i][axis[k]] = p[k];\n        }\n      }\n    }\n    return Geom;\n  }\n  static reflect2D(ps, line, axis) {\n    let pts = Util.iterToArray(ps[0] !== void 0 && typeof ps[0] == \"number\" ? [ps] : ps);\n    let _line = Util.iterToArray(line);\n    let mat = Mat.reflectAt2DMatrix(_line[0], _line[1]);\n    for (let i = 0, len = pts.length; i < len; i++) {\n      let p = axis ? pts[i].$take(axis) : pts[i];\n      p.to(Mat.transform2D(p, mat));\n      if (axis) {\n        for (let k = 0; k < axis.length; k++) {\n          pts[i][axis[k]] = p[k];\n        }\n      }\n    }\n    return Geom;\n  }\n  static cosTable() {\n    let cos = new Float64Array(360);\n    for (let i = 0; i < 360; i++)\n      cos[i] = Math.cos(i * Math.PI / 180);\n    let find = (rad) => cos[Math.floor(Geom.boundAngle(Geom.toDegree(rad)))];\n    return { table: cos, cos: find };\n  }\n  static sinTable() {\n    let sin = new Float64Array(360);\n    for (let i = 0; i < 360; i++)\n      sin[i] = Math.sin(i * Math.PI / 180);\n    let find = (rad) => sin[Math.floor(Geom.boundAngle(Geom.toDegree(rad)))];\n    return { table: sin, sin: find };\n  }\n};\nvar Shaping = class {\n  static linear(t, c = 1) {\n    return c * t;\n  }\n  static quadraticIn(t, c = 1) {\n    return c * t * t;\n  }\n  static quadraticOut(t, c = 1) {\n    return -c * t * (t - 2);\n  }\n  static quadraticInOut(t, c = 1) {\n    let dt = t * 2;\n    return t < 0.5 ? c / 2 * t * t * 4 : -c / 2 * ((dt - 1) * (dt - 3) - 1);\n  }\n  static cubicIn(t, c = 1) {\n    return c * t * t * t;\n  }\n  static cubicOut(t, c = 1) {\n    let dt = t - 1;\n    return c * (dt * dt * dt + 1);\n  }\n  static cubicInOut(t, c = 1) {\n    let dt = t * 2;\n    return t < 0.5 ? c / 2 * dt * dt * dt : c / 2 * ((dt - 2) * (dt - 2) * (dt - 2) + 2);\n  }\n  static exponentialIn(t, c = 1, p = 0.25) {\n    return c * Math.pow(t, 1 / p);\n  }\n  static exponentialOut(t, c = 1, p = 0.25) {\n    return c * Math.pow(t, p);\n  }\n  static sineIn(t, c = 1) {\n    return -c * Math.cos(t * Const.half_pi) + c;\n  }\n  static sineOut(t, c = 1) {\n    return c * Math.sin(t * Const.half_pi);\n  }\n  static sineInOut(t, c = 1) {\n    return -c / 2 * (Math.cos(Math.PI * t) - 1);\n  }\n  static cosineApprox(t, c = 1) {\n    let t2 = t * t;\n    let t4 = t2 * t2;\n    let t6 = t4 * t2;\n    return c * (4 * t6 / 9 - 17 * t4 / 9 + 22 * t2 / 9);\n  }\n  static circularIn(t, c = 1) {\n    return -c * (Math.sqrt(1 - t * t) - 1);\n  }\n  static circularOut(t, c = 1) {\n    let dt = t - 1;\n    return c * Math.sqrt(1 - dt * dt);\n  }\n  static circularInOut(t, c = 1) {\n    let dt = t * 2;\n    return t < 0.5 ? -c / 2 * (Math.sqrt(1 - dt * dt) - 1) : c / 2 * (Math.sqrt(1 - (dt - 2) * (dt - 2)) + 1);\n  }\n  static elasticIn(t, c = 1, p = 0.7) {\n    let dt = t - 1;\n    let s = p / Const.two_pi * 1.5707963267948966;\n    return c * (-Math.pow(2, 10 * dt) * Math.sin((dt - s) * Const.two_pi / p));\n  }\n  static elasticOut(t, c = 1, p = 0.7) {\n    let s = p / Const.two_pi * 1.5707963267948966;\n    return c * (Math.pow(2, -10 * t) * Math.sin((t - s) * Const.two_pi / p)) + c;\n  }\n  static elasticInOut(t, c = 1, p = 0.6) {\n    let dt = t * 2;\n    let s = p / Const.two_pi * 1.5707963267948966;\n    if (t < 0.5) {\n      dt -= 1;\n      return c * (-0.5 * (Math.pow(2, 10 * dt) * Math.sin((dt - s) * Const.two_pi / p)));\n    } else {\n      dt -= 1;\n      return c * (0.5 * (Math.pow(2, -10 * dt) * Math.sin((dt - s) * Const.two_pi / p))) + c;\n    }\n  }\n  static bounceIn(t, c = 1) {\n    return c - Shaping.bounceOut(1 - t, c);\n  }\n  static bounceOut(t, c = 1) {\n    if (t < 1 / 2.75) {\n      return c * (7.5625 * t * t);\n    } else if (t < 2 / 2.75) {\n      t -= 1.5 / 2.75;\n      return c * (7.5625 * t * t + 0.75);\n    } else if (t < 2.5 / 2.75) {\n      t -= 2.25 / 2.75;\n      return c * (7.5625 * t * t + 0.9375);\n    } else {\n      t -= 2.625 / 2.75;\n      return c * (7.5625 * t * t + 0.984375);\n    }\n  }\n  static bounceInOut(t, c = 1) {\n    return t < 0.5 ? Shaping.bounceIn(t * 2, c) / 2 : Shaping.bounceOut(t * 2 - 1, c) / 2 + c / 2;\n  }\n  static sigmoid(t, c = 1, p = 10) {\n    let d = p * (t - 0.5);\n    return c / (1 + Math.exp(-d));\n  }\n  static logSigmoid(t, c = 1, p = 0.7) {\n    p = Math.max(Const.epsilon, Math.min(1 - Const.epsilon, p));\n    p = 1 / (1 - p);\n    let A = 1 / (1 + Math.exp((t - 0.5) * p * -2));\n    let B = 1 / (1 + Math.exp(p));\n    let C = 1 / (1 + Math.exp(-p));\n    return c * (A - B) / (C - B);\n  }\n  static seat(t, c = 1, p = 0.5) {\n    if (t < 0.5) {\n      return c * Math.pow(2 * t, 1 - p) / 2;\n    } else {\n      return c * (1 - Math.pow(2 * (1 - t), 1 - p) / 2);\n    }\n  }\n  static quadraticBezier(t, c = 1, p = [0.05, 0.95]) {\n    let a = typeof p != \"number\" ? p[0] : p;\n    let b = typeof p != \"number\" ? p[1] : 0.5;\n    let om2a = 1 - 2 * a;\n    if (om2a === 0) {\n      om2a = Const.epsilon;\n    }\n    let d = (Math.sqrt(a * a + om2a * t) - a) / om2a;\n    return c * ((1 - 2 * b) * (d * d) + 2 * b * d);\n  }\n  static cubicBezier(t, c = 1, p1 = [0.1, 0.7], p2 = [0.9, 0.2]) {\n    let curve = new Group(new Pt(0, 0), new Pt(p1), new Pt(p2), new Pt(1, 1));\n    return c * Curve.bezierStep(new Pt(t * t * t, t * t, t, 1), Curve.controlPoints(curve)).y;\n  }\n  static quadraticTarget(t, c = 1, p1 = [0.2, 0.35]) {\n    let a = Math.min(1 - Const.epsilon, Math.max(Const.epsilon, p1[0]));\n    let b = Math.min(1, Math.max(0, p1[1]));\n    let A = (1 - b) / (1 - a) - b / a;\n    let B = (A * (a * a) - b) / a;\n    let y = A * (t * t) - B * t;\n    return c * Math.min(1, Math.max(0, y));\n  }\n  static cliff(t, c = 1, p = 0.5) {\n    return t > p ? c : 0;\n  }\n  static step(fn, steps, t, c, ...args) {\n    let s = 1 / steps;\n    let tt = Math.floor(t / s) * s;\n    return fn(tt, c, ...args);\n  }\n};\nvar Range = class {\n  constructor(g) {\n    this._dims = 0;\n    this._source = Group.fromPtArray(g);\n    this.calc();\n  }\n  get max() {\n    return this._max.clone();\n  }\n  get min() {\n    return this._min.clone();\n  }\n  get magnitude() {\n    return this._mag.clone();\n  }\n  calc() {\n    if (!this._source)\n      return;\n    let dims = this._source[0].length;\n    this._dims = dims;\n    let max = new Pt(dims);\n    let min = new Pt(dims);\n    let mag = new Pt(dims);\n    for (let i = 0; i < dims; i++) {\n      max[i] = Const.min;\n      min[i] = Const.max;\n      mag[i] = 0;\n      let s = this._source.zipSlice(i);\n      for (let k = 0, len = s.length; k < len; k++) {\n        max[i] = Math.max(max[i], s[k]);\n        min[i] = Math.min(min[i], s[k]);\n        mag[i] = max[i] - min[i];\n      }\n    }\n    this._max = max;\n    this._min = min;\n    this._mag = mag;\n    return this;\n  }\n  mapTo(min, max, exclude) {\n    let target = new Group();\n    for (let i = 0, len = this._source.length; i < len; i++) {\n      let g = this._source[i];\n      let n = new Pt(this._dims);\n      for (let k = 0; k < this._dims; k++) {\n        n[k] = exclude && exclude[k] ? g[k] : Num.mapToRange(g[k], this._min[k], this._max[k], min, max);\n      }\n      target.push(n);\n    }\n    return target;\n  }\n  append(pts, update = true) {\n    let _pts = Util.iterToArray(pts);\n    if (_pts[0].length !== this._dims)\n      throw new Error(`Dimensions don't match. ${this._dims} dimensions in Range and ${_pts[0].length} provided in parameter. `);\n    this._source = this._source.concat(_pts);\n    if (update)\n      this.calc();\n    return this;\n  }\n  ticks(count) {\n    let g = new Group();\n    for (let i = 0; i <= count; i++) {\n      let p = new Pt(this._dims);\n      for (let k = 0, len = this._max.length; k < len; k++) {\n        p[k] = Num.lerp(this._min[k], this._max[k], i / count);\n      }\n      g.push(p);\n    }\n    return g;\n  }\n};\n\n// src/Util.ts\nvar Const = {\n  xy: \"xy\",\n  yz: \"yz\",\n  xz: \"xz\",\n  xyz: \"xyz\",\n  horizontal: 0,\n  vertical: 1,\n  identical: 0,\n  right: 4,\n  bottom_right: 5,\n  bottom: 6,\n  bottom_left: 7,\n  left: 8,\n  top_left: 1,\n  top: 2,\n  top_right: 3,\n  epsilon: 1e-4,\n  max: Number.MAX_VALUE,\n  min: Number.MIN_VALUE,\n  pi: Math.PI,\n  two_pi: 6.283185307179586,\n  half_pi: 1.5707963267948966,\n  quarter_pi: 0.7853981633974483,\n  one_degree: 0.017453292519943295,\n  rad_to_deg: 57.29577951308232,\n  deg_to_rad: 0.017453292519943295,\n  gravity: 9.81,\n  newton: 0.10197,\n  gaussian: 0.3989422804014327\n};\nvar _Util = class {\n  static warnLevel(lv) {\n    if (lv) {\n      _Util._warnLevel = lv;\n    }\n    return _Util._warnLevel;\n  }\n  static getArgs(args) {\n    if (args.length < 1)\n      return [];\n    let pos = [];\n    let isArray = Array.isArray(args[0]) || ArrayBuffer.isView(args[0]);\n    if (typeof args[0] === \"number\") {\n      pos = Array.prototype.slice.call(args);\n    } else if (typeof args[0] === \"object\" && !isArray) {\n      let a = [\"x\", \"y\", \"z\", \"w\"];\n      let p = args[0];\n      for (let i = 0; i < a.length; i++) {\n        if (p.length && i >= p.length || !(a[i] in p))\n          break;\n        pos.push(p[a[i]]);\n      }\n    } else if (isArray) {\n      pos = [].slice.call(args[0]);\n    }\n    return pos;\n  }\n  static warn(message = \"error\", defaultReturn = void 0) {\n    if (_Util.warnLevel() == \"error\") {\n      throw new Error(message);\n    } else if (_Util.warnLevel() == \"warn\") {\n      console.warn(message);\n    }\n    return defaultReturn;\n  }\n  static randomInt(range, start = 0) {\n    _Util.warn(\"Util.randomInt is deprecated. Please use `Num.randomRange`\");\n    return Math.floor(Num.random() * range) + start;\n  }\n  static split(pts, size, stride, loopBack = false, matchSize = true) {\n    let chunks = [];\n    let part = [];\n    let st = stride || size;\n    let index = 0;\n    if (pts.length <= 0 || st <= 0)\n      return [];\n    while (index < pts.length) {\n      part = [];\n      for (let k = 0; k < size; k++) {\n        if (loopBack) {\n          part.push(pts[(index + k) % pts.length]);\n        } else {\n          if (index + k >= pts.length)\n            break;\n          part.push(pts[index + k]);\n        }\n      }\n      index += st;\n      if (!matchSize || matchSize && part.length === size)\n        chunks.push(part);\n    }\n    return chunks;\n  }\n  static flatten(pts, flattenAsGroup = true) {\n    let arr = flattenAsGroup ? new Group() : new Array();\n    return arr.concat.apply(arr, pts);\n  }\n  static combine(a, b, op) {\n    let result = [];\n    for (let i = 0, len = a.length; i < len; i++) {\n      for (let k = 0, lenB = b.length; k < lenB; k++) {\n        result.push(op(a[i], b[k]));\n      }\n    }\n    return result;\n  }\n  static zip(arrays) {\n    let z = [];\n    for (let i = 0, len = arrays[0].length; i < len; i++) {\n      let p = [];\n      for (let k = 0; k < arrays.length; k++) {\n        p.push(arrays[k][i]);\n      }\n      z.push(p);\n    }\n    return z;\n  }\n  static stepper(max, min = 0, stride = 1, callback) {\n    let c = min;\n    return function() {\n      c += stride;\n      if (c >= max) {\n        c = min + (c - max);\n      }\n      if (callback)\n        callback(c);\n      return c;\n    };\n  }\n  static forRange(fn, range, start = 0, step = 1) {\n    let temp = [];\n    for (let i = start, len = range; i < len; i += step) {\n      temp[i] = fn(i);\n    }\n    return temp;\n  }\n  static load(url, callback) {\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", url, true);\n    request.onload = function() {\n      if (request.status >= 200 && request.status < 400) {\n        callback(request.responseText, true);\n      } else {\n        callback(`Server error (${request.status}) when loading \"${url}\"`, false);\n      }\n    };\n    request.onerror = function() {\n      callback(`Unknown network error`, false);\n    };\n    request.send();\n  }\n  static download(space, filename = \"pts_canvas_image\", filetype = \"png\", quality = 1) {\n    const ftype = filetype === \"jpg\" ? \"jpeg\" : filetype;\n    space.element.toBlob(function(blob) {\n      const link = document.createElement(\"a\");\n      const url = URL.createObjectURL(blob);\n      link.href = url;\n      link.download = `${filename}.${filetype}`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      URL.revokeObjectURL(url);\n    }, `image/${ftype}`, quality);\n  }\n  static performance(avgFrames = 10) {\n    let last = Date.now();\n    let avg = [];\n    return function() {\n      const now = Date.now();\n      avg.push(now - last);\n      if (avg.length >= avgFrames)\n        avg.shift();\n      last = now;\n      return Math.floor(avg.reduce((a, b) => a + b, 0) / avg.length);\n    };\n  }\n  static arrayCheck(pts, minRequired = 2) {\n    if (Array.isArray(pts) && pts.length < minRequired) {\n      _Util.warn(`Requires ${minRequired} or more Pts in this Group.`);\n      return false;\n    }\n    return true;\n  }\n  static iterToArray(it) {\n    return !Array.isArray(it) ? [...it] : it;\n  }\n  static isMobile() {\n    return /iPhone|iPad|Android/i.test(navigator.userAgent);\n  }\n};\nvar Util = _Util;\nUtil._warnLevel = \"mute\";\n\n// src/Pt.ts\nvar Pt = class extends Float32Array {\n  constructor(...args) {\n    var __super = (...args) => {\n      super(...args);\n    };\n    if (args.length === 1 && typeof args[0] == \"number\") {\n      __super(args[0]);\n    } else {\n      __super(args.length > 0 ? Util.getArgs(args) : [0, 0]);\n    }\n  }\n  static make(dimensions, defaultValue = 0, randomize = false) {\n    let p = new Float32Array(dimensions);\n    if (defaultValue)\n      p.fill(defaultValue);\n    if (randomize) {\n      for (let i = 0, len = p.length; i < len; i++) {\n        p[i] = p[i] * Num.random();\n      }\n    }\n    return new Pt(p);\n  }\n  get id() {\n    return this._id;\n  }\n  set id(s) {\n    this._id = s;\n  }\n  get x() {\n    return this[0];\n  }\n  set x(n) {\n    this[0] = n;\n  }\n  get y() {\n    return this[1];\n  }\n  set y(n) {\n    this[1] = n;\n  }\n  get z() {\n    return this[2];\n  }\n  set z(n) {\n    this[2] = n;\n  }\n  get w() {\n    return this[3];\n  }\n  set w(n) {\n    this[3] = n;\n  }\n  clone() {\n    return new Pt(this);\n  }\n  equals(p, threshold = 1e-6) {\n    for (let i = 0, len = this.length; i < len; i++) {\n      if (Math.abs(this[i] - p[i]) > threshold)\n        return false;\n    }\n    return true;\n  }\n  to(...args) {\n    let p = Util.getArgs(args);\n    for (let i = 0, len = Math.min(this.length, p.length); i < len; i++) {\n      this[i] = p[i];\n    }\n    return this;\n  }\n  $to(...args) {\n    return this.clone().to(...args);\n  }\n  toAngle(radian, magnitude, anchorFromPt = false) {\n    let m = magnitude != void 0 ? magnitude : this.magnitude();\n    let change = [Math.cos(radian) * m, Math.sin(radian) * m];\n    return anchorFromPt ? this.add(change) : this.to(change);\n  }\n  op(fn) {\n    let self = this;\n    return (...params) => {\n      return fn(self, ...params);\n    };\n  }\n  ops(fns) {\n    let _ops = [];\n    for (let i = 0, len = fns.length; i < len; i++) {\n      _ops.push(this.op(fns[i]));\n    }\n    return _ops;\n  }\n  $take(axis) {\n    let p = [];\n    for (let i = 0, len = axis.length; i < len; i++) {\n      p.push(this[axis[i]] || 0);\n    }\n    return new Pt(p);\n  }\n  $concat(...args) {\n    return new Pt(this.toArray().concat(Util.getArgs(args)));\n  }\n  add(...args) {\n    args.length === 1 && typeof args[0] == \"number\" ? Vec.add(this, args[0]) : Vec.add(this, Util.getArgs(args));\n    return this;\n  }\n  $add(...args) {\n    return this.clone().add(...args);\n  }\n  subtract(...args) {\n    args.length === 1 && typeof args[0] == \"number\" ? Vec.subtract(this, args[0]) : Vec.subtract(this, Util.getArgs(args));\n    return this;\n  }\n  $subtract(...args) {\n    return this.clone().subtract(...args);\n  }\n  multiply(...args) {\n    args.length === 1 && typeof args[0] == \"number\" ? Vec.multiply(this, args[0]) : Vec.multiply(this, Util.getArgs(args));\n    return this;\n  }\n  $multiply(...args) {\n    return this.clone().multiply(...args);\n  }\n  divide(...args) {\n    args.length === 1 && typeof args[0] == \"number\" ? Vec.divide(this, args[0]) : Vec.divide(this, Util.getArgs(args));\n    return this;\n  }\n  $divide(...args) {\n    return this.clone().divide(...args);\n  }\n  magnitudeSq() {\n    return Vec.dot(this, this);\n  }\n  magnitude() {\n    return Vec.magnitude(this);\n  }\n  unit(magnitude = void 0) {\n    Vec.unit(this, magnitude);\n    return this;\n  }\n  $unit(magnitude = void 0) {\n    return this.clone().unit(magnitude);\n  }\n  dot(...args) {\n    return Vec.dot(this, Util.getArgs(args));\n  }\n  $cross2D(...args) {\n    return Vec.cross2D(this, Util.getArgs(args));\n  }\n  $cross(...args) {\n    return Vec.cross(this, Util.getArgs(args));\n  }\n  $project(...args) {\n    return this.$multiply(this.dot(...args) / this.magnitudeSq());\n  }\n  projectScalar(...args) {\n    return this.dot(...args) / this.magnitude();\n  }\n  abs() {\n    Vec.abs(this);\n    return this;\n  }\n  $abs() {\n    return this.clone().abs();\n  }\n  floor() {\n    Vec.floor(this);\n    return this;\n  }\n  $floor() {\n    return this.clone().floor();\n  }\n  ceil() {\n    Vec.ceil(this);\n    return this;\n  }\n  $ceil() {\n    return this.clone().ceil();\n  }\n  round() {\n    Vec.round(this);\n    return this;\n  }\n  $round() {\n    return this.clone().round();\n  }\n  minValue() {\n    return Vec.min(this);\n  }\n  maxValue() {\n    return Vec.max(this);\n  }\n  $min(...args) {\n    let p = Util.getArgs(args);\n    let m = this.clone();\n    for (let i = 0, len = Math.min(this.length, p.length); i < len; i++) {\n      m[i] = Math.min(this[i], p[i]);\n    }\n    return m;\n  }\n  $max(...args) {\n    let p = Util.getArgs(args);\n    let m = this.clone();\n    for (let i = 0, len = Math.min(this.length, p.length); i < len; i++) {\n      m[i] = Math.max(this[i], p[i]);\n    }\n    return m;\n  }\n  angle(axis = Const.xy) {\n    return Math.atan2(this[axis[1]], this[axis[0]]);\n  }\n  angleBetween(p, axis = Const.xy) {\n    return Geom.boundRadian(this.angle(axis)) - Geom.boundRadian(p.angle(axis));\n  }\n  scale(scale, anchor) {\n    Geom.scale(this, scale, anchor || Pt.make(this.length, 0));\n    return this;\n  }\n  rotate2D(angle, anchor, axis) {\n    Geom.rotate2D(this, angle, anchor || Pt.make(this.length, 0), axis);\n    return this;\n  }\n  shear2D(scale, anchor, axis) {\n    Geom.shear2D(this, scale, anchor || Pt.make(this.length, 0), axis);\n    return this;\n  }\n  reflect2D(line, axis) {\n    Geom.reflect2D(this, line, axis);\n    return this;\n  }\n  toString() {\n    return `Pt(${this.join(\", \")})`;\n  }\n  toArray() {\n    return [].slice.call(this);\n  }\n  toGroup() {\n    return new Group(Pt.make(this.length), this.clone());\n  }\n  toBound() {\n    return new Bound(Pt.make(this.length), this.clone());\n  }\n};\nvar Group = class extends Array {\n  constructor(...args) {\n    super(...args);\n  }\n  get id() {\n    return this._id;\n  }\n  set id(s) {\n    this._id = s;\n  }\n  get p1() {\n    return this[0];\n  }\n  get p2() {\n    return this[1];\n  }\n  get p3() {\n    return this[2];\n  }\n  get p4() {\n    return this[3];\n  }\n  get q1() {\n    return this[this.length - 1];\n  }\n  get q2() {\n    return this[this.length - 2];\n  }\n  get q3() {\n    return this[this.length - 3];\n  }\n  get q4() {\n    return this[this.length - 4];\n  }\n  clone() {\n    let group = new Group();\n    for (let i = 0, len = this.length; i < len; i++) {\n      group.push(this[i].clone());\n    }\n    return group;\n  }\n  static fromArray(list) {\n    let g = new Group();\n    for (let li of list) {\n      let p = li instanceof Pt ? li : new Pt(li);\n      g.push(p);\n    }\n    return g;\n  }\n  static fromPtArray(list) {\n    return Group.from(list);\n  }\n  split(chunkSize, stride, loopBack = false) {\n    let sp = Util.split(this, chunkSize, stride, loopBack);\n    return sp;\n  }\n  insert(pts, index = 0) {\n    Group.prototype.splice.apply(this, [index, 0, ...pts]);\n    return this;\n  }\n  remove(index = 0, count = 1) {\n    let param = index < 0 ? [index * -1 - 1, count] : [index, count];\n    return Group.prototype.splice.apply(this, param);\n  }\n  segments(pts_per_segment = 2, stride = 1, loopBack = false) {\n    return this.split(pts_per_segment, stride, loopBack);\n  }\n  lines() {\n    return this.segments(2, 1);\n  }\n  centroid() {\n    return Geom.centroid(this);\n  }\n  boundingBox() {\n    return Geom.boundingBox(this);\n  }\n  anchorTo(ptOrIndex = 0) {\n    Geom.anchor(this, ptOrIndex, \"to\");\n  }\n  anchorFrom(ptOrIndex = 0) {\n    Geom.anchor(this, ptOrIndex, \"from\");\n  }\n  op(fn) {\n    let self = this;\n    return (...params) => {\n      return fn(self, ...params);\n    };\n  }\n  ops(fns) {\n    let _ops = [];\n    for (let i = 0, len = fns.length; i < len; i++) {\n      _ops.push(this.op(fns[i]));\n    }\n    return _ops;\n  }\n  interpolate(t) {\n    t = Num.clamp(t, 0, 1);\n    let chunk = this.length - 1;\n    let tc = 1 / (this.length - 1);\n    let idx = Math.floor(t / tc);\n    return Geom.interpolate(this[idx], this[Math.min(this.length - 1, idx + 1)], (t - idx * tc) * chunk);\n  }\n  moveBy(...args) {\n    return this.add(...args);\n  }\n  moveTo(...args) {\n    let d = new Pt(Util.getArgs(args)).subtract(this[0]);\n    this.moveBy(d);\n    return this;\n  }\n  scale(scale, anchor) {\n    for (let i = 0, len = this.length; i < len; i++) {\n      Geom.scale(this[i], scale, anchor || this[0]);\n    }\n    return this;\n  }\n  rotate2D(angle, anchor, axis) {\n    for (let i = 0, len = this.length; i < len; i++) {\n      Geom.rotate2D(this[i], angle, anchor || this[0], axis);\n    }\n    return this;\n  }\n  shear2D(scale, anchor, axis) {\n    for (let i = 0, len = this.length; i < len; i++) {\n      Geom.shear2D(this[i], scale, anchor || this[0], axis);\n    }\n    return this;\n  }\n  reflect2D(line, axis) {\n    for (let i = 0, len = this.length; i < len; i++) {\n      Geom.reflect2D(this[i], line, axis);\n    }\n    return this;\n  }\n  sortByDimension(dim, desc = false) {\n    return this.sort((a, b) => desc ? b[dim] - a[dim] : a[dim] - b[dim]);\n  }\n  forEachPt(ptFn, ...args) {\n    if (!this[0][ptFn]) {\n      Util.warn(`${ptFn} is not a function of Pt`);\n      return this;\n    }\n    for (let i = 0, len = this.length; i < len; i++) {\n      this[i] = this[i][ptFn](...args);\n    }\n    return this;\n  }\n  add(...args) {\n    return this.forEachPt(\"add\", ...args);\n  }\n  subtract(...args) {\n    return this.forEachPt(\"subtract\", ...args);\n  }\n  multiply(...args) {\n    return this.forEachPt(\"multiply\", ...args);\n  }\n  divide(...args) {\n    return this.forEachPt(\"divide\", ...args);\n  }\n  $matrixAdd(g) {\n    return Mat.add(this, g);\n  }\n  $matrixMultiply(g, transposed = false, elementwise = false) {\n    return Mat.multiply(this, g, transposed, elementwise);\n  }\n  zipSlice(index, defaultValue = false) {\n    return Mat.zipSlice(this, index, defaultValue);\n  }\n  $zip(defaultValue = void 0, useLongest = false) {\n    return Mat.zip(this, defaultValue, useLongest);\n  }\n  toBound() {\n    return Bound.fromGroup(this);\n  }\n  toString() {\n    return \"Group[ \" + this.reduce((p, c) => p + c.toString() + \" \", \"\") + \" ]\";\n  }\n};\nvar Bound = class extends Group {\n  constructor(...args) {\n    super(...args);\n    this._center = new Pt();\n    this._size = new Pt();\n    this._topLeft = new Pt();\n    this._bottomRight = new Pt();\n    this._inited = false;\n    this.init();\n  }\n  static fromBoundingRect(rect) {\n    let b = new Bound(new Pt(rect.left || 0, rect.top || 0), new Pt(rect.right || 0, rect.bottom || 0));\n    if (rect.width && rect.height)\n      b.size = new Pt(rect.width, rect.height);\n    return b;\n  }\n  static fromGroup(g) {\n    let _g = Util.iterToArray(g);\n    if (_g.length < 2)\n      throw new Error(\"Cannot create a Bound from a group that has less than 2 Pt\");\n    return new Bound(_g[0], _g[_g.length - 1]);\n  }\n  init() {\n    if (this.p1) {\n      this._size = this.p1.clone();\n      this._inited = true;\n    }\n    if (this.p1 && this.p2) {\n      let a = this.p1;\n      let b = this.p2;\n      this.topLeft = a.$min(b);\n      this._bottomRight = a.$max(b);\n      this._updateSize();\n      this._inited = true;\n    }\n  }\n  clone() {\n    return new Bound(this._topLeft.clone(), this._bottomRight.clone());\n  }\n  _updateSize() {\n    this._size = this._bottomRight.$subtract(this._topLeft).abs();\n    this._updateCenter();\n  }\n  _updateCenter() {\n    this._center = this._size.$multiply(0.5).add(this._topLeft);\n  }\n  _updatePosFromTop() {\n    this._bottomRight = this._topLeft.$add(this._size);\n    this._updateCenter();\n  }\n  _updatePosFromBottom() {\n    this._topLeft = this._bottomRight.$subtract(this._size);\n    this._updateCenter();\n  }\n  _updatePosFromCenter() {\n    let half = this._size.$multiply(0.5);\n    this._topLeft = this._center.$subtract(half);\n    this._bottomRight = this._center.$add(half);\n  }\n  get size() {\n    return new Pt(this._size);\n  }\n  set size(p) {\n    this._size = new Pt(p);\n    this._updatePosFromTop();\n  }\n  get center() {\n    return new Pt(this._center);\n  }\n  set center(p) {\n    this._center = new Pt(p);\n    this._updatePosFromCenter();\n  }\n  get topLeft() {\n    return new Pt(this._topLeft);\n  }\n  set topLeft(p) {\n    this._topLeft = new Pt(p);\n    this[0] = this._topLeft;\n    this._updateSize();\n  }\n  get bottomRight() {\n    return new Pt(this._bottomRight);\n  }\n  set bottomRight(p) {\n    this._bottomRight = new Pt(p);\n    this[1] = this._bottomRight;\n    this._updateSize();\n  }\n  get width() {\n    return this._size.length > 0 ? this._size.x : 0;\n  }\n  set width(w) {\n    this._size.x = w;\n    this._updatePosFromTop();\n  }\n  get height() {\n    return this._size.length > 1 ? this._size.y : 0;\n  }\n  set height(h) {\n    this._size.y = h;\n    this._updatePosFromTop();\n  }\n  get depth() {\n    return this._size.length > 2 ? this._size.z : 0;\n  }\n  set depth(d) {\n    this._size.z = d;\n    this._updatePosFromTop();\n  }\n  get x() {\n    return this.topLeft.x;\n  }\n  get y() {\n    return this.topLeft.y;\n  }\n  get z() {\n    return this.topLeft.z;\n  }\n  get inited() {\n    return this._inited;\n  }\n  update() {\n    this._topLeft = this[0];\n    this._bottomRight = this[1];\n    this._updateSize();\n    return this;\n  }\n};\n\n// src/UI.ts\nvar UIShape = {\n  rectangle: \"rectangle\",\n  circle: \"circle\",\n  polygon: \"polygon\",\n  polyline: \"polyline\",\n  line: \"line\"\n};\nvar UIPointerActions = {\n  up: \"up\",\n  down: \"down\",\n  move: \"move\",\n  drag: \"drag\",\n  uidrag: \"uidrag\",\n  drop: \"drop\",\n  uidrop: \"uidrop\",\n  over: \"over\",\n  out: \"out\",\n  enter: \"enter\",\n  leave: \"leave\",\n  click: \"click\",\n  keydown: \"keydown\",\n  keyup: \"keyup\",\n  contextmenu: \"contextmenu\",\n  all: \"all\"\n};\nvar _UI = class {\n  constructor(group, shape, states = {}, id) {\n    this._holds = /* @__PURE__ */ new Map();\n    this._group = Group.fromArray(group);\n    this._shape = shape;\n    this._id = id === void 0 ? `ui_${_UI._counter++}` : id;\n    this._states = states;\n    this._actions = {};\n  }\n  static fromRectangle(group, states, id) {\n    return new this(group, UIShape.rectangle, states, id);\n  }\n  static fromCircle(group, states, id) {\n    return new this(group, UIShape.circle, states, id);\n  }\n  static fromPolygon(group, states, id) {\n    return new this(group, UIShape.polygon, states, id);\n  }\n  static fromUI(ui, states, id) {\n    return new this(ui.group, ui.shape, states || ui._states, id);\n  }\n  get id() {\n    return this._id;\n  }\n  set id(d) {\n    this._id = d;\n  }\n  get group() {\n    return this._group;\n  }\n  set group(d) {\n    this._group = d;\n  }\n  get shape() {\n    return this._shape;\n  }\n  set shape(d) {\n    this._shape = d;\n  }\n  state(key, value) {\n    if (!key)\n      return null;\n    if (value !== void 0) {\n      this._states[key] = value;\n      return this;\n    }\n    return this._states[key];\n  }\n  on(type, fn) {\n    if (!this._actions[type])\n      this._actions[type] = [];\n    return _UI._addHandler(this._actions[type], fn);\n  }\n  off(type, which) {\n    if (!this._actions[type])\n      return false;\n    if (which === void 0) {\n      delete this._actions[type];\n      return true;\n    } else {\n      return _UI._removeHandler(this._actions[type], which);\n    }\n  }\n  listen(type, p, evt) {\n    if (this._actions[type] !== void 0) {\n      if (this._within(p) || Array.from(this._holds.values()).indexOf(type) >= 0) {\n        _UI._trigger(this._actions[type], this, p, type, evt);\n        return true;\n      } else if (this._actions[\"all\"]) {\n        _UI._trigger(this._actions[\"all\"], this, p, type, evt);\n        return true;\n      }\n    }\n    return false;\n  }\n  hold(type) {\n    let newKey = Math.max(0, ...Array.from(this._holds.keys())) + 1;\n    this._holds.set(newKey, type);\n    return newKey;\n  }\n  unhold(key) {\n    if (key !== void 0) {\n      this._holds.delete(key);\n    } else {\n      this._holds.clear();\n    }\n  }\n  static track(uis, type, p, evt) {\n    for (let i = 0, len = uis.length; i < len; i++) {\n      uis[i].listen(type, p, evt);\n    }\n  }\n  render(fn) {\n    fn(this._group, this._states);\n  }\n  toString() {\n    return `UI ${this.group.toString}`;\n  }\n  _within(p) {\n    let fn = null;\n    if (this._shape === UIShape.rectangle) {\n      fn = Rectangle.withinBound;\n    } else if (this._shape === UIShape.circle) {\n      fn = Circle.withinBound;\n    } else if (this._shape === UIShape.polygon) {\n      fn = Polygon.hasIntersectPoint;\n    } else {\n      return false;\n    }\n    return fn(this._group, p);\n  }\n  static _trigger(fns, target, pt, type, evt) {\n    if (fns) {\n      for (let i = 0, len = fns.length; i < len; i++) {\n        if (fns[i])\n          fns[i](target, pt, type, evt);\n      }\n    }\n  }\n  static _addHandler(fns, fn) {\n    if (fn) {\n      fns.push(fn);\n      return fns.length - 1;\n    } else {\n      return -1;\n    }\n  }\n  static _removeHandler(fns, index) {\n    if (index >= 0 && index < fns.length) {\n      let temp = fns.length;\n      fns.splice(index, 1);\n      return temp > fns.length;\n    } else {\n      return false;\n    }\n  }\n};\nvar UI = _UI;\nUI._counter = 0;\nvar UIButton = class extends UI {\n  constructor(group, shape, states = {}, id) {\n    super(group, shape, states, id);\n    this._hoverID = -1;\n    if (states.hover === void 0)\n      this._states[\"hover\"] = false;\n    if (states.clicks === void 0)\n      this._states[\"clicks\"] = 0;\n    const UA = UIPointerActions;\n    this.on(UA.up, (target, pt, type, evt) => {\n      this.state(\"clicks\", this._states.clicks + 1);\n    });\n    this.on(UA.move, (target, pt, type, evt) => {\n      let hover = this._within(pt);\n      if (hover && !this._states.hover) {\n        this.state(\"hover\", true);\n        UI._trigger(this._actions[UA.enter], this, pt, UA.enter, evt);\n        var _capID = this.hold(UA.move);\n        this._hoverID = this.on(UA.move, (t, p) => {\n          if (!this._within(p) && !this.state(\"dragging\")) {\n            this.state(\"hover\", false);\n            UI._trigger(this._actions[UA.leave], this, pt, UA.leave, evt);\n            this.off(UA.move, this._hoverID);\n            this.unhold(_capID);\n          }\n        });\n      }\n    });\n  }\n  onClick(fn) {\n    return this.on(UIPointerActions.up, fn);\n  }\n  offClick(id) {\n    return this.off(UIPointerActions.up, id);\n  }\n  onContextMenu(fn) {\n    return this.on(UIPointerActions.contextmenu, fn);\n  }\n  offContextMenu(id) {\n    return this.off(UIPointerActions.contextmenu, id);\n  }\n  onHover(enter, leave) {\n    var ids = [void 0, void 0];\n    if (enter)\n      ids[0] = this.on(UIPointerActions.enter, enter);\n    if (leave)\n      ids[1] = this.on(UIPointerActions.leave, leave);\n    return ids;\n  }\n  offHover(enterID, leaveID) {\n    var s = [false, false];\n    if (enterID === void 0 || enterID >= 0)\n      s[0] = this.off(UIPointerActions.enter, enterID);\n    if (leaveID === void 0 || leaveID >= 0)\n      s[1] = this.off(UIPointerActions.leave, leaveID);\n    return s;\n  }\n};\nvar UIDragger = class extends UIButton {\n  constructor(group, shape, states = {}, id) {\n    super(group, shape, states, id);\n    this._draggingID = -1;\n    this._moveHoldID = -1;\n    this._dropHoldID = -1;\n    this._upHoldID = -1;\n    if (states.dragging === void 0)\n      this._states[\"dragging\"] = false;\n    if (states.moved === void 0)\n      this._states[\"moved\"] = false;\n    if (states.offset === void 0)\n      this._states[\"offset\"] = new Pt();\n    const UA = UIPointerActions;\n    this.on(UA.down, (target, pt, type, evt) => {\n      if (this._moveHoldID === -1) {\n        this.state(\"dragging\", true);\n        this.state(\"offset\", new Pt(pt).subtract(target.group[0]));\n        this._moveHoldID = this.hold(UA.move);\n      }\n      if (this._dropHoldID === -1) {\n        this._dropHoldID = this.hold(UA.drop);\n      }\n      if (this._upHoldID === -1) {\n        this._upHoldID = this.hold(UA.up);\n      }\n      if (this._draggingID === -1) {\n        this._draggingID = this.on(UA.move, (t, p) => {\n          if (this.state(\"dragging\")) {\n            UI._trigger(this._actions[UA.uidrag], t, p, UA.uidrag, evt);\n            this.state(\"moved\", true);\n          }\n        });\n      }\n    });\n    const endDrag = (target, pt, type, evt) => {\n      this.state(\"dragging\", false);\n      this.off(UA.move, this._draggingID);\n      this._draggingID = -1;\n      this.unhold(this._moveHoldID);\n      this._moveHoldID = -1;\n      this.unhold(this._dropHoldID);\n      this._dropHoldID = -1;\n      this.unhold(this._upHoldID);\n      this._upHoldID = -1;\n      if (this.state(\"moved\")) {\n        UI._trigger(this._actions[UA.uidrop], target, pt, UA.uidrop, evt);\n        this.state(\"moved\", false);\n      }\n    };\n    this.on(UA.drop, endDrag);\n    this.on(UA.up, endDrag);\n    this.on(UA.out, endDrag);\n  }\n  onDrag(fn) {\n    return this.on(UIPointerActions.uidrag, fn);\n  }\n  offDrag(id) {\n    return this.off(UIPointerActions.uidrag, id);\n  }\n  onDrop(fn) {\n    return this.on(UIPointerActions.uidrop, fn);\n  }\n  offDrop(id) {\n    return this.off(UIPointerActions.uidrop, id);\n  }\n};\n\n// src/Space.ts\nvar Space = class {\n  constructor() {\n    this.id = \"space\";\n    this.bound = new Bound();\n    this._time = { prev: 0, diff: 0, end: -1, min: 0 };\n    this.players = {};\n    this.playerCount = 0;\n    this._animID = -1;\n    this._pause = false;\n    this._refresh = void 0;\n    this._pointer = new Pt();\n    this._isReady = false;\n    this._playing = false;\n  }\n  refresh(b) {\n    this._refresh = b;\n    return this;\n  }\n  minFrameTime(ms = 0) {\n    this._time.min = ms;\n  }\n  add(p) {\n    let player = typeof p == \"function\" ? { animate: p } : p;\n    let k = this.playerCount++;\n    let pid = this.id + k;\n    this.players[pid] = player;\n    player.animateID = pid;\n    if (player.resize && this.bound.inited)\n      player.resize(this.bound);\n    if (this._refresh === void 0)\n      this._refresh = true;\n    return this;\n  }\n  remove(player) {\n    delete this.players[player.animateID];\n    return this;\n  }\n  removeAll() {\n    this.players = {};\n    return this;\n  }\n  play(time = 0) {\n    if (time === 0 && this._animID !== -1) {\n      return;\n    }\n    this._animID = requestAnimationFrame(this.play.bind(this));\n    if (this._pause)\n      return this;\n    this._time.diff = time - this._time.prev;\n    if (this._time.diff < this._time.min)\n      return this;\n    this._time.prev = time;\n    try {\n      this.playItems(time);\n    } catch (err) {\n      cancelAnimationFrame(this._animID);\n      this._animID = -1;\n      this._playing = false;\n      throw err;\n    }\n    return this;\n  }\n  replay() {\n    this._time.end = -1;\n    this.play();\n  }\n  playItems(time) {\n    this._playing = true;\n    if (this._refresh)\n      this.clear();\n    if (this._isReady) {\n      for (let k in this.players) {\n        if (this.players[k].animate)\n          this.players[k].animate(time, this._time.diff, this);\n      }\n    }\n    if (this._time.end >= 0 && time > this._time.end) {\n      cancelAnimationFrame(this._animID);\n      this._animID = -1;\n      this._playing = false;\n    }\n  }\n  pause(toggle = false) {\n    this._pause = toggle ? !this._pause : true;\n    return this;\n  }\n  resume() {\n    this._pause = false;\n    return this;\n  }\n  stop(t = 0) {\n    this._time.end = t;\n    return this;\n  }\n  playOnce(duration = 0) {\n    this.play();\n    this.stop(duration);\n    return this;\n  }\n  render(context) {\n    if (this._renderFunc)\n      this._renderFunc(context, this);\n    return this;\n  }\n  set customRendering(f) {\n    this._renderFunc = f;\n  }\n  get customRendering() {\n    return this._renderFunc;\n  }\n  get isPlaying() {\n    return this._playing;\n  }\n  get outerBound() {\n    return this.bound.clone();\n  }\n  get innerBound() {\n    return new Bound(Pt.make(this.size.length, 0), this.size.clone());\n  }\n  get size() {\n    return this.bound.size.clone();\n  }\n  get center() {\n    return this.size.divide(2);\n  }\n  get width() {\n    return this.bound.width;\n  }\n  get height() {\n    return this.bound.height;\n  }\n};\nvar MultiTouchSpace = class extends Space {\n  constructor() {\n    super(...arguments);\n    this._pressed = false;\n    this._dragged = false;\n    this._hasMouse = false;\n    this._hasTouch = false;\n    this._hasKeyboard = false;\n  }\n  get pointer() {\n    let p = this._pointer.clone();\n    p.id = this._pointer.id;\n    return p;\n  }\n  bindCanvas(evt, callback, options = {}, customTarget) {\n    const target = customTarget ? customTarget : this._canvas;\n    target.addEventListener(evt, callback, options);\n  }\n  unbindCanvas(evt, callback, options = {}, customTarget) {\n    const target = customTarget ? customTarget : this._canvas;\n    target.removeEventListener(evt, callback, options);\n  }\n  bindDoc(evt, callback, options = {}) {\n    if (document) {\n      document.addEventListener(evt, callback, options);\n    }\n  }\n  unbindDoc(evt, callback, options = {}) {\n    if (document) {\n      document.removeEventListener(evt, callback, options);\n    }\n  }\n  bindMouse(bind = true, customTarget) {\n    if (bind) {\n      this._mouseDown = this._mouseDown.bind(this);\n      this._mouseUp = this._mouseUp.bind(this);\n      this._mouseOver = this._mouseOver.bind(this);\n      this._mouseOut = this._mouseOut.bind(this);\n      this._mouseMove = this._mouseMove.bind(this);\n      this._mouseClick = this._mouseClick.bind(this);\n      this._contextMenu = this._contextMenu.bind(this);\n      this.bindCanvas(\"mousedown\", this._mouseDown, {}, customTarget);\n      this.bindCanvas(\"mouseup\", this._mouseUp, {}, customTarget);\n      this.bindCanvas(\"mouseover\", this._mouseOver, {}, customTarget);\n      this.bindCanvas(\"mouseout\", this._mouseOut, {}, customTarget);\n      this.bindCanvas(\"mousemove\", this._mouseMove, {}, customTarget);\n      this.bindCanvas(\"click\", this._mouseClick, {}, customTarget);\n      this.bindCanvas(\"contextmenu\", this._contextMenu, {}, customTarget);\n      this._hasMouse = true;\n    } else {\n      this.unbindCanvas(\"mousedown\", this._mouseDown, {}, customTarget);\n      this.unbindCanvas(\"mouseup\", this._mouseUp, {}, customTarget);\n      this.unbindCanvas(\"mouseover\", this._mouseOver, {}, customTarget);\n      this.unbindCanvas(\"mouseout\", this._mouseOut, {}, customTarget);\n      this.unbindCanvas(\"mousemove\", this._mouseMove, {}, customTarget);\n      this.unbindCanvas(\"click\", this._mouseClick, {}, customTarget);\n      this.unbindCanvas(\"contextmenu\", this._contextMenu, {}, customTarget);\n      this._hasMouse = false;\n    }\n    return this;\n  }\n  bindTouch(bind = true, passive = false, customTarget) {\n    if (bind) {\n      this.bindCanvas(\"touchstart\", this._touchStart.bind(this), { passive }, customTarget);\n      this.bindCanvas(\"touchend\", this._mouseUp.bind(this), {}, customTarget);\n      this.bindCanvas(\"touchmove\", this._touchMove.bind(this), { passive }, customTarget);\n      this.bindCanvas(\"touchcancel\", this._mouseOut.bind(this), {}, customTarget);\n      this._hasTouch = true;\n    } else {\n      this.unbindCanvas(\"touchstart\", this._touchStart.bind(this), { passive }, customTarget);\n      this.unbindCanvas(\"touchend\", this._mouseUp.bind(this), {}, customTarget);\n      this.unbindCanvas(\"touchmove\", this._touchMove.bind(this), { passive }, customTarget);\n      this.unbindCanvas(\"touchcancel\", this._mouseOut.bind(this), {}, customTarget);\n      this._hasTouch = false;\n    }\n    return this;\n  }\n  bindKeyboard(bind = true) {\n    if (bind) {\n      this._keyDownBind = this._keyDown.bind(this);\n      this._keyUpBind = this._keyUp.bind(this);\n      this.bindDoc(\"keydown\", this._keyDownBind, {});\n      this.bindDoc(\"keyup\", this._keyUpBind, {});\n      this._hasKeyboard = true;\n    } else {\n      this.unbindDoc(\"keydown\", this._keyDownBind, {});\n      this.unbindDoc(\"keyup\", this._keyUpBind, {});\n      this._hasKeyboard = false;\n    }\n    return this;\n  }\n  touchesToPoints(evt, which = \"touches\") {\n    if (!evt || !evt[which])\n      return [];\n    let ts = [];\n    for (var i = 0; i < evt[which].length; i++) {\n      let t = evt[which].item(i);\n      ts.push(new Pt(t.pageX - this.bound.topLeft.x, t.pageY - this.bound.topLeft.y));\n    }\n    return ts;\n  }\n  _mouseAction(type, evt) {\n    if (!this.isPlaying)\n      return;\n    let px = 0, py = 0;\n    if (evt instanceof MouseEvent) {\n      for (let k in this.players) {\n        if (this.players.hasOwnProperty(k)) {\n          let v = this.players[k];\n          px = evt.pageX - this.outerBound.x;\n          py = evt.pageY - this.outerBound.y;\n          if (v.action)\n            v.action(type, px, py, evt);\n        }\n      }\n    } else {\n      for (let k in this.players) {\n        if (this.players.hasOwnProperty(k)) {\n          let v = this.players[k];\n          let c = evt.changedTouches && evt.changedTouches.length > 0;\n          let touch = evt.changedTouches.item(0);\n          px = c ? touch.pageX - this.outerBound.x : 0;\n          py = c ? touch.pageY - this.outerBound.y : 0;\n          if (v.action)\n            v.action(type, px, py, evt);\n        }\n      }\n    }\n    if (type) {\n      this._pointer.to(px, py);\n      this._pointer.id = type;\n    }\n  }\n  _mouseDown(evt) {\n    this._mouseAction(UIPointerActions.down, evt);\n    this._pressed = true;\n    return false;\n  }\n  _mouseUp(evt) {\n    if (this._dragged) {\n      this._mouseAction(UIPointerActions.drop, evt);\n    } else {\n      this._mouseAction(UIPointerActions.up, evt);\n    }\n    this._pressed = false;\n    this._dragged = false;\n    return false;\n  }\n  _mouseMove(evt) {\n    this._mouseAction(UIPointerActions.move, evt);\n    if (this._pressed) {\n      this._dragged = true;\n      this._mouseAction(UIPointerActions.drag, evt);\n    }\n    return false;\n  }\n  _mouseOver(evt) {\n    this._mouseAction(UIPointerActions.over, evt);\n    return false;\n  }\n  _mouseOut(evt) {\n    this._mouseAction(UIPointerActions.out, evt);\n    if (this._dragged)\n      this._mouseAction(UIPointerActions.drop, evt);\n    this._dragged = false;\n    return false;\n  }\n  _mouseClick(evt) {\n    this._mouseAction(UIPointerActions.click, evt);\n    this._pressed = false;\n    this._dragged = false;\n    return false;\n  }\n  _contextMenu(evt) {\n    this._mouseAction(UIPointerActions.contextmenu, evt);\n    return false;\n  }\n  _touchMove(evt) {\n    this._mouseMove(evt);\n    evt.preventDefault();\n    return false;\n  }\n  _touchStart(evt) {\n    this._mouseDown(evt);\n    evt.preventDefault();\n    return false;\n  }\n  _keyDown(evt) {\n    this._keyboardAction(UIPointerActions.keydown, evt);\n    return false;\n  }\n  _keyUp(evt) {\n    this._keyboardAction(UIPointerActions.keyup, evt);\n    return false;\n  }\n  _keyboardAction(type, evt) {\n    if (!this.isPlaying)\n      return;\n    for (let k in this.players) {\n      if (this.players.hasOwnProperty(k)) {\n        let v = this.players[k];\n        if (v.action)\n          v.action(type, evt.shiftKey ? 1 : 0, evt.altKey ? 1 : 0, evt);\n      }\n    }\n  }\n};\n\n// src/Form.ts\nvar Form = class {\n  constructor() {\n    this._ready = false;\n  }\n  get ready() {\n    return this._ready;\n  }\n};\nvar VisualForm = class extends Form {\n  constructor() {\n    super(...arguments);\n    this._filled = true;\n    this._stroked = true;\n    this._font = new Font(14, \"sans-serif\");\n  }\n  get filled() {\n    return this._filled;\n  }\n  set filled(b) {\n    this._filled = b;\n  }\n  get stroked() {\n    return this._stroked;\n  }\n  set stroked(b) {\n    this._stroked = b;\n  }\n  get currentFont() {\n    return this._font;\n  }\n  _multiple(groups, shape, ...rest) {\n    if (!groups)\n      return this;\n    for (let i = 0, len = groups.length; i < len; i++) {\n      this[shape](groups[i], ...rest);\n    }\n    return this;\n  }\n  alpha(a) {\n    return this;\n  }\n  fill(c) {\n    return this;\n  }\n  fillOnly(c) {\n    this.stroke(false);\n    return this.fill(c);\n  }\n  stroke(c, width, linejoin, linecap) {\n    return this;\n  }\n  strokeOnly(c, width, linejoin, linecap) {\n    this.fill(false);\n    return this.stroke(c, width, linejoin, linecap);\n  }\n  points(pts, radius, shape) {\n    if (!pts)\n      return;\n    for (let i = 0, len = pts.length; i < len; i++) {\n      this.point(pts[i], radius, shape);\n    }\n    return this;\n  }\n  circles(groups) {\n    return this._multiple(groups, \"circle\");\n  }\n  squares(groups) {\n    return this._multiple(groups, \"square\");\n  }\n  lines(groups) {\n    return this._multiple(groups, \"line\");\n  }\n  polygons(groups) {\n    return this._multiple(groups, \"polygon\");\n  }\n  rects(groups) {\n    return this._multiple(groups, \"rect\");\n  }\n};\nvar Font = class {\n  constructor(size = 12, face = \"sans-serif\", weight = \"\", style = \"\", lineHeight = 1.5) {\n    this.size = size;\n    this.face = face;\n    this.style = style;\n    this.weight = weight;\n    this.lineHeight = lineHeight;\n  }\n  get value() {\n    return `${this.style} ${this.weight} ${this.size}px/${this.lineHeight} ${this.face}`;\n  }\n  toString() {\n    return this.value;\n  }\n};\n\n// src/Typography.ts\nvar Typography = class {\n  static textWidthEstimator(fn, samples = [\"M\", \"n\", \".\"], distribution = [0.06, 0.8, 0.14]) {\n    let m = samples.map(fn);\n    let avg = new Pt(distribution).dot(m);\n    return (str) => str.length * avg;\n  }\n  static truncate(fn, str, width, tail = \"\") {\n    let trim = Math.floor(str.length * Math.min(1, width / fn(str)));\n    if (trim < str.length) {\n      trim = Math.max(0, trim - tail.length);\n      return [str.substr(0, trim) + tail, trim];\n    } else {\n      return [str, str.length];\n    }\n  }\n  static fontSizeToBox(box, ratio = 1, byHeight = true) {\n    let bound = Bound.fromGroup(box);\n    let h = byHeight ? bound.height : bound.width;\n    let f = ratio * h;\n    return function(box2) {\n      let bound2 = Bound.fromGroup(box2);\n      let nh = (byHeight ? bound2.height : bound2.width) / h;\n      return f * nh;\n    };\n  }\n  static fontSizeToThreshold(threshold, direction = 0) {\n    return function(defaultSize, val) {\n      let d = defaultSize * val / threshold;\n      if (direction < 0)\n        return Math.min(d, defaultSize);\n      if (direction > 0)\n        return Math.max(d, defaultSize);\n      return d;\n    };\n  }\n};\n\n// src/Image.ts\nvar Img = class {\n  constructor(editable = false, space, crossOrigin) {\n    this._scale = 1;\n    this._loaded = false;\n    this._editable = editable;\n    this._space = space;\n    this._scale = this._space ? this._space.pixelScale : 1;\n    this._img = new Image();\n    if (crossOrigin)\n      this._img.crossOrigin = \"Anonymous\";\n  }\n  static load(src, editable = false, space, ready) {\n    const img = new Img(editable, space);\n    img.load(src).then((res) => {\n      if (ready)\n        ready(res);\n    });\n    return img;\n  }\n  static async loadAsync(src, editable = false, space) {\n    const img = await new Img(editable, space).load(src);\n    return img;\n  }\n  static async loadPattern(src, space, repeat = \"repeat\", editable = false) {\n    const img = await Img.loadAsync(src, editable, space);\n    return img.pattern(repeat);\n  }\n  static blank(size, space, scale) {\n    let img = new Img(true, space);\n    const s = scale ? scale : space.pixelScale;\n    img.initCanvas(size[0], size[1], s);\n    return img;\n  }\n  load(src) {\n    return new Promise((resolve, reject) => {\n      if (this._editable && !document) {\n        reject(\"Cannot create html canvas element. document not found.\");\n      }\n      this._img.src = src;\n      this._img.onload = () => {\n        if (this._editable) {\n          if (!this._cv)\n            this._cv = document.createElement(\"canvas\");\n          this._drawToScale(this._scale, this._img);\n          this._data = this._ctx.getImageData(0, 0, this._cv.width, this._cv.height);\n        }\n        this._loaded = true;\n        resolve(this);\n      };\n      this._img.onerror = (evt) => {\n        reject(evt);\n      };\n    });\n  }\n  _drawToScale(canvasScale, img) {\n    const nw = img.width;\n    const nh = img.height;\n    this.initCanvas(nw, nh, canvasScale);\n    if (img)\n      this._ctx.drawImage(img, 0, 0, nw, nh, 0, 0, this._cv.width, this._cv.height);\n  }\n  initCanvas(width, height, canvasScale = 1) {\n    if (!this._editable) {\n      console.error(\"Cannot initiate canvas because this Img is not set to be editable\");\n      return;\n    }\n    if (!this._cv)\n      this._cv = document.createElement(\"canvas\");\n    const cms = typeof canvasScale === \"number\" ? [canvasScale, canvasScale] : canvasScale;\n    this._cv.width = width * cms[0];\n    this._cv.height = height * cms[1];\n    this._ctx = this._cv.getContext(\"2d\");\n    this._loaded = true;\n  }\n  bitmap(size) {\n    const w = size ? size[0] : this._cv.width;\n    const h = size ? size[1] : this._cv.height;\n    return createImageBitmap(this._cv, 0, 0, w, h);\n  }\n  pattern(reptition = \"repeat\", dynamic = false) {\n    if (!this._space)\n      throw \"Cannot find CanvasSpace ctx to create image pattern\";\n    return this._space.ctx.createPattern(dynamic ? this._cv : this._img, reptition);\n  }\n  sync() {\n    if (this._scale !== 1) {\n      this.bitmap().then((b) => {\n        this._drawToScale(1 / this._scale, b);\n        this.load(this.toBase64());\n      });\n    } else {\n      this._img.src = this.toBase64();\n    }\n  }\n  pixel(p, rescale = true) {\n    const s = typeof rescale == \"number\" ? rescale : rescale ? this._scale : 1;\n    return Img.getPixel(this._data, [p[0] * s, p[1] * s]);\n  }\n  static getPixel(imgData, p) {\n    const no = new Pt(0, 0, 0, 0);\n    if (p[0] >= imgData.width || p[1] >= imgData.height)\n      return no;\n    const i = Math.floor(p[1]) * (imgData.width * 4) + Math.floor(p[0]) * 4;\n    const d = imgData.data;\n    if (i >= d.length - 4)\n      return no;\n    return new Pt(d[i], d[i + 1], d[i + 2], d[i + 3]);\n  }\n  resize(sizeOrScale, asScale = false) {\n    let s = asScale ? sizeOrScale : [sizeOrScale[0] / this._img.naturalWidth, sizeOrScale[1] / this._img.naturalHeight];\n    this._drawToScale(s, this._img);\n    this._data = this._ctx.getImageData(0, 0, this._cv.width, this._cv.height);\n    return this;\n  }\n  crop(box) {\n    let p = box.topLeft.scale(this._scale);\n    let s = box.size.scale(this._scale);\n    return this._ctx.getImageData(p.x, p.y, s.x, s.y);\n  }\n  filter(css) {\n    this._ctx.filter = css;\n    this._ctx.drawImage(this._cv, 0, 0);\n    this._ctx.filter = \"none\";\n    return this;\n  }\n  cleanup() {\n    if (this._cv)\n      this._cv.remove();\n    if (this._img)\n      this._img.remove();\n    this._data = null;\n  }\n  static fromBlob(blob, editable = false, space) {\n    let url = URL.createObjectURL(blob);\n    return new Img(editable, space).load(url);\n  }\n  static imageDataToBlob(data) {\n    return new Promise(function(resolve, reject) {\n      if (!document) {\n        reject(\"Cannot create html canvas element. document not found.\");\n      }\n      let cv = document.createElement(\"canvas\");\n      cv.width = data.width;\n      cv.height = data.height;\n      cv.getContext(\"2d\").putImageData(data, 0, 0);\n      cv.toBlob((blob) => {\n        resolve(blob);\n        cv.remove();\n      });\n    });\n  }\n  toBase64() {\n    return this._cv.toDataURL();\n  }\n  toBlob() {\n    return new Promise((resolve) => {\n      this._cv.toBlob((blob) => resolve(blob));\n    });\n  }\n  getForm() {\n    if (!this._editable) {\n      console.error(\"Cannot get a CanvasForm because this Img is not editable\");\n    }\n    return this._ctx ? new CanvasForm(this._ctx) : void 0;\n  }\n  get current() {\n    return this._editable ? this._cv : this._img;\n  }\n  get image() {\n    return this._img;\n  }\n  get canvas() {\n    return this._cv;\n  }\n  get data() {\n    return this._data;\n  }\n  get ctx() {\n    return this._ctx;\n  }\n  get loaded() {\n    return this._loaded;\n  }\n  get pixelScale() {\n    return this._scale;\n  }\n  get imageSize() {\n    if (!this._img.width || !this._img.height) {\n      return this.canvasSize.$divide(this._scale);\n    } else {\n      return new Pt(this._img.width, this._img.height);\n    }\n  }\n  get canvasSize() {\n    return new Pt(this._cv.width, this._cv.height);\n  }\n  get scaledMatrix() {\n    const s = 1 / this._scale;\n    return new Mat().scale2D([s, s]);\n  }\n};\n\n// src/Canvas.ts\nvar CanvasSpace2 = class extends MultiTouchSpace {\n  constructor(elem, callback) {\n    super();\n    this._pixelScale = 1;\n    this._autoResize = true;\n    this._bgcolor = \"#e1e9f0\";\n    this._offscreen = false;\n    this._initialResize = false;\n    var _selector = null;\n    var _existed = false;\n    this.id = \"pt\";\n    if (elem instanceof Element) {\n      _selector = elem;\n      this.id = \"pts_existing_space\";\n    } else {\n      let id = elem;\n      id = elem[0] === \"#\" || elem[0] === \".\" ? elem : \"#\" + elem;\n      _selector = document.querySelector(id);\n      _existed = true;\n      this.id = id.substr(1);\n    }\n    if (!_selector) {\n      this._container = this._createElement(\"div\", this.id + \"_container\");\n      this._canvas = this._createElement(\"canvas\", this.id);\n      this._container.appendChild(this._canvas);\n      document.body.appendChild(this._container);\n      _existed = false;\n    } else if (_selector.nodeName.toLowerCase() != \"canvas\") {\n      this._container = _selector;\n      this._canvas = this._createElement(\"canvas\", this.id + \"_canvas\");\n      this._container.appendChild(this._canvas);\n      this._initialResize = true;\n    } else {\n      this._canvas = _selector;\n      this._container = _selector.parentElement;\n      this._autoResize = false;\n    }\n    setTimeout(this._ready.bind(this, callback), 100);\n    this._ctx = this._canvas.getContext(\"2d\");\n  }\n  _createElement(elem = \"div\", id) {\n    let d = document.createElement(elem);\n    d.setAttribute(\"id\", id);\n    return d;\n  }\n  _ready(callback) {\n    if (!this._container)\n      throw new Error(`Cannot initiate #${this.id} element`);\n    this._isReady = true;\n    this._resizeHandler(null);\n    this.clear(this._bgcolor);\n    this._canvas.dispatchEvent(new Event(\"ready\"));\n    for (let k in this.players) {\n      if (this.players.hasOwnProperty(k)) {\n        if (this.players[k].start)\n          this.players[k].start(this.bound.clone(), this);\n      }\n    }\n    this._pointer = this.center;\n    this._initialResize = false;\n    if (callback)\n      callback(this.bound, this._canvas);\n  }\n  setup(opt) {\n    this._bgcolor = opt.bgcolor ? opt.bgcolor : \"transparent\";\n    this.autoResize = opt.resize != void 0 ? opt.resize : false;\n    if (opt.retina !== false) {\n      let r1 = window ? window.devicePixelRatio || 1 : 1;\n      let r2 = this._ctx.webkitBackingStorePixelRatio || this._ctx.mozBackingStorePixelRatio || this._ctx.msBackingStorePixelRatio || this._ctx.oBackingStorePixelRatio || this._ctx.backingStorePixelRatio || 1;\n      this._pixelScale = Math.max(1, r1 / r2);\n    }\n    if (opt.offscreen) {\n      this._offscreen = true;\n      this._offCanvas = this._createElement(\"canvas\", this.id + \"_offscreen\");\n      this._offCtx = this._offCanvas.getContext(\"2d\");\n    } else {\n      this._offscreen = false;\n    }\n    if (opt.pixelDensity) {\n      this._pixelScale = opt.pixelDensity;\n    }\n    return this;\n  }\n  set autoResize(auto) {\n    if (!window)\n      return;\n    this._autoResize = auto;\n    if (auto) {\n      window.addEventListener(\"resize\", this._resizeHandler.bind(this));\n    } else {\n      window.removeEventListener(\"resize\", this._resizeHandler.bind(this));\n    }\n  }\n  get autoResize() {\n    return this._autoResize;\n  }\n  resize(b, evt) {\n    this.bound = b;\n    this._canvas.width = Math.ceil(this.bound.size.x) * this._pixelScale;\n    this._canvas.height = Math.ceil(this.bound.size.y) * this._pixelScale;\n    this._canvas.style.width = Math.ceil(this.bound.size.x) + \"px\";\n    this._canvas.style.height = Math.ceil(this.bound.size.y) + \"px\";\n    if (this._offscreen) {\n      this._offCanvas.width = Math.ceil(this.bound.size.x) * this._pixelScale;\n      this._offCanvas.height = Math.ceil(this.bound.size.y) * this._pixelScale;\n    }\n    if (this._pixelScale != 1) {\n      this._ctx.scale(this._pixelScale, this._pixelScale);\n      if (this._offscreen) {\n        this._offCtx.scale(this._pixelScale, this._pixelScale);\n      }\n    }\n    for (let k in this.players) {\n      if (this.players.hasOwnProperty(k)) {\n        let p = this.players[k];\n        if (p.resize)\n          p.resize(this.bound, evt);\n      }\n    }\n    this.render(this._ctx);\n    if (evt && !this.isPlaying)\n      this.playOnce(0);\n    return this;\n  }\n  _resizeHandler(evt) {\n    if (!window)\n      return;\n    let b = this._autoResize || this._initialResize ? this._container.getBoundingClientRect() : this._canvas.getBoundingClientRect();\n    if (b) {\n      let box = Bound.fromBoundingRect(b);\n      box.center = box.center.add(window.pageXOffset, window.pageYOffset);\n      this.resize(box, evt);\n    }\n  }\n  set background(bg) {\n    this._bgcolor = bg;\n  }\n  get background() {\n    return this._bgcolor;\n  }\n  get pixelScale() {\n    return this._pixelScale;\n  }\n  get hasOffscreen() {\n    return this._offscreen;\n  }\n  get offscreenCtx() {\n    return this._offCtx;\n  }\n  get offscreenCanvas() {\n    return this._offCanvas;\n  }\n  getForm() {\n    return new CanvasForm(this);\n  }\n  get element() {\n    return this._canvas;\n  }\n  get parent() {\n    return this._container;\n  }\n  get ready() {\n    return this._isReady;\n  }\n  get ctx() {\n    return this._ctx;\n  }\n  clear(bg) {\n    if (bg)\n      this._bgcolor = bg;\n    const lastColor = this._ctx.fillStyle;\n    const px = Math.ceil(this.pixelScale);\n    if (!this._bgcolor || this._bgcolor === \"transparent\") {\n      this._ctx.clearRect(-px, -px, this._canvas.width + px, this._canvas.height + px);\n    } else {\n      if (this._bgcolor.indexOf(\"rgba\") === 0 || this._bgcolor.length === 9 && this._bgcolor.indexOf(\"#\") === 0) {\n        this._ctx.clearRect(-px, -px, this._canvas.width + px, this._canvas.height + px);\n      }\n      this._ctx.fillStyle = this._bgcolor;\n      this._ctx.fillRect(-px, -px, this._canvas.width + px, this._canvas.height + px);\n    }\n    this._ctx.fillStyle = lastColor;\n    return this;\n  }\n  clearOffscreen(bg) {\n    if (this._offscreen) {\n      const px = Math.ceil(this.pixelScale);\n      if (bg) {\n        this._offCtx.fillStyle = bg;\n        this._offCtx.fillRect(-px, -px, this._canvas.width + px, this._canvas.height + px);\n      } else {\n        this._offCtx.clearRect(-px, -px, this._offCanvas.width + px, this._offCanvas.height + px);\n      }\n    }\n    return this;\n  }\n  playItems(time) {\n    if (this._isReady) {\n      this._ctx.save();\n      if (this._offscreen)\n        this._offCtx.save();\n      super.playItems(time);\n      this._ctx.restore();\n      if (this._offscreen)\n        this._offCtx.restore();\n      this.render(this._ctx);\n    }\n  }\n  dispose() {\n    if (!window)\n      return;\n    window.removeEventListener(\"resize\", this._resizeHandler.bind(this));\n    this.stop();\n    this.removeAll();\n    return this;\n  }\n  recorder(downloadOrCallback, filetype = \"webm\", bitrate = 15e6) {\n    let stream = this._canvas.captureStream();\n    const recorder = new MediaRecorder(stream, { mimeType: `video/${filetype}`, bitsPerSecond: bitrate });\n    recorder.ondataavailable = function(d) {\n      let url = URL.createObjectURL(new Blob([d.data], { type: `video/${filetype}` }));\n      if (typeof downloadOrCallback === \"function\") {\n        downloadOrCallback(url);\n      } else if (downloadOrCallback) {\n        let a = document.createElement(\"a\");\n        a.href = url;\n        a.download = `canvas_video.${filetype}`;\n        a.click();\n        a.remove();\n      }\n    };\n    return recorder;\n  }\n};\nvar CanvasForm = class extends VisualForm {\n  constructor(space) {\n    super();\n    this._style = {\n      fillStyle: \"#f03\",\n      strokeStyle: \"#fff\",\n      lineWidth: 1,\n      lineJoin: \"bevel\",\n      lineCap: \"butt\",\n      globalAlpha: 1\n    };\n    if (!space)\n      return this;\n    const _setup = (ctx) => {\n      this._ctx = ctx;\n      this._ctx.fillStyle = this._style.fillStyle;\n      this._ctx.strokeStyle = this._style.strokeStyle;\n      this._ctx.lineJoin = \"bevel\";\n      this._ctx.font = this._font.value;\n      this._ready = true;\n    };\n    if (space instanceof CanvasRenderingContext2D) {\n      _setup(space);\n    } else {\n      this._space = space;\n      this._space.add({ start: () => {\n        _setup(this._space.ctx);\n      } });\n    }\n  }\n  get space() {\n    return this._space;\n  }\n  get ctx() {\n    return this._ctx;\n  }\n  useOffscreen(off = true, clear = false) {\n    if (clear)\n      this._space.clearOffscreen(typeof clear == \"string\" ? clear : null);\n    this._ctx = this._space.hasOffscreen && off ? this._space.offscreenCtx : this._space.ctx;\n    return this;\n  }\n  renderOffscreen(offset = [0, 0]) {\n    if (this._space.hasOffscreen) {\n      this._space.ctx.drawImage(\n        this._space.offscreenCanvas,\n        offset[0],\n        offset[1],\n        this._space.width,\n        this._space.height\n      );\n    }\n  }\n  alpha(a) {\n    this._ctx.globalAlpha = a;\n    this._style.globalAlpha = a;\n    return this;\n  }\n  fill(c) {\n    if (typeof c == \"boolean\") {\n      this.filled = c;\n    } else {\n      this.filled = true;\n      this._style.fillStyle = c;\n      this._ctx.fillStyle = c;\n    }\n    return this;\n  }\n  stroke(c, width, linejoin, linecap) {\n    if (typeof c == \"boolean\") {\n      this.stroked = c;\n    } else {\n      this.stroked = true;\n      this._style.strokeStyle = c;\n      this._ctx.strokeStyle = c;\n      if (width) {\n        this._ctx.lineWidth = width;\n        this._style.lineWidth = width;\n      }\n      if (linejoin) {\n        this._ctx.lineJoin = linejoin;\n        this._style.lineJoin = linejoin;\n      }\n      if (linecap) {\n        this._ctx.lineCap = linecap;\n        this._style.lineCap = linecap;\n      }\n    }\n    return this;\n  }\n  applyFillStroke(filled = true, stroked = true, strokeWidth = 1) {\n    if (filled) {\n      if (typeof filled === \"string\")\n        this.fill(filled);\n      this._ctx.fill();\n    }\n    if (stroked) {\n      if (typeof stroked === \"string\")\n        this.stroke(stroked, strokeWidth);\n      this._ctx.stroke();\n    }\n    return this;\n  }\n  gradient(stops) {\n    let vals = [];\n    if (stops.length < 2)\n      stops.push([0.99, \"#000\"], [1, \"#000\"]);\n    for (let i = 0, len = stops.length; i < len; i++) {\n      let t = typeof stops[i] === \"string\" ? i * (1 / (stops.length - 1)) : stops[i][0];\n      let v = typeof stops[i] === \"string\" ? stops[i] : stops[i][1];\n      vals.push([t, v]);\n    }\n    return (area1, area2) => {\n      let grad = area2 ? this._ctx.createRadialGradient(area1[0][0], area1[0][1], Math.abs(area1[1][0]), area2[0][0], area2[0][1], Math.abs(area2[1][0])) : this._ctx.createLinearGradient(area1[0][0], area1[0][1], area1[1][0], area1[1][1]);\n      for (let i = 0, len = vals.length; i < len; i++) {\n        grad.addColorStop(vals[i][0], vals[i][1]);\n      }\n      return grad;\n    };\n  }\n  composite(mode = \"source-over\") {\n    this._ctx.globalCompositeOperation = mode;\n    return this;\n  }\n  clip() {\n    this._ctx.clip();\n    return this;\n  }\n  dash(segments = true, offset = 0) {\n    if (!segments) {\n      this._ctx.setLineDash([]);\n      this._ctx.lineDashOffset = 0;\n    } else {\n      if (segments === true) {\n        segments = [5, 5];\n      }\n      this._ctx.setLineDash([segments[0], segments[1]]);\n      this._ctx.lineDashOffset = offset;\n    }\n    return this;\n  }\n  font(sizeOrFont, weight, style, lineHeight, family) {\n    if (typeof sizeOrFont == \"number\") {\n      this._font.size = sizeOrFont;\n      if (family)\n        this._font.face = family;\n      if (weight)\n        this._font.weight = weight;\n      if (style)\n        this._font.style = style;\n      if (lineHeight)\n        this._font.lineHeight = lineHeight;\n    } else {\n      this._font = sizeOrFont;\n    }\n    this._ctx.font = this._font.value;\n    if (this._estimateTextWidth)\n      this.fontWidthEstimate(true);\n    return this;\n  }\n  fontWidthEstimate(estimate = true) {\n    this._estimateTextWidth = estimate ? Typography.textWidthEstimator((c) => this._ctx.measureText(c).width) : void 0;\n    return this;\n  }\n  getTextWidth(c) {\n    return !this._estimateTextWidth ? this._ctx.measureText(c + \" .\").width : this._estimateTextWidth(c);\n  }\n  _textTruncate(str, width, tail = \"\") {\n    return Typography.truncate(this.getTextWidth.bind(this), str, width, tail);\n  }\n  _textAlign(box, vertical, offset, center) {\n    let _box = Util.iterToArray(box);\n    if (!Util.arrayCheck(_box))\n      return;\n    if (!center)\n      center = Rectangle.center(_box);\n    var px = _box[0][0];\n    if (this._ctx.textAlign == \"end\" || this._ctx.textAlign == \"right\") {\n      px = _box[1][0];\n    } else if (this._ctx.textAlign == \"center\" || this._ctx.textAlign == \"middle\") {\n      px = center[0];\n    }\n    var py = center[1];\n    if (vertical == \"top\" || vertical == \"start\") {\n      py = _box[0][1];\n    } else if (vertical == \"end\" || vertical == \"bottom\") {\n      py = _box[1][1];\n    }\n    return offset ? new Pt(px + offset[0], py + offset[1]) : new Pt(px, py);\n  }\n  reset() {\n    for (let k in this._style) {\n      if (this._style.hasOwnProperty(k)) {\n        this._ctx[k] = this._style[k];\n      }\n    }\n    this._font = new Font();\n    this._ctx.font = this._font.value;\n    return this;\n  }\n  _paint() {\n    if (this._filled)\n      this._ctx.fill();\n    if (this._stroked)\n      this._ctx.stroke();\n  }\n  static point(ctx, p, radius = 5, shape = \"square\") {\n    if (!p)\n      return;\n    if (!CanvasForm[shape])\n      throw new Error(`${shape} is not a static function of CanvasForm`);\n    CanvasForm[shape](ctx, p, radius);\n  }\n  point(p, radius = 5, shape = \"square\") {\n    CanvasForm.point(this._ctx, p, radius, shape);\n    this._paint();\n    return this;\n  }\n  static circle(ctx, pt, radius = 10) {\n    if (!pt)\n      return;\n    ctx.beginPath();\n    ctx.arc(pt[0], pt[1], radius, 0, Const.two_pi, false);\n    ctx.closePath();\n  }\n  circle(pts) {\n    let p = Util.iterToArray(pts);\n    CanvasForm.circle(this._ctx, p[0], p[1][0]);\n    this._paint();\n    return this;\n  }\n  static ellipse(ctx, pt, radius, rotation = 0, startAngle = 0, endAngle = Const.two_pi, cc = false) {\n    if (!pt || !radius)\n      return;\n    ctx.beginPath();\n    ctx.ellipse(pt[0], pt[1], radius[0], radius[1], rotation, startAngle, endAngle, cc);\n  }\n  ellipse(pt, radius, rotation = 0, startAngle = 0, endAngle = Const.two_pi, cc = false) {\n    CanvasForm.ellipse(this._ctx, pt, radius, rotation, startAngle, endAngle, cc);\n    this._paint();\n    return this;\n  }\n  static arc(ctx, pt, radius, startAngle, endAngle, cc) {\n    if (!pt)\n      return;\n    ctx.beginPath();\n    ctx.arc(pt[0], pt[1], radius, startAngle, endAngle, cc);\n  }\n  arc(pt, radius, startAngle, endAngle, cc) {\n    CanvasForm.arc(this._ctx, pt, radius, startAngle, endAngle, cc);\n    this._paint();\n    return this;\n  }\n  static square(ctx, pt, halfsize) {\n    if (!pt)\n      return;\n    let x1 = pt[0] - halfsize;\n    let y1 = pt[1] - halfsize;\n    let x2 = pt[0] + halfsize;\n    let y2 = pt[1] + halfsize;\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x1, y2);\n    ctx.lineTo(x2, y2);\n    ctx.lineTo(x2, y1);\n    ctx.closePath();\n  }\n  square(pt, halfsize) {\n    CanvasForm.square(this._ctx, pt, halfsize);\n    this._paint();\n    return this;\n  }\n  static line(ctx, pts) {\n    if (!Util.arrayCheck(pts))\n      return;\n    let i = 0;\n    ctx.beginPath();\n    for (let it of pts) {\n      if (it) {\n        if (i++ > 0) {\n          ctx.lineTo(it[0], it[1]);\n        } else {\n          ctx.moveTo(it[0], it[1]);\n        }\n      }\n    }\n  }\n  line(pts) {\n    CanvasForm.line(this._ctx, pts);\n    this._paint();\n    return this;\n  }\n  static polygon(ctx, pts) {\n    if (!Util.arrayCheck(pts))\n      return;\n    CanvasForm.line(ctx, pts);\n    ctx.closePath();\n  }\n  polygon(pts) {\n    CanvasForm.polygon(this._ctx, pts);\n    this._paint();\n    return this;\n  }\n  static rect(ctx, pts) {\n    let p = Util.iterToArray(pts);\n    if (!Util.arrayCheck(p))\n      return;\n    ctx.beginPath();\n    ctx.moveTo(p[0][0], p[0][1]);\n    ctx.lineTo(p[0][0], p[1][1]);\n    ctx.lineTo(p[1][0], p[1][1]);\n    ctx.lineTo(p[1][0], p[0][1]);\n    ctx.closePath();\n  }\n  rect(pts) {\n    CanvasForm.rect(this._ctx, pts);\n    this._paint();\n    return this;\n  }\n  static image(ctx, ptOrRect, img, orig) {\n    let t = Util.iterToArray(ptOrRect);\n    let pos;\n    if (typeof t[0] === \"number\") {\n      pos = t;\n    } else {\n      if (orig) {\n        let o = Util.iterToArray(orig);\n        pos = [\n          o[0][0],\n          o[0][1],\n          o[1][0] - o[0][0],\n          o[1][1] - o[0][1],\n          t[0][0],\n          t[0][1],\n          t[1][0] - t[0][0],\n          t[1][1] - t[0][1]\n        ];\n      } else {\n        pos = [t[0][0], t[0][1], t[1][0] - t[0][0], t[1][1] - t[0][1]];\n      }\n    }\n    if (img instanceof Img) {\n      if (img.loaded) {\n        ctx.drawImage(img.image, ...pos);\n      }\n    } else {\n      ctx.drawImage(img, ...pos);\n    }\n  }\n  image(ptOrRect, img, orig) {\n    if (img instanceof Img) {\n      if (img.loaded) {\n        CanvasForm.image(this._ctx, ptOrRect, img.image, orig);\n      }\n    } else {\n      CanvasForm.image(this._ctx, ptOrRect, img, orig);\n    }\n    return this;\n  }\n  static imageData(ctx, ptOrRect, img) {\n    let t = Util.iterToArray(ptOrRect);\n    if (typeof t[0] === \"number\") {\n      ctx.putImageData(img, t[0], t[1]);\n    } else {\n      ctx.putImageData(img, t[0][0], t[0][1], t[0][0], t[0][1], t[1][0], t[1][1]);\n    }\n  }\n  imageData(ptOrRect, img) {\n    CanvasForm.imageData(this._ctx, ptOrRect, img);\n    return this;\n  }\n  static text(ctx, pt, txt, maxWidth) {\n    if (!pt)\n      return;\n    ctx.fillText(txt, pt[0], pt[1], maxWidth);\n  }\n  text(pt, txt, maxWidth) {\n    CanvasForm.text(this._ctx, pt, txt, maxWidth);\n    return this;\n  }\n  textBox(box, txt, verticalAlign = \"middle\", tail = \"\", overrideBaseline = true) {\n    if (overrideBaseline)\n      this._ctx.textBaseline = verticalAlign;\n    let size = Rectangle.size(box);\n    let t = this._textTruncate(txt, size[0], tail);\n    this.text(this._textAlign(box, verticalAlign), t[0]);\n    return this;\n  }\n  paragraphBox(box, txt, lineHeight = 1.2, verticalAlign = \"top\", crop = true) {\n    let b = Util.iterToArray(box);\n    let size = Rectangle.size(b);\n    this._ctx.textBaseline = \"top\";\n    let lstep = this._font.size * lineHeight;\n    let nextLine = (sub, buffer = [], cc = 0) => {\n      if (!sub)\n        return buffer;\n      if (crop && cc * lstep > size[1] - lstep * 2)\n        return buffer;\n      if (cc > 1e4)\n        throw new Error(\"max recursion reached (10000)\");\n      let t = this._textTruncate(sub, size[0], \"\");\n      let newln = t[0].indexOf(\"\\n\");\n      if (newln >= 0) {\n        buffer.push(t[0].substr(0, newln));\n        return nextLine(sub.substr(newln + 1), buffer, cc + 1);\n      }\n      let dt = t[0].lastIndexOf(\" \") + 1;\n      if (dt <= 0 || t[1] === sub.length)\n        dt = void 0;\n      let line = t[0].substr(0, dt);\n      buffer.push(line);\n      return t[1] <= 0 || t[1] === sub.length ? buffer : nextLine(sub.substr(dt || t[1]), buffer, cc + 1);\n    };\n    let lines = nextLine(txt);\n    let lsize = lines.length * lstep;\n    let lbox = b;\n    if (verticalAlign == \"middle\" || verticalAlign == \"center\") {\n      let lpad = (size[1] - lsize) / 2;\n      if (crop)\n        lpad = Math.max(0, lpad);\n      lbox = new Group(b[0].$add(0, lpad), b[1].$subtract(0, lpad));\n    } else if (verticalAlign == \"bottom\") {\n      lbox = new Group(b[0].$add(0, size[1] - lsize), b[1]);\n    } else {\n      lbox = new Group(b[0], b[0].$add(size[0], lsize));\n    }\n    let center = Rectangle.center(lbox);\n    for (let i = 0, len = lines.length; i < len; i++) {\n      this.text(this._textAlign(lbox, \"top\", [0, i * lstep], center), lines[i]);\n    }\n    return this;\n  }\n  alignText(alignment = \"left\", baseline = \"alphabetic\") {\n    if (baseline == \"center\")\n      baseline = \"middle\";\n    if (baseline == \"baseline\")\n      baseline = \"alphabetic\";\n    this._ctx.textAlign = alignment;\n    this._ctx.textBaseline = baseline;\n    return this;\n  }\n  log(txt) {\n    let w = this._ctx.measureText(txt).width + 20;\n    this.stroke(false).fill(\"rgba(0,0,0,.4)\").rect([[0, 0], [w, 20]]);\n    this.fill(\"#fff\").text([10, 14], txt);\n    return this;\n  }\n};\n\n// src/Create.ts\nvar Create = class {\n  static distributeRandom(bound, count, dimensions = 2) {\n    let pts = new Group();\n    for (let i = 0; i < count; i++) {\n      let p = [bound.x + Num.random() * bound.width];\n      if (dimensions > 1)\n        p.push(bound.y + Num.random() * bound.height);\n      if (dimensions > 2)\n        p.push(bound.z + Num.random() * bound.depth);\n      pts.push(new Pt(p));\n    }\n    return pts;\n  }\n  static distributeLinear(line, count) {\n    let _line = Util.iterToArray(line);\n    let ln = Line.subpoints(_line, count - 2);\n    ln.unshift(_line[0]);\n    ln.push(_line[_line.length - 1]);\n    return ln;\n  }\n  static gridPts(bound, columns, rows, orientation = [0.5, 0.5]) {\n    if (columns === 0 || rows === 0)\n      throw new Error(\"grid columns and rows cannot be 0\");\n    let unit = bound.size.$subtract(1).$divide(columns, rows);\n    let offset = unit.$multiply(orientation);\n    let g = new Group();\n    for (let r = 0; r < rows; r++) {\n      for (let c = 0; c < columns; c++) {\n        g.push(bound.topLeft.$add(unit.$multiply(c, r)).add(offset));\n      }\n    }\n    return g;\n  }\n  static gridCells(bound, columns, rows) {\n    if (columns === 0 || rows === 0)\n      throw new Error(\"grid columns and rows cannot be 0\");\n    let unit = bound.size.$subtract(1).divide(columns, rows);\n    let g = [];\n    for (let r = 0; r < rows; r++) {\n      for (let c = 0; c < columns; c++) {\n        g.push(new Group(\n          bound.topLeft.$add(unit.$multiply(c, r)),\n          bound.topLeft.$add(unit.$multiply(c, r).add(unit))\n        ));\n      }\n    }\n    return g;\n  }\n  static radialPts(center, radius, count, angleOffset = -Const.half_pi) {\n    let g = new Group();\n    let a = Const.two_pi / count;\n    for (let i = 0; i < count; i++) {\n      g.push(new Pt(center).toAngle(a * i + angleOffset, radius, true));\n    }\n    return g;\n  }\n  static noisePts(pts, dx = 0.01, dy = 0.01, rows = 0, columns = 0) {\n    let seed = Num.random();\n    let g = new Group();\n    let i = 0;\n    for (let p of pts) {\n      let np = new Noise(p);\n      let r = rows && rows > 0 ? Math.floor(i / rows) : i;\n      let c = columns && columns > 0 ? i % columns : i;\n      np.initNoise(dx * c, dy * r);\n      np.seed(seed);\n      g.push(np);\n      i++;\n    }\n    return g;\n  }\n  static delaunay(pts) {\n    return Delaunay.from(pts);\n  }\n};\nvar __noise_grad3 = [\n  [1, 1, 0],\n  [-1, 1, 0],\n  [1, -1, 0],\n  [-1, -1, 0],\n  [1, 0, 1],\n  [-1, 0, 1],\n  [1, 0, -1],\n  [-1, 0, -1],\n  [0, 1, 1],\n  [0, -1, 1],\n  [0, 1, -1],\n  [0, -1, -1]\n];\nvar __noise_permTable = [\n  151,\n  160,\n  137,\n  91,\n  90,\n  15,\n  131,\n  13,\n  201,\n  95,\n  96,\n  53,\n  194,\n  233,\n  7,\n  225,\n  140,\n  36,\n  103,\n  30,\n  69,\n  142,\n  8,\n  99,\n  37,\n  240,\n  21,\n  10,\n  23,\n  190,\n  6,\n  148,\n  247,\n  120,\n  234,\n  75,\n  0,\n  26,\n  197,\n  62,\n  94,\n  252,\n  219,\n  203,\n  117,\n  35,\n  11,\n  32,\n  57,\n  177,\n  33,\n  88,\n  237,\n  149,\n  56,\n  87,\n  174,\n  20,\n  125,\n  136,\n  171,\n  168,\n  68,\n  175,\n  74,\n  165,\n  71,\n  134,\n  139,\n  48,\n  27,\n  166,\n  77,\n  146,\n  158,\n  231,\n  83,\n  111,\n  229,\n  122,\n  60,\n  211,\n  133,\n  230,\n  220,\n  105,\n  92,\n  41,\n  55,\n  46,\n  245,\n  40,\n  244,\n  102,\n  143,\n  54,\n  65,\n  25,\n  63,\n  161,\n  1,\n  216,\n  80,\n  73,\n  209,\n  76,\n  132,\n  187,\n  208,\n  89,\n  18,\n  169,\n  200,\n  196,\n  135,\n  130,\n  116,\n  188,\n  159,\n  86,\n  164,\n  100,\n  109,\n  198,\n  173,\n  186,\n  3,\n  64,\n  52,\n  217,\n  226,\n  250,\n  124,\n  123,\n  5,\n  202,\n  38,\n  147,\n  118,\n  126,\n  255,\n  82,\n  85,\n  212,\n  207,\n  206,\n  59,\n  227,\n  47,\n  16,\n  58,\n  17,\n  182,\n  189,\n  28,\n  42,\n  223,\n  183,\n  170,\n  213,\n  119,\n  248,\n  152,\n  2,\n  44,\n  154,\n  163,\n  70,\n  221,\n  153,\n  101,\n  155,\n  167,\n  43,\n  172,\n  9,\n  129,\n  22,\n  39,\n  253,\n  9,\n  98,\n  108,\n  110,\n  79,\n  113,\n  224,\n  232,\n  178,\n  185,\n  112,\n  104,\n  218,\n  246,\n  97,\n  228,\n  251,\n  34,\n  242,\n  193,\n  238,\n  210,\n  144,\n  12,\n  191,\n  179,\n  162,\n  241,\n  81,\n  51,\n  145,\n  235,\n  249,\n  14,\n  239,\n  107,\n  49,\n  192,\n  214,\n  31,\n  181,\n  199,\n  106,\n  157,\n  184,\n  84,\n  204,\n  176,\n  115,\n  121,\n  50,\n  45,\n  127,\n  4,\n  150,\n  254,\n  138,\n  236,\n  205,\n  93,\n  222,\n  114,\n  67,\n  29,\n  24,\n  72,\n  243,\n  141,\n  128,\n  195,\n  78,\n  66,\n  215,\n  61,\n  156,\n  180\n];\nvar Noise = class extends Pt {\n  constructor(...args) {\n    super(...args);\n    this.perm = [];\n    this._n = new Pt(0.01, 0.01);\n    this.perm = __noise_permTable.concat(__noise_permTable);\n  }\n  initNoise(...args) {\n    this._n = new Pt(...args);\n    return this;\n  }\n  step(x = 0, y = 0) {\n    this._n.add(x, y);\n    return this;\n  }\n  seed(s) {\n    if (s > 0 && s < 1)\n      s *= 65536;\n    s = Math.floor(s);\n    if (s < 256)\n      s |= s << 8;\n    for (let i = 0; i < 255; i++) {\n      let v = i & 1 ? __noise_permTable[i] ^ s & 255 : __noise_permTable[i] ^ s >> 8 & 255;\n      this.perm[i] = this.perm[i + 256] = v;\n    }\n    return this;\n  }\n  noise2D() {\n    let i = Math.max(0, Math.floor(this._n[0])) % 255;\n    let j = Math.max(0, Math.floor(this._n[1])) % 255;\n    let x = this._n[0] % 255 - i;\n    let y = this._n[1] % 255 - j;\n    let n00 = Vec.dot(__noise_grad3[(i + this.perm[j]) % 12], [x, y, 0]);\n    let n01 = Vec.dot(__noise_grad3[(i + this.perm[j + 1]) % 12], [x, y - 1, 0]);\n    let n10 = Vec.dot(__noise_grad3[(i + 1 + this.perm[j]) % 12], [x - 1, y, 0]);\n    let n11 = Vec.dot(__noise_grad3[(i + 1 + this.perm[j + 1]) % 12], [x - 1, y - 1, 0]);\n    let _fade = (f) => f * f * f * (f * (f * 6 - 15) + 10);\n    let tx = _fade(x);\n    return Num.lerp(Num.lerp(n00, n10, tx), Num.lerp(n01, n11, tx), _fade(y));\n  }\n};\nvar Delaunay = class extends Group {\n  constructor() {\n    super(...arguments);\n    this._mesh = [];\n  }\n  delaunay(triangleOnly = true) {\n    if (this.length < 3)\n      return [];\n    this._mesh = [];\n    let n = this.length;\n    let indices = [];\n    for (let i = 0; i < n; i++)\n      indices[i] = i;\n    indices.sort((i, j) => this[j][0] - this[i][0]);\n    let pts = this.slice();\n    let st = this._superTriangle();\n    pts = pts.concat(st);\n    let opened = [this._circum(n, n + 1, n + 2, st)];\n    let closed = [];\n    let tris = [];\n    for (let i = 0, len = indices.length; i < len; i++) {\n      let c = indices[i];\n      let edges = [];\n      let j = opened.length;\n      if (!this._mesh[c])\n        this._mesh[c] = {};\n      while (j--) {\n        let circum = opened[j];\n        let radius = circum.circle[1][0];\n        let d = pts[c].$subtract(circum.circle[0]);\n        if (d[0] > 0 && d[0] * d[0] > radius * radius) {\n          closed.push(circum);\n          tris.push(circum.triangle);\n          opened.splice(j, 1);\n          continue;\n        }\n        if (d[0] * d[0] + d[1] * d[1] - radius * radius > Const.epsilon) {\n          continue;\n        }\n        edges.push(circum.i, circum.j, circum.j, circum.k, circum.k, circum.i);\n        opened.splice(j, 1);\n      }\n      Delaunay._dedupe(edges);\n      j = edges.length;\n      while (j > 1) {\n        opened.push(this._circum(edges[--j], edges[--j], c, false, pts));\n      }\n    }\n    for (let i = 0, len = opened.length; i < len; i++) {\n      let o = opened[i];\n      if (o.i < n && o.j < n && o.k < n) {\n        closed.push(o);\n        tris.push(o.triangle);\n        this._cache(o);\n      }\n    }\n    return triangleOnly ? tris : closed;\n  }\n  voronoi() {\n    let vs = [];\n    let n = this._mesh;\n    for (let i = 0, len = n.length; i < len; i++) {\n      vs.push(this.neighborPts(i, true));\n    }\n    return vs;\n  }\n  mesh() {\n    return this._mesh;\n  }\n  neighborPts(i, sort = false) {\n    let cs = new Group();\n    let n = this._mesh;\n    for (let k in n[i]) {\n      if (n[i].hasOwnProperty(k))\n        cs.push(n[i][k].circle[0]);\n    }\n    return sort ? Geom.sortEdges(cs) : cs;\n  }\n  neighbors(i) {\n    let cs = [];\n    let n = this._mesh;\n    for (let k in n[i]) {\n      if (n[i].hasOwnProperty(k))\n        cs.push(n[i][k]);\n    }\n    return cs;\n  }\n  _cache(o) {\n    this._mesh[o.i][`${Math.min(o.j, o.k)}-${Math.max(o.j, o.k)}`] = o;\n    this._mesh[o.j][`${Math.min(o.i, o.k)}-${Math.max(o.i, o.k)}`] = o;\n    this._mesh[o.k][`${Math.min(o.i, o.j)}-${Math.max(o.i, o.j)}`] = o;\n  }\n  _superTriangle() {\n    let minPt = this[0];\n    let maxPt = this[0];\n    for (let i = 1, len = this.length; i < len; i++) {\n      minPt = minPt.$min(this[i]);\n      maxPt = maxPt.$max(this[i]);\n    }\n    let d = maxPt.$subtract(minPt);\n    let mid = minPt.$add(maxPt).divide(2);\n    let dmax = Math.max(d[0], d[1]);\n    return new Group(mid.$subtract(20 * dmax, dmax), mid.$add(0, 20 * dmax), mid.$add(20 * dmax, -dmax));\n  }\n  _triangle(i, j, k, pts = this) {\n    return new Group(pts[i], pts[j], pts[k]);\n  }\n  _circum(i, j, k, tri, pts = this) {\n    let t = tri || this._triangle(i, j, k, pts);\n    return {\n      i,\n      j,\n      k,\n      triangle: t,\n      circle: Triangle.circumcircle(t)\n    };\n  }\n  static _dedupe(edges) {\n    let j = edges.length;\n    while (j > 1) {\n      let b = edges[--j];\n      let a = edges[--j];\n      let i = j;\n      while (i > 1) {\n        let n = edges[--i];\n        let m = edges[--i];\n        if (a == m && b == n || a == n && b == m) {\n          edges.splice(j, 2);\n          edges.splice(i, 2);\n          break;\n        }\n      }\n    }\n    return edges;\n  }\n};\n\n// src/Color.ts\nvar _Color = class extends Pt {\n  constructor(...args) {\n    super(...args);\n    this._mode = \"rgb\";\n    this._isNorm = false;\n  }\n  static from(...args) {\n    let p = [1, 1, 1, 1];\n    let c = Util.getArgs(args);\n    for (let i = 0, len = p.length; i < len; i++) {\n      if (i < c.length)\n        p[i] = c[i];\n    }\n    return new _Color(p);\n  }\n  static fromHex(hex) {\n    if (hex[0] == \"#\")\n      hex = hex.substr(1);\n    if (hex.length <= 3) {\n      let fn = (i) => hex[i] || \"F\";\n      hex = `${fn(0)}${fn(0)}${fn(1)}${fn(1)}${fn(2)}${fn(2)}`;\n    }\n    let alpha = 1;\n    if (hex.length === 8) {\n      alpha = hex.substr(6) && 255 / 255;\n      hex = hex.substring(0, 6);\n    }\n    let hexVal = parseInt(hex, 16);\n    return new _Color(hexVal >> 16, hexVal >> 8 & 255, hexVal & 255, alpha);\n  }\n  static rgb(...args) {\n    return _Color.from(...args).toMode(\"rgb\");\n  }\n  static hsl(...args) {\n    return _Color.from(...args).toMode(\"hsl\");\n  }\n  static hsb(...args) {\n    return _Color.from(...args).toMode(\"hsb\");\n  }\n  static lab(...args) {\n    return _Color.from(...args).toMode(\"lab\");\n  }\n  static lch(...args) {\n    return _Color.from(...args).toMode(\"lch\");\n  }\n  static luv(...args) {\n    return _Color.from(...args).toMode(\"luv\");\n  }\n  static xyz(...args) {\n    return _Color.from(...args).toMode(\"xyz\");\n  }\n  static maxValues(mode) {\n    return _Color.ranges[mode].zipSlice(1).$take([0, 1, 2]);\n  }\n  get hex() {\n    return this.toString(\"hex\");\n  }\n  get rgb() {\n    return this.toString(\"rgb\");\n  }\n  get rgba() {\n    return this.toString(\"rgba\");\n  }\n  clone() {\n    let c = new _Color(this);\n    c.toMode(this._mode);\n    return c;\n  }\n  toMode(mode, convert = false) {\n    if (convert) {\n      let fname = this._mode.toUpperCase() + \"to\" + mode.toUpperCase();\n      if (_Color[fname]) {\n        this.to(_Color[fname](this, this._isNorm, this._isNorm));\n      } else {\n        throw new Error(\"Cannot convert color with \" + fname);\n      }\n    }\n    this._mode = mode;\n    return this;\n  }\n  get mode() {\n    return this._mode;\n  }\n  get r() {\n    return this[0];\n  }\n  set r(n) {\n    this[0] = n;\n  }\n  get g() {\n    return this[1];\n  }\n  set g(n) {\n    this[1] = n;\n  }\n  get b() {\n    return this[2];\n  }\n  set b(n) {\n    this[2] = n;\n  }\n  get h() {\n    return this._mode == \"lch\" ? this[2] : this[0];\n  }\n  set h(n) {\n    let i = this._mode == \"lch\" ? 2 : 0;\n    this[i] = n;\n  }\n  get s() {\n    return this[1];\n  }\n  set s(n) {\n    this[1] = n;\n  }\n  get l() {\n    return this._mode == \"hsl\" ? this[2] : this[0];\n  }\n  set l(n) {\n    let i = this._mode == \"hsl\" ? 2 : 0;\n    this[i] = n;\n  }\n  get a() {\n    return this[1];\n  }\n  set a(n) {\n    this[1] = n;\n  }\n  get c() {\n    return this[1];\n  }\n  set c(n) {\n    this[1] = n;\n  }\n  get u() {\n    return this[1];\n  }\n  set u(n) {\n    this[1] = n;\n  }\n  get v() {\n    return this[2];\n  }\n  set v(n) {\n    this[2] = n;\n  }\n  set alpha(n) {\n    if (this.length > 3)\n      this[3] = n;\n  }\n  get alpha() {\n    return this.length > 3 ? this[3] : 1;\n  }\n  get normalized() {\n    return this._isNorm;\n  }\n  set normalized(b) {\n    this._isNorm = b;\n  }\n  normalize(toNorm = true) {\n    if (this._isNorm == toNorm)\n      return this;\n    let ranges = _Color.ranges[this._mode];\n    for (let i = 0; i < 3; i++) {\n      this[i] = !toNorm ? Num.mapToRange(this[i], 0, 1, ranges[i][0], ranges[i][1]) : Num.mapToRange(this[i], ranges[i][0], ranges[i][1], 0, 1);\n    }\n    this._isNorm = toNorm;\n    return this;\n  }\n  $normalize(toNorm = true) {\n    return this.clone().normalize(toNorm);\n  }\n  toString(format = \"mode\") {\n    if (format == \"hex\") {\n      let _hex = (n) => {\n        let s = Math.floor(n).toString(16);\n        return s.length < 2 ? \"0\" + s : s;\n      };\n      return `#${_hex(this[0])}${_hex(this[1])}${_hex(this[2])}`;\n    } else if (format == \"rgba\") {\n      return `rgba(${Math.floor(this[0])},${Math.floor(this[1])},${Math.floor(this[2])},${this.alpha})`;\n    } else if (format == \"rgb\") {\n      return `rgb(${Math.floor(this[0])},${Math.floor(this[1])},${Math.floor(this[2])})`;\n    } else {\n      return `${this._mode}(${this[0]},${this[1]},${this[2]},${this.alpha})`;\n    }\n  }\n  static RGBtoHSL(rgb, normalizedInput = false, normalizedOutput = false) {\n    let [r, g, b] = !normalizedInput ? rgb.$normalize() : rgb;\n    let max = Math.max(r, g, b);\n    let min = Math.min(r, g, b);\n    let h = (max + min) / 2;\n    let s = h;\n    let l = h;\n    if (max == min) {\n      h = 0;\n      s = 0;\n    } else {\n      let d = max - min;\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n      h = 0;\n      if (max === r) {\n        h = (g - b) / d + (g < b ? 6 : 0);\n      } else if (max === g) {\n        h = (b - r) / d + 2;\n      } else if (max === b) {\n        h = (r - g) / d + 4;\n      }\n    }\n    return _Color.hsl(normalizedOutput ? h / 60 : h * 60, s, l, rgb.alpha);\n  }\n  static HSLtoRGB(hsl, normalizedInput = false, normalizedOutput = false) {\n    let [h, s, l] = hsl;\n    if (!normalizedInput)\n      h = h / 360;\n    if (s == 0)\n      return _Color.rgb(l * 255, l * 255, l * 255, hsl.alpha);\n    let q = l <= 0.5 ? l * (1 + s) : l + s - l * s;\n    let p = 2 * l - q;\n    let convert = (t) => {\n      t = t < 0 ? t + 1 : t > 1 ? t - 1 : t;\n      if (t * 6 < 1) {\n        return p + (q - p) * t * 6;\n      } else if (t * 2 < 1) {\n        return q;\n      } else if (t * 3 < 2) {\n        return p + (q - p) * (2 / 3 - t) * 6;\n      } else {\n        return p;\n      }\n    };\n    let sc = normalizedOutput ? 1 : 255;\n    return _Color.rgb(\n      sc * convert(h + 1 / 3),\n      sc * convert(h),\n      sc * convert(h - 1 / 3),\n      hsl.alpha\n    );\n  }\n  static RGBtoHSB(rgb, normalizedInput = false, normalizedOutput = false) {\n    let [r, g, b] = !normalizedInput ? rgb.$normalize() : rgb;\n    let max = Math.max(r, g, b);\n    let min = Math.min(r, g, b);\n    let d = max - min;\n    let h = 0;\n    let s = max === 0 ? 0 : d / max;\n    let v = max;\n    if (max != min) {\n      if (max === r) {\n        h = (g - b) / d + (g < b ? 6 : 0);\n      } else if (max === g) {\n        h = (b - r) / d + 2;\n      } else if (max === b) {\n        h = (r - g) / d + 4;\n      }\n    }\n    return _Color.hsb(normalizedOutput ? h / 60 : h * 60, s, v, rgb.alpha);\n  }\n  static HSBtoRGB(hsb, normalizedInput = false, normalizedOutput = false) {\n    let [h, s, v] = hsb;\n    if (!normalizedInput)\n      h = h / 360;\n    let i = Math.floor(h * 6);\n    let f = h * 6 - i;\n    let p = v * (1 - s);\n    let q = v * (1 - f * s);\n    let t = v * (1 - (1 - f) * s);\n    let pick = [\n      [v, t, p],\n      [q, v, p],\n      [p, v, t],\n      [p, q, v],\n      [t, p, v],\n      [v, p, q]\n    ];\n    let c = pick[i % 6];\n    let sc = normalizedOutput ? 1 : 255;\n    return _Color.rgb(\n      sc * c[0],\n      sc * c[1],\n      sc * c[2],\n      hsb.alpha\n    );\n  }\n  static RGBtoLAB(rgb, normalizedInput = false, normalizedOutput = false) {\n    let c = normalizedInput ? rgb.$normalize(false) : rgb;\n    return _Color.XYZtoLAB(_Color.RGBtoXYZ(c), false, normalizedOutput);\n  }\n  static LABtoRGB(lab, normalizedInput = false, normalizedOutput = false) {\n    let c = normalizedInput ? lab.$normalize(false) : lab;\n    return _Color.XYZtoRGB(_Color.LABtoXYZ(c), false, normalizedOutput);\n  }\n  static RGBtoLCH(rgb, normalizedInput = false, normalizedOutput = false) {\n    let c = normalizedInput ? rgb.$normalize(false) : rgb;\n    return _Color.LABtoLCH(_Color.RGBtoLAB(c), false, normalizedOutput);\n  }\n  static LCHtoRGB(lch, normalizedInput = false, normalizedOutput = false) {\n    let c = normalizedInput ? lch.$normalize(false) : lch;\n    return _Color.LABtoRGB(_Color.LCHtoLAB(c), false, normalizedOutput);\n  }\n  static RGBtoLUV(rgb, normalizedInput = false, normalizedOutput = false) {\n    let c = normalizedInput ? rgb.$normalize(false) : rgb;\n    return _Color.XYZtoLUV(_Color.RGBtoXYZ(c), false, normalizedOutput);\n  }\n  static LUVtoRGB(luv, normalizedInput = false, normalizedOutput = false) {\n    let c = normalizedInput ? luv.$normalize(false) : luv;\n    return _Color.XYZtoRGB(_Color.LUVtoXYZ(c), false, normalizedOutput);\n  }\n  static RGBtoXYZ(rgb, normalizedInput = false, normalizedOutput = false) {\n    let c = !normalizedInput ? rgb.$normalize() : rgb.clone();\n    for (let i = 0; i < 3; i++) {\n      c[i] = c[i] > 0.04045 ? Math.pow((c[i] + 0.055) / 1.055, 2.4) : c[i] / 12.92;\n      if (!normalizedOutput)\n        c[i] = c[i] * 100;\n    }\n    let cc = _Color.xyz(\n      c[0] * 0.4124564 + c[1] * 0.3575761 + c[2] * 0.1804375,\n      c[0] * 0.2126729 + c[1] * 0.7151522 + c[2] * 0.072175,\n      c[0] * 0.0193339 + c[1] * 0.119192 + c[2] * 0.9503041,\n      rgb.alpha\n    );\n    return normalizedOutput ? cc.normalize() : cc;\n  }\n  static XYZtoRGB(xyz, normalizedInput = false, normalizedOutput = false) {\n    let [x, y, z] = !normalizedInput ? xyz.$normalize() : xyz;\n    let rgb = [\n      x * 3.2406254773200533 + y * -1.5372079722103187 + z * -0.4986285986982479,\n      x * -0.9689307147293197 + y * 1.8757560608852415 + z * 0.041517523842953964,\n      x * 0.055710120445510616 + y * -0.2040210505984867 + z * 1.0569959422543882\n    ];\n    for (let i = 0; i < 3; i++) {\n      rgb[i] = rgb[i] > 31308e-7 ? 1.055 * Math.pow(rgb[i], 1 / 2.4) - 0.055 : 12.92 * rgb[i];\n      rgb[i] = Math.max(0, Math.min(1, rgb[i]));\n      if (!normalizedOutput)\n        rgb[i] = Math.round(rgb[i] * 255);\n    }\n    let cc = _Color.rgb(rgb[0], rgb[1], rgb[2], xyz.alpha);\n    return normalizedOutput ? cc.normalize() : cc;\n  }\n  static XYZtoLAB(xyz, normalizedInput = false, normalizedOutput = false) {\n    let c = normalizedInput ? xyz.$normalize(false) : xyz.clone();\n    const eps = 0.00885645167;\n    const kap = 903.296296296;\n    c.divide(_Color.D65);\n    let fn = (n) => n > eps ? Math.pow(n, 1 / 3) : (kap * n + 16) / 116;\n    let cy = fn(c[1]);\n    let cc = _Color.lab(\n      116 * cy - 16,\n      500 * (fn(c[0]) - cy),\n      200 * (cy - fn(c[2])),\n      xyz.alpha\n    );\n    return normalizedOutput ? cc.normalize() : cc;\n  }\n  static LABtoXYZ(lab, normalizedInput = false, normalizedOutput = false) {\n    let c = normalizedInput ? lab.$normalize(false) : lab;\n    let y = (c[0] + 16) / 116;\n    let x = c[1] / 500 + y;\n    let z = y - c[2] / 200;\n    const eps = 0.00885645167;\n    const kap = 903.296296296;\n    let d = _Color.D65;\n    const xxx = Math.pow(x, 3);\n    const zzz = Math.pow(z, 3);\n    let cc = _Color.xyz(\n      d[0] * (xxx > eps ? xxx : (116 * x - 16) / kap),\n      d[1] * (c[0] > kap * eps ? Math.pow((c[0] + 16) / 116, 3) : c[0] / kap),\n      d[2] * (zzz > eps ? zzz : (116 * z - 16) / kap),\n      lab.alpha\n    );\n    return normalizedOutput ? cc.normalize() : cc;\n  }\n  static XYZtoLUV(xyz, normalizedInput = false, normalizedOutput = false) {\n    let [x, y, z] = normalizedInput ? xyz.$normalize(false) : xyz;\n    let u = 4 * x / (x + 15 * y + 3 * z);\n    let v = 9 * y / (x + 15 * y + 3 * z);\n    y = y / 100;\n    y = y > 8856e-6 ? Math.pow(y, 1 / 3) : 7.787 * y + 16 / 116;\n    let refU = 4 * _Color.D65[0] / (_Color.D65[0] + 15 * _Color.D65[1] + 3 * _Color.D65[2]);\n    let refV = 9 * _Color.D65[1] / (_Color.D65[0] + 15 * _Color.D65[1] + 3 * _Color.D65[2]);\n    let L = 116 * y - 16;\n    return _Color.luv(\n      L,\n      13 * L * (u - refU),\n      13 * L * (v - refV),\n      xyz.alpha\n    );\n  }\n  static LUVtoXYZ(luv, normalizedInput = false, normalizedOutput = false) {\n    let [l, u, v] = normalizedInput ? luv.$normalize(false) : luv;\n    let y = (l + 16) / 116;\n    let cubeY = y * y * y;\n    y = cubeY > 8856e-6 ? cubeY : (y - 16 / 116) / 7.787;\n    let refU = 4 * _Color.D65[0] / (_Color.D65[0] + 15 * _Color.D65[1] + 3 * _Color.D65[2]);\n    let refV = 9 * _Color.D65[1] / (_Color.D65[0] + 15 * _Color.D65[1] + 3 * _Color.D65[2]);\n    u = u / (13 * l) + refU;\n    v = v / (13 * l) + refV;\n    y = y * 100;\n    let x = -1 * (9 * y * u) / ((u - 4) * v - u * v);\n    let z = (9 * y - 15 * v * y - v * x) / (3 * v);\n    return _Color.xyz(x, y, z, luv.alpha);\n  }\n  static LABtoLCH(lab, normalizedInput = false, normalizedOutput = false) {\n    let c = normalizedInput ? lab.$normalize(false) : lab;\n    let h = Geom.toDegree(Geom.boundRadian(Math.atan2(c[2], c[1])));\n    return _Color.lch(\n      c[0],\n      Math.sqrt(c[1] * c[1] + c[2] * c[2]),\n      h,\n      lab.alpha\n    );\n  }\n  static LCHtoLAB(lch, normalizedInput = false, normalizedOutput = false) {\n    let c = normalizedInput ? lch.$normalize(false) : lch;\n    let rad = Geom.toRadian(c[2]);\n    return _Color.lab(\n      c[0],\n      Math.cos(rad) * c[1],\n      Math.sin(rad) * c[1],\n      lch.alpha\n    );\n  }\n};\nvar Color = _Color;\nColor.D65 = new Pt(95.047, 100, 108.883, 1);\nColor.ranges = {\n  rgb: new Group(new Pt(0, 255), new Pt(0, 255), new Pt(0, 255)),\n  hsl: new Group(new Pt(0, 360), new Pt(0, 1), new Pt(0, 1)),\n  hsb: new Group(new Pt(0, 360), new Pt(0, 1), new Pt(0, 1)),\n  lab: new Group(new Pt(0, 100), new Pt(-128, 127), new Pt(-128, 127)),\n  lch: new Group(new Pt(0, 100), new Pt(0, 100), new Pt(0, 360)),\n  luv: new Group(new Pt(0, 100), new Pt(-134, 220), new Pt(-140, 122)),\n  xyz: new Group(new Pt(0, 100), new Pt(0, 100), new Pt(0, 100))\n};\n\n// src/Dom.ts\nvar DOMSpace = class extends MultiTouchSpace {\n  constructor(elem, callback) {\n    super();\n    this.id = \"domspace\";\n    this._autoResize = true;\n    this._bgcolor = \"#e1e9f0\";\n    this._css = {};\n    var _selector = null;\n    var _existed = false;\n    this.id = \"pts\";\n    if (elem instanceof Element) {\n      _selector = elem;\n      this.id = \"pts_existing_space\";\n    } else {\n      _selector = document.querySelector(elem);\n      _existed = true;\n      this.id = elem.substr(1);\n    }\n    if (!_selector) {\n      this._container = DOMSpace.createElement(\"div\", \"pts_container\");\n      this._canvas = DOMSpace.createElement(\"div\", \"pts_element\");\n      this._container.appendChild(this._canvas);\n      document.body.appendChild(this._container);\n      _existed = false;\n    } else {\n      this._canvas = _selector;\n      this._container = _selector.parentElement;\n    }\n    setTimeout(this._ready.bind(this, callback), 50);\n  }\n  static createElement(elem = \"div\", id, appendTo) {\n    let d = document.createElement(elem);\n    if (id)\n      d.setAttribute(\"id\", id);\n    if (appendTo && appendTo.appendChild)\n      appendTo.appendChild(d);\n    return d;\n  }\n  _ready(callback) {\n    if (!this._container)\n      throw new Error(`Cannot initiate #${this.id} element`);\n    this._isReady = true;\n    this._resizeHandler(null);\n    this.clear(this._bgcolor);\n    this._canvas.dispatchEvent(new Event(\"ready\"));\n    for (let k in this.players) {\n      if (this.players.hasOwnProperty(k)) {\n        if (this.players[k].start)\n          this.players[k].start(this.bound.clone(), this);\n      }\n    }\n    this._pointer = this.center;\n    this.refresh(false);\n    if (callback)\n      callback(this.bound, this._canvas);\n  }\n  setup(opt) {\n    if (opt.bgcolor) {\n      this._bgcolor = opt.bgcolor;\n    }\n    this.autoResize = opt.resize != void 0 ? opt.resize : false;\n    return this;\n  }\n  getForm() {\n    return null;\n  }\n  set autoResize(auto) {\n    this._autoResize = auto;\n    if (auto) {\n      window.addEventListener(\"resize\", this._resizeHandler.bind(this));\n    } else {\n      delete this._css[\"width\"];\n      delete this._css[\"height\"];\n      window.removeEventListener(\"resize\", this._resizeHandler.bind(this));\n    }\n  }\n  get autoResize() {\n    return this._autoResize;\n  }\n  resize(b, evt) {\n    this.bound = b;\n    this.styles({ width: `${b.width}px`, height: `${b.height}px` }, true);\n    for (let k in this.players) {\n      if (this.players.hasOwnProperty(k)) {\n        let p = this.players[k];\n        if (p.resize)\n          p.resize(this.bound, evt);\n      }\n    }\n    return this;\n  }\n  _resizeHandler(evt) {\n    let b = Bound.fromBoundingRect(this._container.getBoundingClientRect());\n    if (this._autoResize) {\n      this.styles({ width: \"100%\", height: \"100%\" }, true);\n    } else {\n      this.styles({ width: `${b.width}px`, height: `${b.height}px` }, true);\n    }\n    this.resize(b, evt);\n  }\n  get element() {\n    return this._canvas;\n  }\n  get parent() {\n    return this._container;\n  }\n  get ready() {\n    return this._isReady;\n  }\n  clear(bg) {\n    if (bg)\n      this.background = bg;\n    this._canvas.innerHTML = \"\";\n    return this;\n  }\n  set background(bg) {\n    this._bgcolor = bg;\n    this._container.style.backgroundColor = this._bgcolor;\n  }\n  get background() {\n    return this._bgcolor;\n  }\n  style(key, val, update = false) {\n    this._css[key] = val;\n    if (update)\n      this._canvas.style[key] = val;\n    return this;\n  }\n  styles(styles, update = false) {\n    for (let k in styles) {\n      if (styles.hasOwnProperty(k))\n        this.style(k, styles[k], update);\n    }\n    return this;\n  }\n  static setAttr(elem, data) {\n    for (let k in data) {\n      if (data.hasOwnProperty(k)) {\n        elem.setAttribute(k, data[k]);\n      }\n    }\n    return elem;\n  }\n  static getInlineStyles(data) {\n    let str = \"\";\n    for (let k in data) {\n      if (data.hasOwnProperty(k)) {\n        if (data[k])\n          str += `${k}: ${data[k]}; `;\n      }\n    }\n    return str;\n  }\n  dispose() {\n    window.removeEventListener(\"resize\", this._resizeHandler.bind(this));\n    this.stop();\n    this.removeAll();\n    return this;\n  }\n};\nvar HTMLSpace = class extends DOMSpace {\n  getForm() {\n    return new HTMLForm(this);\n  }\n  static htmlElement(parent, name, id, autoClass = true) {\n    if (!parent || !parent.appendChild)\n      throw new Error(\"parent is not a valid DOM element\");\n    let elem = document.querySelector(`#${id}`);\n    if (!elem) {\n      elem = document.createElement(name);\n      elem.setAttribute(\"id\", id);\n      if (autoClass)\n        elem.setAttribute(\"class\", id.substring(0, id.indexOf(\"-\")));\n      parent.appendChild(elem);\n    }\n    return elem;\n  }\n  remove(player) {\n    let temp = this._container.querySelectorAll(\".\" + HTMLForm.scopeID(player));\n    temp.forEach((el) => {\n      el.parentNode.removeChild(el);\n    });\n    return super.remove(player);\n  }\n  removeAll() {\n    this._container.innerHTML = \"\";\n    return super.removeAll();\n  }\n};\nvar _HTMLForm = class extends VisualForm {\n  constructor(space) {\n    super();\n    this._style = {\n      \"filled\": true,\n      \"stroked\": true,\n      \"background\": \"#f03\",\n      \"border-color\": \"#fff\",\n      \"color\": \"#000\",\n      \"border-width\": \"1px\",\n      \"border-radius\": \"0\",\n      \"border-style\": \"solid\",\n      \"opacity\": 1,\n      \"position\": \"absolute\",\n      \"top\": 0,\n      \"left\": 0,\n      \"width\": 0,\n      \"height\": 0\n    };\n    this._ctx = {\n      group: null,\n      groupID: \"pts\",\n      groupCount: 0,\n      currentID: \"pts0\",\n      currentClass: \"\",\n      style: {}\n    };\n    this._ready = false;\n    this._space = space;\n    this._space.add({ start: () => {\n      this._ctx.group = this._space.element;\n      this._ctx.groupID = \"pts_dom_\" + _HTMLForm.groupID++;\n      this._ctx.style = Object.assign({}, this._style);\n      this._ready = true;\n    } });\n  }\n  get space() {\n    return this._space;\n  }\n  styleTo(k, v, unit = \"\") {\n    if (this._ctx.style[k] === void 0)\n      throw new Error(`${k} style property doesn't exist`);\n    this._ctx.style[k] = `${v}${unit}`;\n  }\n  alpha(a) {\n    this.styleTo(\"opacity\", a);\n    return this;\n  }\n  fill(c) {\n    if (typeof c == \"boolean\") {\n      this.styleTo(\"filled\", c);\n      if (!c)\n        this.styleTo(\"background\", \"transparent\");\n    } else {\n      this.styleTo(\"filled\", true);\n      this.styleTo(\"background\", c);\n    }\n    return this;\n  }\n  stroke(c, width, linejoin, linecap) {\n    if (typeof c == \"boolean\") {\n      this.styleTo(\"stroked\", c);\n      if (!c)\n        this.styleTo(\"border-width\", 0);\n    } else {\n      this.styleTo(\"stroked\", true);\n      this.styleTo(\"border-color\", c);\n      this.styleTo(\"border-width\", (width || 1) + \"px\");\n    }\n    return this;\n  }\n  fillText(c) {\n    this.styleTo(\"color\", c);\n    return this;\n  }\n  cls(c) {\n    if (typeof c == \"boolean\") {\n      this._ctx.currentClass = \"\";\n    } else {\n      this._ctx.currentClass = c;\n    }\n    return this;\n  }\n  font(sizeOrFont, weight, style, lineHeight, family) {\n    if (typeof sizeOrFont == \"number\") {\n      this._font.size = sizeOrFont;\n      if (family)\n        this._font.face = family;\n      if (weight)\n        this._font.weight = weight;\n      if (style)\n        this._font.style = style;\n      if (lineHeight)\n        this._font.lineHeight = lineHeight;\n    } else {\n      this._font = sizeOrFont;\n    }\n    this._ctx.style[\"font\"] = this._font.value;\n    return this;\n  }\n  reset() {\n    this._ctx.style = Object.assign({}, this._style);\n    this._font = new Font(10, \"sans-serif\");\n    this._ctx.style[\"font\"] = this._font.value;\n    return this;\n  }\n  updateScope(group_id, group) {\n    this._ctx.group = group;\n    this._ctx.groupID = group_id;\n    this._ctx.groupCount = 0;\n    this.nextID();\n    return this._ctx;\n  }\n  scope(item) {\n    if (!item || item.animateID == null)\n      throw new Error(\"item not defined or not yet added to Space\");\n    return this.updateScope(_HTMLForm.scopeID(item), this.space.element);\n  }\n  nextID() {\n    this._ctx.groupCount++;\n    this._ctx.currentID = `${this._ctx.groupID}-${this._ctx.groupCount}`;\n    return this._ctx.currentID;\n  }\n  static getID(ctx) {\n    return ctx.currentID || `p-${_HTMLForm.domID++}`;\n  }\n  static scopeID(item) {\n    return `item-${item.animateID}`;\n  }\n  static style(elem, styles) {\n    let st = [];\n    if (!styles[\"filled\"])\n      st.push(\"background: none\");\n    if (!styles[\"stroked\"])\n      st.push(\"border: none\");\n    for (let k in styles) {\n      if (styles.hasOwnProperty(k) && k != \"filled\" && k != \"stroked\") {\n        let v = styles[k];\n        if (v) {\n          if (!styles[\"filled\"] && k.indexOf(\"background\") === 0) {\n            continue;\n          } else if (!styles[\"stroked\"] && k.indexOf(\"border-width\") === 0) {\n            continue;\n          } else {\n            st.push(`${k}: ${v}`);\n          }\n        }\n      }\n    }\n    return HTMLSpace.setAttr(elem, { style: st.join(\";\") });\n  }\n  static rectStyle(ctx, pt, size) {\n    ctx.style[\"left\"] = pt[0] + \"px\";\n    ctx.style[\"top\"] = pt[1] + \"px\";\n    ctx.style[\"width\"] = size[0] + \"px\";\n    ctx.style[\"height\"] = size[1] + \"px\";\n    return ctx;\n  }\n  static textStyle(ctx, pt) {\n    ctx.style[\"left\"] = pt[0] + \"px\";\n    ctx.style[\"top\"] = pt[1] + \"px\";\n    return ctx;\n  }\n  static point(ctx, pt, radius = 5, shape = \"square\") {\n    if (shape === \"circle\") {\n      return _HTMLForm.circle(ctx, pt, radius);\n    } else {\n      return _HTMLForm.square(ctx, pt, radius);\n    }\n  }\n  point(pt, radius = 5, shape = \"square\") {\n    this.nextID();\n    if (shape == \"circle\")\n      this.styleTo(\"border-radius\", \"100%\");\n    _HTMLForm.point(this._ctx, pt, radius, shape);\n    return this;\n  }\n  static circle(ctx, pt, radius = 10) {\n    let elem = HTMLSpace.htmlElement(ctx.group, \"div\", _HTMLForm.getID(ctx));\n    HTMLSpace.setAttr(elem, { class: `pts-form pts-circle ${ctx.currentClass}` });\n    _HTMLForm.rectStyle(ctx, new Pt(pt).$subtract(radius), new Pt(radius * 2, radius * 2));\n    _HTMLForm.style(elem, ctx.style);\n    return elem;\n  }\n  circle(pts) {\n    this.nextID();\n    this.styleTo(\"border-radius\", \"100%\");\n    _HTMLForm.circle(this._ctx, pts[0], pts[1][0]);\n    return this;\n  }\n  static square(ctx, pt, halfsize) {\n    let elem = HTMLSpace.htmlElement(ctx.group, \"div\", _HTMLForm.getID(ctx));\n    HTMLSpace.setAttr(elem, { class: `pts-form pts-square ${ctx.currentClass}` });\n    _HTMLForm.rectStyle(ctx, new Pt(pt).$subtract(halfsize), new Pt(halfsize * 2, halfsize * 2));\n    _HTMLForm.style(elem, ctx.style);\n    return elem;\n  }\n  square(pt, halfsize) {\n    this.nextID();\n    _HTMLForm.square(this._ctx, pt, halfsize);\n    return this;\n  }\n  static rect(ctx, pts) {\n    let p = Util.iterToArray(pts);\n    if (!Util.arrayCheck(p))\n      return;\n    let elem = HTMLSpace.htmlElement(ctx.group, \"div\", _HTMLForm.getID(ctx));\n    HTMLSpace.setAttr(elem, { class: `pts-form pts-rect ${ctx.currentClass}` });\n    _HTMLForm.rectStyle(ctx, p[0], p[1]);\n    _HTMLForm.style(elem, ctx.style);\n    return elem;\n  }\n  rect(pts) {\n    this.nextID();\n    this.styleTo(\"border-radius\", \"0\");\n    _HTMLForm.rect(this._ctx, pts);\n    return this;\n  }\n  static text(ctx, pt, txt) {\n    let elem = HTMLSpace.htmlElement(ctx.group, \"div\", _HTMLForm.getID(ctx));\n    HTMLSpace.setAttr(elem, { class: `pts-form pts-text ${ctx.currentClass}` });\n    elem.textContent = txt;\n    _HTMLForm.textStyle(ctx, pt);\n    _HTMLForm.style(elem, ctx.style);\n    return elem;\n  }\n  text(pt, txt) {\n    this.nextID();\n    _HTMLForm.text(this._ctx, pt, txt);\n    return this;\n  }\n  log(txt) {\n    this.fill(\"#000\").stroke(\"#fff\", 0.5).text([10, 14], txt);\n    return this;\n  }\n  arc(pt, radius, startAngle, endAngle, cc) {\n    Util.warn(\"arc is not implemented in HTMLForm\");\n    return this;\n  }\n  line(pts) {\n    Util.warn(\"line is not implemented in HTMLForm\");\n    return this;\n  }\n  polygon(pts) {\n    Util.warn(\"polygon is not implemented in HTMLForm\");\n    return this;\n  }\n};\nvar HTMLForm = _HTMLForm;\nHTMLForm.groupID = 0;\nHTMLForm.domID = 0;\n\n// src/Svg.ts\nvar SVGSpace = class extends DOMSpace {\n  constructor(elem, callback) {\n    super(elem, callback);\n    this._bgcolor = \"#999\";\n    if (this._canvas.nodeName.toLowerCase() != \"svg\") {\n      let s = SVGSpace.svgElement(this._canvas, \"svg\", `${this.id}_svg`);\n      this._container = this._canvas;\n      this._canvas = s;\n    }\n  }\n  getForm() {\n    return new SVGForm(this);\n  }\n  get element() {\n    return this._canvas;\n  }\n  resize(b, evt) {\n    super.resize(b, evt);\n    SVGSpace.setAttr(this.element, {\n      \"viewBox\": `0 0 ${this.bound.width} ${this.bound.height}`,\n      \"width\": `${this.bound.width}`,\n      \"height\": `${this.bound.height}`,\n      \"xmlns\": \"http://www.w3.org/2000/svg\",\n      \"version\": \"1.1\"\n    });\n    return this;\n  }\n  static svgElement(parent, name, id) {\n    if (!parent || !parent.appendChild)\n      throw new Error(\"parent is not a valid DOM element\");\n    let elem = document.querySelector(`#${id}`);\n    if (!elem) {\n      elem = document.createElementNS(\"http://www.w3.org/2000/svg\", name);\n      elem.setAttribute(\"id\", id);\n      parent.appendChild(elem);\n    }\n    return elem;\n  }\n  remove(player) {\n    let temp = this._container.querySelectorAll(\".\" + SVGForm.scopeID(player));\n    temp.forEach((el) => {\n      el.parentNode.removeChild(el);\n    });\n    return super.remove(player);\n  }\n  removeAll() {\n    this._container.innerHTML = \"\";\n    return super.removeAll();\n  }\n};\nvar _SVGForm = class extends VisualForm {\n  constructor(space) {\n    super();\n    this._style = {\n      \"filled\": true,\n      \"stroked\": true,\n      \"fill\": \"#f03\",\n      \"stroke\": \"#fff\",\n      \"stroke-width\": 1,\n      \"stroke-linejoin\": \"bevel\",\n      \"stroke-linecap\": \"sqaure\",\n      \"opacity\": 1\n    };\n    this._ctx = {\n      group: null,\n      groupID: \"pts\",\n      groupCount: 0,\n      currentID: \"pts0\",\n      currentClass: \"\",\n      style: {}\n    };\n    this._ready = false;\n    this._space = space;\n    this._space.add({ start: () => {\n      this._ctx.group = this._space.element;\n      this._ctx.groupID = \"pts_svg_\" + _SVGForm.groupID++;\n      this._ctx.style = Object.assign({}, this._style);\n      this._ready = true;\n    } });\n  }\n  get space() {\n    return this._space;\n  }\n  styleTo(k, v) {\n    if (this._ctx.style[k] === void 0)\n      throw new Error(`${k} style property doesn't exist`);\n    this._ctx.style[k] = v;\n  }\n  alpha(a) {\n    this.styleTo(\"opacity\", a);\n    return this;\n  }\n  fill(c) {\n    if (typeof c == \"boolean\") {\n      this.styleTo(\"filled\", c);\n    } else {\n      this.styleTo(\"filled\", true);\n      this.styleTo(\"fill\", c);\n    }\n    return this;\n  }\n  stroke(c, width, linejoin, linecap) {\n    if (typeof c == \"boolean\") {\n      this.styleTo(\"stroked\", c);\n    } else {\n      this.styleTo(\"stroked\", true);\n      this.styleTo(\"stroke\", c);\n      if (width)\n        this.styleTo(\"stroke-width\", width);\n      if (linejoin)\n        this.styleTo(\"stroke-linejoin\", linejoin);\n      if (linecap)\n        this.styleTo(\"stroke-linecap\", linecap);\n    }\n    return this;\n  }\n  cls(c) {\n    if (typeof c == \"boolean\") {\n      this._ctx.currentClass = \"\";\n    } else {\n      this._ctx.currentClass = c;\n    }\n    return this;\n  }\n  font(sizeOrFont, weight, style, lineHeight, family) {\n    if (typeof sizeOrFont == \"number\") {\n      this._font.size = sizeOrFont;\n      if (family)\n        this._font.face = family;\n      if (weight)\n        this._font.weight = weight;\n      if (style)\n        this._font.style = style;\n      if (lineHeight)\n        this._font.lineHeight = lineHeight;\n    } else {\n      this._font = sizeOrFont;\n    }\n    this._ctx.style[\"font\"] = this._font.value;\n    return this;\n  }\n  reset() {\n    this._ctx.style = Object.assign({}, this._style);\n    this._font = new Font(10, \"sans-serif\");\n    this._ctx.style[\"font\"] = this._font.value;\n    return this;\n  }\n  updateScope(group_id, group) {\n    this._ctx.group = group;\n    this._ctx.groupID = group_id;\n    this._ctx.groupCount = 0;\n    this.nextID();\n    return this._ctx;\n  }\n  scope(item) {\n    if (!item || item.animateID == null)\n      throw new Error(\"item not defined or not yet added to Space\");\n    return this.updateScope(_SVGForm.scopeID(item), this.space.element);\n  }\n  nextID() {\n    this._ctx.groupCount++;\n    this._ctx.currentID = `${this._ctx.groupID}-${this._ctx.groupCount}`;\n    return this._ctx.currentID;\n  }\n  static getID(ctx) {\n    return ctx.currentID || `p-${_SVGForm.domID++}`;\n  }\n  static scopeID(item) {\n    return `item-${item.animateID}`;\n  }\n  static style(elem, styles) {\n    let st = [];\n    if (!styles[\"filled\"])\n      st.push(\"fill: none\");\n    if (!styles[\"stroked\"])\n      st.push(\"stroke: none\");\n    for (let k in styles) {\n      if (styles.hasOwnProperty(k) && k != \"filled\" && k != \"stroked\") {\n        let v = styles[k];\n        if (v) {\n          if (!styles[\"filled\"] && k.indexOf(\"fill\") === 0) {\n            continue;\n          } else if (!styles[\"stroked\"] && k.indexOf(\"stroke\") === 0) {\n            continue;\n          } else {\n            st.push(`${k}: ${v}`);\n          }\n        }\n      }\n    }\n    return DOMSpace.setAttr(elem, { style: st.join(\";\") });\n  }\n  static point(ctx, pt, radius = 5, shape = \"square\") {\n    if (shape === \"circle\") {\n      return _SVGForm.circle(ctx, pt, radius);\n    } else {\n      return _SVGForm.square(ctx, pt, radius);\n    }\n  }\n  point(pt, radius = 5, shape = \"square\") {\n    this.nextID();\n    _SVGForm.point(this._ctx, pt, radius, shape);\n    return this;\n  }\n  static circle(ctx, pt, radius = 10) {\n    let elem = SVGSpace.svgElement(ctx.group, \"circle\", _SVGForm.getID(ctx));\n    DOMSpace.setAttr(elem, {\n      cx: pt[0],\n      cy: pt[1],\n      r: radius,\n      \"class\": `pts-svgform pts-circle ${ctx.currentClass}`\n    });\n    _SVGForm.style(elem, ctx.style);\n    return elem;\n  }\n  circle(pts) {\n    this.nextID();\n    let p = Util.iterToArray(pts);\n    _SVGForm.circle(this._ctx, p[0], p[1][0]);\n    return this;\n  }\n  static arc(ctx, pt, radius, startAngle, endAngle, cc) {\n    let elem = SVGSpace.svgElement(ctx.group, \"path\", _SVGForm.getID(ctx));\n    const start = new Pt(pt).toAngle(startAngle, radius, true);\n    const end = new Pt(pt).toAngle(endAngle, radius, true);\n    const diff = Geom.boundAngle(endAngle) - Geom.boundAngle(startAngle);\n    let largeArc = diff > Const.pi ? true : false;\n    if (cc)\n      largeArc = !largeArc;\n    const sweep = cc ? \"0\" : \"1\";\n    const d = `M ${start[0]} ${start[1]} A ${radius} ${radius} 0 ${largeArc ? \"1\" : \"0\"} ${sweep} ${end[0]} ${end[1]}`;\n    DOMSpace.setAttr(elem, {\n      d,\n      \"class\": `pts-svgform pts-arc ${ctx.currentClass}`\n    });\n    _SVGForm.style(elem, ctx.style);\n    return elem;\n  }\n  arc(pt, radius, startAngle, endAngle, cc) {\n    this.nextID();\n    _SVGForm.arc(this._ctx, pt, radius, startAngle, endAngle, cc);\n    return this;\n  }\n  static square(ctx, pt, halfsize) {\n    let elem = SVGSpace.svgElement(ctx.group, \"rect\", _SVGForm.getID(ctx));\n    DOMSpace.setAttr(elem, {\n      x: pt[0] - halfsize,\n      y: pt[1] - halfsize,\n      width: halfsize * 2,\n      height: halfsize * 2,\n      \"class\": `pts-svgform pts-square ${ctx.currentClass}`\n    });\n    _SVGForm.style(elem, ctx.style);\n    return elem;\n  }\n  square(pt, halfsize) {\n    this.nextID();\n    _SVGForm.square(this._ctx, pt, halfsize);\n    return this;\n  }\n  static line(ctx, pts) {\n    let points = _SVGForm.pointsString(pts);\n    if (points.count < 2)\n      return;\n    if (points.count > 2)\n      return _SVGForm._poly(ctx, points.string, false);\n    let elem = SVGSpace.svgElement(ctx.group, \"line\", _SVGForm.getID(ctx));\n    let p = Util.iterToArray(pts);\n    DOMSpace.setAttr(elem, {\n      x1: p[0][0],\n      y1: p[0][1],\n      x2: p[1][0],\n      y2: p[1][1],\n      \"class\": `pts-svgform pts-line ${ctx.currentClass}`\n    });\n    _SVGForm.style(elem, ctx.style);\n    return elem;\n  }\n  line(pts) {\n    this.nextID();\n    _SVGForm.line(this._ctx, pts);\n    return this;\n  }\n  static _poly(ctx, points, closePath = true) {\n    let elem = SVGSpace.svgElement(ctx.group, closePath ? \"polygon\" : \"polyline\", _SVGForm.getID(ctx));\n    DOMSpace.setAttr(elem, {\n      points,\n      \"class\": `pts-svgform pts-polygon ${ctx.currentClass}`\n    });\n    _SVGForm.style(elem, ctx.style);\n    return elem;\n  }\n  static pointsString(pts) {\n    let points = \"\";\n    let count = 0;\n    for (let p of pts) {\n      points += `${p[0]},${p[1]} `;\n      count++;\n    }\n    return { string: points, count };\n  }\n  static polygon(ctx, pts) {\n    let points = _SVGForm.pointsString(pts);\n    return _SVGForm._poly(ctx, points.string, true);\n  }\n  polygon(pts) {\n    this.nextID();\n    _SVGForm.polygon(this._ctx, pts);\n    return this;\n  }\n  static rect(ctx, pts) {\n    if (!Util.arrayCheck(pts))\n      return;\n    let elem = SVGSpace.svgElement(ctx.group, \"rect\", _SVGForm.getID(ctx));\n    let bound = Group.fromArray(pts).boundingBox();\n    let size = Rectangle.size(bound);\n    DOMSpace.setAttr(elem, {\n      x: bound[0][0],\n      y: bound[0][1],\n      width: size[0],\n      height: size[1],\n      \"class\": `pts-svgform pts-rect ${ctx.currentClass}`\n    });\n    _SVGForm.style(elem, ctx.style);\n    return elem;\n  }\n  rect(pts) {\n    this.nextID();\n    _SVGForm.rect(this._ctx, pts);\n    return this;\n  }\n  static text(ctx, pt, txt) {\n    let elem = SVGSpace.svgElement(ctx.group, \"text\", _SVGForm.getID(ctx));\n    DOMSpace.setAttr(elem, {\n      \"pointer-events\": \"none\",\n      x: pt[0],\n      y: pt[1],\n      dx: 0,\n      dy: 0,\n      \"class\": `pts-svgform pts-text ${ctx.currentClass}`\n    });\n    elem.textContent = txt;\n    _SVGForm.style(elem, ctx.style);\n    return elem;\n  }\n  text(pt, txt) {\n    this.nextID();\n    _SVGForm.text(this._ctx, pt, txt);\n    return this;\n  }\n  log(txt) {\n    this.fill(\"#000\").stroke(\"#fff\", 0.5).text([10, 14], txt);\n    return this;\n  }\n};\nvar SVGForm = _SVGForm;\nSVGForm.groupID = 0;\nSVGForm.domID = 0;\n\n// src/Physics.ts\nvar World = class {\n  constructor(bound, friction = 1, gravity = 0) {\n    this._lastTime = null;\n    this._gravity = new Pt();\n    this._friction = 1;\n    this._damping = 0.75;\n    this._particles = [];\n    this._bodies = [];\n    this._pnames = [];\n    this._bnames = [];\n    this._bound = Bound.fromGroup(bound);\n    this._friction = friction;\n    this._gravity = typeof gravity === \"number\" ? new Pt(0, gravity) : new Pt(gravity);\n    return this;\n  }\n  get bound() {\n    return this._bound;\n  }\n  set bound(bound) {\n    this._bound = bound;\n  }\n  get gravity() {\n    return this._gravity;\n  }\n  set gravity(g) {\n    this._gravity = g;\n  }\n  get friction() {\n    return this._friction;\n  }\n  set friction(f) {\n    this._friction = f;\n  }\n  get damping() {\n    return this._damping;\n  }\n  set damping(f) {\n    this._damping = f;\n  }\n  get bodyCount() {\n    return this._bodies.length;\n  }\n  get particleCount() {\n    return this._particles.length;\n  }\n  body(id) {\n    let idx = id;\n    if (typeof id === \"string\" && id.length > 0) {\n      idx = this._bnames.indexOf(id);\n    }\n    if (!(idx >= 0))\n      return void 0;\n    return this._bodies[idx];\n  }\n  particle(id) {\n    let idx = id;\n    if (typeof id === \"string\" && id.length > 0) {\n      idx = this._pnames.indexOf(id);\n    }\n    if (!(idx >= 0))\n      return void 0;\n    return this._particles[idx];\n  }\n  bodyIndex(name) {\n    return this._bnames.indexOf(name);\n  }\n  particleIndex(name) {\n    return this._pnames.indexOf(name);\n  }\n  update(ms) {\n    let dt = ms / 1e3;\n    this._updateParticles(dt);\n    this._updateBodies(dt);\n  }\n  drawParticles(fn) {\n    this._drawParticles = fn;\n  }\n  drawBodies(fn) {\n    this._drawBodies = fn;\n  }\n  add(p, name = \"\") {\n    if (p instanceof Body) {\n      this._bodies.push(p);\n      this._bnames.push(name);\n    } else {\n      this._particles.push(p);\n      this._pnames.push(name);\n    }\n    return this;\n  }\n  _index(fn, id) {\n    let index = 0;\n    if (typeof id === \"string\") {\n      index = fn(id);\n      if (index < 0)\n        throw new Error(`Cannot find index of ${id}. You can use particleIndex() or bodyIndex() function to check existence by name.`);\n    } else {\n      index = id;\n    }\n    return index;\n  }\n  removeBody(from, count = 1) {\n    const index = this._index(this.bodyIndex.bind(this), from);\n    const param = index < 0 ? [index * -1 - 1, count] : [index, count];\n    this._bodies.splice(param[0], param[1]);\n    this._bnames.splice(param[0], param[1]);\n    return this;\n  }\n  removeParticle(from, count = 1) {\n    const index = this._index(this.particleIndex.bind(this), from);\n    const param = index < 0 ? [index * -1 - 1, count] : [index, count];\n    this._particles.splice(param[0], param[1]);\n    this._pnames.splice(param[0], param[1]);\n    return this;\n  }\n  static edgeConstraint(p1, p2, dist, stiff = 1, precise = false) {\n    const m1 = 1 / (p1.mass || 1);\n    const m2 = 1 / (p2.mass || 1);\n    const mm = m1 + m2;\n    let delta = p2.$subtract(p1);\n    let distSq = dist * dist;\n    let d = precise ? dist / delta.magnitude() - 1 : distSq / (delta.dot(delta) + distSq) - 0.5;\n    let f = delta.$multiply(d * stiff);\n    p1.subtract(f.$multiply(m1 / mm));\n    p2.add(f.$multiply(m2 / mm));\n    return p1;\n  }\n  static boundConstraint(p, rect, damping = 0.75) {\n    let bound = Geom.boundingBox(rect);\n    let np = p.$min(bound[1].subtract(p.radius)).$max(bound[0].add(p.radius));\n    if (np[0] === bound[0][0] || np[0] === bound[1][0]) {\n      let c = p.changed.$multiply(damping);\n      p.previous = np.$subtract(new Pt(-c[0], c[1]));\n    } else if (np[1] === bound[0][1] || np[1] === bound[1][1]) {\n      let c = p.changed.$multiply(damping);\n      p.previous = np.$subtract(new Pt(c[0], -c[1]));\n    }\n    p.to(np);\n  }\n  integrate(p, dt, prevDt) {\n    p.addForce(this._gravity);\n    p.verlet(dt, this._friction, prevDt);\n    return p;\n  }\n  _updateParticles(dt) {\n    for (let i = 0, len = this._particles.length; i < len; i++) {\n      let p = this._particles[i];\n      this.integrate(p, dt, this._lastTime);\n      World.boundConstraint(p, this._bound, this._damping);\n      for (let k = i + 1; k < len; k++) {\n        if (i !== k) {\n          let p2 = this._particles[k];\n          p.collide(p2, this._damping);\n        }\n      }\n      if (this._drawParticles)\n        this._drawParticles(p, i);\n    }\n    this._lastTime = dt;\n  }\n  _updateBodies(dt) {\n    for (let i = 0, len = this._bodies.length; i < len; i++) {\n      let bds = this._bodies[i];\n      if (bds) {\n        for (let k = 0, klen = bds.length; k < klen; k++) {\n          let bk = bds[k];\n          World.boundConstraint(bk, this._bound, this._damping);\n          this.integrate(bk, dt, this._lastTime);\n        }\n        for (let k = i + 1; k < len; k++) {\n          bds.processBody(this._bodies[k]);\n        }\n        for (let m = 0, mlen = this._particles.length; m < mlen; m++) {\n          bds.processParticle(this._particles[m]);\n        }\n        bds.processEdges();\n        if (this._drawBodies)\n          this._drawBodies(bds, i);\n      }\n    }\n  }\n};\nvar Particle = class extends Pt {\n  constructor(...args) {\n    super(...args);\n    this._mass = 1;\n    this._radius = 0;\n    this._force = new Pt();\n    this._prev = new Pt();\n    this._lock = false;\n    this._prev = this.clone();\n  }\n  get mass() {\n    return this._mass;\n  }\n  set mass(m) {\n    this._mass = m;\n  }\n  get radius() {\n    return this._radius;\n  }\n  set radius(f) {\n    this._radius = f;\n  }\n  get previous() {\n    return this._prev;\n  }\n  set previous(p) {\n    this._prev = p;\n  }\n  get force() {\n    return this._force;\n  }\n  set force(g) {\n    this._force = g;\n  }\n  get body() {\n    return this._body;\n  }\n  set body(b) {\n    this._body = b;\n  }\n  get lock() {\n    return this._lock;\n  }\n  set lock(b) {\n    this._lock = b;\n    this._lockPt = new Pt(this);\n  }\n  get changed() {\n    return this.$subtract(this._prev);\n  }\n  set position(p) {\n    this.previous.to(this);\n    if (this._lock)\n      this._lockPt = p;\n    this.to(p);\n  }\n  size(r) {\n    this._mass = r;\n    this._radius = r;\n    return this;\n  }\n  addForce(...args) {\n    this._force.add(...args);\n    return this._force;\n  }\n  verlet(dt, friction, lastDt) {\n    if (this._lock) {\n      this.to(this._lockPt);\n    } else {\n      let lt = lastDt ? lastDt : dt;\n      let a = this._force.multiply(dt * (dt + lt) / 2);\n      let v = this.changed.multiply(friction * dt / lt).add(a);\n      this._prev = this.clone();\n      this.add(v);\n      this._force = new Pt();\n    }\n    return this;\n  }\n  hit(...args) {\n    this._prev.subtract(new Pt(...args).$divide(Math.sqrt(this._mass)));\n    return this;\n  }\n  collide(p2, damp = 1) {\n    let p1 = this;\n    let dp = p1.$subtract(p2);\n    let distSq = dp.magnitudeSq();\n    let dr = p1.radius + p2.radius;\n    if (distSq < dr * dr) {\n      let c1 = p1.changed;\n      let c2 = p2.changed;\n      let dist = Math.sqrt(distSq);\n      let d = dp.$multiply((dist - dr) / dist / 2);\n      let np1 = p1.$subtract(d);\n      let np2 = p2.$add(d);\n      p1.to(np1);\n      p2.to(np2);\n      let f1 = damp * dp.dot(c1) / distSq;\n      let f2 = damp * dp.dot(c2) / distSq;\n      let dm1 = p1.mass / (p1.mass + p2.mass);\n      let dm2 = p2.mass / (p1.mass + p2.mass);\n      c1.add(new Pt(f2 * dp[0] - f1 * dp[0], f2 * dp[1] - f1 * dp[1]).$multiply(dm2));\n      c2.add(new Pt(f1 * dp[0] - f2 * dp[0], f1 * dp[1] - f2 * dp[1]).$multiply(dm1));\n      p1.previous = p1.$subtract(c1);\n      p2.previous = p2.$subtract(c2);\n    }\n  }\n  toString() {\n    return `Particle: ${this[0]} ${this[1]} | previous ${this._prev[0]} ${this._prev[1]} | mass ${this._mass}`;\n  }\n};\nvar Body = class extends Group {\n  constructor() {\n    super();\n    this._cs = [];\n    this._stiff = 1;\n    this._locks = {};\n    this._mass = 1;\n  }\n  static fromGroup(body, stiff = 1, autoLink = true, autoMass = true) {\n    let b = new Body().init(body);\n    if (autoLink)\n      b.linkAll(stiff);\n    if (autoMass)\n      b.autoMass();\n    return b;\n  }\n  init(body, stiff = 1) {\n    let c = new Pt();\n    for (let li of body) {\n      let p = new Particle(li);\n      p.body = this;\n      c.add(li);\n      this.push(p);\n    }\n    this._stiff = stiff;\n    return this;\n  }\n  get mass() {\n    return this._mass;\n  }\n  set mass(m) {\n    this._mass = m;\n    for (let i = 0, len = this.length; i < len; i++) {\n      this[i].mass = this._mass;\n    }\n  }\n  autoMass() {\n    this.mass = Math.sqrt(Polygon.area(this)) / 10;\n    return this;\n  }\n  link(index1, index2, stiff) {\n    if (index1 < 0 || index1 >= this.length)\n      throw new Error(\"index1 is not in the Group's indices\");\n    if (index2 < 0 || index2 >= this.length)\n      throw new Error(\"index1 is not in the Group's indices\");\n    let d = this[index1].$subtract(this[index2]).magnitude();\n    this._cs.push([index1, index2, d, stiff || this._stiff]);\n    return this;\n  }\n  linkAll(stiff) {\n    let half = this.length / 2;\n    for (let i = 0, len = this.length; i < len; i++) {\n      let n = i >= len - 1 ? 0 : i + 1;\n      this.link(i, n, stiff);\n      if (len > 4) {\n        let nd = Math.floor(half / 2) + 1;\n        let n2 = i >= len - nd ? i % len : i + nd;\n        this.link(i, n2, stiff);\n      }\n      if (i <= half - 1) {\n        this.link(i, Math.min(this.length - 1, i + Math.floor(half)));\n      }\n    }\n  }\n  linksToLines() {\n    let gs = [];\n    for (let i = 0, len = this._cs.length; i < len; i++) {\n      let ln = this._cs[i];\n      gs.push(new Group(this[ln[0]], this[ln[1]]));\n    }\n    return gs;\n  }\n  processEdges() {\n    for (let i = 0, len = this._cs.length; i < len; i++) {\n      let [m, n, d, s] = this._cs[i];\n      World.edgeConstraint(this[m], this[n], d, s);\n    }\n  }\n  processBody(b) {\n    let b1 = this;\n    let b2 = b;\n    let hit = Polygon.hasIntersectPolygon(b1, b2);\n    if (hit) {\n      let cv = hit.normal.$multiply(hit.dist);\n      let t;\n      let eg = hit.edge;\n      if (Math.abs(eg[0][0] - eg[1][0]) > Math.abs(eg[0][1] - eg[1][1])) {\n        t = (hit.vertex[0] - cv[0] - eg[0][0]) / (eg[1][0] - eg[0][0]);\n      } else {\n        t = (hit.vertex[1] - cv[1] - eg[0][1]) / (eg[1][1] - eg[0][1]);\n      }\n      let lambda = 1 / (t * t + (1 - t) * (1 - t));\n      let m0 = hit.vertex.body.mass || 1;\n      let m1 = hit.edge[0].body.mass || 1;\n      let mr0 = m0 / (m0 + m1);\n      let mr1 = m1 / (m0 + m1);\n      eg[0].subtract(cv.$multiply(mr0 * (1 - t) * lambda / 2));\n      eg[1].subtract(cv.$multiply(mr0 * t * lambda / 2));\n      hit.vertex.add(cv.$multiply(mr1));\n    }\n  }\n  processParticle(b) {\n    let b1 = this;\n    let b2 = b;\n    let hit = Polygon.hasIntersectCircle(b1, Circle.fromCenter(b, b.radius));\n    if (hit) {\n      let cv = hit.normal.$multiply(hit.dist);\n      let t;\n      let eg = hit.edge;\n      if (Math.abs(eg[0][0] - eg[1][0]) > Math.abs(eg[0][1] - eg[1][1])) {\n        t = (hit.vertex[0] - cv[0] - eg[0][0]) / (eg[1][0] - eg[0][0]);\n      } else {\n        t = (hit.vertex[1] - cv[1] - eg[0][1]) / (eg[1][1] - eg[0][1]);\n      }\n      let lambda = 1 / (t * t + (1 - t) * (1 - t));\n      let m0 = hit.vertex.mass || b2.mass || 1;\n      let m1 = hit.edge[0].body.mass || 1;\n      let mr0 = m0 / (m0 + m1);\n      let mr1 = m1 / (m0 + m1);\n      eg[0].subtract(cv.$multiply(mr0 * (1 - t) * lambda / 2));\n      eg[1].subtract(cv.$multiply(mr0 * t * lambda / 2));\n      let c1 = b.changed.add(cv.$multiply(mr1));\n      b.previous = b.$subtract(c1);\n    }\n  }\n};\n\n// src/Play.ts\nvar Tempo = class {\n  constructor(bpm) {\n    this._listeners = {};\n    this._listenerInc = 0;\n    this.bpm = bpm;\n  }\n  static fromBeat(ms) {\n    return new Tempo(6e4 / ms);\n  }\n  get bpm() {\n    return this._bpm;\n  }\n  set bpm(n) {\n    this._bpm = n;\n    this._ms = 6e4 / this._bpm;\n  }\n  get ms() {\n    return this._ms;\n  }\n  set ms(n) {\n    this._bpm = Math.floor(6e4 / n);\n    this._ms = 6e4 / this._bpm;\n  }\n  _createID(listener) {\n    let id = \"\";\n    if (typeof listener === \"function\") {\n      id = \"_b\" + this._listenerInc++;\n    } else {\n      id = listener.name || \"_b\" + this._listenerInc++;\n    }\n    return id;\n  }\n  every(beats) {\n    let self = this;\n    let p = Array.isArray(beats) ? beats[0] : beats;\n    return {\n      start: function(fn, offset = 0, name) {\n        let id = name || self._createID(fn);\n        self._listeners[id] = { name: id, beats, period: p, index: 0, offset, duration: -1, continuous: false, fn };\n        return this;\n      },\n      progress: function(fn, offset = 0, name) {\n        let id = name || self._createID(fn);\n        self._listeners[id] = { name: id, beats, period: p, index: 0, offset, duration: -1, continuous: true, fn };\n        return this;\n      }\n    };\n  }\n  track(time) {\n    for (let k in this._listeners) {\n      if (this._listeners.hasOwnProperty(k)) {\n        let li = this._listeners[k];\n        let _t = li.offset ? time + li.offset : time;\n        let ms = li.period * this._ms;\n        let isStart = false;\n        if (_t > li.duration + ms) {\n          li.duration = _t - _t % this._ms;\n          if (Array.isArray(li.beats)) {\n            li.index = (li.index + 1) % li.beats.length;\n            li.period = li.beats[li.index];\n          }\n          isStart = true;\n        }\n        let count = Math.max(0, Math.ceil(Math.floor(li.duration / this._ms) / li.period));\n        let params = li.continuous ? [count, Num.clamp((_t - li.duration) / ms, 0, 1), _t, isStart] : [count];\n        if (li.continuous || isStart) {\n          let done = li.fn.apply(li, params);\n          if (done)\n            delete this._listeners[li.name];\n        }\n      }\n    }\n  }\n  stop(name) {\n    if (this._listeners[name])\n      delete this._listeners[name];\n  }\n  animate(time, ftime) {\n    this.track(time);\n  }\n  resize(bound, evt) {\n    return;\n  }\n  action(type, px, py, evt) {\n    return;\n  }\n};\nvar Sound = class {\n  constructor(type) {\n    this._playing = false;\n    this._type = type;\n    let _ctx = window.AudioContext || window.webkitAudioContext || false;\n    if (!_ctx)\n      throw new Error(\"Your browser doesn't support Web Audio. (No AudioContext)\");\n    this._ctx = _ctx ? new _ctx() : void 0;\n  }\n  static from(node, ctx, type = \"gen\", stream) {\n    let s = new Sound(type);\n    s._node = node;\n    s._ctx = ctx;\n    if (stream)\n      s._stream = stream;\n    return s;\n  }\n  static load(source, crossOrigin = \"anonymous\") {\n    return new Promise((resolve, reject) => {\n      let s = new Sound(\"file\");\n      s._source = typeof source === \"string\" ? new Audio(source) : source;\n      s._source.autoplay = false;\n      s._source.crossOrigin = crossOrigin;\n      s._source.addEventListener(\"ended\", function() {\n        s._playing = false;\n      });\n      s._source.addEventListener(\"error\", function() {\n        reject(\"Error loading sound\");\n      });\n      s._source.addEventListener(\"canplaythrough\", function() {\n        s._node = s._ctx.createMediaElementSource(s._source);\n        resolve(s);\n      });\n    });\n  }\n  static loadAsBuffer(url) {\n    return new Promise((resolve, reject) => {\n      let request = new XMLHttpRequest();\n      request.open(\"GET\", url, true);\n      request.responseType = \"arraybuffer\";\n      let s = new Sound(\"file\");\n      request.onload = function() {\n        s._ctx.decodeAudioData(request.response, function(buffer) {\n          s.createBuffer(buffer);\n          resolve(s);\n        }, (err) => reject(\"Error decoding audio\"));\n      };\n      request.send();\n    });\n  }\n  createBuffer(buf) {\n    this._node = this._ctx.createBufferSource();\n    if (buf !== void 0)\n      this._buffer = buf;\n    this._node.buffer = this._buffer;\n    this._node.onended = () => {\n      this._playing = false;\n    };\n    return this;\n  }\n  static generate(type, val) {\n    let s = new Sound(\"gen\");\n    return s._gen(type, val);\n  }\n  _gen(type, val) {\n    this._node = this._ctx.createOscillator();\n    let osc = this._node;\n    osc.type = type;\n    if (type === \"custom\") {\n      osc.setPeriodicWave(val);\n    } else {\n      osc.frequency.value = val;\n    }\n    return this;\n  }\n  static async input(constraint) {\n    try {\n      let s = new Sound(\"input\");\n      if (!s)\n        return void 0;\n      const c = constraint ? constraint : { audio: true, video: false };\n      s._stream = await navigator.mediaDevices.getUserMedia(c);\n      s._node = s._ctx.createMediaStreamSource(s._stream);\n      return s;\n    } catch (e) {\n      console.error(\"Cannot get audio from input device.\");\n      return Promise.resolve(null);\n    }\n  }\n  get ctx() {\n    return this._ctx;\n  }\n  get node() {\n    return this._node;\n  }\n  get outputNode() {\n    return this._outputNode;\n  }\n  get stream() {\n    return this._stream;\n  }\n  get source() {\n    return this._source;\n  }\n  get buffer() {\n    return this._buffer;\n  }\n  set buffer(b) {\n    this._buffer = b;\n  }\n  get type() {\n    return this._type;\n  }\n  get playing() {\n    return this._playing;\n  }\n  get progress() {\n    let dur = 0;\n    let curr = 0;\n    if (!!this._buffer) {\n      dur = this._buffer.duration;\n      curr = this._timestamp ? this._ctx.currentTime - this._timestamp : 0;\n    } else {\n      dur = this._source.duration;\n      curr = this._source.currentTime;\n    }\n    return curr / dur;\n  }\n  get playable() {\n    return this._type === \"input\" ? this._node !== void 0 : !!this._buffer || this._source.readyState === 4;\n  }\n  get binSize() {\n    return this.analyzer.size;\n  }\n  get sampleRate() {\n    return this._ctx.sampleRate;\n  }\n  get frequency() {\n    return this._type === \"gen\" ? this._node.frequency.value : 0;\n  }\n  set frequency(f) {\n    if (this._type === \"gen\")\n      this._node.frequency.value = f;\n  }\n  connect(node) {\n    this._node.connect(node);\n    return this;\n  }\n  setOutputNode(outputNode) {\n    this._outputNode = outputNode;\n    return this;\n  }\n  removeOutputNode() {\n    this._outputNode = null;\n    return this;\n  }\n  analyze(size = 256, minDb = -100, maxDb = -30, smooth = 0.8) {\n    let a = this._ctx.createAnalyser();\n    a.fftSize = size * 2;\n    a.minDecibels = minDb;\n    a.maxDecibels = maxDb;\n    a.smoothingTimeConstant = smooth;\n    this.analyzer = {\n      node: a,\n      size: a.frequencyBinCount,\n      data: new Uint8Array(a.frequencyBinCount)\n    };\n    this._node.connect(this.analyzer.node);\n    return this;\n  }\n  _domain(time) {\n    if (this.analyzer) {\n      if (time) {\n        this.analyzer.node.getByteTimeDomainData(this.analyzer.data);\n      } else {\n        this.analyzer.node.getByteFrequencyData(this.analyzer.data);\n      }\n      return this.analyzer.data;\n    }\n    return new Uint8Array(0);\n  }\n  _domainTo(time, size, position = [0, 0], trim = [0, 0]) {\n    let data = time ? this.timeDomain() : this.freqDomain();\n    let g = new Group();\n    for (let i = trim[0], len = data.length - trim[1]; i < len; i++) {\n      g.push(new Pt(position[0] + size[0] * i / len, position[1] + size[1] * data[i] / 255));\n    }\n    return g;\n  }\n  timeDomain() {\n    return this._domain(true);\n  }\n  timeDomainTo(size, position = [0, 0], trim = [0, 0]) {\n    return this._domainTo(true, size, position, trim);\n  }\n  freqDomain() {\n    return this._domain(false);\n  }\n  freqDomainTo(size, position = [0, 0], trim = [0, 0]) {\n    return this._domainTo(false, size, position, trim);\n  }\n  reset() {\n    this.stop();\n    this._node.disconnect();\n    return this;\n  }\n  start(timeAt = 0) {\n    if (this._ctx.state === \"suspended\")\n      this._ctx.resume();\n    if (this._type === \"file\") {\n      if (!!this._buffer) {\n        this._node.start(timeAt);\n        this._timestamp = this._ctx.currentTime + timeAt;\n      } else {\n        this._source.play();\n        if (timeAt > 0)\n          this._source.currentTime = timeAt;\n      }\n    } else if (this._type === \"gen\") {\n      this._gen(this._node.type, this._node.frequency.value);\n      this._node.start();\n      if (this.analyzer)\n        this._node.connect(this.analyzer.node);\n    }\n    (this._outputNode || this._node).connect(this._ctx.destination);\n    this._playing = true;\n    return this;\n  }\n  stop() {\n    if (this._playing)\n      (this._outputNode || this._node).disconnect(this._ctx.destination);\n    if (this._type === \"file\") {\n      if (!!this._buffer) {\n        if (this.progress < 1)\n          this._node.stop();\n      } else {\n        this._source.pause();\n      }\n    } else if (this._type === \"gen\") {\n      this._node.stop();\n    } else if (this._type === \"input\") {\n      this._stream.getAudioTracks().forEach((track) => track.stop());\n    }\n    this._playing = false;\n    return this;\n  }\n  toggle() {\n    if (this._playing) {\n      this.stop();\n    } else {\n      this.start();\n    }\n    return this;\n  }\n};\nexport {\n  Body,\n  Bound,\n  CanvasForm,\n  CanvasSpace2 as CanvasSpace,\n  Circle,\n  Color,\n  Const,\n  Create,\n  Curve,\n  DOMSpace,\n  Delaunay,\n  Font,\n  Form,\n  Geom,\n  Group,\n  HTMLForm,\n  HTMLSpace,\n  Img,\n  Line,\n  Mat,\n  MultiTouchSpace,\n  Noise,\n  Num,\n  Particle,\n  Polygon,\n  Pt,\n  Range,\n  Rectangle,\n  SVGForm,\n  SVGSpace,\n  Shaping,\n  Sound,\n  Space,\n  Tempo,\n  Triangle,\n  Typography,\n  UI,\n  UIButton,\n  UIDragger,\n  UIPointerActions,\n  UIShape,\n  Util,\n  Vec,\n  VisualForm,\n  World\n};\n/*! Pts.js is licensed under Apache License 2.0. Copyright © 2017-current William Ngan and contributors. (https://github.com/williamngan/pts) */\n","import { Circle, Color, Group, Pt, PtLike } from \"pts\";\r\nimport { space } from \".\";\r\n\r\nexport class CanvasTarget {\r\n  public color: Color;\r\n\r\n  constructor(public position: Pt, public radius: number) {\r\n    this.color = Color.HSBtoRGB(Color.hsb(Math.random() * 360, 1, 1));\r\n  }\r\n\r\n  toCircle(): Group {\r\n    return Circle.fromCenter(this.position, this.radius);\r\n  }\r\n\r\n  isWithin(pt: PtLike, threshold?: number): boolean {\r\n    return Circle.withinBound(this.toCircle(), pt, threshold);\r\n  }\r\n\r\n  toAngleTarget(): AngleTarget {\r\n    let delta = this.position.$subtract(space.center);\r\n    let distance = delta.magnitude();\r\n    let anglePosition = Math.atan2(delta.y, delta.x) / (Math.PI * 2);\r\n    let angleRadius = Math.asin(this.radius / distance) / (Math.PI * 2);\r\n    return new AngleTarget(anglePosition, angleRadius, distance);\r\n  }\r\n}\r\n\r\nexport class AngleTarget {\r\n  constructor(\r\n    public position: number,\r\n    public radius: number,\r\n    public distance: number\r\n  ) {}\r\n\r\n  start(): number {\r\n    return this.position - this.radius;\r\n  }\r\n\r\n  end(): number {\r\n    return this.position + this.radius;\r\n  }\r\n}\r\n","import { Pt } from \"pts\";\nimport { space } from \".\";\n\nexport type InputMode = \"mouse\" | \"gamepad\";\n\nexport let gamepad: any | null = null;\nexport let inputAngle: number;\nexport let inputMode: InputMode = \"mouse\";\n\nexport function setInputMode(newMode: InputMode) {\n  inputMode = newMode;\n}\nexport function updateInput() {\n  if (gamepad) {\n    let dir = new Pt(gamepad.axes[2].valueOf(), gamepad.axes[3].valueOf());\n    if (dir.magnitude() > 0.5) {\n      setInputMode(\"gamepad\");\n    }\n  }\n\n  switch (inputMode) {\n    case \"mouse\":\n      updateInputMouse();\n      break;\n    case \"gamepad\":\n      updateInputGamepad();\n      break;\n  }\n}\n\nfunction updateInputMouse() {\n  let delta = space.pointer.$subtract(space.center);\n  inputAngle = Math.atan2(delta.y, delta.x);\n}\n\nfunction updateInputGamepad() {\n  if (gamepad) {\n    let dir = new Pt(gamepad.axes[2].valueOf(), gamepad.axes[3].valueOf());\n    if (dir.magnitude() > 0.5) {\n      inputAngle = Math.atan2(dir.y, dir.x);\n    }\n  }\n}\n\nwindow.addEventListener(\"gamepadconnected\", (e) => {\n  if (!gamepad) {\n    gamepad = navigator.getGamepads()[e.gamepad.index];\n  }\n  console.log(\n    \"Gamepad connected at index %d: %s. %d buttons, %d axes.\",\n    e.gamepad.index,\n    e.gamepad.id,\n    e.gamepad.buttons.length,\n    e.gamepad.axes.length\n  );\n});\n\nwindow.addEventListener(\"gamepaddisconnected\", (e) => {\n  if (gamepad && gamepad.index === e.gamepad.index) {\n    null;\n  }\n  console.log(\n    \"Gamepad disconnected from index %d: %s\",\n    e.gamepad.index,\n    e.gamepad.id\n  );\n});\n","import { AngleTarget } from \"./target\";\r\n\r\nlet sin = Math.sin;\r\nlet abs = Math.abs;\r\nlet floor = Math.floor;\r\nlet pow = Math.pow;\r\nlet min = Math.min;\r\nlet max = Math.max;\r\nlet PI = Math.PI;\r\n\r\nfunction lerp(a: number, b: number, t: number): number {\r\n  return (1 - t) * a + t * b;\r\n}\r\n\r\nfunction clamp(a: number, min: number, max: number): number {\r\n  return Math.min(max, Math.max(min, a));\r\n}\r\n\r\nfunction saturate(a: number): number {\r\n  return clamp(a, 0, 1);\r\n}\r\n\r\nexport function weight(input: number, target: AngleTarget): number {\r\n  let x = (input - target.position) / (target.radius * 8) + 0.5;\r\n  let mask = saturate(1 - abs(floor(x)));\r\n  return (sin((x - 0.25) * PI * 2) * 0.5 + 0.5) * mask;\r\n}\r\n\r\nexport function weights(input: number, targets: AngleTarget[]): number[] {\r\n  return targets.map((target) => {\r\n    return weight(input, target);\r\n  });\r\n}\r\n\r\nexport function weightsSum(input: number, targets: AngleTarget[]): number {\r\n  return weights(input, targets).reduce((prev, cur) => prev + cur, 0);\r\n}\r\n\r\nexport function offset(\r\n  input: number,\r\n  target: AngleTarget,\r\n  weight: number\r\n): number {\r\n  let delta = target.position - input;\r\n  return delta * weight;\r\n}\r\n\r\nexport function offsets(\r\n  input: number,\r\n  targets: AngleTarget[],\r\n  weights: number[]\r\n): number[] {\r\n  return targets.map((target, i) => {\r\n    return offset(input, target, weights[i]);\r\n  });\r\n}\r\n\r\nexport function offsetsSum(\r\n  input: number,\r\n  targets: AngleTarget[],\r\n  weights: number[]\r\n): number {\r\n  return offsets(input, targets, weights).reduce((prev, cur) => prev + cur, 0);\r\n}\r\n\r\nexport function transform(input: number, targets: AngleTarget[]): number {\r\n  let ws = weights(input, targets);\r\n  let os = offsetsSum(input, targets, ws);\r\n  return input + os;\r\n}\r\n","import { Group, Num, Pt } from \"pts\";\r\nimport { canvasHalfMin, form, params, space } from \".\";\r\n\r\nexport class CircleGraph {\r\n  public lineColor: string;\r\n\r\n  constructor(public transform: (input: number) => number) {\r\n    this.lineColor = \"#fff\";\r\n  }\r\n\r\n  color(c: string): CircleGraph {\r\n    this.lineColor = c;\r\n    return this;\r\n  }\r\n\r\n  draw() {\r\n    let angleStep = (Math.PI * 2) / params.resolution;\r\n    for (let i = 1; i <= params.resolution; i++) {\r\n      let inputStart = (i - 1) * angleStep - Math.PI;\r\n      let inputEnd = i * angleStep - Math.PI;\r\n      let normInputStart = inputStart / (Math.PI * 2);\r\n      let normInputEnd = inputEnd / (Math.PI * 2);\r\n      let outputStart = this.transform(normInputStart);\r\n      let outputEnd = this.transform(normInputEnd);\r\n      let distStart =\r\n        Num.mapToRange(\r\n          outputStart,\r\n          -params.inEdge,\r\n          params.inEdge,\r\n          params.outMiddle - params.outEdge,\r\n          params.outMiddle + params.outEdge\r\n        ) * canvasHalfMin;\r\n      let distEnd =\r\n        Num.mapToRange(\r\n          outputEnd,\r\n          -params.inEdge,\r\n          params.inEdge,\r\n          params.outMiddle - params.outEdge,\r\n          params.outMiddle + params.outEdge\r\n        ) * canvasHalfMin;\r\n      let ptStart = new Pt(\r\n        Math.cos(inputStart) * distStart,\r\n        Math.sin(inputStart) * distStart\r\n      );\r\n      let ptEnd = new Pt(\r\n        Math.cos(inputEnd) * distEnd,\r\n        Math.sin(inputEnd) * distEnd\r\n      );\r\n      form\r\n        .strokeOnly(this.lineColor)\r\n        .line(new Group(ptStart, ptEnd).moveBy(space.center));\r\n    }\r\n  }\r\n}\r\n","import { Pane } from \"tweakpane\";\r\nimport { CanvasSpace, Pt, Group, Line, Circle, Num } from \"pts\";\r\nimport { CanvasTarget } from \"./target\";\r\nimport \"./input\";\r\nimport { setInputMode, updateInput, inputAngle } from \"./input\";\r\nimport {\r\n  offset,\r\n  weight,\r\n  weights,\r\n  weightsSum,\r\n  transform,\r\n} from \"./weighted_transformer\";\r\nimport { CircleGraph } from \"./circle_graph\";\r\n\r\nexport let params = {\r\n  inEdge: 1.0,\r\n  outMiddle: 0.5,\r\n  outEdge: 0.1,\r\n  resolution: 360,\r\n  showInputDirection: true,\r\n  showTargetEdges: true,\r\n};\r\n\r\nconst pane = new Pane();\r\nlet graphFolder = pane.addFolder({ title: \"Graph\" });\r\ngraphFolder.addInput(params, \"outMiddle\", { min: 0.0, max: 1.0 });\r\ngraphFolder.addInput(params, \"outEdge\", { min: 0.0, max: 1.0 });\r\ngraphFolder.addInput(params, \"resolution\", { min: 0, max: 1000, step: 10 });\r\nlet drawFolder = pane.addFolder({ title: \"Show/Hide\" });\r\ndrawFolder.addInput(params, \"showInputDirection\");\r\ndrawFolder.addInput(params, \"showTargetEdges\");\r\n\r\nexport const space = new CanvasSpace(\"#main\");\r\nspace.setup({ bgcolor: \"#111\", resize: true });\r\nexport const form = space.getForm();\r\nexport let canvasRadius: number;\r\nexport let canvasHalfMin: number;\r\n\r\nexport let targets: CanvasTarget[] = [];\r\nlet pendingTarget: CanvasTarget | null = null;\r\n\r\nspace.add({\r\n  animate: () => {\r\n    canvasRadius = space.center.magnitude();\r\n    canvasHalfMin = Math.min(space.center.x, space.center.y);\r\n\r\n    for (const target of targets) {\r\n      let circle = target.toCircle();\r\n      form.fillOnly(target.color.hex).circle(circle);\r\n      if (params.showTargetEdges && Circle.withinBound(circle, space.pointer)) {\r\n        let angleTarget = target.toAngleTarget();\r\n        form\r\n          .strokeOnly(target.color.hex)\r\n          .dash()\r\n          .line(\r\n            Line.fromAngle(\r\n              space.center,\r\n              angleTarget.start() * (Math.PI * 2),\r\n              canvasRadius\r\n            )\r\n          );\r\n        form\r\n          .strokeOnly(target.color.hex)\r\n          .dash()\r\n          .line(\r\n            Line.fromAngle(\r\n              space.center,\r\n              angleTarget.end() * (Math.PI * 2),\r\n              canvasRadius\r\n            )\r\n          );\r\n      }\r\n    }\r\n    form.reset();\r\n\r\n    if (pendingTarget) {\r\n      form\r\n        .strokeOnly(pendingTarget.color.hex)\r\n        .point(pendingTarget.position, pendingTarget.radius, \"circle\");\r\n      form\r\n        .strokeOnly(pendingTarget.color.hex)\r\n        .dash()\r\n        .line(new Group(pendingTarget.position, space.pointer));\r\n      form.reset();\r\n    }\r\n\r\n    form.strokeOnly(\"#222\").dash(false);\r\n    for (let a = 0; a < Math.PI * 2; a += Math.PI * 0.25) {\r\n      form.line(\r\n        new Group(new Pt(), new Pt(0, canvasRadius))\r\n          .moveTo(space.center)\r\n          .rotate2D(a)\r\n      );\r\n    }\r\n    form.point(space.center, canvasHalfMin * params.outMiddle, \"circle\");\r\n    form.reset();\r\n\r\n    let angleTargets = targets.map((canvasTarget) =>\r\n      canvasTarget.toAngleTarget()\r\n    );\r\n\r\n    updateInput();\r\n\r\n    let normInputAngle = inputAngle / (Math.PI * 2);\r\n    let normOutputAngle = transform(normInputAngle, angleTargets);\r\n    let outputAngle = normOutputAngle * (Math.PI * 2);\r\n    if (params.showInputDirection) {\r\n      form\r\n        .strokeOnly(\"#fff\")\r\n        .dash()\r\n        .line(Line.fromAngle(space.center, inputAngle, canvasRadius));\r\n    }\r\n    form\r\n      .strokeOnly(\"#fff\")\r\n      .dash(false)\r\n      .line(Line.fromAngle(space.center, outputAngle, canvasRadius));\r\n    form.reset();\r\n\r\n    // for (let i = 0; i < targets.length; i++) {\r\n    //   new CircleGraph((input) =>\r\n    //     offset(input, angleTargets[i], weight(input, angleTargets[i]))\r\n    //   )\r\n    //     .color(targets[i].color.hex)\r\n    //     .draw();\r\n    // }\r\n    // new CircleGraph((input) => transform(input, angleTargets)).draw();\r\n    for (let i = 0; i < targets.length; i++) {\r\n      new CircleGraph((input) => weight(input, angleTargets[i]))\r\n        .color(targets[i].color.hex)\r\n        .draw();\r\n    }\r\n    new CircleGraph((input) => weightsSum(input, angleTargets)).draw();\r\n  },\r\n  action(type, px, py, evt) {\r\n    setInputMode(\"mouse\");\r\n\r\n    if (type == \"click\" && !pendingTarget) {\r\n      for (let i = targets.length - 1; i >= 0; i--) {\r\n        let target = targets[i];\r\n        if (target.isWithin(new Pt(px, py))) {\r\n          targets.splice(i, 1);\r\n        }\r\n      }\r\n    }\r\n    if (type == \"drag\" && !pendingTarget) {\r\n      pendingTarget = new CanvasTarget(new Pt(px, py), 0.0);\r\n    }\r\n    if (type == \"drag\" && pendingTarget) {\r\n      // hacky solution to not click new targets\r\n      pendingTarget.radius = Math.max(\r\n        0,\r\n        new Pt(px, py).subtract(pendingTarget.position).magnitude() - 0.1\r\n      );\r\n    }\r\n    if (type == \"drop\" && pendingTarget) {\r\n      if (pendingTarget.radius > 5) {\r\n        targets.push(pendingTarget);\r\n      }\r\n      pendingTarget = null;\r\n    }\r\n  },\r\n});\r\n\r\nspace.bindMouse().play();\r\n"],"names":["exports1","Semver","constructor","text","core","prerelease","split","coreComps","this","major","parseInt","minor","patch","toString","join","BladeApi","controller","controller_","element","view","disabled","viewProps","get","set","hidden","dispose","TpEvent","target","TpChangeEvent","value","presetKey","last","super","TpUpdateEvent","TpFoldEvent","expanded","TpTabSelectEvent","index","forceCast","v","isEmpty","deepEqualsArray","a1","a2","length","i","isPropertyWritable","obj","key","d","Object","getOwnPropertyDescriptor","undefined","writable","getPrototypeOf","CREATE_MESSAGE_MAP","alreadydisposed","invalidparams","context","name","nomatchingcontroller","nomatchingview","JSON","stringify","params","notbindable","propertynotfound","shouldneverhappen","TpError","static","type","config","_a","message","stack","Error","BindingTarget","opt_id","obj_","key_","presetKey_","read","write","writeProperty","valueObj","isBindable","notBindable","propertyNotFound","ButtonApi","label","props","title","valueController","on","eventName","handler","bh","bind","emitter","Emitter","observers_","observers","push","off","filter","observer","emit","event","forEach","PREFIX","ClassName","viewName","opt_elementName","opt_modifier","compose","h1","h2","input","extractValue","ev","rawValue","bindValue","applyValue","bindValueMap","valueMap","applyClass","elem","className","active","classList","add","remove","valueToClassName","bindValueToTextContent","textContent","className$q","ButtonView","doc","createElement","bindClassModifiers","buttonElem","bindDisabled","appendChild","buttonElement","titleElem","ButtonController","onClick_","addEventListener","sender","BoundValue","initialValue","constraint_","constraint","equals_","equals","v1","v2","rawValue_","setRawValue","forceEmit","options","opts","constrainedValue","constrain","prevValue","previousRawValue","PrimitiveValue","value_","createValue","ValueMap","valMap_","keys","reduce","o","assign","createCore","parseObject","keyToParserMap","tmp","result","parser","succeeded","parseArray","parseItem","item","isObject","createParamsParserBuilder","parse","optional","createParamsParserBuilders","custom","boolean","number","string","function","constant","raw","object","array","itemParser","Array","isArray","ParamsParsers","required","parseParams","warnMissing","info","console","warn","place","disposeElement","parentElement","removeChild","ReadonlyValue","className$p","valueToModifier","modifier","ViewProps","onDisabledChange_","onParentChange_","onParentGlobalDisabledChange_","globalDisabled_","setGlobalDisabled_","create","getGlobalDisabled_","globalDisabled","opt_initialValue","_b","_c","disposed","parent","bindTabIndex","tabIndex","handleDispose","callback","updateGlobalDisabled_","prevParent","getAllBladePositions","className$o","POS_TO_CLASS_NAME_MAP","veryfirst","first","verylast","BladeController","parent_","blade","pos","SVG_NS","forceReflow","offsetHeight","disableTransitionTemporarily","t","style","transition","supportsTouch","ontouchstart","getGlobalObject","globalThis","getWindowDocument","document","getCanvasContext","canvasElement","win","ownerDocument","defaultView","getContext","willReadFrequently","ICON_ID_TO_INNER_HTML_MAP","check","dropdown","p2dpad","createSvgIconElement","iconId","createElementNS","innerHTML","insertElementAt","insertBefore","children","removeElement","removeChildElements","removeChildNodes","childNodes","findNextTarget","relatedTarget","explicitOriginalTarget","className$n","createLabelNode","frag","createDocumentFragment","map","line","createTextNode","lineNode","LabelView","labelElem","labelElement","valueElem","valueElement","LabelController","ButtonBladePlugin","id","accept","p","args","fromObject","api","ValueBladeController","createBlade","positions","Foldable","coreObj","completed","expandedHeight","shouldFixHeight","temporaryExpanded","styleExpanded","styleHeight","exHeight","bindExpandedClass","expandedClassName","onExpand","cleanUpTransition","computeExpandedFolderHeight","folder","containerElement","height","clientHeight","applyHeight","foldable","bindFoldable","h","propertyName","RackLikeApi","rackApi","rackApi_","addButtonAsBlade","addBlade","addFolderAsBlade","addSeparatorAsBlade","opt_params","addTabAsBlade","NestedOrderedSet","extract","items_","cache_","Set","onSubListAdd_","onSubListRemove_","extract_","items","allItems","from","find","includes","has","opt_index","shouldNeverHappen","splice","subList","root","indexOf","delete","InputBindingApi","onBindingChange_","emitter_","binding","refresh","InputBindingController","MonitorBindingApi","onBindingUpdate_","MonitorBindingController","ticker","findSubBladeApiSet","RackApi","getApiByController","apiSet","createBindingTarget","pool","onRackAdd_","onRackRemove_","onRackInputChange_","onRackMonitorUpdate_","apiSet_","pool_","rack","bc","setUpApi_","addInput","createInput","addMonitor","createMonitor","addFolder","addButton","addSeparator","addTab","gapi","a","createBladeApi","bladeController","isRoot","FolderApi","rackController","RackLikeController","PlainView","findInputBindingController","bcs","b","findMonitorBindingController","findValueBladeController","findSubRack","RackController","findSubBladeControllerSet","BladeRack","onBladePositionsChange_","onSetAdd_","onSetRemove_","onChildDispose_","onChildPositionsChange_","onChildInputChange_","onChildMonitorUpdate_","onChildValueChange_","onChildViewPropsChange_","onDescendantLayout_","onDescendantInputChange_","onDescendantMonitorUpdate_","blade_","bcSet_","controllerClass","updatePositions_","visibleItems","firstVisibleItem","lastVisibleItem","ps","_ev","alreadyDisposed","_","bladeContainerClassName","FolderView","className_","foldable_","indentElem","titleElement","markElem","containerElem","FolderController","rc","onTitleClick_","FolderBladePlugin","LabeledValueController","SeparatorApi","className$m","SeparatorView","hrElem","SeparatorController","SeparatorBladePlugin","className$l","TabItemView","selected","TabItemController","TabPageController","onItemClick_","ic_","itemProps","cc_","itemController","contentController","TabPageApi","contentRackApi","TabApi","onPageAdd_","onPageRemove_","onSelect_","pageApiMap_","Map","tab","selectedIndex","pageSet","pc","setUpPageApi_","pages","addPage","removePage","INDEX_NOT_SELECTED","Tab","onItemSelectedChange_","empty","keepSelection_","firstSelIndex","findIndex","s","className$k","TabView","itemsElement","contentsElem","contentsElement","TabController","cr","pageSet_","TabBladePlugin","c","createBladeController","plugin","ac","ManualTicker","tick","IntervalTicker","interval","disabled_","timerId_","onTick_","doc_","interval_","setTimer_","inactive","clearTimer_","clearInterval","setInterval","InputBinding","onValueChange_","reader","writer","targetValue","write_","fillBuffer","buffer","bufferSize","initializeBuffer","createTrimmedBuffer","slice","createPushedBuffer","newValue","newBuffer","MonitorBinding","reader_","CompositeConstraint","constraints","findConstraint","constraintClass","tmpResult","sc","DefiniteRangeConstraint","values","max","min","Math","ListConstraint","RangeConstraint","maxValue","minValue","StepConstraint","step","origin","round","className$j","ListView","props_","selectElem","optionElem","dataset","String","selectElement","update_","ListController","onSelectChange_","e","optElem","currentTarget","selectedOptions","itemIndex","Number","className$i","PopupView","shows","PopupController","className$h","TextView","onChange_","inputElem","inputElement","formatter","TextController","onInputChange_","parser_","parsedValue","boolToString","boolFromUnknown","BooleanFormatter","NumberLiteralNode","evaluate","BINARY_OPERATION_MAP","pow","BinaryOperationNode","operator","left","right","op","UNARY_OPERATION_MAP","UnaryOperationNode","expr","expression","combineReader","parsers","cursor","readWhitespace","m","substr","match","readNonZeroDigit","ch","readDecimalDigits","readSignedInteger","ds","sign","sds","readExponentPart","toLowerCase","si","readDecimalIntegerLiteral","nzd","readDecimalLiteral1","dil","dot","dds","readDecimalLiteral2","readDecimalLiteral3","readDecimalLiteral","parseBinaryDigits","readBinaryIntegerLiteral","prefix","bds","readOctalDigits","readOctalIntegerLiteral","ods","readHexDigits","readHexIntegerLiteral","hds","readNonDecimalIntegerLiteral","readNumericLiteral","parseLiteral","num","evaluable","parseParenthesizedExpression","parseExpression","cl","parsePrimaryExpression","parseUnaryExpression","readBinaryOperator","ops","startsWith","createBinaryOperationExpressionParser","exprParser","firstExpr","nextExpr","parseBinaryOperationExpression","parseEcmaNumberExpression","parseNumber","r","numberFromUnknown","pv","numberToString","createNumberFormatter","digits","toFixed","innerFormatter","formatPercentage","stringFromUnknown","formatString","connectValues","primary","secondary","forward","backward","changing","preventFeedback","getStepForKey","baseStep","altKey","shiftKey","upKey","downKey","getVerticalStepKeys","getHorizontalStepKeys","isVerticalArrowKey","isArrowKey","computeOffset$1","rect","getBoundingClientRect","x","pageX","scrollX","y","pageY","scrollY","top","PointerHandler","lastTouch_","onDocumentMouseMove_","onDocumentMouseUp_","onMouseDown_","onTouchEnd_","onTouchMove_","onTouchStart_","elem_","passive","computePosition_","offset","bounds","width","point","preventDefault","focus","data","removeEventListener","touch","targetTouches","clientX","clientY","mapRange","start1","end1","start2","end2","getDecimalDigits","replace","constrainRange","loopRange","className$g","NumberTextView","arrayPosition","onDraggingChange_","dragging_","dragging","knobElem","knobElement","guideElem","bodyElem","guideBodyElem_","headElem","guideHeadElem_","tooltipElem","tooltipElem_","aox","adx","setAttributeNS","NumberTextController","originRawValue_","onInputKeyDown_","onInputKeyUp_","onPointerDown_","onPointerMove_","onPointerUp_","baseStep_","sliderProps_","sliderProps","ph","constrainValue_","computeDraggingValue_","dx","className$f","SliderView","trackElem","trackElement","SliderController","onKeyDown_","onKeyUp_","onPointerDownOrMove_","ptHandler_","handlePointerEvent_","className$e","SliderTextView","sliderElem","sliderView_","sliderView","textElem","textView_","textView","SliderTextController","sliderC_","textC_","textProps","sliderController","textController","writePrimitive","parseListOptions","parsePickerLayout","parsePointDimensionParams","normalizeListOptions","createListConstraint","findStep","getSuitableDecimalDigits","getBaseStep","getSuitableDraggingScale","base","abs","floor","log10","className$d","CheckboxView","wrapperElem","checked","CheckboxController","createConstraint$6","lc","BooleanInputPlugin","_args","className$c","ColorView","swatchElem","swatchElement","textElement","pickerLayout","pickerElem","pickerElement","rgbToHslInt","g","rp","gp","bp","cmax","cmin","l","hslToRgbInt","hp","sp","lp","rgbToHsvInt","hsvToRgbInt","vp","hslToHsvInt","sd","hsvToHslInt","removeAlphaComponent","comps","appendAlphaComponent","alpha","MODE_CONVERTER_MAP","hsl","hsv","rgb","getColorMaxComponents","mode","loopHueRange","hue","constrainColorComponents","components","ms","convertColorType","to","fms","tms","convertColor","intComps","isRgbColorComponent","Color","color","toRgbaObject","isRgbColorObject","comps1","comps_","comps2","getComponents","opt_mode","rgbComps","className$b","ColorPickerView","alphaViews_","hsvElem","svElem","svPaletteView_","svPaletteView","hElem","hPaletteView_","hPaletteView","rgbElem","alphaViews","palette","aElem","apElem","atElem","allFocusableElements","elems","modeSelectElement","textViews","parseColorType","parseColorInputParams","picker","getBaseStepForColor","forAlpha","extractColorType","equalsStringColorFormat","f1","f2","notation","parseCssNumberOrPercentage","parseFloat","ANGLE_TO_DEG_MAP","deg","angle","grad","rad","PI","turn","parseCssNumberOrAngle","unit","parseFunctionalRgbColorComponents","isNaN","createFunctionalRgbColorParser","parseFunctionalRgbaColorComponents","createFunctionalRgbaColorParser","parseHslColorComponents","createHslColorParser","parseHslaColorComponents","createHslaColorParser","parseHexRgbColorComponents","mRgb","mRrggbb","parseHexRgbColor","parseHexRgbaColorComponents","parseHexRgbaColor","parseObjectRgbColorComponents","createObjectRgbColorParser","parseObjectRgbaColorComponents","createObjectRgbaColorParser","PARSER_AND_RESULT","detectStringColor","prev","detection","detectStringColorFormat","TYPE_TO_PARSERS","int","float","createColorStringBindingReader","black","createColorStringParser","zerofill","comp","hex","colorToHexRgbString","colorToHexRgbaString","rgbaComps","colorToFunctionalRgbString","opt_type","createFunctionalRgbColorFormatter","colorToFunctionalRgbaString","aFormatter","rgbFormatter","createFunctionalRgbaColorFormatter","colorToFunctionalHslString","formatters","colorToFunctionalHslaString","colorToObjectRgbString","names","createObjectRgbColorFormatter","colorToObjectRgbaString","createObjectRgbaColorFormatter","FORMAT_AND_STRINGIFIERS","format","stringifier","findColorStringifier","fas","className$a","APaletteView","barElem","colorElem","colorElem_","markerElem","markerElem_","previewElem","previewElem_","leftColor","rightColor","gradientComps","background","backgroundColor","APaletteController","className$9","createModeSelectElement","ColorTextView","modeElem","modeElem_","modeMarkerElem","textsElem","textsElem_","textViews_","applyTextViews_","colorMode","compElem","createFormatter$2","createConstraint$5","createComponentController","draggingScale","colorType","ColorTextController","onModeSelectChange_","colorType_","ccs_","createComponentControllers_","cc","ccs","cs","pickedMode","className$8","HPaletteView","HPaletteController","className$7","CANVAS_RESOL","SvPaletteView","canvasElem","ctx","hsvComps","imgData","getImageData","iy","ix","putImageData","SvPaletteController","saturation","dv","ColorPickerController","hPaletteC_","svPaletteC_","alphaIcs_","supportsAlpha","className$6","ColorSwatchView","swatchElem_","ColorSwatchController","ColorController","onButtonBlur_","onButtonClick_","onPopupChildBlur_","onPopupChildKeydown_","swatchC_","popC_","pickerC","pickerC_","nextTarget","contains","colorFromObject","isColorObject","colorToRgbNumber","colorToRgbaNumber","numberToRgbColor","numberToRgbaColor","colorFromRgbNumber","colorFromRgbaNumber","createColorStringWriter","createColorNumberWriter","colorToNumber","writeRgbaColorObject","writeRgbColorObject","createColorObjectWriter","inValue","shouldSupportAlpha$1","inputParams","createFormatter$1","isForColor","NumberColorInputPlugin","shouldSupportAlpha","isRgbaColorObject","createColorObjectReader","createColorObjectFormatter","ObjectColorInputPlugin","StringColorInputPlugin","PointNdConstraint","asm_","assembly","toComponents","fromComponents","className$5","PointNdTextView","axisElem","createAxisController","axes","PointNdTextController","acs_","createStepConstraint","createRangeConstraint","findNumberRange","drc","createConstraint$4","NumberInputPlugin","Point2d","toObject","Point2dAssembly","className$4","Point2dView","className$3","Point2dPickerView","onFoldableChange_","invertsY_","invertsY","maxValue_","layout","padElem","padElement","svgElem","svgElem_","xAxisElem","yAxisElem","lineElem","lineElem_","px","py","ipy","computeOffset","baseSteps","Point2dPickerController","onPadKeyDown_","onPadKeyUp_","baseSteps_","dy","Point2dController","onPadButtonBlur_","onPadButtonClick_","padC","Point3d","z","Point3dAssembly","point3dFromUnknown","writePoint3d","createConstraint$3","createDimensionConstraint","createAxis$2","Point3dInputPlugin","Point4d","w","Point4dAssembly","point4dFromUnknown","writePoint4d","createConstraint$2","createAxis$1","Point4dInputPlugin","createConstraint$1","StringInputPlugin","Constants","monitor","defaultInterval","defaultLineCount","className$2","MultiLogView","onValueUpdate_","formatter_","textareaElem","lineCount","readOnly","textareaElem_","shouldScroll","scrollTop","scrollHeight","lines","MultiLogController","className$1","SingleLogView","lastValue","SingleLogController","BooleanMonitorPlugin","GraphLogView","onCursorChange_","cursor_","graphElement","maxIndex","points","tx","ty","GraphLogController","onGraphMouseMove_","onGraphMouseLeave_","onGraphPointerDown_","onGraphPointerMove_","onGraphPointerUp_","offsetX","createFormatter","createTextMonitor","createGraphMonitor","shouldShowGraph","NumberMonitorPlugin","defaultBufferSize","StringMonitorPlugin","multiline","createInputBindingController","valueArgs","createTicker","createMonitorBindingController","P","bindingArgs","PluginPool","pluginsMap_","blades","inputs","monitors","getAll","register","unshift","createDefaultPluginPool","Point2dInputPlugin","point2dFromUnknown","writePoint2d","rs","createConstraint","getSuitableMaxDimensionValue","getSuitableMaxValue","xc","yc","xr","yr","createAxis","shouldInvertY","yParams","inverted","ListApi","SliderApi","TextApi","ListBladePlugin","ic","exportPresetJson","targets","importPresetJson","bindings","preset","RootApi","importPreset","ibc","exportPreset","mbc","RootController","SliderBladePlugin","vc","TextBladePlugin","createDefaultWrapperElement","body","embedStyle","css","querySelector","styleElem","tpStyle","head","Pane","opt_config","containerElem_","container","usesDefaultWrapper_","setUpDefaultPlugins_","parentElem","registerPlugin","bundle","plugins","embedPluginStyle_","VERSION","defineProperty","factory","$fd59d26264f5502b$exports","$2ffc953bcfc25486$export$e947a0f742cf021e","len","$2ffc953bcfc25486$export$87c2e215ad25c73d","sqrt","magnitude","make","divide","ceil","MIN_VALUE","MAX_VALUE","fn","$2ffc953bcfc25486$export$ea3ee4566031452e","reset","_33","domMatrix","DOMMatrix","toDOMMatrix","scale2DMatrix","scale2D","val","at","scaleAt2DMatrix","multiply","rotate2D","ang","rotateAt2DMatrix","cos","sin","translate2D","translate2DMatrix","shear2D","shearAt2DMatrix","tan","$2ffc953bcfc25486$export$eb2fcfdbd7ba97d4","isNum","$add","transposed","elementwise","ai","alen","$multiply","transpose","bi","blen","defaultValue","useLongest","zipSlice","zip","pt","cosA","sinA","tanX","tanY","sx","sy","rotate2DMatrix","shear2DMatrix","p1","p2","intercept","$2ffc953bcfc25486$export$17d680238e50603e","yi","ang2","atan","slope","$2ffc953bcfc25486$var$_errorLength","param","$2ffc953bcfc25486$export$f8f26dd395d7e1bd","anchor","toAngle","xi","_line","iterToArray","p3","threshold","$subtract","$cross","magnitudeSq","asProjection","proj","$project","projectionVector","perpendicularFromPt","la","lb","_la","_lb","pa","pb","y1","intersectRay2D","$2ffc953bcfc25486$export$5fee5224a8e5ae6c","withinBound","ray","_ray","lineOrRay","poly","sourceIsRay","_lineOrRay","_poly","intersectLineWithRay2D","intersectLine2D","pts","next","lines1","lines2","isRay","group","l1","l2","_ip","gridPt","subtract","intersectGridWithRay2D","gg","_rect","box","boundingBox","fromPtArray","$2ffc953bcfc25486$export$4617fb02663045ef","hasIntersectRect2D","intersectLines2D","sides","interpolate","size","cropAsCircle","ls","fromCenter","sideIdx","graphic","atTail","perpendicular","$min","$max","topLeft","widthOrSize","fromTopLeft","center","half","within","$2ffc953bcfc25486$export$c89a927ffc67e6fa","fromRect","enclose","_pts","p0","corners","rects","_rects","merged","flatten","k","_center","ratio","asRows","mid","$2ffc953bcfc25486$export$abd05ea5e3f1332","lerp","rect1","rect2","resetBoundingBox","_rect1","_rect2","$2ffc953bcfc25486$export$5a465592bfe74b48","circumcircle","incircle","radius","circle","f","disc","discSqrt","t1","t2","circle1","circle2","_circle","dr2","dr","ar","br","ar2","br2","clone","inc","toTriangle","fromCircle","tri","$2ffc953bcfc25486$export$7d31b617c820d435","midpoints","opp","oppositeSide","altitude","bisector","incenter","area","perimeter","total","md","medial","circumcenter","centroid","closePath","$2ffc953bcfc25486$var$_errorOutofBound","gs","adjacentSides","mag","segments","det","sorted","sort","dq","bot","hull","originIndex","_near","_item","unitAxis","n","poly1","poly2","projectAxis","ln","lineAt","which","dist","normal","edge","vertex","minDist","MAX_SAFE_INTEGER","axis","_axisOverlap","_poly1","_poly2","plen","b1","b2","c1","c2","smallest","ins","intersectPolygon2D","polys","boxes","$2ffc953bcfc25486$export$b0e83c3ef8d2db1","steps","ts","copyStart","_index","ctrls","getSteps","controlPoints","catmullRomStep","cp","_calcPt","tension","cardinalStep","h3","bezierStep","bsplineTensionStep","bsplineStep","random","range","start","fill","sum","method","$2ffc953bcfc25486$export$e0e0ff05bff0f59e","sineInOut","currA","currB","targetA","targetB","normalizeValue","seed","generator","j","mash","charCodeAt","initState","inStr","cleanString","hashString","$2ffc953bcfc25486$var$uheprng_default","boundValue","radian","$2ffc953bcfc25486$export$8ad5d15375e29446","two_pi","deg_to_rad","rad_to_deg","minPt","maxPt","average","ptOrIndex","direction","xy","boundPt1","boundPt2","da","db","$cross2D","scale","scs","lenP","$take","transform2D","tanx","tany","mat","reflectAt2DMatrix","Float64Array","table","boundAngle","toDegree","dt","half_pi","t4","bounceOut","bounceIn","exp","epsilon","A","B","om2a","curve","yz","xz","xyz","horizontal","vertical","identical","bottom_right","bottom","bottom_left","top_left","top_right","pi","quarter_pi","one_degree","gravity","newton","gaussian","$2ffc953bcfc25486$var$_Util","lv","_warnLevel","ArrayBuffer","isView","prototype","call","defaultReturn","warnLevel","stride","loopBack","matchSize","chunks","part","st","flattenAsGroup","arr","concat","apply","lenB","arrays","temp","url","request","XMLHttpRequest","open","onload","status","responseText","onerror","send","space","filename","filetype","quality","ftype","toBlob","blob","link","URL","createObjectURL","href","download","click","revokeObjectURL","avgFrames","Date","now","avg","shift","minRequired","it","test","navigator","userAgent","Float32Array","__super","getArgs","dimensions","randomize","_id","$to","anchorFromPt","change","self","fns","_ops","$concat","toArray","$divide","$unit","cross2D","cross","projectScalar","$abs","$floor","$ceil","$round","atan2","angleBetween","boundRadian","reflect2D","toGroup","toBound","$2ffc953bcfc25486$export$8d620acac236ffa9","p4","q1","q2","q3","q4","list","li","chunkSize","insert","count","pts_per_segment","anchorTo","anchorFrom","clamp","chunk","tc","idx","moveBy","moveTo","sortByDimension","dim","desc","forEachPt","ptFn","$matrixAdd","$matrixMultiply","$zip","fromGroup","_size","_topLeft","_bottomRight","_inited","init","_g","_updateSize","_updateCenter","_updatePosFromTop","_updatePosFromBottom","_updatePosFromCenter","bottomRight","depth","inited","update","$2ffc953bcfc25486$export$d30982023723c3b4","$2ffc953bcfc25486$export$f6e0ff9e4b92eee3","up","down","move","drag","uidrag","drop","uidrop","over","out","enter","leave","keydown","keyup","contextmenu","all","$2ffc953bcfc25486$var$_UI","shape","states","_holds","_group","fromArray","_shape","_counter","_states","_actions","ui","state","_addHandler","_removeHandler","listen","evt","_within","_trigger","hold","newKey","unhold","clear","uis","render","hasIntersectPoint","$2ffc953bcfc25486$export$4b08aed5f1ec6952","$2ffc953bcfc25486$export$eef1e68107c58ef2","bound","_time","diff","end","players","playerCount","_animID","_pause","_refresh","_pointer","_isReady","_playing","minFrameTime","player","animate","pid","animateID","resize","removeAll","play","time","requestAnimationFrame","playItems","err","cancelAnimationFrame","replay","pause","toggle","resume","stop","playOnce","duration","_renderFunc","customRendering","isPlaying","outerBound","innerBound","$2ffc953bcfc25486$export$d246957a0a7cf810","arguments","_pressed","_dragged","_hasMouse","_hasTouch","_hasKeyboard","pointer","bindCanvas","customTarget","_canvas","unbindCanvas","bindDoc","unbindDoc","bindMouse","_mouseDown","_mouseUp","_mouseOver","_mouseOut","_mouseMove","_mouseClick","_contextMenu","bindTouch","_touchStart","_touchMove","bindKeyboard","_keyDownBind","_keyDown","_keyUpBind","_keyUp","touchesToPoints","_mouseAction","MouseEvent","hasOwnProperty","action","changedTouches","_keyboardAction","$2ffc953bcfc25486$export$a7fed597f4b8afd8","_ready","ready","$2ffc953bcfc25486$export$b00bfd2e034c5633","_filled","_stroked","_font","$2ffc953bcfc25486$export$89abf52a030e56ee","filled","stroked","currentFont","_multiple","groups","rest","fillOnly","stroke","linejoin","linecap","strokeOnly","circles","squares","polygons","face","weight","lineHeight","$2ffc953bcfc25486$export$1c6175f3aa4394b7","samples","distribution","str","tail","trim","byHeight","box2","bound2","nh","defaultSize","$2ffc953bcfc25486$export$cc7b5f925acc71d3","editable","crossOrigin","_scale","_loaded","_editable","_space","pixelScale","_img","Image","src","img","load","then","res","repeat","loadAsync","pattern","initCanvas","Promise","resolve","reject","_cv","_drawToScale","_data","_ctx","canvasScale","nw","drawImage","error","cms","bitmap","createImageBitmap","reptition","dynamic","createPattern","sync","toBase64","pixel","rescale","getPixel","no","sizeOrScale","asScale","naturalWidth","naturalHeight","crop","cleanup","cv","toDataURL","getForm","$2ffc953bcfc25486$export$f3413f5849e886b7","current","image","canvas","loaded","imageSize","canvasSize","scaledMatrix","_style","fillStyle","strokeStyle","lineWidth","lineJoin","lineCap","globalAlpha","_setup","font","CanvasRenderingContext2D","useOffscreen","clearOffscreen","hasOffscreen","offscreenCtx","renderOffscreen","offscreenCanvas","applyFillStroke","strokeWidth","gradient","stops","vals","area1","area2","createRadialGradient","createLinearGradient","addColorStop","composite","globalCompositeOperation","clip","dash","setLineDash","lineDashOffset","sizeOrFont","family","_estimateTextWidth","fontWidthEstimate","estimate","textWidthEstimator","measureText","getTextWidth","_textTruncate","truncate","_textAlign","_box","arrayCheck","textAlign","_paint","beginPath","arc","rotation","startAngle","endAngle","ellipse","halfsize","x1","x2","y2","lineTo","square","polygon","ptOrRect","orig","imageData","txt","maxWidth","fillText","textBox","verticalAlign","overrideBaseline","textBaseline","paragraphBox","lstep","nextLine","sub","newln","lastIndexOf","lsize","lbox","lpad","alignText","alignment","baseline","log","$2ffc953bcfc25486$var$_Color","_mode","_isNorm","substring","hexVal","toMode","ranges","rgba","convert","fname","toUpperCase","u","normalized","normalize","toNorm","mapToRange","$normalize","_hex","normalizedInput","normalizedOutput","q","hsb","XYZtoLAB","RGBtoXYZ","lab","XYZtoRGB","LABtoXYZ","LABtoLCH","RGBtoLAB","lch","LABtoRGB","LCHtoLAB","XYZtoLUV","luv","LUVtoXYZ","D65","cy","eps","kap","xxx","zzz","refU","refV","L","cubeY","toRadian","$2ffc953bcfc25486$export$892596cec99bc70e","$2ffc953bcfc25486$export$ac9b7cebffc1b4b7","_autoResize","_bgcolor","_css","_selector","Element","_container","setTimeout","appendTo","setAttribute","_resizeHandler","dispatchEvent","Event","setup","opt","bgcolor","autoResize","auto","window","styles","fromBoundingRect","bg","$2ffc953bcfc25486$export$2a5547199b8194f0","$2ffc953bcfc25486$export$b8c44462414bfc41","autoClass","querySelectorAll","scopeID","el","parentNode","$2ffc953bcfc25486$var$_HTMLForm","opacity","position","groupID","groupCount","currentID","currentClass","styleTo","cls","updateScope","group_id","nextID","scope","domID","setAttr","htmlElement","getID","class","rectStyle","textStyle","$2ffc953bcfc25486$export$8d3af878826383c6","nodeName","svgElement","$2ffc953bcfc25486$export$970c0cf64cfb2cf6","viewBox","xmlns","version","$2ffc953bcfc25486$var$_SVGForm","cx","largeArc","sweep","pointsString","$321dd9c7293bba94$export$f3b3d4d0fe604238","HSBtoRGB","toCircle","isWithin","toAngleTarget","delta","$b4e14b6b8da86996$export$a941ed4b947d12f8","distance","anglePosition","angleRadius","asin","$321dd9c7293bba94$export$41556f8313bfd8c3","$8efa37a468313d04$export$f2468a04792c7b7","$8efa37a468313d04$export$2e7ec0e1a36e2bfc","$8efa37a468313d04$export$e66a2da78d94e729","$8efa37a468313d04$export$8f8747555bf51aff","newMode","$8efa37a468313d04$export$ba78218208f65faa","valueOf","$8efa37a468313d04$var$updateInputMouse","dir","$8efa37a468313d04$var$updateInputGamepad","getGamepads","gamepad","buttons","$15f798a70986de66$var$sin","$15f798a70986de66$var$abs","$15f798a70986de66$var$floor","$15f798a70986de66$var$PI","$15f798a70986de66$var$saturate","$15f798a70986de66$var$clamp","$15f798a70986de66$export$89a2d5e3ba94fe8a","mask","$15f798a70986de66$export$e8d0e1eb46e632aa","$15f798a70986de66$export$8cf894c3e6a0000","cur","$15f798a70986de66$export$51186ad6e864892a","os","weights","$15f798a70986de66$export$cc800923e997bb8","$15f798a70986de66$export$b58e156c27daddf2","$15f798a70986de66$export$54bcbd2adb526b38","$3eabfe5ad152e97e$export$ecc69a9f03da4433","transform","lineColor","draw","angleStep","$b4e14b6b8da86996$export$281ad3752a540efe","resolution","inputStart","inputEnd","normInputStart","normInputEnd","outputStart","outputEnd","distStart","inEdge","outMiddle","outEdge","$b4e14b6b8da86996$export$3124ceb58c37137b","distEnd","ptStart","ptEnd","$b4e14b6b8da86996$export$6210fa4921d2a466","showInputDirection","showTargetEdges","$b4e14b6b8da86996$var$pane","$b4e14b6b8da86996$var$graphFolder","$b4e14b6b8da86996$var$drawFolder","_pixelScale","_offscreen","_initialResize","_createElement","retina","r1","devicePixelRatio","r2","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","offscreen","_offCanvas","_offCtx","pixelDensity","pageXOffset","pageYOffset","lastColor","clearRect","fillRect","save","restore","recorder","downloadOrCallback","bitrate","stream","captureStream","MediaRecorder","mimeType","bitsPerSecond","ondataavailable","Blob","$b4e14b6b8da86996$export$c2cc9d23f75deb07","$b4e14b6b8da86996$export$121e5dccf103a51e","$b4e14b6b8da86996$var$pendingTarget","angleTarget","fromAngle","angleTargets","canvasTarget","outputAngle"],"version":3,"file":"index.bbfad9f4.js.map"}